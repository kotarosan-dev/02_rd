要求を仕様化する技術・表現する技術 〜仕様が書けていますか？ 改訂第2版.txt
ソースガイド
この文書は、ソフトウェア開発における要求の仕様化と表現技術に関する専門的な解説書からの抜粋であり、特にUSDM（要求仕様記述モデル）などの手法を用いて、曖昧な要求を明確な仕様へと落とし込む重要性を説いています。筆者は、要求をその「振る舞い」に含まれる「動詞」に着目し、階層構造で表現することによって、仕様の漏れを防ぎ、開発プロセスを円滑に進めることができると主張しています。さらに、CMM/CMMIとの出会いが、筆者自身の技術に価値があることを認識させた経緯や、派生開発における「部分理解」の難しさ、そしてトレーサビリティ・マトリクス（要求TM）の活用がトラブル防止に不可欠であることなど、実践的な知見が幅広く展開されています。全体として、曖昧な要求仕様が多くのバグや手戻りの主要因であるという問題意識に基づき、仕様化の具体的な技術とその効果を体系的に提示することを目的としています。











長崎県立大学
シーボルト校附属図書館
0102236816
改訂
第2版
[入門 実践] 要求を
+
仕様か 仕様化する技術 書けていますか?- 表 現する技術
株式会社システムクリエイツ 清水 吉男 【著】
相次ぐ 「仕様の変更」 や 「バグの発生」 に 悩まされていませんか?
● 「要求」 とはなにか 「仕様」 とはなにか、その本質をつかむ! ●要求仕様書作りの考え方や具体的プロセスを身に付け、 表現技術を磨く!
●仕様モレをなくし、 ソフトウェア開発工程をスムーズに!
技術評論社
改訂 第2版 [入門+実践]
要求を 仕様化する技術 表現する技術 仕様が 書けていますか?
入印. 受入り ーボル 31.3. 13
株式会社システムクリエイツ 清水 吉男 【著】
技術評論社
本書は、 2010年3月現在の情報をもとに記載されています。 お読みになられた時点 での情報と本書の記載内容は、 異なる可能性がありますので、ご注意ください。
本書を運用された結果生じたいかなる障害についても、 技術評論社および著者は一 切の責任を負いませんので、あらかじめご了承ください。
第2版の発行について
本書の第1版が2005年11月に発行されてから5年が経過しました。 この間8度の 増刷を繰り返し、 多くのソフトウェア開発に関わる方々に読んで頂けたことは、著者 にとって大きな喜びでもあります。
今回、 改訂版を出すに至った最大の理由は、
仕様は要求に含まれる "動詞"およびその " 目的語”にある
ということを前面に押し出すことにあります。
このことは、第1版にも触れていますが、それは筆者の経験の中で得ていた考え方 に過ぎず、 活字にするにあたって確証を得ようとコンサルティングのなかで実験して いました。 第1版を執筆しているときは、それらのプロジェクトがまだ途中であり、 データのほうも整理がついていませんでしたので、少し控えめに扱うことにしました。 筆者は、
仕様は要求に含まれる "動詞” およびその“目的語”にある
と断言することは、 要求を仕様化という領域において非常に大きな意味をもっている と考えています。 日本では 「要求」 と 「要件」 を使い分けたりしていますが、これに よって 「要求」 を表現する根拠や要求と仕様を階層で表現することの有効性も確立し ます。 そして何よりも、 仕様がモレる最大級の原因もこれによってはっきりするので す。それだけに、慎重に扱う必要があると判断しました。
この5年の間に、
仕様は要求に含まれる”動詞” およびその " 目的語” にある
ということの確証を得ましたので、 改版に踏み切ることにしました。 本書の中の事例 の多くも、できるだけ"動詞"が見えるように書き直しました。 その他、この5年間
要求を仕様化する技術・表現する技術/第2版の発行について
に読者の皆さんから頂いたコメントや質問、 実際のコンサルティングのなかで新たに 発見できたこと、あるいは第1版の表現の曖昧な箇所なども一緒に書き直し、 「 USDM 」 としての完成度を高めました。
これによって、本書がソフトウェア開発に携わる皆さんにとって、 より扱いやすい ものとなることを願っています。
清水吉男
2010年3月
4
はじめに
□仕様にまつわるトラブルの頻発 「要求仕様書、 なんとかならないですか?」
「要求仕様書って、 どうすればうまく書けるのでしょう」
品質の問題を抱えているというので話しを聞いてみるなかで、 依頼者からしばしば こういう言葉を耳にします。 そこには、ソースコードと違って、 明確な基準のない文 書に対する戸惑いがにじみ出ています。
ソフトウェアの世界が広がるにつれて、ソフトウェアにまつわるトラブルも増えて います。 ネットの停止は日常茶飯事で起きていますし、 金融関係のオンラインの取引 もしばしばトラブルで停止しています。 一般のビジネス関係のソフトウェア開発はも ちろん、 組み込みシステムでのソフトウェア開発ではもっと頻繁に失敗が繰り返され ています。
「動かないコンピュータ」 という日経コンピュータの連載記事を見れば、いい加減 にしてほしいと思うほどのトラブルが毎回報告されています。 オンラインの証券取引 が停止した原因が、 「予想していなかったほどのデータが殺到したため」というのは、 筆者に言わせれば 「要求モレ」 です。 このようなケースでは、 面白いほど“バックア ップシステム”も機能しません。 “バックアップシステムとは、ただ待機しているだ けのシステムか!”と揶揄したくなります。
機能の追加・変更にともなう変更仕様の扱いの不備から航空機の発着ができなくな るような事態も起きています。 請求書の金額が違うという、この時代には考えられな いような失態や、新聞社が新聞の編集ができなくなるというものもあります。 そして、 多くのトラブルの原因には、 要求仕様の曖昧さや仕様の不備が大きなウェートを占め ていることもわかっています。
今日の私たちの生活は、数えきれないほどのソフトウェアによって支えられていま す。 昔は、 企業の中のビジネスシステムでコンピュータが使われていただけなので、
化する技術表現する技術はじめに
そこでのトラブルで社会問題に発展することは少なかったし、 電力などの公共性の高 い企業でのシステムは、それなりの工数をかけてシステムの安全性が確認されてきま した。 それが、1990年代半ばから大きく崩れているように感じます。
おそらく、ソフトウェアの出番が広がっているなかで、 ソフトウェアエンジニアの レベルが確保できていないものと思われます。今日ではソフトウェアは社会のインフ ラを構成していて、そこでは 「優れたソフトウェア」 であることを前提として、いっ たん稼働したあとはトラブルが発生しては困るのです。 しかしながら、要求の仕様化 技術が曖昧な状態ではいつトラブルが起きるかわからず、いったんトラブルが起きれ ば社会の混乱は避けられません。
携帯電話などの製品でも、ソフトウェアのトラブルによる回収騒ぎも今日では驚く ことではありません。 製品に組み込まれたソフトウェアを更新するために、顧客にダ ウンロードを要請する事態もしばしば起きています。 携帯電話会社からのダウンロー ドの案内にも慣れてしまいました。
こうしたトラブルの原因としては、 「設計上の問題」 と認識されていることが多い のですが、 実際には、 仕様として記述されていれば設計時に対応できたことが多く含 まれています。 でもこれを 「設計上の問題」 と分類しているかぎり、問題が改善され ることはありません。
□ 要件定義書の扱いについて
本書では一貫して 「要求仕様書」 という名称を使用していますが、 「SLCP-JCP-2007」 に準じたプロセスを採用している組織では 「要件定義書」 という名称を使っているか もしれません。 ビジネス系の開発組織では 「SLCP」 を参考にしているところも多い と思われます。 「SLCP」 に従うことで、顧客からベンダーに渡されたものを 「要求仕 様書」 と呼び、 ベンダーでそれを書き換えて詳細に定義したものを 「要件定義書」 と 呼んでいると思われますので、 本書で扱う 「要求仕様書」 は 「要件定義書」 と同じも のとして読んでください。
また、 「SLCP-JCP-2007」 では、 これに伴って 「要求」 と 「要件」 を使い分けています。 「要求」 は曖昧さを含んだ状態とし、 「要件」 は形式的、 合理的な表現になったものと 定義しています。 英語ではどちらも 「requirement」 ですが、日本語では 「要求」 と 「要 件」が無規律に使い分けられていましたので、 「SLCP」 ではその使い分けを明確にす る必要を感じたものと思われます。
本書では、顧客や依頼者から発した 「要求」 という状態の記述があり、 「要求」 に
は 「機能要求」 や 「品質要求」 がありますが、いずれも曖昧性を含んだものです。 ま さに 「SLCP-JCP-2007」 でいう 「要求」 のレベルです。 本書で提供する「USDM」 の 表記法では、この 「要求」 を書き換えることをせず、それぞれの「要求」 に対して「階 層構造」で具体的な内容の記述である 「仕様」 を足していく (要求+仕様) ことで、 最終的に「要求仕様書」 という文書に変化させるという考え方をとります。
□要求仕様の不完全性
ソフトウェア開発の現場では、要求仕様書をいくら書いても仕様のモレが残ってし まって最後にバグとなって噴き出しています。 いったん「これでよいです」 と合意(?) したはずなのに、 実際に製品やシステムが動作するようになってから、 「そこは違っ ている」 「この仕様が考慮されていない」 と言い出されて仕様の追加や変更が発生し ます。 また、 設計や実装作業のなかで設計者自身が仕様に記述モレがあることに気づ き、問い合わせを発して仕様の不備を埋める作業が繰り返されたりすることが、大幅 な作業の遅れの原因になっています。 その結果、 最近では要求仕様書を書くことに対 して拒否反応すら見られるようになっています。
そこに現れたのが、
「もともと完全な要求仕様は書けない」
「そのような作業に工数を投入することは無意味である」
という考え方です。 いわゆる 「要求仕様の不完全性」というものです。
それは、自分たちはこれまで完全な要求仕様書を書くことを求めてきたが、 そ のようなものは幻想に過ぎない。 この道の先に 「楽園」 はないから、 戻って別の道を 行くべきだと言っているようにも聞こえます。 その 「別の道」 はいままでとはまった く違って要求仕様書を否定する道であり、動くものを作りながら不足している仕様 ( 仕 様モレ) を発見し、 組み入れていこうというものです。
そもそも要求仕様書に「完全」 とか 「不完全」 という概念を持ち込むことに無理が あるのですが、 このような流れのなかで、 「ウォーターフォールモデル」 も否定され るようになりました。 たしかに、「ウォーターフォールモデル」で開発している場合、 そこにある (不適切な) 要求仕様書に基づいて設計作業にとりかかり、ようやく動作 するようになったと思ったら仕様や品質 (パフォーマンスなど) を満たさないことが 判明するのです。 そのときには、すでにリソース (時間や人) が残っていなかったり します。
要求を仕様化する技術表現する技術 / はじめに
「ウォーターフォールモデル」 が否定される最大の理由は、このように問題の発見 が遅くなることにあります。 その結果、 小さく刻んで問題を少しでも早く発見しよう というので、「プロトタイピング」 を取り入れたり、 「インクリメンタルモデル」 を採 用したりするのです。 この考え方そのものは間違っていません。 でも、適切な要求の 仕様化技術を持たない状態では、これらの方法を採用したとしても、期待した効果が 得られない可能性があります。
仕様の把握が曖昧で、その記述も不適切な状態のまま、とりあえず基本的な機能を 選んで動かそうとします。 そして動作させながら必要な仕様を作り込んだり、 そのあ とに付加的な機能を追加したりする場合、あとで明らかになった仕様が、 すでに選択 されたデータ構造やアーキテクチャでは対応できないことがあります。
そこで採用したアーキテクチャが、 ある機能の仕様にマッチしないということは、 まさに仕様の衝突 (コンフリクト) が起きていることを意味します。 このコンフリク トは、 要求のレベルでわかることもあるのですが、 仕様化しないと気づかないことの ほうが多いのです。 現実問題として、 実際に作って (実装して) いくなかで発見され ているということは、そのコンフリクトは具体化される (実装される) なかでしか見 えなかったことを意味しています。 つまり、この状態では 「インクリメンタルモデル」 を採用したとしても、あとのほうのインクリメントで仕様を作り込んでいくなかで、 最初に採用したアーキテクチャが使えないことに気づくことになります。 このように、 重要な問題の発見が遅れるからという理由だけで「ウォーターフォールモデル」を否 定しても、問題の解決にならないことがあるのです。 この問題は、プロトタイピング でも起きてしまいます。
早い段階で適切に仕様化することでいくつかの仕様が衝突していることが見えま す。それらの仕様の衝突を回避するためのデータ構造やアーキテクチャを選択したも のの、実際にそれで問題なく作動することを確認するために「インクリメンタルモデ ル」で開発するというのが正しい選択なのです。
□Agileへの逃避の問題
1990年代の納期短縮要求に応える方法として 「Agile*'」 な開発方法がいくつか提 案されました。そのなかには、 要求仕様書に代わって、 しっかりしたテスト仕様書を 書いてとりかかる方法も提案されています。 厳しい開発期間のなかで、 成果物の重複 を避ける (要求仕様書とテスト仕様とは重複する部分があります) という意味では、 テスト仕様書の表現を工夫することで要求仕様書を代用させることは可能です。 しか
*1 Agileとは「機敏な」という意味。 CMM などで代表される 大がかりなプロセスに対して、「プロセスの多様性」という考え
方のなかから、 QCDを維持しながらこんな機敏なプロセスもあって よい、ということで提案されたもの。
しながら適切な要求仕様を書けない人に、 設計にも使え、 機能テストにも使えるよう なテスト仕様書が書けるとは思えません。 一般に、 テスト仕様書のほうが内容は具体 的ですし、 効果的なテストを編み出すために、 複数の機能に絡むパラメータも表など によって明らかにされている必要があります。 何よりも、 「仕様」 としての項目数は、 テスト仕様書のほうがはるかに多くなると思われます。 つまり、「大は小を兼ねる」 という意味で、テスト仕様で代用できるのです。
「完全な要求仕様は書けない」 と言う人が、 要求仕様書に代わるテスト仕様書なら 書けるというのであれば、 そこで書こうとしていた(これまで書いてきた) 「要求仕 様書」は、まさに文書として存在する価値の低いものだったのかもしれません。
もともと 「要求仕様」 というものに完全なものはありませんし、 完全であることの
基準もありません。 いや、 最初から完全な要求仕様書など求める必要はないのです。 今回の要件を実現することに関係する人たちが "Specify” できるものであればよいの です。 その意味では 「機能仕様書」 とは性質はまったく異なります。 逆に、これだか ら難しいということができます。
□適切に表現されなければ漏れる
確かに、 対象とする範囲を特定して、 「Actor」 や 「terminator」 を適切に配置する ことで、そこにどのような使い方が求められるかというのは見えてくると思われま す。 でもそれは基本的には 「要求」 のレベルです。 いや、 「要求」 と 「要求仕様」 の 違いが明確に認識されていない状態では、 無造作にそれらが混じってしまう危険もあ ります。 その上、 Actorなどから直接見えるレベルの要求に限られる可能性があります。 また、 Actorの捉え方によっては、要求の粒度 (要求が求める範囲) が大きくなる可 能性もあります。
どのような要求分析モデリングを使おうと、 発見された要求を適切に表現し、 そこ から必要な仕様が漏れないように抽出しなければなりません。 要求分析モデリングで せっかく 「要求」 をつかんでも、 要求の表現が適切でなかったり、 要求の範囲が見え なかったり、 扱う範囲が大きいままであったりすれば仕様の抽出にモレが生じます。 必要な仕様が抽出できるかどうかは、 「要求」 をどのように表現するかによって変わ ってくるのです。 残念ながら、多くの人は要求を 「文章で表現」 することにそれほど 大きな意義を見出していません。 それどころか、 要求を文章で表現する”ことすら 怠っています。
たとえ要求を表現したとしても、 その表現方法によってイメージされる仕様は変わ
9
要求を仕様化する技術表現する技術 / はじめに
ってきます。 たとえば、
● 「計測データに異常があれば知らせる」
②「計測データを表示中に重要な変化があれば、 画面に警告を出す」
の2つの文章を比べてみて下さい。 同じことをイメージして書かれたものであっても、 明らかに読み手がイメージする仕様は変わってきます。
頭のなかでは同じことをイメージしていても、それをどのように文章するかで、 「文 章の伝える力」 がまったく違ってきます。 このことを理解していないと仕様のトラブ ルを防ぐことはできません。 このように要件開発では、要求の気づき方だけでなく、 要求や仕様をどのように表現するかということにも、注意を払う必要があるのです。
□仕様は要求の中の 「動詞」 にある 本書で紹介する、 要求を仕様化する方法 「USDM (Universal Specification Describing Manner)」 にはいくつかの特徴がありますが、 そのなかの1つが、
仕様は要求に含まれる "動詞"およびその"目的語”にある
というものです。
機能要求は一般には 「振る舞い」 で記述できます。 割り込みやボタン操作、データ の到着などのイベントに始まって、 一連の処理 (すなわち動作) を実行して停止する までの「動き」 として記述できます。 そして仕様は最終的にソースコードに変換され コンピュータに処理させることになりますが、 それは要求に含まれる 「動き」 すなわ ち 「動詞」 を実現するためのものということになります。 「動詞」 が見つかれば、 そ の動き方や動く際の条件などを仕様として引き出すことができます。
「USDM」 では、要求の役割として 「仕様を引き出す」ことと定義しています。 要 求は曖昧性を含んでいて、これ自身はソースコードに変換されるものではありません。 しかしながら、要求を適切に表現することで、 すなわち、 その振る舞いに含まれる「動 詞」をすべて表現することによって、 その 「動詞」 および 「目的語」 に関連した仕様 を確実に引き出すことができるのです。
そして「振る舞い」 という要求に含まれる動詞をすべて表現するために要求を階層 で表現します。 上位の要求 (振る舞い) によっては20~30の 「動詞」 を含んでいる ことがあります。 一般の要求仕様書では、そのすべての動詞を“散文”形式で表現す ることになりますが、 この形式で仕様をモレなく引き出すのは書き手にとっても読み
10
手にとっても技術的には困難を伴います。 その障壁をクリアする方法として導入して いるのが 「階層表現」 です。 要求を2層で表現することで、 上位要求に含まれる多く の「動詞」を無理なく表現できます。 そして動詞が表現されてしまえば、 仕様はほと んど問題なく抽出できるのです。
派生開発での考え違い
要求仕様に関して、もう一つの大きな問題は、 「派生開発 *2」 において変更に関す る要求仕様の扱い (表現) を間違えていることです。 一般には、 追加機能に関する要 求仕様書は書かれていますし、 製品やシステムの機能や振る舞いに関する仕様の変更 も、何らかの形で書かれていると思われます。 しかしながら、 具体的にその追加機能 をどのように実現するかというときに、すでにソースコードとなっている仕様*3を変 更することになるのですが、問題はその変更内容や変更方法がどこにも記述されずに、 追加機能の担当者の 「善意」 に任されていることです。
一般的に、 派生開発にあてられる期間は短く、 「部分理解」 の足枷のなかでの作業 になります。 そして担当者は、「そこを修正すればこの仕様変更は終了する」 「この追 加機能はうまく作動する」 と "思いたい人なのです。 既存の実装されている仕様 (ソ ースコードになっている) をどのように変更するかについて、 担当者以外の検証が入 る仕組みを持ち込まないかぎり、 修正ミスを防ぐことはできず、 社会の混乱は今後も 発生し続けるのです。
この問題は、 「要求仕様書」というものをどのように解釈しているかということか ら発しています。 「機能仕様書」 との違いを的確に説明できなければ、 派生開発にお ける要求仕様書は 「どうあればよいのか」 は見えてきません。
□CMMとの遭遇!
1991年にまったく偶然に SEI*から公表された CMMに遭遇したことで、筆者の ポケットに入っていた技術に“価値”があることに気づかせてくれました。 ここで紹 介する要求の仕様化や、 派生開発アプローチ(XDDP)* PFD (Process Flow Diagram) を使ってプロセスを自在に設計する方法 *7、 サイズで連鎖させた見積り方法 * 要求 の仕様化のスキームを応用したリスク管理の方法など、 多くの 「方法」 がソフトウェ アの開発を成功させるために有効な技術である (あった)ことを教えてくれたのです。
*2 ベースのソースコードに対して、 機能追加や仕様変更を 施して新しいバージョンのソフトウェアを生み出す開発パターンの ことを、ここでは「派生開発」 と呼びます。 *3 ソースコー ドは仕様を具現化したものという考えに基づいています。 *4 Software Engineering Institute の略で、カーネギーメロン大学にあ る国防総省の研究機関。 *5 Capability Maturity Model
略。 ソフトウェアを開発する組織の能力を示す基準。能力成熟 度モデルと訳されます。 *6 extreme Derivative Development Processの略。 *7 筆者のホームページ(http://homepage3. nifty.com/koha_hp/) PFDの表記に関するルールを掲載してい ます。 *8 「Software People (vol.5)」 (技術評論社刊)に 掲載しています。
11
要求を仕様化する技術表現する技術/ はじめに
言い換えれば、それらの技術を手に入れていたから、 顧客の要求をはずさずにやって こられたのです。
そして、5年間かけて、 CMMの研究と、 筆者自身が持っていた技術の整理 体系 化を経て、 1995年から 「SPIコンサルタント」 として踏み出したわけです。 CMMに 遭遇していなければ、 「SPIコンサルタント」 として踏み出すことはなかったでしょう。
このCMMは、その後SW-CMM(ソフトウェア能力成熟度モデル) を中心にSECM (シ ステムエンジニアリング成熟度モデル) と IPD-CMM (統合成果物開発成熟度モデル) の3つに分かれたことで混乱が生じました。 しかし1990年代後半にこれらを統合す るプロジェクトが立ち上がり、 2000年にCMMIのV1.02 が公表されたことで、 SEI はCMMのサービスを停止させました。 現在のバージョンはV1.2で2006年にリリー スされたものです (ただし、逐次バージョンアップします)。
このようにSEIのほうでCMMのサービス止めたこともあって、 本書においても、 ここから先は原則として 「CMMI」 と呼ぶことにします。
□CMMIで見落とされたこと
「この「CMMI」が、 多くのソフトウェア開発の現場で起きている品質の問題を解決 する力を持っていると思って、 日本でも積極的に取り組まれてきました (筆者は、品 質の改善は、 CMMI の本来の目的ではないと認識しています)。 最近は、 「ISO-9001」 に代わって認証競争を煽っているきらいも見受けられます。 たしかに、 CMMIはプロ セスを明確にし、適切に考えられたプロセスをきちんと実行していくことを求めてい ますので、 結果として、 製品品質はよくなるはずです。
しかしながら、 日本においてはCMMIに取り組むには 「前提条件」 があります。
・要求仕様書の作成能力
・見積りの技術やリスク管理技術などの 「計画書」 を構成する技術
・ソフトウェアエンジニアリングの技術
・自在にプロセスを設計する技術
・リスク管理技術
・レビュー技術
などが、 ある程度のレベルで習得していることが前提となっています。
9 Capability Menurty Model Integration の略。
12
*
図0.1 CMMI の3層構造 CMMI TSP TSP Team Software Process PSP PSP Personal Software Process
もともとCMMIは、 図0.1 のように、 PSP *10、 TSP"、 CMMI の3層構造になっており、 個人レベルの見積りやチームのマネージメント技術は、下の2層で習得することにな っています。 ただし、 要求の仕様化技術などのエンジニアリングの技術は、それ以前 に習得していることになっているようです。
日本のソフトウェア開発現場では、これらの前提条件を満たしていることはきわめ て稀で、条件を満たさないままCMMIに取り組んでも失敗する可能性が高くなりま す。 特に、 「要求仕様書」 の出来栄えによっては、 CMMIの取り組みを根底から覆し てしまう危険があると思っています (残念ながら、いま、この危惧が現実のものにな りつつあるようです)。
要求仕様の出来栄えが不十分な状態では、プロジェクトの後半になって仕様変更が 頻発するので、納期の厳守が求められているなかでCMMI が勧めている要件管理の変 更制御のプロセスを手抜きなく回すことは難しくなります。 また仕様化作業によって 仕様の項目数がつかめるのですが、 実際に書かれた仕様の粒度が不安定では、仮説見 積りの値を調整することもできなくなります。 もちろん、 その要件 (機能) が実現す るかどうかのリスクも見えないかもしれません。 さらに、 仕様の曖昧な状態を試作で 明らかにしようということで試作の回数も増えますので、 「プロジェクト計画」は簡 単に破綻します。
CMMIの初期の段階 (たとえばレベル2に到達しようという段階) では、 「納期」 の達成は目的 (ゴール)に入っていないといっても、 前提条件を置き去りにしたまま CMMIに取り組んでも、現場の人たちにとっては負担が増えるだけです。
それどころか、 CMMIのレベル3以上と認定された組織でも、 多くの前提条件を欠 状態 (特に適切な要求の仕様化技術とPFDを使ったプロセスの設計技術を置き去り にした状態)では、人の移動と時間の経過のなかで組織の能力レベルが後戻りするこ
10 Personal Software Processの略。 個人レベルのプロセス 改善プログラム。
*11 Tear Software process のチームレベルのプロセス 改善プログラム。
13
要求を仕様化する技術表現する技術 / はじめに
とは避けられないと思っています。
□仕様を誰が書くか
要求仕様書について厄介な問題の一つに、 それを誰が書くかということがあります。 日本では、バブルの時代から作業の"分業” が進んで、 要求仕様を書く人と設計する 人が異なることが多いようです。 ソフトウェアの開発を外部のソフトウェア企業に委 託する場合は、 発注側が書くのは一般的かと思いますが、 それ以外の場面でも、実際 に設計しない人が書いているケースも少なくありません。
要求仕様書を書く人とそれを実現する人が異なるということは、 そこに要求仕様書 を介して 「わかる」 という行為が求められることになります。 ところが、 優れた要求 仕様書が用意されたとしても、「わかった」ことを確認する方法を持たないとき、あ あるいは、確認する行為を省いたときは、せっかく書かれた仕様も実現されないことが 起きてしまいます。 外注案件で発生するトラブルの多くは、 このような状況のなかで 起きているものと思われます。
もちろん、 発注側で書かれた要求仕様書が、 「要求仕様書」 としての機能を満たし ていないことも否定できません。 設計側にその不足を埋めるスキルがあれば、 問題を 最小限に押えることができるのですが、 設計側にも仕様化のスキルが欠落している状 況では、 仕様のトラブルが起きるのは当然なのです。
もともと他人同士がわかり合うことは簡単ではありません。 特に、 そこで書かれて いる要求仕様書の構成が不適切なときは、随所に認識のズレが入り込むことは避けら れません。 それだけに、 要求仕様書の構成や表現にもっと注意を払うべきなのです。
□筆者自身の経験から編み出した方法
筆者がこの世界に入ったときは、コンピュータといっても、 その能力はいまと比べ ればオモチャみたいなものでした。 それでも当時は 「脅威のマシン」 だったのです。 その後、 オフコンや小中型の汎用機上で走るソフトウェアを設計してきましたが、 最初からうまくいったわけではありません。 何度も要求をはずし、 納期をはずし、お 客さんから叱られました。 そして一度はこの世界から逃げ出した身です。 でも、思い 直してもう一度この世界に戻ったときは 「1年前の私」 ではなかったのです。
1年前の屈辱をはらすために、 そして 「人生の最後に、 “にこっ”と微笑んで終わる」 ために、コンピュータサイエンスはもちろん、 ソフトウェアエンジニアリングの全般 を勉強し直しました。 どうしたらお客さんの思っていることをつかめるのか、どうす
14
れば納期に間に合わせることができるのか、 どうすれば疲弊せずにこの仕事を続ける ことができるのか、 いろいろな本を読みながら、考え工夫してきました。 そのなかで、 要求を表現することや背景を確認することで、いつしか依頼者の思っていることをつ かめるようになり、 納期をはずさなくなりました。 納期をはずさないことで、時代の 求める技術を先行して手に入れることもできるようになりました。 おかげで筆者自身 は、SEの仕事を楽しく *12やってこられました。
本書で紹介する、 要求を仕様化する方法 「USDM 」 は、 非常に汎用性が高く、 分析・ 設計技術にほとんど左右されないという特徴を持っています。 また、 ソフトウェアに 限定するものではなく、 日常の業務にも応用できるものです。 この仕様化方法の大部 分は、当時の研究のなかで気づき、 編み出したものです。 それ以来、1988年に現役 (ソ ースコードを書いている状態) を辞めるまで、 納期をはずしたことは一度もありませ ん。 その後の、 システムコンサルタントとしての7年間も依頼された設計プロジェク トの納期をはずしていません。 この間、 顧客に迷惑をかけたことはないと自負してい ます。
□この本にかける思い」
本書は、筆者が30年余りの間、エンジニアとしてまたコンサルタントとしてソフ トウェア開発に関わってきたなかで得た、 要求仕様に関するすべてをまとめたもので す。 ここに紹介する考え方やテクニックのほとんどすべてが、 現実のプロジェクトの
なかで遭遇した問題を解決するために、 筆者自身で考え、考案してきたものです。
そしてこの技術が早い段階で手に入ったことが、 筆者自身がソフトウェア技術者と しての仕事に「楽しく」 対処できたことに、 非常に大きな貢献を果たしたと思ってい ます。 これが手に入っていなかったら、いまの私はなかったでしょう。 私にとっては 他の分析・設計技術と比較にならないほど大きな意味を持っています。
そしていま、この要求の仕様化技術を多くの皆さんに紹介できる機会を得たことは、 筆者にとって最高の喜びでもあります。 特に、 一度は 「仕様」 で挫折した経験を持つ 者が、ここに仕様化技術を紹介できることの思いは言葉にあらわしきれません。
新しいことを理解し、 自在に使いこなせるようになるのは簡単ではありません。 一 度読んだだけでは、 多くのことを見落としているものです。 そのため、 すぐには思っ たような効果を得ることができません。 そのときは、何度でもこの本に戻って下さい。 前回のときと違って、いままで気づかなかったことに気づくはずです。 読み落として いたことが目にとまるはずです。 そうして、 何度でも往復して下さい。 気がついたと
12 拙書の「SEの仕事を楽しくしよう」 (SRC刊)に、この仕 事を楽しくするために筆者自身がやってきたことを紹介しています。
15
要求を仕様化する技術表現する技術 / はじめに
きには、私が経験したように、 仕事がスムースに運んでいることでしょう。 いまは、この本が一人でも多くの方の役に立ってくれることを願っています。
□ 構成について
本書は、 『Software People (Vol.4)』 (技術評論社刊、2004年) に掲載した 「要求の 仕様化入門」 の内容を引き継ぎ、 その他に、 「要求仕様書」 というものについて、 筆 者の持っているものを紙数の許す限り詰め込んだつもりです。 特に、 要求仕様書をど のように表現すればよいのかというところに、 筆者の経験を盛り込みました。 またそ の際、読者の理解を支援するために、 少しでも多くの事例を付けるようにしました。
また、 多くの現場でいろいろな障害 (問題) が発生していますが、これらの問題の 原因が要求仕様書の構成や書き方に発していることに気づいてもらうために、トラブ ルについての説明も多く収録しました。 原因の認識が的をはずしたままでは問題の解 決につながりませんので、 本書で問題の原因を認識していただきたいと思っています。
この本を書くにあたって、 特に対象者を選ぶことはしませんでした。 要求仕様書を 書くことを担当している人、他の人が書いた要求仕様書を受け取って、それを理解し 実現する立場の人、 ソフトウェアをテストする立場の人、これからソフトウェア開発 の世界に入ろうとしている若い人、 CMMIの活動のなかで、 SQA13やSEPGの立場で 要求仕様書のあり方を探求している人、 プロジェクトがいつも混乱していて、 その原 因が仕様にあると思いながら、そのことを特定したいと思っている人など、それぞれ の立場で見ることができるようにしたつもりです。
第1章では、 要求仕様の不備が原因となって表面化している問題を拾い出しました。 もっとも、ここに挙げたケースのほとんどは、一般には要求仕様に起因していると認 識されていないかもしれませんので、 改めてそれらの問題が要求仕様に起因している ことに気づいていただきたいと思います。 原因のあり場所をはずした状態では問題を 解決することはできません。
第2章では、もう少し掘り下げて、 要求仕様の問題がどうして発生するのかという 視点から整理してみました。 第1章、 第2章を合わせて、 組織のなかで起きているト ラブルが要求仕様に起因していることの判断に活用して下さい。
第3章では、 最近 「要求仕様の不完全性」 ということで、不完全な仕様を書くこと を回避する動きが出てきていますが、この考え方は大きな危険をはらんでいます。 こ
13 CMMで推奨されたプロセスと成果物の監査人または組 CMMI では 「PPQA」 と呼称が変更されています。
16
こでは問題の根本を取り違えていることを説明します。
第4章では、 要求を仕様化することで、 どのような効果があるのかという方向から まとめています。 要求を仕様化する際に、しばしば 「膨大で･･･」という言葉が使われ ます。 また、 本書で勧めるような仕様は 「設計の段階で決めるもの」 と認識されてい ることも少なくありません。 そこで、 仕様化することの意味や早い段階で仕様化する ことの効果についてまとめました。 プロジェクトリーダーや、 組織のマネージャーク ラスの人で、 要求の仕様化に取り組むことに迷っている人は、ここでそのメリットを 知って勇気を手に入れて下さい。
第5章では、実際に要求や要求仕様をどのように表現するかという具体論に入る前 に、要求仕様を適切な文書にする意味や、 要件開発の位置づけについてまとめていま す。
第6章から第8章は、 要求と要求仕様をどのように表現してくかということについ てまとめてあります。 まず第6章では、 「要求」 というものをどのように捉えるか、 その役割や表現の仕方の重要性、 要求のブレを押えるための「理由」 の意義など、 要 求をどのように表現すればよいかということを中心にまとめています。 合わせて品質 要求の表現についても触れています。 この章は、あくまでも 「要求」 をどのように表 現するかということに絞っていて、 具体的な 「仕様化」 については第8章に譲ってい ます。
第7章では、要求を適切に表現する際のもうひとつのテクニックとして、 要求を階 層化して表現する方法について説明します。 これは第6章で述べた、 要求は適切に表 現することで 「範囲」 を示すことができる、 という考え方をさらに実現しやすくする ための手段のひとつでもあります。
第8章では、 「仕様」 の意味から、 具体的な仕様の表現方法を紹介しています。 こ の章を読む前に第6章と第7章を読んで下さい。 要求に範囲を持たせることで仕様が スムースに抽出できることや、 要求を階層化して範囲を狭めたなかで、 さらに仕様モ レを起こさないためのの使い方、 そして仕様として表現する際に注意す べきことについてまとめてあります。 実際に要求仕様書を書く立場の人や、 それを実 現する立場の人にとって参考になるものです。
第9章では、本書で勧めている要求仕様をExcelで書くことの効果について触れて います。 Excel (またはそれに類似するツール) を使用することで、 要求と要求仕様 の関係を明確にできることや、要求と要求仕様の文書を 「1つ」 にできること、さら には 「トレーサビリティマトリクス」 とも一体にできることなどを説明しています。
17
要求を仕様化する技術・表現する技術/はじめに
第10章では、 派生開発における要求と要求仕様の表現方法についてまとめていま す。 「変更要求仕様書」 と 「追加機能要求仕様書」 の2本立ての文書構成や、 変更要 求仕様には変更するソースレベルの 「仕様」 も表現することの意味など、 筆者の「派 「生開発」 のプロセス*'にマッチした要求仕様書のあり方について説明しています。
第11章では、要求仕様書の応用として 「画面仕様書」 にも、 本書で勧める形式を 持ち込むことについて説明しています。 一般に書かれている画面仕様書のほとんどは 「仕様書」としての役割を果たしていないために、 結局は「試作」 を繰り返すことに なります。
第12章では、 要求仕様をまとめる立場の人が 「ヒアリング」 する際の注意点につ いて少しまとめてみました。 この本は、ヒアリングについて詳しく述べるものではあ りませんが、ヒアリングの問題が、 要求仕様を適切に表現する手段を持ちあわせてい ないことに発していることや、ヒアリング前に関係者との間での 「取り決め」 の必要 性について触れています。
第13章では要件管理についてまとめてあります。 適切に書かれた要求仕様書も、 適切な要件管理プロセスがなければ、仕様変更で簡単に崩れてしまいますし、仕様 (要 件) の変更を100%防ぐこともできません。 ただし、 適切に書かれた要求仕様書があ ることで要件管理が容易になります。 また、 そこで書かれた要求仕様書の出来栄えを 知るにも、 要件管理は不可欠です。
第14章では、 仕様化の出来栄えを判断するための 「計測方法」 について触れてい ます。 計測しないままでは、 要求の仕様化も “やりっぱなし”になってしまいます。
第15章では、本書で勧める要求を仕様化する方法が、 リスク管理にも使えること を説明しています。 一般に書かれているリスク管理の文献には、 抽出されたリスクの 分析には力が注がれていますが、リスクそのものをどのように抽出するか、 抽出した リスクをどのように表現するか、ということにはほとんど触れられていません。 リス クも要求と同じで、 適切に表現されなければ軽減措置が引き出せないことを説明しま す。 このほか、要求と要求仕様のスキームが、 日常の業務のなかでも応用できること を紹介しています。
□ 謝辞
この要求の仕様化技術を、ソフトウェアの開発に携わる多くの関係者に伝えたいと 考えるようになったのは、 CMMとの遭遇がきっかけでした。 CMMを研究するなかで、 CMMに無理なく取り組むには、 最初の要求仕様の技術が不可欠だとわかったからで
*14 本書は要求と要求仕様の書き方に関する内容をまとめ たものですので、 派生開発のプロセスで勧める変更要求仕様 のあり方について触れますが、 派生開発専用のプロセスについ
ては、拙著「派生開発」 を成功させるプロセス改善の技術と 極意」をご参照ください。
18
す。 しかしながら、 それまではこの方法は筆者としてはうまくできただけであって、 必ずしも他の人にもできるものかどうかわからなかったのです。
この方法を多くの人が使えるためには、「method」、 あるいは 「Engineering」にす る必要がありました。 「method」 といえるには、 そこに示されたルールや手順に則っ て作業を進めていけばある程度の結果に到達できるものでなければなりません。 その ためには、 実際のプロジェクトのなかで、 この要求の仕様化技術がQCD (品質、コスト、 納期) の改善に貢献することを確認する必要がありました。
そのようなときに、 プロセス改善のコンサルティングの機会を得ることができ、 そ こで多くの顧客のソフトウェア開発現場の方々にこの方法に取り組んでいただきまし た。15年間のプロセス改善のコンサルティングのなかで、 私が直接関与しただけで も100を超えるプロジェクトでこの仕様化に取り組んでいただき、 そのなかで確実に 成果を確認し、表現方法や仕様化のルールなどを調整することができました。 そうし てようやく1冊の本としてまとめることができたのです。 これまでご協力いただいた 多くの皆さんには、この場をお借りして深くお礼申し上げます。 ありがとうございま した。 これまでご協力いただいた皆さんには、この方法に関して先行者としての利点 を大いに発揮していただきたいと思っています。
また、技術評論社の伴達也様には、 『要求の仕様化入門』 というタイトルで 『Software People (Vol.4)』 に掲載する機会をいただき、 さらに熊谷裕美子様には、これを1冊 の本にするのにいろいろとお手伝いいただきました。 本業のコンサルティングが多忙 になったことで、 原稿の作成作業が大幅に遅れるなかで、 原稿の完成を待っていただ いたことも併せてお礼申し上げます。
CMM Capability Maturity Model、 および Capability Maturity Modeling は、 米国特許商標局に登録されています。
CMMISM はカーネギーメロン大学のサービスマークです。
19
目次
第2版の発行について
はじめに
仕様にまつわるトラブルの頻発・
要件定義書の扱いについて
Agileへの逃避の問題
仕様は要求の中の 「動詞」 にある
CMMとの遭遇
CMMIで見落とされたこと
仕様を誰が書くか･･
この本にかける思い
構成について・
謝辞
第1部 要求仕様にまつわる問題
第1章 要求仕様にまつわる問題
1.1 どこで問題が発生しているか?
1.2 要求仕様のトラブルの実態
1.2.1 仕様モレ
3
要求仕様の不完全性・・・
適切に表現されなければ漏れる
派生開発での考え違い
33
37
37
5
筆者自身の経験から編み出した方法・
34
18
35
9
16
11
11
10
12
8
14
7
14
6
15
5
目次
1.2.2 解釈の違い
1.2.3 仕様の衝突 (矛盾)
1.2.4 テスト不足
1.2.5 市場からの反撃も
1.3 曖昧な仕様で作業に入っている
39
38
1.3.1 構造が傷ついていく
1.3.2 潜在バグ” の意味
1.3.3 仕様書の良否の判断ができない 1.4 顧客からの仕様変更が頻発して・・・... 1.4.1 現状はどうなっているか 1.4.2 最後になって機能に制限がつく
1.5 要求した機能を満たしていない
1.6.1 何度も作り直している
1.6.2 試作の発想が消えない
1.7 品質要求に応えられないSE
1.7.1 保守性要求に居直るソフト会社 1.7.2 タイトルだけの要求仕様書の危険性 1.7.3 品質要求を見たことがない 1.7.4 品質要求を仕様化できない
1.7.5 設計技術にバリエーションがない 1.8 派生開発での仕様トラブルはもっと複雑
.57
.58
60
1.8.1 ソースから仕様を理解できるか 1.8.2 変更要求 (仕様) が表現されていない 64 65
40
42
1.5.1 専門のテストエンジニアがいない
1.6 納期の遅れとなって表面化する
46
-55
.55
59
46
60
45
62
62
48
49
51
53
52
21
1.8.3 変更要求がブレークダウンされない
1.8.4 でき上がりの仕様が書かれている ......
1.8.5 どこが修正されたのかわからない
1.8.6 異なる変更要求の修正が同じ箇所にぶつかる
1.8.7 一つの変更要求に複数の人が絡む
1.8.8 各自の修正を集めて動かしてみると? ?
1.9 設計書が省かれてしまう原因になっている 1.9.1 設計レベルの仕様と混同
第2章 なぜ仕様のトラブルが起きるのか
2.1 問題が明らかにされたか?
2.2 仕様化の作業を放棄した
2.2.1 それって仕様か?
2.2.2 要求が表現されていない
2.2.3 説明なのか仕様なのかわからない
2.2.4 概要に隠れる仕様
2.2.5 画面仕様も項目だけしかない
2.2.6 仕様化に必要な時間を投入していない
2.3 ドメインの知識がない
2.4 バグの経験だけでは役に立たない
2.5 レビューできた仕様書か
2.5.1 どこに何が書いているのかわからない
2.5.2 仕様になっていない
2.5.3 まとめてのレビューになっている
87
-92
90
83
85
84
86
70
89
66
80
82
67
78
68
-79
81
76
82
74
.93
73
71
目次
目次
2.6 FIXした しないでもめる理由
2.8 望みはある
第3章 要求仕様は不要か?
.95
2.7 途中で仕様変更が混乱する理由
.96
3.1 テスト仕様で代われるか?
3.2 仕様化しないほうが儲かる?
97
3.3 “不完全な要求仕様 ” の誤解
100
101
3.3.1 はじめから要求を正しく把握することは困難か?
102
104
3.3.2 初期に時間をかけて完全な仕様化に取り組む価値はない?
3.3.3 予測するよりも“適応するほうが重要か?
105
3.4 "コードなら書ける”の仕組み
3.4.1 仕様を書くよりもコードを書くほうが早いか?
3.4.2 設計しながら仕様を探り出す?
3.5 GUI構築ツールで仕様を引き出せるか?
第4章 仕様化の効果
107
110
113
111
112
4.1 要求仕様書がすべての始まり
4.2 一気に解消する混乱
4.2.1 仕様の変更率が1/10に減った 4.2.2 仕様変更時に影響する仕様を確認できる
4.3 設計や実装のイメージができる
115
116
117
4.4 不用意な 「試作」 が減る
119
120
121
122
108
23
目次
4.5 設計や実装時に仕様の確認ができる
4.6 レビューで感じる仕様化の効果
4.7 トータル工数が短くなる
4.8 設計に入る前に機能の難易が見える 4.8.1 早期にトレードオフの交渉ができる効果 4.8.2 仕様化でウォーターフォールの誤解を解く
4.8.3 インクリメンタル開発への切り替え
4.9 顧客との良好な関係を築ける
4.9.1 別に料金を払うといってきた
4.10 IT ゼネコンとの訣別
4.10.1 分割発注への道
4.11 要件管理に取り組める
第5章 要件開発の重要性
5.1 文書にする理由
5.2 “わかる”の問題に対応する
5.3 なぜ"要求仕様書というのか?
5.3.1 作ることを誘導できなければ意味がない
5.3.2 「作るための文書」 であることの好都合・・・
5.3.3 新規開発と派生開発の 「要求」 の違いをあらわす
5.3.4 派生開発では 「差分」 の分だけが要求
5.3.5 機能仕様書との関係
5.4 要求仕様書は誰が書くのか
5.5 顧客からの要求仕様書を洗練する
142
146
149
152
124
150
125
147
148
139
144
128
126
135
141
134
130
133
24
135
131
138
129
136
目次
5.6 仕様モレと仕様間の衝突を早期に発見する
5.7 要件開発をスケジュール管理のなかで行う
153
5.8 要件開発と要件管理は車の両輪
第6章 "要求 ” を書く
6.1 要求の役割
154
5.9 要求工学における世界の動き
155
156
第2部 要求仕様を書く
6.1.1 要求には 「範囲」 がある
159
160
6.2 要求の表現
6.2.1 要求の表現の難しさ
6.2.2 「範囲」 をあらわしているか
6.2.3 すべての"動詞" を表現しているか
6.3 要求には 「理由」 がある
6.3.1 なぜ 「理由」 にこだわるか
165
6.3.2 要求と理由でセット
166
169
167
6.3.3 慣れないうちは理由に要求が混じる
6.4 必要なら 「説明」 を付ける
6.4.1 要求の理解を助けるもの
6.4.2 用語集への展開
171
160
163
173
175
178
6.5 要求のカテゴリ化
181
181
6.5.1 コンテキスト図でシステムの境界を明確にする 6.5.2 システムの世界を分割する 183 185
182
164
25
目次
6.6 要求のモレを防ぐことが重要
6.7 品質要求を確認する
6.8 品質要求の表現
6.8.1 機能に付随する品質要求
7.1 要求を階層化して範囲を狭める
7.1.1 分割の基準
7.1.2 時系列分割
7.1.3 構成分割
7.1.4 状態分割
7.1.5 共通分割
7.2 「MECE」の活用
7.3 階層化しても 「要求」 に変わりはない
7.4 依頼者と分割の基準を共有する
7.5 階層は2層ぐらいで止める
第8章 要求を仕様化する
8.1 仕様とは
8.2 "Specify" の意味
8.2.1 均一である必要はない
8.2.2 ベテランを投入する意味
214
212
188
6.8.2 製品システム全体に属する品質要求
189
第7章 要求の階層化テクニック
213
192
215
213
208
209
210
191
201
200
196
197
194
217
26
203
206
205
目次
8.3 仕様で衝突する
8.4 いつ仕様化すべきか?
218
220
8.5 検証可能性について
221
8.5.1 テストエンジニアによるレビュー
8.6 固有の番号を付ける
223
8.6.1 番号の確定は少しあとに回そう
8.6.2 番号化における注意 ........
8.6.3 要件の実現性追跡に重要な手掛かり
8.6.4 テストケース仕様とつなぐ
224
226
227
8.7 要求の階層のなかで仕様を捉える
88 さらに範囲を狭めるためのグループ化
228
8.7.1 「範囲」 が見えることで仕様が引き出せる
230
8.8.1 要求の分割基準を準用
8.8.2 グループ分けのパターン化
88.3 "動詞"からグループを設定する方法
8.8.4 要求の代役としてのグループ
236
238
8.9 シナリオ機能と単純機能の違い
8.9.1 ユースケースだけでは仕様を拾いきれない
8.9.2 フローチャート”の落とし穴
236
240
8.10 仕様と要求の混在の問題・・
8.11 仕様から要求を立てる・
8.11.1 要求を立てる意味
8.11.3 仕様を 「裸」 にしない
241
243
8.11.2 ふさわしい要求に収容する効果
8.12 "ペースト作文”の弊害
244
246
248
231
250
251
232
255
257
234
27
目次
8.13 「否定表現」 などの曖昧な表現を避ける
8.14 “FIX”から“賞味期限”へ .......
8.14.1 なぜ FIX を要求するのか?
8.14.2 FIXに潜む落とし穴
8.14.3 その仕様は何に依存しているのか?
8.15 品質要求の仕様化･･･
8.15.1 機能に付随する品質要求の仕様化・
8.15.2 保守性などの要求の仕様化
8.15.3 変化する保守性の定義・
8.15.4 品質要求はテストでも確認する
8.16 確定しない仕様の表現・・
8.16.1 「T.B.D」では合意できない
8.16.2 あとは要件管理でカバーする・
8.16.3 依頼者と事前の合意が必要・・
8.17 設計情報の扱い・・
265
第9章 Excel による仕様化の勧め
9.1 「Excel」 のほうが細かな使い方ができる
9.2 要求書と要求仕様書を一体化
9.2.1 最初に 「要求書」 を展開する
9.3 要求 TM (トレーサビリティ・マトリクス) への展開・・
9.3.1 仕様変更時に効果を発揮する
9.4 自在に 「列」 を設計する
9.5 WBS との違い
・
...... 290
281
264
260
266
..... 270
281
282
285
286
288
289
268
271
278
273
274
267
276
277
274
278
28
目次
Excelで書くときの注意
291
第10章 派生開発における要求仕様書
10.1 “部分理解”の世界である
293
10.1.1 人の書いたソースを理解できるか?
10.2 USDM の構成を持ち込む・
10.2.1 "仕様” で出される変更要求
10.2.2 「変更要求」 を立てることの効果
296
10.3 旧状態を表現する
294
10.4 何が変更されるかを表現する
297
10.5 「差分」 を書く
299
301
10.6 変更の種類
10.7 変更の要求・
306
10.7.1 ソースの変更を変更仕様として記述する
302
10.7.2 スペックアウトしながら変更要求仕様を拾い出す
10.8 追加の要求・
306
307
310
311
312
10.8.2 変更要求と追加要求に分ける
10.9 移植の要求・
313
10.9.1 移植は追加よりも難しいことがある 315 10.9.2 移植元の変更も変更要求仕様で扱う 316
314
10.10 削除の要求
10.11 派生開発の品質要求
319
320
304
10.8.1 機能追加も実装レベルの仕様変更が不可欠
305
29
9.6
目次
第11章 画面仕様書のあり方
11.1 画面仕様書の問題点・
ཊུ 321
11.2 画面操作全体に対する要求はあるか?
30
11.3 個別の画面設計の指針としての仕様
11.4 画面遷移と画面仕様を連携させる
11.5 機能仕様との連携
11.5.1 重複は避けよう
第12章 ヒアリング時の注意
12.1 ヒアリングの目的・
321 ཊུ
12.2 "システムの目的” を確認する
328 ྃ
12.3 今回の要件定義の手順について同意を得る
12.4 仮説見積りに基づいた仕様作成期間・
12.5 契約時には、 仕様の項目数の見積りを付ける
12.6 要求仕様書の 「体系」 を示す
12.7 事前にヒアリングの範囲を知らせる
12.8 こちらの要求仕様のフォーマットに慣れてもらう 12.9 言われたことをメモしただけではダメ 12.10 品質要求をヒアリングする
12.11 未決項目を含んだ状態でのベースライン設定 12.12 顧客を仕様化作業に巻き込む
325 ུ
326 ྂ
344
345
339
343
340
341
332
337
338
329 མཻ
327 མི
332
336
335
333
目次
第3部 要件管理と計測
347
第13章 仕様化を支える要件管理
348
13.1 なぜ、 仕様が変更されるのか?
13.2 関係者へのオリエンテーリング
13.3 要求仕様書をレビューする
348
13.4 ベースライン設定と合意··
13.5 以後の仕様変更をコントロールする
349
350
351
13.5.1 CCB は判断と指示を出すだけ
13.5.2 変更率5%以下の効果
13.5.3 最初のサイズ見積りが説得力となる
13.6 未確定だった仕様が決まる
13.7 いつ仕様変更を実施するか
351
352
13.8 仕様変更を期間限定で募集する方法もある
第14章 仕様化の出来栄えを測る
357
14.1 何を計測するか
14.2 レビューでの指摘件数とバグ件数の関係・ 14.2.1 獲得時間の集計
14.3 データは組み合わせると声を発する
14.4 バグから学ぶ要件開発の方法・
第15章 仕様化技術の応用
15.1 リスク管理へ応用
354
366
355
356
358
359
360
362
363
366
353
355
31
目次
15.1.1 「リスク」 の表現に問題がある
32
15.1.2 要求と要求仕様の関係と類似 15.1.3 リスクと要因で 「範囲」を示す
15.2 課題への対応が見えずにうろうろする
15.3 作り替えても前と変わっていない
15.4 業務指示もその場で具体化しよう・
15.5 会社の方針がそのまま降りてくる
おわりに
参考文献
369
370
367
372
371
369
373
374
368
第
部
1
要求仕様にまつわる問題
ソフトウェア開発において、 多くのトラブ ルに見舞われているにもかかわらず、それら の原因の多くが要求仕様に起因していること に、はたしてどれだけの人が気づいているで しょうか。 設計プロセスの問題と認識してい る人が意外と多いということが、筆者のこの 15年間のコンサルティングのなかで見えて います。 このように原因プロセスの認識がは ずれた状態では、症状に合わない薬を飲んで いるようなもので、いつまで経っても症状は 改善されません。 ここでは、 いままで設計プ ロセスの問題だと思っていたことが、 実は仕 様化のプロセスの問題だったことに気づいて もらうために、 紙数を割いて多めに事例を取 り上げました。
また後半では、筆者自身の経験のほかに、 コンサルティングのなかで実際に本書が勧め る要求の仕様化に取り組んだ結果やその効果 を紹介しています。 新しいことに取り組むに はしばしば "勇気” が必要です。 ここに挙げ た “事実” が、 読者の皆さんに“勇気”をも たらしてくれるはずです。
第
要求仕様にまつわる問題
今日も、ソフトウェア開発の現場では、バグに追われて夜遅くまで原因つぶしに奔 走していることでしょう。 大きなシステムでは、5000件を超えるようなバグが発生 することもめずらしくありません。 そのバグの改修のために費やされる時間は、 とき には数万時間にも達してしまいます。 それは、1人の労働者の年間労働時間を2000 時間とすると、なんと10年分にも相当するのです。 これだけのムダな行為を毎回の プロジェクトで繰り返しているのが実態です。
ここで注目したいのは、こうしたバグの過半が、 要求仕様に関連するものだという ことです。 いわゆる、
仕様の記述モレ
読み手が仕様を誤って解釈してしまう仕様の誤解釈
その仕様が自分に関係する仕様とは気づいていないという認識不足
テストの段階に入ってようやく発見される仕様間の衝突
などがバグの半分以上あることが明らかになっています。 さらに、工数の不足からテストが省かれてしまい、バグが客先や市場に出てしまう 現象も増えています。 最近では、消費者もこうした事態に対して学習していて、 イン ターネットでトラブルの様子を確認してから購入するという行動も起きています。
↓表 1.1 仕様のバグの事例リスト
氏名の入力で、 ミドルネーム”が想定されていないので、入力できない 24時間表示の 「12:15」 に対して、 12時間表示にすると画面によって「0:15PM」 と表示 したり 「12:15PM」 と表示したりする 「再入力」 を選択すると、 いままで入力した情報がすべて消えてしまうので、いちから 入れ直さなければならない 接続している回線の稼働状況によっては、回線監視画面が数秒間何も表示されないこと が起きる 電源 "OFF"ON" で、 一部の設定情報が初期値に戻っている リモコン画面に初期メッセージを表示中に 「再生」 ボタンを押すとフリーズする(*1) 解像度を10%アップするように変更したら、 画面の表示が小さくなって字が読みづらい 20チャネルの計測をアクティブにしてリアルタイム表示中に、 測定データの保存ファイ ルからデータの解析をしようとすると、 ファイルを読み込んだあとフリーズしてしまう
第1部 要求仕様にまつわる問題
1.1 どこで問題が発生しているか?
転送速度を2倍に変更したら、 “バッファフル”のメッセージが出たときは、すでにデー タがオーバーフローしている (2)
機器のトラブル表示が、 1つの検査項目に抵触するごとに警告表示されているため、 ま とめて改善の対応ができない
*1 この場面の動きが仕様書に書いてあれば「設計エラー」となります。 *2 私の派生開発モデル」では、これを変更仕様抽出モレ”と判断します。
そこには、 設計にとりかかる前の仕様書の書き方の甘さが、 多くのバグやトラブル を招き入れていることは明らかです。 サイズ見積りが省かれている問題も、不十分な 仕様化に端を発しています。 そうして、納期の遅延が、さらに次回のプロジェクトの ための準備時間を蒸発させ、 問題を解決するめどのないまま、 遅れていたプロジェク トにとりかかるのです。 結果は、 何も変わりません。 こうした仕様関係のバグやトラ ブルの発生を根源から減らさないかぎり、 ソフトウェアの開発現場から混乱は消えな いでしょうし、 作業の過半が 「バグつぶし」 という笑えない事態から解放されないの です。
1.1 どこで問題が発生しているか?
バグなどの“エラー"の原因プロセスを分析すると、一般には、 5:32 (仕様: 設計: 実装) の割合で仕様関係のプロセスでエラーが発生しています。 ただし、こ の比率は、QA (Quality Assurance) テストに限定したもので、 設計者テストのバグ を含めると、これとは違った配分になることが予想されます。 設計者テストが甘いま まQAテストに入った場合は、 設計や実装のバグの件数が増えるので、 仕様のバグは、 総体的に比率が減少します。 したがって、 逆に設計者テストが十分にできているとこ ろでは、7割が仕様関係のバグ (7:21) という数字になって現れてくることもあ ります。 仕様モレや仕様の誤解などは、 設計者自身は気づいていないことが多く、設 計者テストで発見されず、 QAテストのほうで発見されるからです。
派生開発においても、 バグ全体の5~7割が仕様関係です。 派生開発では、大きく 分けると追加機能の要求と、 既存の機能や仕様を変更する要求が含まれます。 前者の 場合は、新規開発の際の仕様の書き方と基本的には同じですが、変更要求のほうはほ とんどの場合、 どのような状態からどのような状態に変更するのかわからないなど、 適切な表現がなされていません。 そのため、 変更仕様の抽出モレが仕様関係のバグの なかで平均して7割あります。
35
第1章
要求仕様にまつわる問題
36
パグの原因プロセスの分析結果を見ると、 多くの組織ではバグ混入の大部分を「設 計プロセス」 に分類しているようで、その比率も平均的に 「3:52」 という形にな っているのをよく見かけます。 理由として考えられるのは、そのような組織では、 細 かな (具体的な) 仕様は 「設計プロセス」 のなかで発見するものという認識があるか らだと思われます。 届けられたデータをチェックしないでそのまま使ったところ、 た またま不正データが入ったままのデータに遭遇したことでプログラムが暴走したのは 「設計プロセス」 での対応が甘かったから、という認識なのです。
この場合の筆者の判断は、 受け取ったデータをそのまま使用してはならないことが 知らされていない状況では、設計エラーではなく、 仕様エラーと分類します。 そのよ うに分類しなければ、 問題の解決が図られないからです。 これを仕様エラーとすれば、 気づかせる書き方などの改良が可能です。 しかし、 設計エラーとしてしまっては、 何 も打つ手がありません。 せいぜい、 設計者が気づいてくれることを祈るか、 設計プロ セスのなかで、定期的に気づきを促すアナウンスを流すしかありません。 こうした混 乱は、「設計する」ということは何をすることかという、設計の考え方が曖昧なこと が原因になっていると思われます。
「派生開発」 では、追加機能の要求があれば、その機能を当該システムのなかに取 り込むために、既存のソースコードを修正しなければなりません。 あるいは、 外から 見える振る舞いが変更になるような場合も、 内部ではメモリの獲得方法を変更したり します。 派生開発でのこうしたソースコードの変更モレは、ほとんどが 「設計エラー」 に分類されています。 それは、 実装仕様の変更を 「変更仕様」として書き出すという 考えがないことに起因しています。 「新規開発」 では、この種の実装上の仕様 (クラ ス仕様や関数仕様) は、設計工程のなかで “決めていくものなので無理もないかも しれません。 しかし、この考え方を変えないと、 派生開発での変更モレのバグは減ら ないのです。
このように、バグの原因プロセスの分析をみると、 多くのソフトウェアの開発現場 では仕様化のプロセスに対する認識が薄く、 問題を 「設計」 で解決すべきものと認識 されてきたことがうかがえます。 逆にいえば、 「設計する」 ということは何をするこ とか、ということが十分に理解されていないのでしょう。
12 要求仕様のトラブルの実態
1.2 要求仕様のトラブルの実態
ソフトウェア開発において、 トラブルはどこにでも顔を出します。 そのなかで、 仕 様に関係するようなトラブルとして、以下のようなケースが考えられます。
・要求していた仕様が実現していない
・途中で変更を指示した部分が十分に調整されていない
・機能としては実現しているが、 応答が遅くて使い物にならない
・派生開発で、機能追加したことで、それまで問題なく動作していた基本的な 機能が動かなくなってしまった
・仕様が文書になっていないため設計者に伝わる過程で伝言ゲームになってし まったようだ
・顧客のほうで仕様をFIXしてくれないので、 見切り発車で設計作業に入った が、ここにきて仕様の変更が相次いでいる
仕様のモレが次々と発見されて、 テストがまともに進まない
・時間切れでテストを打ち切ったことで、品質が悪いまま市場に出された
現実には、こんな程度ではありません。 以下に、仕様関係のエラーをいくつかの類 型に分けて考えて見ることにします。
□1.2.1 仕様モレ
仕様モレとは、仕様として記述するのが漏れたために、対応するソースコードが書 かれなかった状態です。 たとえば、 数値のところに異常な値が入っていたり項目間の 整合性がとれていなかったりする生のデータが送られてきて、 本来なら受け取ったと ころで必要な項目のチェックをして問題ないことを確かめてから使用すべきだったの を、 仕様書にはそのようなチェックの指示がどこにも書かれていなかったためそのま ま計算に使用したところ、 累積データが異常な値で更新されてしまった、というよう なものです。
あるいは、自動倉庫のエレベータが動いている最中に位置調整ボタンが押されたた めに停止位置がずれてしまった、というとき、 エレベータが動作中に位置調整ボタン を受け付けてはいけないことが明記されていなかったため、 状態遷移のなかで位置調 整ボタンの操作を止める判断が欠落したのが原因というのであれば、これも仕様モレ です。
37
第1章 要求仕様にまつわる問題
多くの場合、 これらのケースは設計上のエラーと判断されてしまうと思われ ますが、原因を 「設計」 に求めても、設計のなかでチェックの必要性に“気づく ことを求めることになり、それではこの種の問題を解決する方法につながりま せん。むしろ仕様モレとして、 仕様上の書き方や気づきやすい表現などの工夫 を誘導することで問題の発生を未然に防ぐことができます。
また、画面操作の際に 「初期値」 が規定されていなかったため、 その画面が表示さ れた時点ですべての項目の初期値が 「0」 として処理され、そのまま設計データの項 目に 「0」 が入ってしまった、というのも仕様モレです。 この場合、 オペレータが必 ず全項目を入力してくれれば問題は隠れたのかもしれませんが、 操作の仕様では入力 する項目は選択できることになっていたためにバグとなったものです。
この種の仕様エラーは、 途中で一部の仕様を変更したときにも起きることがありま す。 最初は全項目入力することになっていたものが、テスト中に、 これでは操作性が 悪いということになって入力項目が選択できるように仕様変更されたときにデフォル トの仕様を変更するのがモレた、というケースがしばしば発生しています。
□1.2.2
解釈の違い
仕様の解釈の違いによるエラーは、単純な仕様モレと比べて、 その発生の仕方や背 景が少し複雑になります。 一般に、 要求仕様においては、 2つの段階で解釈の違い (ズ レ) が発生します。 1つは、顧客と設計者の間での解釈の食い違いです。 共通の言葉 を使っていても、 「個体」 が違うことでその言葉からイメージするものが違っている ことがあります。 そのため、システムが動くようになってから、顧客から「こんなも のを頼んだ覚えはない」 とか 「動きが違っている」 といったクレームが発生します。
この場合、 きちんと 「要求仕様書」 として文書にして確認することで、認識の食い 違いはかなり解消すると思われます。 曖昧な箇所でも2、3回往復して確認すること で食い違いは解消しますが、それでもそこで交わされる要求仕様書の構成や表現によ っては解消しないかもしれません。
もう一つの食い違いは、設計者同士の認識の食い違いです。 1人で開発する場合は 起きませんが、複数の人が仕様を解釈して設計する場合には、1つの仕様に対する認 識の違いが発生することがあります。 特に、 その機能がおよぶ範囲の解釈で認識の食 い違いが起きやすくなります。
38
12 要求仕様のトラブルの実態
たとえば、 画面からの操作仕様のところでは、日時の表示の際に 「YY. MM DD. HH AMPM」 などいくつかの形式が選択できるようになっていたので、入力された データも表示の形式のままで取り込んだところ、この設定情報は表示にしか使用せず 内部データの保存形式は1種類で時間も24時間制とのこと。 他の設計者はそのこと に気づいていたのに、 画面操作を担当した設計者は他の人とは違った解釈をしてしま ったのです。
解釈の違いは 「伝言ゲーム」 のなかでも起きることがあります。 たとえば 「演算の 結果は少数以下2桁で四捨五入する」 という仕様は厄介です。 一見すると具体的で、 仕様としては申し分ないように見えますが、そこで扱う計算式によっては、式の途中 でも四捨五入する機会が生じます。 人によっては何も気にせずに最終結果に対しての み、少数以下2桁で四捨五入するかもしれませんが、ちょっと気になる担当者は、リ ーダーに確認してみるかもしれません。 そのとき、 「最後の値で四捨五入すればいい んじゃないの。 Bさんのところではそうやっているようだよ」 と 「伝聞」が持ち込ま れて解釈がずれるのです。
要求仕様書に 「接続できるチャネル数は制限しない」 などと書かれていることがあ ります。 担当者によっては「これでは設計できない」といってリーダーか周りの人に 聞くのでしょうが、ここにも 「伝聞」 が入る余地があり、 「ハードで考慮できる上限 でいいんじゃないの」というコメントが「現在のハードの設計で想定されている上限」 に変わっていくのです。
これらのケースは、 曖昧な箇所が発見されれば仕様としてそこまで具体的に記述し ておけば防げたことですが 「説明」 として補足する方法もある)、 一般にこのような 仕様は 「設計作業のなかで考えるもの」 という認識があるため、 仕様書のところでは 問題にならないのです。
1.2.3 仕様の衝突 (矛盾) このトラブルは、個々の機能で必要または有効と考えられる仕様をすべて実現しよ うとすると、異なる機能のいくつかの仕様間で衝突するという状態です。 きちんと仕 様化する習慣がない組織では、この原因でのトラブルが発見されるのは、 QAテスト でも最後のほうになります。
厳密には、 衝突するのは 「要求」 のレベルではなく 「仕様」 のレベルです。 なかには、 要求のレベルでも衝突しそうなことがわかることがありますが、それは感覚的なもの
39
第1章 要求仕様にまつわる問題
であって、 具体的にどのような状況で仕様が衝突するのかということは 「要求」 のレ ベルではわかりません。
「高速でサンプリングしたい」
「サンプリングしたデータをリアルタイムで画面に表示したい」
という要求を仕様化しているなかで、サンプリングの間隔や画面の表示を更新する間 隔が決まっていきます。 ところが、 表示データへの変換に時間を要することがわかり、 表示の更新間隔に合わせるとサンプリングが間に合わないことが明らかになります。 あるいは、計測チャネルが「2チャンネル」 なら問題なかったものが、 「3チャネル」 に接続できることが求められると、サンプリング時間そのものが間に合わない、とい うことも起きてしまいます。
このように、 「衝突」 は、 仕様のレベルで起きます。 ところがこの種の仕様化を、 設計しながらあるいは実装しながら決めていくスタイルでは、 衝突に気づくのが遅く なり、気づいたときには作り直しになってしまいます。 あるいは、担当者が異なって いたために仕様が衝突していることに気づかずに、 QAテストの担当者から、 「チャネ ルを2つから3つに増やすとデータの取りこぼしが起きてしまう」というバグ報告書 が上がってくるのです。
この種のトラブルは、正常系を先に実現し、 ある程度落ち着いたところで異常系の 仕様を考えようとするときにも起きてしまいます。 正常系を実現するときには正常系 の仕様しか考えず、あとで異常系の仕様を組み込もうとしたとき、 異常の判断をする タイミングがうまくつかめずに大幅に改修する事態に陥ったりします。 そして、 新た なバグをこの改修作業のなかで作り込んでしまうのです。
衝突の問題は、早い段階で全体の仕様化を進めないかぎり防ぎきれません。 仕様が 衝突していることに気づいたのがQAテストも半分消化したところだったりすると、 いまから望ましい状態に改修する時間がなく、やむなく片方の仕様に制限をつけてし まうことになります。 最初から制限をつけるのと違って、 ソースコードまでできたと ころで動きを止める作業になるので、それだけ修正ミスが入りやすくなります。 当然 それらの機能は最後まで実現するものとして投入してきた工数は報われません。
1.2.4 テスト不足
最近、テストが不十分な状態で市場に出してトラブルケースが多くなっているよう
40
12 要求仕様のトラブルの実態
です。 組み込み製品やインターネットのソフト、 オンラインのソフトなどはニュース になったりするので多くの人の知るところとなりますが、 企業内のシステムでもテス ト不足のままリリースしたことで社内が混乱するケースも少なくないようです。
このようなトラブルが多発するのは、基本的に、テスト期間が短いのとテスト内容 が不十分なことが背景にあるものと思われますが、 このいずれにも要求仕様が関わっ ています。
テスト期間は、最初から短いのではなく、 設計作業の遅れのしわ寄せを食っている ことが多いのです。 そして設計作業の遅れの原因の過半は、 要求仕様が曖昧な状態で 作業にとりかかっているか、 仕様の作成に時間 (正確には工数ではなくカレンダー上 の日程)がかかりすぎているのです。
テストの担当者も何をテストすればよいのかわからず、テストケースが不十分にな っていると思われます。 これは、その現場にある要求仕様書からは何ができればよい のかわからず (検証可能性を満たしていない状態)、 テスト担当者が経験のなかで手 に入れたテストパターンに依存しているからです。 なかには、 設計者がそのままQA テストに相当するテスト作業) を行っているケースもあります。 バグを作り込んだ 人が自分のバグを見つけるという体制では検出モレが起きても不思議ではありませ ん。
もう一つのケースは、要求仕様書がテストチームに提示されるのが遅いということ もあるようです。 要求仕様書が設計作業と並行してまとめられている場合は、 結局、 設計作業がひととおり終わった時点で要求仕様書が完成 (?) し、 ソースコードと一 緒にテストチームに引き渡されます。 このような状況のなかからは、テストモレのバ グが市場に出ることを防ぐことはできません。
1.2.5 市場からの反撃も
このように、 あまりにもいい加減な状態で市場に出てくるため、 最近では消費者も 賢くなり新製品はしばらく見送る傾向が強くなっているようです。 メーカーは、はな ばなしく新製品の発表を行っても消費者は冷静です。 パソコンのキーをたたいて、 イ ンターネット上での 「評価」 を確認してから行動を起こす人が増えています。
その結果、 最初のロットはムダになります。 あり得ない納期をソフトウェアの設計 チームに押し付けてテストもそこそこに強引に発売に “こぎ着けた” としても、トラ ブルが発生して最初のロットは返却されてしまいます。 それだけではありません。 メ
41
第1章 要求仕様にまつわる問題
ーカーの信用は失墜し、ブランドにも傷がつくのです。
42
ソフトウェアの設計者たちもバグに対する認識が甘くなっています。 その一つの原 因として、 製品によってはあとで「ダウンロード」 することによってソフトの入れ替 えが可能になっていることが考えられます。 もちろん、 すべての製品でこのような対 応が可能になっているわけではありませんが、ソフトが複雑になっている製品ほどネ ットにつながっていたり、近くのショップに持ち込むことでプログラムの入れ替えが 可能になります。
こうした状況がテストの甘さを許容する方向に作用しており、 設計者も自分たちの 作業の遅れでテストの工数を食いつぶすことに対して抵抗感が薄れているようです。
1.3 曖昧な仕様で作業に入っている
このように、 多くのソフトウェアの開発現場では、 要求仕様の内容が不十分な状態 のまま設計作業に入っていきます。 前回のときも、 実装段階に入って次々と仕様変更 を引き起こして何日もかかって作り直したり、 多くのバグつぶしに振り回されたりし たにも関わらず、今回のプロジェクトでも要求仕様は何も変わっていません。
終了後のバグの原因プロセスの分析では、 「仕様モレ」 とか 「仕様の勘違い」など と分類されたケースが少なくともバグ全体の1/3はあったのに。 そして、反省 会では 「今回の経験を次のプロジェクトに生かして・・・・・・」 と言ったのに。 1ヶ月 前から始まった今回のプロジェクトの要求仕様書の構成も、 書き方も、見積りも、ス ケジューリングも、何も変わらないまま作業が進んでいます。
□1.3.1
構造が傷ついていく
プロジェクトが始まって、 最初は何らかの形で 「要求仕様書」 の作成にとりかかり ます。 この作業がまったく省かれることはないと思います。 ただ、 要求仕様書の構成 や書き方が、前回のときと何も変わっていないのです。 要求仕様書の構成が変わって いないということは、 要求仕様書に対する考え方や、仕様を抽出する際の視点なども 変わることができない、ということに気づいていません。 そうしてそれなりの時間を 投入するのですが、 作られた 「要求仕様書」 は前回と同じように仕様として曖昧な表 現のままであったり、 仕様化されていなかったりするのです。 この状態では仕様間で 互いに衝突することが見えません。
そのうえ、仕様化作業の前にサイズに基づいた 「仮説見積り」が省かれたため、要
13 曖昧な仕様で作業に入っている
求の仕様化作業に割り当てた工数も根拠がありません。 結局、 「納期に間に合わない」 ということで、そそくさと仕様化作業は 「終了」 します。 レビューでいくつかのモレ などが指摘されるものの、 問題の多くは曖昧な表現のなかに隠れたままです。
こうして、 仕様化されないまま設計工程に入っていきますが、 ここでも厄介な問題 が発生します。 「設計する」 ということの意味が認識されていないため、設計作業の 成果物としての 「設計書」 がイメージされていません。 要求仕様書が仕様のレベルに なっていないため具体的に実現方法を考えるところに入れない、ということも原因に なっています。
結局、 設計工程のなかで仕様化を補う作業が行われ、 「設計」 の成果物としては設 計書としての体系をなさず、いくつかの機能についての部分的な実現方法の「メモ」 の集まり”となってしまいます。 そこでは、 今回の機能や品質の要求を満たすための 効果的なデータ構造や処理構造がきちんと設計 (表現) されていません。
その後、断片的に実現方法を考えていくなかで、 そこにある仕様書の表現ではデー タチェックの範囲が不十分なことに気づき、 依頼者に質問のメールを出します。その 返事が返ってきたとき、 「設計のメモ」 に対応方法の注意を書き残します。このとき 要求仕様書が修正されることはありません。 なぜなら、いまは 「設計」のステージだ からです。
この間も、現場の人たちには「納期に間に合わない」 という圧力がかかっています (最初に仮説見積りを省いたために、この圧力から逃れることはできません)。 そのた め、 仕様がわかっているところやはっきりした箇所があれば、少しでも早くコーディ ングに入ろうとします。 このとき、彼にとっては「実装」 がメインの作業に変わって いきます。 この時期になると仕様の曖昧さが次々と見えてきます。 同じ文書でも1ヶ 月前には見えなかったのに、コードを書こうとすると測定データの単位や精度が決ま っていないことに気がつくのです。
あるいは、 3週間前に書いたソースコードの部分と衝突していることに気づきます。 ホストに送信する前に、いま扱っている機能のなかで生成されたデータと比較して 条件によってはデータの一部を入れ替えなければならないことに気づいたのです。 3 週間前に書いたソースコードを読んで、そのときに考えたこと (仕様) を必死に思い 出し、 そして強引に送信のタイミングを遅らせたり、データをグローバルで参照でき るようにしたりしてプログラムの構造を崩してしまうのです。
*1 プロジェクトが終了したあと人のディレクトリには 式な文書になることができなかったん残されてい ます。
43
第1章
仕様にまつわる問題
このような場合でも、最初から関数の呼び出し構造がフラットに設計されていれば (図11参照) 対応しやすいのですが、 縦につながった呼び出し構造 (図1.2参照)で
図1.1 呼び出し構造がフラットになっている例
画像データを 補正処理する 画像データを調整データを 読み出す 選択する 色補正データ で調整する コントラスト データで調整 する シャープネス データで調整 する 補正済み ファイルに 保存する
処理と管理を分離した状態で呼び出し構造が作られているため、下位層の モジュールは処理に専念する形になっていて、 再利用性が高くなっている。
44
図1.2 呼び出し構造が縦につながった例
画像データを 補正処理する 画像データを 読み出す 調整データを 選択する 補正済み ファイルに 保存する 色補正データ で調整する コントラスト データで調整 する シャープネス データで調整 する 処理のなかで下位のモジュール を呼び出しているため、 「色補 正データで調整する」 などのモ ジュールが再利用しにくい。
1.3 な仕様で作業に入っている
は簡単には対応できないので、どうしても強引な対応になってしまいます。 あとで、 エラーチェックが必要なことがわかってその場でチェックしても、 縦に深くなった構 造のなかでエラー状態をどうやって上位の関数に返すか、 まさに 「決定の分離”」に よる障害が発生するのです。 なかには、 エラーコードをグローバル領域に置いて上位 の関数に通知するという、 信じられないこともやってのけます。
□1.3.2
"潜在バグ” の意味
派生開発の際のバグの原因分析を見ていると 「潜在バグ」という分類を目にするこ とがあります。 それは、 今回自分が埋め込んだバグではない、 前の人が埋め込んで発 見されないままになっていたのを "たまたま” 自分が掘り出してしまった、という意 味です。 一般的には前回のテストが不十分だったことになりますが、なかには当時の 仕様が曖昧だったため、 そのときの担当者が適当に判断してソースコードにしてしま ったものも少なくありません。
たとえば、 計算結果の精度については何も規定がなかったので、 小数点以下2桁の ところで四捨五入して表示することにしました。 そのときはそれで何も問題なかった のですが、 今回の派生開発では、その値をある条件のもとで集計して平均値を出した り、いろいろな分析に使ったりするような仕様が追加されました。 そこで今回の担当 者は、表示に使われていた計算結果を集めて求められている計算処理をしたのですが、 テストで計算の精度がおかしいというコメントがついて返ってきました。 調べてみる と、小数点以下2桁で四捨五入された数値を使ったことが誤差につながっていること がわかったのです。
このとき、今回の担当者としては「そんなの聞いていないよ」 と言いたいところで しょうが、とりあえず四捨五入される前の値を確保して集計するように修正し、 バグ の報告書には 「潜在バグ」 と分類したのです。 “私のバグに数えないでよ”という意 味です。
確かに、結果として 「潜在バグ」 というのは存在します。 しかしながら、 「潜在バ グ」と分類した瞬間に、なぜそのようなバグが入ったのか、いや発見されずに残って しまったのか、というところに踏み込まれることはありません。 こうして、「潜在バグ」 というハンコを押したことで、 本当の原因が追及されることはなく、彼もまた次の担 当者に向けた 「潜在バグ」 を仕込むことになるのです。
「潜在バグ」が入り込む原因には、単にテストモレというのもありますが、仕様が し構造が縦につながった状態になると、決定の分離が起きやす くなります。 エラーなどの状態をつかんだ関数と、それを判断してエラ の表示などの形で対処する関数との間が開きすぎている状態
❤2 ーをいいます。 保守の際に壊されてしまう危険性が高い。 呼び出
45
第1章 要求仕様にまつわる問題
46
曖昧な状態が原因になっていることも少なくありません。 計算に関する仕様として小 数点以下2桁で四捨五入されていることが明示されていれば、 そして今回の集計の機 能に関する仕様のところで計算の精度が明らかにされていれば、四捨五入される前の 値を使うでしょうから 「潜在バグ」にはならないのです。
□1.3.3 仕様書の良否の判断ができない
このように、 要求仕様書が曖昧な表現のまま設計作業に入ってしまうのも、いつま で経っても仕様書の構成や書き方が変わらないのも、 そこにある要求仕様書の“善し 悪しを判断する手段や基準を持っていないからです。 その要求仕様書は、 その組織 で営々と受け継がれてきた構成だし、他の人も同じような書き方なのです。
いろいろな要求仕様書に関する文献を読んでも具体的な事例は出てこないし、 自分 たちが書いているような書き方について判断できるような材料には巡り合うことはあ りません。 結局、 今回もまったく同じ構成で書いていくことになるのです。
その要求仕様書では仕様が曖昧なため、 設計作業や実装作業のなかで仕様を補いな がら作業が行われます。 なかには 「実現方法に不安がある」 というので、 試行しなが ら仕様を作っていくことも行われています。 一般にそのような組織では、設計や実装 の工程で明らかになった 「仕様」は、要求仕様書に書き戻されることはありません。 「試 「行」 は当面の問題をクリアするために行っただけで、 そこで明らかにした仕様が他の 機能との間で衝突が起きていることに気づくのはずっと先の話です。 このように、仕 様の曖昧さを判断できないために、 試行しては作り直すという作業が展開され、 テス ト工数の半分を侵食してしまうのです。
この問題は、 設計技術では解決しないことに気づかなければなりません。 仕様が曖 昧な状態をカバーしてくれるような設計技術はありません。 あるとすれば、設計中に そこで扱っている機能の仕様の曖昧さに“気づかせてくれる” 程度です。 そのときに 気づいたことを仕様書に書き戻さなければ、 他の仕様との衝突や不均衡には気づかな いのです。
1.4 顧客からの仕様変更が頻発して・・・・・・
筆者のところにコンサルティングの依頼が持ち込まれるときの多くのパターンは、
「依頼者からの仕様の変更が頻発して混乱が収まらない」
第1部 要求仕様にまつわる問
1.4 顧客からの仕様変更が頻発して・・・・・・
というものです。 そこでいろいろと話をするのですが、 だいたい以下のような言葉が 聞かれます。
「顧客から仕様変更が頻発して収集がつかないのです。 何か (依頼者を) 制御す る方法はないでしょうか」
( 筆者のアドバイスを依頼者に対する盾にしようというのでしょうか)
「CMMI の要件管理を導入して、 要件の変更を制御したい」
(この場合の制御” とは押さえ込むことを意味しているようです)
「プロジェクトの中~後半に入って仕様の変更が増えて困っています」
実際、 このような組織では、 仕様の変更率も50%を超えることはめずらしくあり ません。 どうやら、仕様変更を押さえ込むための “金の杖" を、 私から手に入れよう としているのかもしれません。
あるいは、
「顧客はまともな仕様が書けないので、 設計する人たちは困っています。 何と かならないでしょうか」
というケースもあります。 いったい、 コンサルタントに何を求めているのでしょう か。 依頼者にはまともな要求仕様書を書けないと認識していながら、自分たち (設計 者側) はそれをカバーする手段を持とうとせず、 仕様変更で混乱する責任を依頼者の せいにしているように見えます。 この場合の依頼者とは、 外部の顧客のケースもあれ ば、 社内の企画部門の人や営業部門の人だったりします。
確かに、設計者たちは、効果的な要求仕様書の書き方を身に付けていることはほと んどありません。 少なくともそのような訓練を受けていないと思われます。 その組織 で "伝承” されてきた形を引き継いでいるだけです。 したがって、 まずは設計者に要 求の仕様化技術を習得してもらう必要があります。 実際にそれを解釈しソースコード に変換するのは、ソフトウェアエンジニア (設計者) のほうですから。
ところで、 依頼者のほうで書く要求仕様書が 「完璧」 なものであれば、 "仕様モレ” は起きないのでしょうか。 仕様の誤解は起きないのでしょうか。 残念ながら、いまの ような 「自然言語」 で書いているかぎり、 仕様モレや仕様の誤解を根本的に防ぐこと はできないでしょう。 できるのは、仕様モレなどの発生の確率を許容範囲のレベルに 下げることだけです。 依頼者の書き方にバラつきが生じる可能性がある以上、 問題の
47
第1章 要求仕様にまつわる問題
48
発生を減らすには、設計者が要求を仕様化し、 仕様モレを発見するスキルを手に入れ るほうが有効です。
□1.4.1 現状はどうなっているか 現場からは 「顧客からの仕様変更が頻発して･･････」という声が聞こえてくるのです が、実際はどうなっているのでしょう。
このような顧客には、コンサルティングに入る前に実際に要件が変更された時期と 変更件数のデータを集めてもらったり、コンサルティングのなかでも要件管理の一環 として要件変更のデータを収集してもらったりします。 その結果、 多くの場合、 要件 の変更はベースの仕様項目数に対してほとんどが40%を超えています。 それだけで はなく、 変更がいつ発生したかというデータと合わせてグラフにすると、 図1.3のよ うに後半に集中しています。
一方、設計者からの仕様の問い合わせのデータと組み合わせてみると、時期や件数 が要件の変更と同期していることがわかります。 つまり、 設計者がプログラムのコー ディングを進めていくなかで仕様の曖昧な箇所に遭遇し、 そこで依頼者に質問メール や確認のメールを発したことが仕様変更のきっかけになっているのです。
図1.3 仕様変更が後半になって発生している
仕様変更の件数 双方が合意 (ベースライン設定) この次期の仕様変更は、使 用制限がつくことが多い コーディング作業のなかで 仕様の問い合わせが急増 し、仕様が決まっていく 時間 本格的に設計作業に コーディング作業に 入った(早すぎる) 入ったと思われる
最初に交付された仕様書が、 仕様のレベルに達していないのが原因だが、 仕様の変更が、 設計や実装作業が進むなかで発生している。
問題
1.4 顧客からの仕様変更が頻発して······
コーディングという作業は仕様が明確でないと前に進みません。 したがって、まっ たく仕様の不備に気づいていないケース以外は、この段階で仕様の曖昧さや必要な仕 様が定義されていないことに気づきます。 多くの開発現場ではこのようなデータは収 集していないかもしれませんが、 程度の差はあるものの、ほとんどがこのようなパタ ーンになっているものと思われます。
このように、 仕様の問い合わせと仕様の変更に関するデータを収集してみることで、 プロジェクトの後半の設計からコーディングの時期に変更が "頻発”していることが わかるはずですし、 実は仕様変更を発しているのは依頼者ではなく設計者自身である こともわかるのです。
依頼者は仕様と呼べるものを書けないことが多い
設計者も、 早い時期に仕様の不足をカバーできていない
仕様の変更の多くは、 設計者の問い合わせをきっかけに起きている
しかも設計段階から実装段階にかけて多発しているために作業が混乱している
この事実から目を背けていては、 要求仕様に関する問題は解決しません。
□ 1.4.2 最後になって機能に制限がつく
なぜ、 設計者がこの時期に仕様の問い合わせを発するのでしょうか?
原因の一つは、依頼者から渡された 「仕様書」 は表現が曖昧で仕様書としての適切 な構成を持っていないことにあります。 「用語の説明」 だと思っていると、それが仕 様だったりします。 「機能概要」 というなかに書かれていることが、 その機能の全体 の制約だったりします。
仕様としての表現が曖昧ということは、これを読んでもどのような動きが求められ ているのかよくわからない” 状態に陥ります。 そのために何度か読もうとするので すが、 機能同士の関係もはっきりせず、 何度読んでもイライラするだけです。 いつま でも仕様書を検討しても埒が明かないために、 「見切り発車」で設計作業に入ってい くことになります。
「設計する」 という作業は、 “実現する方法" を決めていく行為を含んでいます。 そ の過程で、 曖昧な箇所を確定させながら進むことになるため仕様の問い合わせが次々 と発生します。 設計自体も階層的に体系だったものではなく、 機能ごとに実現方法を
49
第1章 要求仕様にまつわる問題
思いめぐらせて難しそうな箇所 (機能) に足を止めてはメモ (実現方法) を残すよう な作業になっています。 実現方法について考えようとしたとき、運よく仕様の不備が 発見されて問い合わせが行われるのです。 ただしこの場面では、 メールなどによって 双方で仕様が確認されても、要件管理や構成管理がいい加減な組織では元の仕様書が 更新されることはないかもしれません。
この曖昧な箇所の 「発見」 は、 実装工程に入るともっと顕著になります。 設計作業 では 「部分」 の仕様しか具体的に検討されなかったのですが、 実装作業では 「全部」 がコーディング作業の対象になります。 ソースコードになるためには 「具体的な仕様」 が必要になり、担当者も 「具体的な仕様を見つける目」になっています。 そのため次々 と仕様の不備が発見され、 問い合わせが出されるのです。
さらに、実装工程の後半ぐらいになると、 以前に扱った仕様 (すでにソースコード になっている)との間で矛盾 (衝突) が発生していることに気づきます。 そこで1週 間ほど前に書いたソースコードを画面に表示しながら、 そのときに気づいた 「仕様」 を思い出すのです。 この 「仕様」 は必ずしも要求仕様書に書かれているわけではあり ません。 彼がコーディング作業のなかで仕様の隙間を埋めてソースコードにしたので す。
依頼者に問い合わせた部分は、メールをたどって合意した内容を思い出すことがで きますが、 メール文では問題の箇所だけでやりとりされていてその内容が仕様書に書 き戻されていないため、 前後の仕様との関連は見えません。 その上、ソースコードを 見ながら1週間前の状態に頭を戻して、関係する箇所のソースコードを手直しするの は容易ではありません。 この頃になると、 1日の半分以上をこのような 「時計の巻き 戻し」 に使われていることもあるのです。
終盤になってくると、こうした「時計の巻き戻し」に費やされる時間は大きな負担 になってきます。 そのため、 この時期に発見される仕様の衝突は、片方の仕様に制限 をつける方向で依頼者に “要請” が出されます。 この要請は「どうしましょうか」と いう問い合わせではないのです。 「過去に戻って修正している時間がないので、こう いう制限をつけてもいいですか」 という要請なのです。
本来は、 初期の仕様化の段階でこの衝突状態を発見し、関係する仕様間で調整し、 平均的な妥協が図られるべきなのですが、もはや一部の仕様は 「100%」 の状態でコ
50
B
15 要求した機能を満たしていない
ーディングされている(この時点ではそのソースコードが正しく実現しているかどう かわかりません) ため、 あとで衝突が発見されたほうは著しい制限がつけられること になります。
依頼者としてはこの制限の要請は不本意なものなので、すんなりとは受け入れるこ とはできません。 でもこの要請を断ると、「これまでの部分の〇〇%が作り直しにな ります」 という返事が返ってくることは目に見えています。 しかも「もともとの要求 仕様書の内容の不備が原因ですので･･････」 と、依頼者である自分に責任のボールが投 げ返されることも見えています。 やむなく制限の要請を受け入れるとして、設計側に 「まだ、変更ができるのでしょう」 と言って、 新しい要件 (主に機能要求) が “ねじ 込まれる”ことになります。 こうして 「仕様戦争」 が始まるのです。
設計側は、この追加を 「追加」 として主張できるかどうかを考えます。 仕様の不備 のおおもとの原因が依頼者の書いた要求仕様書の欠陥だとしても、それを発見するの が遅かったという気持ちもあるので、この追加の要請をむげには断れません。やむな く 「取引」 として受け入れることになりますが、 設計者としては、こうして “期限内” にねじ込まれた仕様 (実際には機能レベルの追加) の負荷が大きいため、 「顧客から の仕様変更が頻発して･･････」という言葉になって出てくるものと思われます。
「依頼者には、自分たち (設計者) が望むような仕様書が書けない」 というのであ れば、 初期の段階で設計者のほうで依頼者から出された仕様を補足すればよいのです が、設計者に仕様化のスキルが不足しているために初期の段階では補足されません(と いうより、 できません)。 その結果、 実装段階になって仕様化が行われることになり、 そこで衝突する仕様の対応策として 「制限」をつけたことで 「おまけの要求」 が追加 されるのです。 これが 「頻発する仕様変更」 と 「いびつな仕様制限」 の実態です。
1.5 要求した機能を満たしていない
今回のプロジェクトは納期も大きく遅れたうえに、 テストしてみると要求した機能 も十分に達成していない、という状態はしばしば発生しています。 特に、異常操作の 対応や全体の操作性や応答性などの品質が悪く、とても完成したものとは認められな いケースもあります。
機能要求の一部の未達成は、場合によっては代替方法でしばらくカバーできること がありますが、品質の未達成は一般に代替方法はなく致命的なものになります。
51
第1章 要求仕様にまつわる問題
このように要求を満たさない最大の理由は、
●そこで交わされた 「要求仕様書」 が 「仕様」 といえるレベルに達していないこと にあり、
②完成品として含まれるべき 「品質要求」 も記述されておらず、
関係者が、その不十分さに気づくためのスキルを持ちあわせていないこと
にあります。
1.5.1 専門のテストエンジニアがいない
適切な要求仕様書が書けないということは、 求められているプログラムを作れない というだけではなく、 そこにある 「要求仕様書」 が仕様として適切なものかどうかを 判断することができないということをも意味しています。 そして、 要求仕様書に
何が書かれていればよいのか?
どのように書かれていればよいのか?
がわからない状態では、 テストエンジニアも適切なテストケースを設計することがで きず、結果として、テストモレが生じやすくなります。
もちろん、組織によっては、その製品やシステムについて豊富な経験を持ち、要求 仕様書に頼らなくても適切なテストができる人がいるかもしれません。 でも、 その人 がいなくなった途端に、 仕様モレや仕様の誤解が発見されずにテストモレとなってし まうのは明らかです。
また実際には、要求仕様書の内容が不十分な状況では設計者の作業が大幅に遅れま す。 そして、 評価組織の力が弱く設計者の「下請け」の状態になっている場合、 最初 に確保したはずのテストの工数は設計者に奪い取られているでしょうから、最終期限 を背中に背負っているテスト作業については最悪の状態になります。
そのような組織では、まともなテストケースを設計することができないでしょう。 要求仕様書の内容が曖昧な状態だと、 それぞれの機能に対応する「パラメータ」が見 えません。 「PCから送られてくるデータを印刷する」という機能要求に関係する「パ ラメータ」 をすべて把握できなければ、 適切なテストケースが設計できないはずです。 たとえば、印刷するという機能を取り上げても、 用紙サイズ、 印刷領域、 印刷方向、
フォントの種類、 文字サイズ 文字装飾、 片面/両面の指定、 印刷データの受信速度、
52
1.6 納期の遅れとなって表面化する 53
ページ内の印刷データ量、 印刷エラーの発生など、 多くのパラメータが絡んでいて、 これらが要求仕様書から見えなければ、テストモレを起こすのです。
要求仕様書の内容が曖昧なためにテストケースが設計できないということは、 効率 のよいテスト作業も期待できないことを意味します。 一方で、そのような要求仕様書 では、設計者もバグをたくさん仕込んでしまいます。 その結果、テストはいつまで経 ってもバグが収束せず、 無意味なテスト作業に時間が吸い取られていきます。
このような状況のなかで、 テストエンジニアはいつ学習するのでしょうか。結局は テストエンジニアを肉体労働のなかに閉じこめてしまい、効果的なテストケースを設 計するための研究もできず、優れたテストエンジニアも育たないのです。 優れたテス トエンジニアを持たないということは、設計のエンジニアにとって大きな損失である と同時に、組織としても事業を継続することに対して巨大なリスクを背負い込むこと になります。 これも要求仕様書の問題に端を発しているのです。
1.6 納期の遅れとなって表面化する
要求の仕様化が不十分な状況では、 "予定通り” に設計工程に入っても、 具体的に 何ができればよいのかが見えていないために設計作業ははかどりません。 揚げ句は、 設計工程のなかで仕様化作業が補われ、 設計作業で行われるべき本来の作業が省かれ ます。 当然このままコーディング作業に移行したとしても、そこで実現すべき仕様の 不十分さに直面して慌てて仕様の確認に走ります。 この間、時間はどんどん過ぎてい きます。
もともと、そこにあるのは根拠のないスケジュールであり、 そのスケジュールに追 われるように無意味な 「工程遷移」 を行っていることも少なくありません。 でもそれ は、“予定通りに次の作業に入りました" というアリバイの工程遷移に過ぎません。 そうしてあるとき (多くの場合、 コーディング作業に入ることになっている期日が 迫ったところ)、 これまで進めてきた作業が、 なんと3ヶ月も遅れていることが発覚 します。 いままでの工程遷移は、いったい何だったのでしょう。 それは単なる見せか けに過ぎなかったのです。
フレッドブルックスが 『人月の神話』 のなかで述べているように、 作業の遅延は、 ある日突然3ヶ月も遅れるわけではありません。 毎日数時間の遅れが積み重なった状
第1章 要求仕様にまつわる問題
態で白い布に覆われたまま先送りされてきたものが、ある日、その布の膨らみが大き
くなりすぎて隠しきれなくなって布が取り除かれただけです。
納期が遅れる原因は数多くあります。
顧客との要求についての認識の食い違い
中盤以降での仕様変更の多発
バグが収束せず混乱が増幅
変更制御が野放しで修正欠陥が多発
メンバーのスキルが今回の要求に対して不足
要員の人数が不足
チーム運営の失敗
新しいツールが未完成
見積りのミス
リスク管理の失敗など
そのなかでも、 要求仕様が原因になるケースが一番多いのです (図 1.4 参照)。
図1.4 仕様エラーに多くの時間が失われる
-QAテストでのバグを集計し分類すると、 要求仕様に関するバグが6割 程度を占める。 ただし、現場の認識は3割程度で、残りは 「設計エラー」に分類される 傾向がある。 仕様関係のバグにかかる時間 仕様 *設計 コーディング 4時間/1件 400時間/100件 + 25% 60% 要件管理のなかで仕様変更の際 に費やされる時間
派生開発の場合、 このなかの7割が変更仕様”に関するエラー
もちろん、 仕様に関するトラブルの件数にはバグに伴う仕様変更も含まれます。
54
1.6 納期の遅れとなって表面化する
テストでバグが多発して求められていた納期までに収束しそうもない
たび重なる仕様変更によって設計作業で何度も後戻りしている
依頼者に仕様を確認するたびに作業が止まってしまう
終盤での仕様の変更で双方がもめていて作業が止まっている
チーム間の利害を調整する人がいないので、 自分たちの都合を主張しあって何も
決まらない
最初に見積もった工数と大幅にズレてしまった
このように、 要求仕様の問題が納期の遅れの最大要因なのです。
1.6.1 何度も作り直している
アーキテクチャの設計に影響を与えるような重要な仕様や、 クリティカルなデータ の収集タイミングが存在するのに、 要求仕様書の構成や記述の問題によってはこれら の仕様が見えず、平凡なアーキテクチャを持ち込んでしまうことになります。
簡単な仕様モレであれば、 「if文」 を追加してモレたソースコードを加えることで 対応できるかもしれません。 でも、システム設計の段階で判断を誤ってシングルタス クの周期構造のアーキテクチャを持ち込んでしまえば、速やかなデータ収集が保証で きない状態になります。 また、 単純な配列のデータ構造を持ち込んだために、 ダイ ナミックなデータの削除や回復処理が簡単に実現しないという事態も起きてしまいま す。こうした事態が生じたときは、ほとんどの場合、 一部または広い範囲の作り直し になるので、 間違いなく納期の遅れとなって表面化します。
こうした作り直しの原因には、 要求仕様の問題の他にデータ構造の知識やシステム レベルの設計技術の不足も考えられますが、それでもこうしたクリティカルな場面が 読み取れるような要求仕様が早い段階で用意されていれば、いままでとは違った対応 が必要なことには気がつくはずです。 実現すべき仕様が見えている状態で、 担当者の 設計技術が足りないようであれば、 解決方法 (実現方法) のアイデアは出てこないで しょうから、周りの人に 「ヘルプ」 を発信するでしょうし、リーダーなども彼の設計 結果には注目しているはずです。 もちろん、 このような場面では「リスク管理」 の出 番でもあります。
□1.6.2 試作の発想が消えない 今回の製品では、いままでとはケタ違いの高速のサンプリングによるデータ処理が
55
章 要求仕様にまつわる問題
第1
求められているというとき、実際にどれくらいのレベルまで実現可能かは誰も見えて いないかもしれません。 そのとき要求仕様書には、
「目標として500μsのサンプリングが可能なこと」 「1分間にA4で50枚の印刷が可能なこと 「印刷時の騒音を○○db以下に抑えること」
56
というように表現されています。
通常、この種の要求は、 これ以上は仕様に展開されていないと思われています。 そ の理由は、 本当にこれが実現するかどうかわからないからです。 そこでとられる行動 が 「試作」 です。 仕様が曖昧で、 そこから明確な 「ゴール」、 あるいは確実な達成の ルートが見えていないときは、 「試作」 が選択されることが少なくありません。
確かに、 実現するかどうかの最後の詰めは 「試作」で確認する必要があるかもしれ ません。 組み込みシステムの場合はソフトウェアだけでは実現しないことが多く、回 路設計やメカ設計の部門との連携作業になるでしょう。 でも最初から 「試作で確認す る」 と決めてしまえば、 周辺の仕様化も止まってしまいます。
それよりも、「500μsでサンプリング」 するとして、そのために実現しなければ ならない 「仕様」 を “決めていく” のです。 アナログデータを取り込むところのチッ プの性能、 画像に表示するための処理に関わる仕様など、「500μsでサンプリング」 を支えるための仕様を決めていきます。
この段階の仕様は、あくまでも 「できてほしいこと」の具体的レベルでの記述であ って、 設計方法を書くものではありません。 しかし、 仕様には設計方法を “誘導" す る力を持っています。 仕様によって設計する際のデータ構造の選択や処理方法が決ま ってくるのです。
そして、こうしたレベルの仕様を書いている (決めていく過程でもある) ときに仕 様の衝突も見えてくるので、その場で調整します。 当然、 どこまで実現できるかも見 えてくることがあります。 状況によっては、 "別の方法" を誘導するような仕様に変 える必要が生じます。 これ以上の性能は1つのCPUで出すのは困難ということになれ ば DSPを使ったりする方法を想定し、 仕様の一部を変更します。
本来、 「仕様化する」という行為は仕様を “決めていく行為" でもあります。一方、「試 作」 も、 決めきれない仕様を試作することで決めていく行為でもあるのですが、 そこ まで仕様化する技術を持ちあわせていなければ、 「試作」によって実現可能な仕様を
B
1.7 品質要求に応えられない SE
確かめるしかないかもしれません。 当然、 完成までの時間は引き伸ばされてしまいま す。
それ以上に問題なのは、安易な 「試作」 の発想にはその試作で確認する項目も拾い きれないという問題を含んでいます。 もともと仕様化できないレベルで出てきた 「試 作」 ですから、そこで確認される項目は必ずしも表現されていないことが多いのです。 その結果、 1回の試作で確認されることは限られているので、試作は何度か繰り返さ れることになります。
当然、 納期に影響を与えますが、 現場の人たちは 「試作」 しなかったら実現性は見 えなかったということで押し切るでしょう。 しかし、市場の要求とのズレは、 仕様化 技術を持たない組織に対して容赦ない判定を下すでしょう。
1.7 品質要求に応えられないSE
ソフトウェア技術者のなかには、これまで機能要求にしか対応してこなかったため 品質要求に応える方法を知らない可能性があります。 いや、その前に品質要求の仕様 化の方法を持っていないかもしれません。
それでも、 「応答性 (パフォーマンス)」 など、 それぞれの機能に付随する品質要求 に対しては、 選択したバッファ構造がうまく機能するかもしれません。 しかし、デー タ構造の選択がそこで求められている応答性を決定づけることに気づかないと、 求め られている応答性を常に満たすための設計ができない可能性があります。 見かけ上は 今回の応答性の要求に応えていても、 この後の派生開発でさらに高いレベルの応答性 が求められたとき、 そこでなされた設計の延長線上では対応できない可能性も出てき ます。
これに対して、「保守性”」 という品質要求は厄介です。 機能とはまったく関係な いため、 通常の 「機能テスト」 では実現を確認できません。 設計書のチェックや、ソ ースコードの 「静的解析」 を行わないと検証できません。 そして、 この要求が満たさ れていないことの影響は、次回以降の派生開発の作業のなかで表面化します。
たとえば、今回の派生開発では簡単な修正で実現できると思われていた仕様変更が、 グローバル領域に定義されたデータが絡んでいて、 内容が更新されるタイミングが複 雑で処理構造の変更を伴ったために、予定よりも20倍もの工数がかかってしまうと いう事態になるのです。
*3 「保守性」の定義が変化する兆しが見えています。 詳し くは 「8.15.3」 を参照してください。
57
第1章 要求仕様にまつわる問題
前回の新規開発の際に、 発注側の責任者から「今後の派生開発が円滑にできるよう に作っておいてほしい」 という 「要求」 が出されていたし、 設計側も 「わかりました」 という返事を返しているのですが、 しかし、この保守性の要求を 「仕様化」 したもの はありません。
機能要求に限らず品質要求も、仕様化されない要求は実現しないのです。 もちろん、 仕様化されても、なかには、 それを実現するための設計技術が必要なケースもありま すが......。
□1.7.1 保守性要求に居直るソフト会社 逆に、このような 「品質要求」 を加えた顧客に対して、 ソフトウェア企業のエンジ ニアが
「いままでこんな要求はなかったじゃないですか。 機能と何の関係があるんです 「か」
とか、
「これも“要求 ” ですので、 別に料金をいただくことになります」
と食ってかかることもあるくらいです。 家を建てる際に、 "使いやすさ ” を要求したら、 追加料金を請求された、というのと同じです。
それでいて、コピー&ペーストで、1つの関数が3000行にも達するプログラムを 平気で作ってしまうのです。 あるいは、 1000個を超えるグローバル変数を定義し、 関数のパラメータはほとんど「空」 の状態で書かれているケースもあります。 これで は 「C言語」 で書いていても、ほとんど 「アセンブラ」 の世界です。 これで金をとる のですから何をかいわんや、です。 これらは、 最初に 「品質要求」 を明示し、 その仕 様化を双方で確認しておかなければ防ぐことはできません。
確かに、多くのソフトウェアエンジニアにとって、 「保守性」 の要求を目にする機 会は少ないでしょう。 その上、 「機能仕様書」 で仕事をしてきたでしょうから、そこ では 「保守性」 のような品質要求は表現されません。 そのため、 「要求仕様書」の意 味を正しく理解していないのも無理はないかもしれませんし、品質要求の実現方法が イメージできない状態では、 なんとかして品質要求をはずさせようとするのもわかり ます。
これには、いままで 「品質要求」 を課さなかった発注側にも責任があります。 発注
58
1.7 品質要求に応えられない SE
側の責任者が「ソフトのことはよくわからない」といって逃げたり、「"プロセス?" そんなもんどうでもええ。 “動くもの” を早く作ってくれたらええのや」 と急かせた りしてきました。 その結果、 保守性の要求を仕様化できるソフトウェアエンジニアが 育たず、 能力の低いソフトウェア企業を生き残らせてきたのです。
結局、2年の時間と費用をかけて 「10年持たせる」 という旗を掲げて開発したシス テムを、3年で捨てることになるのです。 そのとき、このような事態になってしまっ た原因は究明されていませんし、新規に作り直す際の対応方法も考えられていません。 おそらく、 この発注者は、巻き返しを懸けた次回の新規開発でも 「保守性」 の要求を 仕様化することなく、 同じ問題を繰り返すことでしょう。
□1.7.2
タイトルだけの要求仕様書の危険性
「○○君、 この文書のタイトルがいままでと違っているが、 何か意味があるのか?」
と質されて、
「課長、 知らないのですか。 最近はみな 『要求仕様書』 と呼ぶんですよ」 「そう...... じゃあウチも、 これからは要求仕様書とするか」
まさか、こんな “軽さ” で文書のタイトルを変えるような組織はないと思いますが、 でも実際に、組織の誰かが先週参加した外部のセミナーで 「要求仕様書」 という文書 が扱われていたというので、その講座を受けてきた人が先導して社内の文書のタイト ルを変えることがあります。
いままで 「機能仕様書」 と書いていた組織で、 周囲の動きに影響されて 「要求仕様 書」と変えたものの、中身はいままでと変わっていません。 また、 社内の方針として 「CMMIを導入して……」 ということでCMMIを調べたり、 CMMIのセミナーに参加し たりすれば、そこにあるのは 「機能仕様書」 ではなく 「要求仕様書」 です。 それで社 内の文書のタイトルを変更するということは、確かにあるようです。 そのような組織 では、いままでの 「機能仕様書」 と、 セミナーで扱っていた 「要求仕様書」の何が違 うのかというところまでは理解できていないまま、 タイトルだけ変えているかもしれ ません。
この場合、 最悪なのは、 「うちも、 要求仕様書は書いている」 ということになって、 そこに品質要求が抜けていることに気づかない可能性があることです。
59
第1章
□1.7.3
要求仕様にまつわる問題
品質要求を見たことがない
そもそも、多くのソフトウェアエンジニアは、品質の要求を見たことがないかもし れません。 多くの開発現場にあるのは「機能仕様書」 であって 「要求仕様書」 ではあ りません (最近は、表紙のタイトルだけ 「要求仕様書」になっているものもあります)。 機能仕様書で扱える品質要求は、それぞれの機能に付随する品質要求に限られるでし ょう。
たとえば、
「電源投入から初期画面の表示が完了するまでの時間は0.5秒以内であること」 「相手確認のコマンドに対しては100μs以内で応答すること」 「画面のホワイトノイズは、 1平方センチあたり○○個以内であること」
というような、機能に直接関係するような品質要求は目にすることがあります。 しか し、 「操作性」 とか 「交換性」「保守性」 「再利用性」 などの品質要求は、 機能の実現 とは直接関係ないこともあって、いままでほとんど要求されてきませんでした。 これらの品質については、
「いままでのシステムは操作しにくかったので、今回は操作性をよくしてほしい」 「いくつかの機能は、 他の製品にも流用したいので、 再利用性を上げてほしい」
などと、 最初の打ち合わせの段階で依頼者から口頭で伝えられたことがあるかもしれ ません。 しかし、 文書にはなっていません。
ソフトウェアエンジニアのなかには、 「品質」 という言葉は知っていても、「品質特 性」 (品質属性と呼ぶことがある) という言葉を知らない人もいます。 このようなレ ベルのソフトウェアエンジニアに対して、 「10年保守する」 ソフトウェアの制作を依 頼しているのが現実なのです。
□1.7.4 品質要求を仕様化できない もともと、 機能要求でもうまく仕様化できないために、 多くのトラブルが発生して いるのです。 それは、要求を仕様化する技術が不足していることを意味しています。 ましてや、品質要求なんて仕様化したことがないのです。 見たことがなければイメー ジが湧かないかもしれません。
品質要求の詳しいことは第6章 「6.8 品質要求の表現」 と第8章 「8.15 品質要 求の仕様化」 で説明しますが、 たとえば、 保守性の仕様として、
60
1.7 品質要求に応えられないSE
「原則として、 関数の経路複雑度を20以内とし、これを超える場合は事前に承認 をとる」
「管理モジュールと処理モジュールを明確に分離する」
という仕様が示されたとして、どうすればこの仕様を実現できるのかがわからなけれ ば手も足もでません。 だから 「機能には関係ないでしょう」と反撃に出るのです。 確 かに、 「今回の機能の実現」 には直接には関係ないかもしれません。 でも、これらの 品質仕様は、この製品を将来にわたって提供し続けるには重要な要求なのです。
ソフトウェアエンジニアがこのように品質要求に取り組めないのは、長く彼らに対 して品質要求を課してこなかったからです。 彼らには「機能仕様書」 しか渡していま せん。 機能仕様書に書かれているのは 「機能」 であって、「品質」はほとんど出てき ません。 少なくとも「保守性」 のような作り方に関する品質要求は、 機能仕様書では 扱われることはありません。
品質要求が課されていないため、ソフトウェアエンジニアの設計能力は機能を実現 するだけのものになってしまったのです。 同じ機能でも、そこに課される品質要求に よっては設計方法を変えなければなりません。 保守性や再利用性、 交換性などが求め られていれば、 データ構造の選択やモジュールの構造も違ってきます。 しかし、この ような品質要求が求められていない状況では、 その機能を実現するだけになり、 必ず しも多様な設計技術が求められることはありません。
そのような環境のなかで過ごしてきたソフトウェアエンジニアに対して、 突然 「保 守性の品質要求も満たしてほしい」 といっても、急には対応できないでしょう。 しか し、いまからでも適切な品質要求を課して、ソフトウェアエンジニアの設計能力の向 上を図る必要があります。 そうでなければ、 近い将来ソフトウェアエンジニアの活躍 する場が失われます。
最近は、 「いつ必要になるかわからないものは組み込まない」 というのがトレン ド?のようですが、 企業内で使用するシステムと違って、 組み込みの製品の場合は 製品自体が市場での競争に晒されています。 いったん製品が市場に出ると、それが競 争相手からターゲットにされるので、 その状態で次々と新しい機能を組み込んだり短 期間で機能を改良したりすることが求められます。 それができなければ市場から退場 させられるのです。 双方の機能が拮抗している状況では、的確なデリバリを実現でき るだけで市場を獲得できることがあるのです。 それを支えるのは保守性などの品質要
61
第1章 要求仕様にまつわる問題
求を実現するための設計技術なのです。
□ 1.7.5 設計技術にバリエーションがない 機能要求は同じでも、 品質要求やその他の要求 (納期や開発上の制限など) によっ ては、その機能を実現するための設計方法 (実現方法) が変わります。 もちろん、 納 期の要求と機能や品質の要求とが衝突することはしばしば発生します。 そのときは何 を優先するかで調整して、 複数の要求を総合的に実現することになります。
大事なことは、 機能以外の要求によって、ソフトウェアの作り方にバリエーション が求められるということです。 レベルの高い保守性が求められているのであれば、 そ のような品質を織り込むために適切な設計書を書いて、品質の織り込み方や織り込み 具合を検討し確認しなければなりません。
マルチタスクのシステムにおいて、 データをタスクの外に出さないためには、 周到 な準備とその実現を支えるための設計技術が必要です。 モジュール設計において、 管 理と処理を完全に分離し、 保守作業のなかで崩れにくい凝集の状態を確保するため には、設計状態をきちんと表示することと 「モジュールの尺度”」 に関する知識とそ れを実現するための設計技術を結びつける必要があります。
こうして設計のなかで品質を織り込むためにはそれなりの時間が必要になるかもし れません。 でも、これを省けば、 次回の派生開発以降で毎回この数十倍の時間をムダ にすることになるのです。 もちろん、 品質を織り込んだ効果は、 今回の開発のなかで バグの発生が減少することに威力を発揮します。
このように、設計者としても品質要求に応えるだけの設計方法を身に付けていなけ ればなりません。 一本の包丁で何でも料理してしまうのではなく、 用途に応じた包丁 を持っていて、 客の要求に合わせて最適な包丁を選んで要求を実現する技術が必要な のです。
製品やシステムによっては、 品質要求とはこれほどまでに厄介なのです。
1.8 派生開発での仕様トラブルはもっと複雑 派生開発では、仕様のトラブルはもっと多様で複雑な姿を見せます。 逆にいえば、 派生開発のなかでこそ、 要求の捉え方と仕様化の能力が試されるのです。 しかし、 多
62
*4 構造化分析・設計手法のなかで、下位構造を持つ関数 (プロセス) に対する仕様書は「CSPEC」 と呼ばれ、そこでは「状 遷移」 PAT (プロセス起動テーブル)」しか使えなくすることで、 管理と処理を強制的に分離する仕組みが提供されています。 そ
の結果、 関数の呼び出し構造は自動的にフラットな状態になり ます。もっとも、この仕組みをきちんと守っている人は少ないと思 いますが。 *5 一般には、「凝集度」 「結合度」 「複雑」 などの尺度を適用します。
B
1.8 派生開発での仕様ラブルはもっと
くのソフトウェア開発の現場では、 新規開発のときほどには慎重さを見せません。 「派
生」 ということで、ちょっとソースコードを書き直せば済むと思っているのでしょう。 確かに、 派生開発には数10行のソースを修正するだけで、設計者の作業としては2、 3日で終わることもありますが、なかには1万時間を要する派生開発もあるのです。2 3日で終わるケースも、1万時間を要するケースも 「派生開発」 なのです。 新規開発 にはこれほどの “落差” はありません。 このことも、派生開発を甘く見てしまう原因 になっていると思われます。
もう一つの重要な問題は、派生開発での作業は 「部分理解」 の世界にならざるを得 ないということです。 そこでは、
限られた資料を使って、 すでに作られているもの (ソースコード) を理解するこ と
今回の派生要求を満たすためにソースコードに手を加える場所を特定すること 適切にソースコードを改修すること
が求められています。 しかも、時間 (期限) は限られています。 新規の開発に100万 行のソースで5万時間を投入したものであっても、 今回の変更は、せいぜい3000行 程度と予想されるので、3ヶ月で仕上げることが求められているのです。 これが「派 生開発」 です。
当然、 そのような時間のなかで新規開発のときの理解のレベルに達することは望め ません。 そもそも、 改修作業にあたるのは最初に作った人とは限らないのです。 そこ にあるのは、これまで何世代か行ってきた派生開発で、 多くの人がそれぞれの考えで 手を加えてきたかもしれません。 そこでは、それぞれの人が別々の 「個体経験」を基 にソースコードに手を加えてきたのです。 ソフトウェアの世界 (特に組み込みシステ ムの世界) では、派生開発の作業に参加する際に 「個体経験」を厳しくチェックされ ることはありません。 豊富な経験を持っている人もいれば、新人に近い人もいます。 経験年数は長くても、技術のレベルで不足している人も参加しています。 それでうま く改修作業をしろというのですから、とんでもない話です。
たとえば、法隆寺の改修作業をそこらの工務店に任せているようなものです。そこ には、家を建てた経験を持つ人もいるでしょうが、まるきりの駆け出しもいます。そ の工務店は、これまで文化財の改修作業なんてやったことがないかもしれません。そ んな人たちが法隆寺の改修作業をしようとしても、先人の「組み技」 (ソフトでいえ 設計の技術や思想に相当) を理解できないために、 解体時に壊してしまうかもしれ
63
第1章 要求仕様にまつわる問題
ません。 ふたたび組み上げる際に、ひさしからはみ出した部分を平気でノコギリで切 り落としてしまったりするでしょう。 柱を留めるのに長い金釘を無差別に使ってしま うかもしれません。 幸いにも国宝の建築物に対しては、 こんなアホなことは行われま せん。しかし、ソフトウェアの世界の派生開発では、まさにアホなことが行われてい るのです。
□1.8.1 ソースから仕様を理解できるか 人のソースコードを読んで、 そこで課せられていた要求の具現化の様子や設計の考 え方を理解するには、相当の修練と適切な経験が必要です。 しかも、 「全面改修」 で はないので、限られた時間のなかでの理解を前提とした作業になります。 ある意味で は、新規開発よりもはるかに難しいし、 高い技術が求められます。 派生開発のなかでは、ときには
「別の製品で動いている○○の機能をこっちでも実現してほしいのだが」
という要求もあります。 いわゆる 「移植要求」 です。 移植は追加の一種ですが、 一般 には、 追加よりも実現に手こずることが多いものです。
その機能がどのような考えで実現しているか?
仕様はあるのか?
データ構造は移植先と整合性がとれているか?
処理構造は考えられたものか?
散らばっている処理を上手く切り出せるか?
そのまま移植できる部分はどこか?
といったことについて調べなければなりません。 移植先のシステムとの間で、 構造体 や変数の定義が違ったり、 アーキテクチャの構造そのものも違っていたりするかもし れないからです。 つまり、移植では、 移植先のシステムと移植元のシステムの両方を 知る必要があるのです。 ところが、 周囲の人はそうは見てくれません。 「移植」 だか ら簡単だろうと思っているのです。
また、新規開発で設計した際にどのような「保守性の要求」 を課したかによって、 そのあとの派生開発は大きく影響を受けます。 現実問題として、 既存の設計を十分に 理解して派生開発にとりかかるための時間的余裕はありません。 限られた時間のなか で、限られた 「知り得る範囲」 のなかで現状を理解し、 新しい変更要求を実現しなけ
af
1.8 派生開発での仕様トラブルはもっと複雑
ればならないのです。 派生開発における仕様に関するいろいろなトラブルは、このよ うな事情のなかから起きています。
□1.8.2
変更要求 (仕様) が表現されていない
派生開発で最初に目に付くのは、 「変更要求」 が明確に表現されているものがない ことです。 そこでは、 今回の派生開発で追加される機能は機能仕様書の形に近い状態 でリストされています。 たとえば、
「PCから住所や電話番号などをダウンロードする機能」
を追加するということで、 そこで実現してほしい機能がブレークダウンされています。 もちろん、 仕様化のレベルは未熟ですが、 なんとか "仕様” を表現しようという意志 は見られます。
ところが、 製品のシステムレベルの変更については、
「画像データの検索に入ったあと、 『中止ボタン』 でいつでも中止できるように変 更する」
とか、
「USBの端子に接続されるメモリからも写真データを読み出せるようにする」
「ファイル転送中はプログレスバーを出すようにする」
「監視カメラの首振り角度を現行の30度から60度まで広げてほしい」
というように書かれているだけで、これ以上詳しいものは見当たりません。 これらは、 今回の派生開発における変更の主たるテーマ (項目)ですが、実際には、これらの変 更 (機能レベルの変更と仕様レベルの変更が混ざっている) を実現するには、 関連す る機能も変更しなければならないことがあります。
そのシステムの 「検索機能」にはいくつかの対象があって、中止ボタンが働くのは 画像データの検索だけでよいのか、という問題が出てきます。 これなどは、 中止させ る理由が明らかになればすぐに判断できるのですが、そのような記述はどこにも見当 たりません。
監視カメラの首振り角度を60度にする、 というのは実は 「仕様」 のレベルで変更 依頼が出されているため、 担当者にとっては変更することは難しくないと判断されて
65
第1章 要求仕様にまつわる問題
しまいます。 そうして安易に変更された結果として、カメラの監視の周期が変わって しまったことに影響が出てしまいます。 その結果、 動作のスピードや、 録画のサンプ リングに関する仕様に影響を与えるのです。 これは 「変更要求」 がきちんと表現され ていないところから発するトラブルですが、 今回の変更を指示した要求仕様書 (組織 によっては企画書となっている) にはそのようなことにはまったく触れられていませ ん。
現実には、担当者にはこのようななかで関連する部分もモレなく変更することが暗 黙のなかで求められています。 「部分理解」という大きな制限のなかで、このような「完 「全性」 が求められるというのは、 どうみても合理的ではありません。
このような状況のなかで、 普通に修正作業にとりかかったのでは、 修正ミスが多発 するのは当然なのです。 それは、1000行あたりのバグの発生率に顕著にあらわれます。 新規開発では、10件/KLOCの人たちでも、派生開発となると20件/KLOCに跳ね 上がるのです。 これが派生開発の難しさをあらわしているのであり、この特徴を理解 したうえでの合理的な派生開発のプロセスを持たないかぎり、わずか200行の修正で も納期どおりに完成させることはできないのです。
□1.8.3 変更要求がブレークダウンされない
要するに、変更要求が適切に仕様にブレークダウンされていないのです。 派生開発 の仕様については第10章で触れますが、「仕様」 であるための条件の一つに「検証性」 というものがあります。 確実に検証できるものでなければ 「仕様」 とは見なされない のです。
「監視カメラの首振り角度を現行の30度から60度まで広げてほしい」
といっても、実際に何が変更されればよいのかこれではわかりません。 設計者は、カ メラの首振りの制御のプログラムを変更して60度まで回るように修正したというで しょうし、 検証者は、一定の監視サイクルを保証するには角度の範囲を変えるだけで なく動作速度を2倍に上げるような変更も実施されなければ要求は満たしていないと いうでしょうし、 ユーザーは、 速度を2倍に上げたことで録画された画像の鮮明さが 損なわれては困るというでしょう。 つまり、
「監視カメラの首振り角度を現行の30度から60度まで広げてほしい」
66
1.8 派生開発での仕様トラブルはもっと複雑
という変更要求は、 「仕様のレベル」 で表現されていると見なすことができるのです が、「変更要求仕様」 としてはこれだけでは不十分なのです (第10章 「10.2.1 “仕様” で出される変更要求」 を参照)。
現実には、このような認識の食い違いが 「バグ」として報告されます。 そして、慌 てて首振りのスピードを上げる修正をするのですが、 今度は方向転換のときに衝撃が 発生して新たなトラブルを生み出します。
「変更要求仕様”」 というには、 動作角度や速度、 画像のサンプリングなど、 関連 する機能にわたって具体的に何が変更されなければならないかが明示されなければな りません。 最初の段階で速度も上げることが書かれていれば、 メカの人たちもその影 響を検討することができます。
「CPUをB社の YYY からD社のXXXに変更する」 というような変更要求の場合は、 あまりに影響範囲が大きすぎて、ここからいきなり変更すべき 「仕様」 を抽出するの には困難が予想されます。 このような場合は変更要求の階層化も必要なのです。 多く の場合、 こうした仕様化の手順が明確にされていません。 「部分理解」 の状態でいき なりソースコードを弄って、 うまくいくはずなどないのです。
□1.8.4 でき上がりの仕様が書かれている||||||| 派生開発のプロジェクトで書かれている仕様書で一番多い間違いは、 次ページ表 1.2のように完成時の仕様が書かれていることです。 ある機能のなかのいくつかの仕 様が変更されるとき、 変更された結果としてのその機能全体の仕様が書かれているの です。 確かに、最終的にはそのような機能仕様になるのですが、 これでは、今回の派 生開発のプロジェクトで、 どこが変更されるのかわかりません。
つまり、最終的なでき上がりの仕様が書かれていても、 そこからは担当者が現状 の仕様をどのように認識していてどこを変更するつもりなのかが見えないのです。 担 当者が、 “RSV02.04 「○」 印の席をクリックすると仮予約を取り消すことができる” という仕様がすでに実現されていると勘違いしていれば、 そこは修正されないことに なります。 また、 現状の仕様では 「○」 印の席をクリックして仮予約を取り消す機能 は持っていないことを認識していたとしても、前後の仕様はすでに実現しているので、 つい修正するのを漏らしてしまうことも考えられます。 またこのような表現では変更 する箇所 (仕様) が具体的に見えないため、その変更によって他の機能の仕様に影響 するかどうかの判断も難しくなります。
*6 筆者が独自に導入している文書で、変更に関する要求 仕様書をまとめた文書という意味です。 詳しくは、 第10章を 参照してください。
67
第1章 要求仕様にまつわる問題
表1.2 修正完了時の仕様が書かれている例
RSV02.01 選択された講演の日時と予約状況の下に、座席マップ (図参照)を表示 する □ RSV02.02 指定席ですでに予約されている席は、 座席に 「X」 印を表示する RSV02.03 「予約」ボタンを押したあとに、 無印の席の中から予約したい席をマウス で指定することで座席に 「○」 印を表示し、 仮予約できたことを表示する。 ただし、時間の差で他の端末から予約または仮予約されたときは 「すでに 予約されました」と表示し、座席に 「X」 印を表示する RSV02.04 「○」 印の席をクリックすると仮予約を取り消すことができる RSV02.05 確定操作までに 「キャンセル」 操作をすることによって仮予約をすべてキ ャンセルできる RSV02.06 1回の座席の予約は最大で10席までとする RSV02.07 確定操作前に 「戻る」 ボタンが操作されたときも仮予約はすべてキャンセ ルされるが、その前に操作の意志を確認すること
派生開発にも関わらず、 完成時の仕様が書かれていて、 これでは、 どこが変更されるのかわからない。 表の左の 「□」は仕様に対するチェックボックスで、 通常は3つぐらい必要になります (6.4節の囲み部分を参照してください)。
表1.2のような完成時の仕様が表現されたときには、このように修正の認識モレや 修正作業そのものが漏れるという問題をはらんでいるにも関わらず、 要求仕様のレビ ューにおいて承認されてしまいます。
最初から変更される仕様だけが書かれていればこうしたミスは起きないのですが、 ここには、 「要求仕様書」とは何か、という認識の壁が立ちはだかっているのです (第 5章 「5.3 なぜ "要求" 仕様書というのか?」 参照)。
□1.8.5
どこが修正されたのかわからない||||||||||||||||||||
派生開発では、動作の改良やデータの示す値が変化することに追随するために、 関 連するソースコードを変更することが起きてきます。 それらの変更要求の多くは既存 のソースコードを何ヵ所か修正することで完了します。 しかしなかには、変更要求の 求める範囲が広いことがあり、 そのような場合は変更箇所もいろいろなところにまた がってしまいます。
問題は、それらの具体的な変更箇所がどこにも記録されていないことです。 一体、 この変更要求 (仕様) に対して、 どの関数のどの部分をどのように弄ったのか残って いないのです。 適切なソースコードの構成管理ツールがあれば、 個々の変更要求に対
1.8 派生開発での仕様トラブルはもっと複雑
して修正された箇所をたどることができるでしょう。 しかし、 修正される前に、 その 修正方法が適切なものかどうかをチェックするための関門は設けられていません。 そ れをきちんと実施しているのは、わずかな組織しかないと思います。
最近ではCMMI を導入するということで、プロセスとしては事前に変更箇所をチェ ックする仕組みを設けているかもしれませんが、 そこでどのようにレビューするか、 何を使ってレビューするかによっては、 レビューは形式だけのものになってしまいま す。 その結果、 修正の出来栄えは 「テスト」 に依存することになりますが、 テスト部 隊にとってもどこがどのように弄られたのかがわからないと修正方法が適切かどうか を検証できずにモレが出てしまいます。
派生の仕様の書き方については第10章で説明しますが、 機能の追加であっても、 既存のソースを少なくとも1カ所以上修正しなければその新機能は動作しません。
データを受信したところで、区分コードの判定を追加して新しく追加した機能を 呼び出したり、
メニューの下から3番目に 「拡大・縮小」 という文字を追加し、これが選ばれた ときに新しく追加するモジュールの1つを呼び出すように変更したり、 新しい機能が必要とするメモリ空間を確保するために、 今回追加される機能とは
まったく無関係な連想検索機能で余っていると思われるメモリを減らして、 新し い機能に回すように変更したり
しなければ、 新しい機能は動作しないのです。 そして、 このような変更はどこにも記 載されることがなく、 新しい機能の追加を担当する人が 「誠意をもって」 動作するよ うに修正することになっているのです。 もちろんこのケースもテスト部隊は検証しき れません。
追加機能を担当する設計者は、 連想検索機能のメモリを減らしても大丈夫と思って いるのですから (少なくとも大丈夫に見えたのですから)、 設計者自身によるテスト では、その判断が間違っていないことを確認するでしょう。 まさかこのような場面で、 自分の判断が間違っていることを検証する人はいません。 その結果、 設計者テストで は問題ないことが確認されます。 これで、 銀行のオンラインが止まり、 飛行機が止ま るのです。
69
要求仕様にまつわる問題
1
1.8.6 異なる変更要求の修正が同じ箇所にぶつかる | ソフトウェアの設計のなかで、 機能を実現する過程で 「設計の抽象化」 ということ を行います。 見かけ上は異なる機能であっても、 抽象化して上手く設計すれば画像処 理は共通にできる(かもしれない)のです。 このような抽象化が行われなければ、 プ ログラムコードはすぐに氾濫し手に負えなくなるでしょう。
抽象化されたプログラムは、 共通の箇所を修正することで、 関連する機能の修正が 実現してしまうことがあります。 もちろんその反対に、 抽象化したことで変更したく ない機能に影響を与える危険性も出てきます。 こうした複雑な状況のなかで、 異なる 変更が同じ関数のなかに生じてしまうことがあります。
異なる仕様の変更が同じ関数にぶつかるといっても、 具体的には修正個所が異なる 場合と、修正個所が完全に重なってしまう場合があり、 その組織が実施している派生 開発のプロセスによっては、後者の場合はバグを織り込んでしまう危険性が高くなり ます。 筆者が勧める 「派生開発モデル」 では、ソースの修正作業は原則としてすべて の修正個所のレビューが終わってから一斉に着手します。 競馬のゲートのように開く わけです。 それまでは、ソースを検討することはできても、勝手にソースコードを修 正することは禁じています。 こうしたプロセスを導入することで修正箇所の衝突に対 応しているのです。
しかし、 多くの組織ではこのような厳格なルールは採用していません。 設計者 (担 当者) がここを直せば 「一丁上がり」 と思えるソースコードの箇所を次々と修正して いきます。
あるとき、その日の修正作業のなかで1ヶ月前に修正した関数に遭遇します。 「確か、 この関数は別の変更で修正したことがあるな」とつぶやきます。 そして 「えっと、あ のときの変更要求は何だったっけ」と関数ヘッダーやソース行のところに“痕跡”を 探します。 でも、 そこにあるのは、日付だけだったりします。 「if文」 を中心に数行 にわたって変更した形跡がありますが、 “元の姿はこのソースコード上には見えま せん。適切なツールがあれば、 1ヶ月前の修正前の姿を知ることはできるかもしれま せんが、それができたとしても、今回の変更要求と合わせて変更方法を検討するため の材料を残していなければ、 あまり役に立ちません。
こうして、確信が持てない状態のまま、同じ関数に今回の修正を重ねてしまうので す。 まだ以前に行った修正が正しいかどうか検証されていない状態の上に新たな修正 を加えるのですから、「バグ」 を招待しているようなものです。
70
18 派生開発での仕様トラブルはもっと複雑
一つの関数に異なる変更要求の修正が重なるのは、 抽象化の問題以外に、 モジュー ルの凝集度”の評価が低い場合にも起きやすくなります。 それぞれの関数がシンプル な機能 (機能的凝集) にまとめられた状態であれば、一つの関数に異なる変更がぶつ かるのはそれこそ抽象化の結果といえるケースが大半で、 この場合は修正ミスも起き にくいのです。 ところが、論理的凝集や手順的凝集の性質を強く持っているような関 数 (モジュール) で修正が衝突した場合、 異なる場面からの変更にも関わらず一つの 関数に修正が集まってしまうことになり、場当たり的に状況を切り分けるような 「if 「文」 を埋め込んだりするためにバグを呼び込んでしまいます。
最初に、このようなまずい設計がなされた場合、 そこで修正ミスを起こさずに今回 の派生開発を終えるのは、地雷を埋めた箇所を記録しなかった地帯を歩くのと同じで す。これでは、携帯電話に新しい機能を追加したところ、 昔から提供している基本的 な 「通話」 ができなくなるケースが生じるのも当然です。 そして、 該当する箇所を見 付け次第ソースコードを修正する方法ではこの問題は解決しないのです。
□1.8.7
一つの変更要求に複数の人が絡む
派生開発でトラブルが生じやすいのは、一つの“変更要求" を実現するのに複数の 担当者の領域にまたがってプログラムの修正が行われる場合です。 小さな仕様レベル の変更であれば、 特定の担当者の領域で対処できるでしょうが、 大きな変更の場合は 影響範囲が広く、 多くの担当者を巻き込んでしまいます。 たとえば、 組み込みシステムでは、
「CPUをB社の○○からC社の△△に変更する」
という場合は、 その影響範囲が広範囲にわたってしまい、 この変更要求に対応するた めに多くの担当者の分担範囲で修正作業が発生します。 このような状況は変更要求の 粒度以外にも、 最初の新規設計のときに仕込まれた 「アーキテクチャ」 にも大きく影 響されます。 グローバルデータを多くのタスクがアクセスするような状況では、一つ のデータ構造が変化するだけで、 多くのタスクのなかの処理モジュールが影響を受け る可能性があります。
一般に、変更は単にプログラム内の処理を変えるというよりも、 そこで扱われてい るデータの構造が変わったり要素がとる値の範囲が変わったりすることに伴って、プ ログラムコードの変更も起きているのです。
ところが、 新規開発の時点で機能中心に設計されたためにデータが 「大盛りの皿」
*76~7段階に分類されていて、最初にレベルの低い凝集 度に作られた関数 (モジュール) は、 その後の変更で簡単に れていく宿命を負わされてしまう、という考えです。
71
第1章 要求仕様にまつわる問題
72
のようになっていて、それぞれの機能が周りから箸を突っつきあうような構造の場合、 データのとる値のわずかな変更にも関わらず、 多くの担当者が分担するモジュールに 変更が及んでしまいます (表1.3参照)。
↓表1.3 変更要求トレーサビリティ・マトリクスのサンプル
タスク1 タスク2 タスク3 タスク4 タスク 要求 PRC05 |撮影範囲とスピードアップで1台の防犯カメラ でカバーする範囲を広げたい 理由 モニターも含めて設置コストを下げること PRC.05.1 ☐ 防犯カメラの首振り角度を30度から 45度に変更する DCモーターの電流値を○○から□ PRC.05.2 □に変更して、 首振り動作の速度を | 50%スピードアップする 画像のブレを押さえるためにスキャ PRC.05.3 ン速度を○○から口口に変更する ☐ | 保存する画像の圧縮率を30%向上さ PRC05.4 せるために、 以下の式に変更する (新しい式を示す) ○
左半分に変更要求仕様を配置し、 右側にモジュールとの間でマトリクスを構成して いる。 この例では、モジュールに 「タスク」 を配置している。 変更箇所があるモジュールの"交点 " に 「○」 を付けただけの一番単純な形。
変更要求そのものは公開されていますが、 それが自分の分担範囲でも関係すること に気づかなければ、 その担当者の分だけ修正されずテストでバグとなって報告されま す。 そのときになって、 「えっ、 これって私のところも関係しているの?」 というわ けです。 多くの場合、 こうした“モレ” を事前に発見する方法を持っていません。
また、その変更要求が自分にも関係すると気づいていても、変更要求が仕様化され ず抽象的な表現のままだったりすると、各自で変更要求の範囲の解釈が食い違ってし まい、その状態でプログラムの修正も行われてしまいます。 これも、 通常はバグとな って戻ってくるのですが、まったく対応が漏れているのと違って少しは対応されてい るために必ずしも簡単にバグとして発見されないことがあり、 そのまま客先や市場に 出てしまう可能性が高くなるのです。
このような状況を改善するには、変更要求の適切なブレークダウン (階層化)と仕 様化はもちろんですが、 それだけでは対応できません。 表1.3のような 「トレーサビ リティマトリクス」 を導入する以外に方法はないはずです。 本来、 「トレーサビリ
1.8 派生開発での仕様トラブルはもっと複雑
ティ・マトリクス」 は新規設計のときに作っていなければなりません。 しかし、実際 にはほとんどの組織はこれを作っていないと思われます。 汎用機からの文化を引き継 いでいる組織ではいまでもこれを書いているかもしれませんが、 組み込みシステムの 世界では、おそらく 「皆無」 と思われます。
この「トレーサビリティ･マトリクス」 は要件管理の世界では不可欠なもので、 昔から使われてきたのですが、日本ではいつの間にか忘れられてしまいました。 最近になって、 CMMI の要件管理のなかで 「双方向トレーサビリティ マトリ クス」という形で現れたことで、今後は復活するものと思われます。
新規開発の段階でこのようなトレーサビリティ・マトリクスが作られていないため、 筆者の「派生開発モデル」 では、変更要求 (仕様) と合体させる形で 「変更要求 TM (ト レーサビリティマトリクス) *」 を作って複数のモジュールにからむ様子などをあら わし、さらに変更箇所を記述する文書 (変更設計書) とつなぐ仕組みになっています。 こうした仕組みを取り入れなければ、 派生開発で起きる多くのトラブルを防ぐことは できないでしょう。
1.8.8 各自の修正を集めて動かしてみると? ? 結局、 多くのソフトウェアの開発現場では、こうした派生開発における問題を防止 する仕掛けを持たないために、変更仕様に対応する変更箇所が記録されなかったり、 変更要求が複数の人に重なっていることが見えなかったり、変更要求の意味を間違っ て解釈したまま修正しようとしていることに気がつきません。 というよりも、 従来の 方法では、ソースコードを修正する前に問題に気づく方法がないのです。
その結果、 ここで挙げた派生開発特有のバグのほとんどは、全員の修正を集めて一 斉に動かしてみたときに “おかしな動きをする" ということで発見されます。 これでは、 派生開発といえども 「ビッグバンテスト」 に変わりはないので、原因の追及には必要 以上に時間がかかります (新規開発のときよりもてこずることがあります)。 その上、 いきなりソースコードを修正してきたため、 その変更要求に対して修正した箇所をま とめたものがありません。 その結果、 「デバッグ作業」 は、 まるで新規開発のときと 同じようにソースコードを上から下まで追いかけることになるのです。
派生開発の特徴は、その元になっているシステム (ソースコードのセット)は、基
*8 ここでは変更に関する仕様とその影響先しか扱っていな いので、 本来のトレーサビリティ・マトリクスからは内容が偏ったも のになっていますが、 構成そのものは基本的には同じであること と、新規開発時に書けるように派生開発のなかで慣れてもらう 意味で、 「トレーサビリティ・マトリクス」 と呼ぶようにしています。
73
第1章 要求仕様にまつわる問題
74
本的には検査済みのソースコードで構成されていることです。 それを今回の変更作業 で弄ったことで動かなくなったのですから、 原因は弄ったところかそれに関連する 所しかないはずです。 この点は、 新規設計と大きく異なるところなのです。
ソフトウェア開発組織で行われているプロセスがこの派生開発の特徴を生かしたも のになっていないのと、変更要求の実現方法が場当たり的で食い違いを事前に防止す る仕組みを持たないままにソースコードが修正されているため、 デバッグに時間がか かってしまうのは当然です。 その上、 元になったソースコードはその担当者が書いた ものではないのですから。
ソースコードにバグをせっせと埋め込んで、 それを発見するデバッグで「宝探し」 のゲームをやっていたのでは時間はいくらあっても足りません。 最初の完成予定日は とっくに過ぎていてこれ以上遅らせることはできないということで、その時点で動い ている機能以外は停止させる処置を施して出荷させてしまいます (まともに動いて いない状況で、どうしてこのような判断がなされるのか筆者には理解できませんが)。 そしてこの無計画な 「封鎖作業」 のため、 またミスをする可能性があります。 この結 果、 顧客を混乱に陥れ、 市場におけるブランドを大きく傷つけることになるのです。
このように、 派生開発のトラブルの多くが、 変更時の要求仕様の構成や書き方によ って引き起こされています。 したがって、 まずは要求の表現と仕様化の技術を手に入 れないかぎり、根本的な問題の解消にはなりません。
1.9 設計書が省かれてしまう原因になっている
要求仕様書がうまくかけていない組織に共通していることの一つに、「適切な設計 書」が書かれていないことがあります。 いわゆる要求仕様書が書かれないことで起き ている多くのバグや混乱が 「表の影響」 とすれば、 こちらは、 適切な要求仕様書が書 かれないことの 「副作用」 といえるものです。
適切な設計書とは、 要求仕様で求められていることの実現方法が書かれているもの です。そして、これに沿って最終的に実装作業が進められるものであり、 保守 (派生 開発)の際にはこれを読むことで設計時の考え方を知ることができ、 目の前のソース コードを理解するのに役に立つという文書のことです。
元来、 「設計する」という行為は、
1.9 設計書が省かれてしまう原因になっている
・データ構造
・処理構造
制御構造
の3つの視点から仕様を実現する方法を考えることであり、それが書かれているの が 「設計書」 です。 このとき、 設計には段階があります。 たとえば新規開発の場合 は、アーキテクチャ設計、タスク設計、 関数設計などの 「段階」 (図1.5参照) があり、 原則として、各段階における仕様に対して、これらの3つの視点から実現方法を考え 決めていくことになります。 それが各段階の 「設計書」 となるのです。
図1.5 設計の階層を示す階段上の図
想定 ・マルチタスク ・C言語 (構造化手法による) この範囲が 「設 要求 「計する」 範囲 仕様化 要求仕様 抽出・設計 アーキテクチャ設計 分割・階層化 (タスク要求 ) 仕様化 【注】 タスク仕様 設計 (複数) タスク設計 分割・階層化 (関数要求) 仕様化 (複数) 関数仕様 設計 関数設計 (複数) (複数) ソース 【注】この仕様化では、 元 の要求仕様を参照します。
ところが、最初の要求仕様書が 「仕様」 のレベルに達していない状態、 すなわち何 ができればその機能 (要求) が実現したことになるのかがわからない状態だと、 実現 方法を考えることができず、 その後の設計作業が進みません。 そのため、設計工程で 本来書かれるべき設計方法が書かれず、不足している 「仕様」 を補う形で設計書の大 部分が埋められてしまうことになります。 要求仕様書をまとめる作業は一応終了して
75
第1章 要求仕様にまつわる問題
いるため、 仕様を補う作業は 「設計」 のなかで行われます。 そのため、その記録とし て要求仕様書とは別の文書 (設計書) にまとめられるのです。
76
□1.9.1 設計レベルの仕様と混同 ソフトウェアの開発現場によっては、このように設計工程で作られた仕様書が 「設 計仕様書」として扱われていて、設計工程での正式な成果物となっていることがあり ます。
確かに、「仕様」であるための条件の一つに「実現可能性」 というものがあります。 仕様といえるためには、それが実現できるものでなければなりません。 そのため、要 求仕様書のところで実現性が際どいようなものは、その時点で実現方法 (設計方法) を考えることがあります。 バッファの絵を描いて、アクセスするタイミングを図であ らわしてみたり、受信の速度と内部処理の速度差を計算してバッファの容量を確認し たりします。 なかには回路図のタイミングチャートを絡ませて、その間隔でどれだけ の処理が可能か考えてみることもあります。 つまり、 仕様書のなかで設計方法を補っ ているのであり (正式には、要求仕様書に示された設計方法は “参考” であって強制 力を持たない、というのがルールです)、 これらの実現方法は仕様に対する参考とし て残しておきます。
いま問題にしているのはこれとは逆で、 設計書を作成する段階のところである機能 の仕様が補足され、それが設計書のなかに書かれていたり、 「設計仕様書」として書 かれていたりすることです。その結果、 一つの要求項目に対して、 仕様書と呼べるも のが複数存在することになり、 保守にも支障をきたすでしょうし構成管理上のトラブ ルの元にもなります。
図1.5は新規開発のときの設計の階層をあらわしています。 この階層のなかで 「タ スク仕様」 や 「関数仕様」というものが出てきますが、 これらの 「仕様書」 は確かに 設計の過程で出てくる仕様ですが、 元の仕様書を補足しているものではありません。 一段階の設計を終えて、 下位層の要求に対する仕様の定義であって、ここで問題に ている「設計仕様書」 とはまったく異なるものです。
システム設計を行った結果としてタスク構成が確立し、それぞれのタスクに課せら れる「要求」も同時に見えてきます。 これらのタスク構成は大元の要求仕様書を満た すために考えられたものですが、いったんこうしたタスク (とタスクが提供する機能) に抽象化された結果、 これ以降はタスクの機能 (要求) に対する仕様とか関数の要求
1.9 設計書が省かれてしまう原因になっている
における仕様を決めていくことになります。 設計の過程で出てくる仕様とは、本来は こうしたものです。
77
2
第
章
なぜ仕様のトラブルが起きるのか
前章では仕様に関連するトラブルを紹介しました。 そのなかで、 多くのトラブルの 原因が要求仕様の不備にあることも説明してきました。 ここでは、 前章で扱わなかっ た問題や仕様のトラブルが改善されない原因について考えてみることにします。 以下に、 仕様に関するトラブルを並べてみます。
(1) 仕様関係のバグが多い
→原因分析の判断を間違えて、 「設計関係のバグ」 と分類していることも考 えられるので、 分類の状況を検証する必要があるかもしれません。 (2) 設計や実装の途中で仕様の変更が多い
→仕様の不備を早い段階で発見する仕組みが必要です。 また暫定仕様で着手 しているケースがあり、 この場合は変更が発生することは早い段階で認識 しているので、仕様が確定したときの対応を考えておく必要があります。
変更の件数だけで判断することが危険と思われるときは、 「変更率」 の形 に直して判断するとよいでしょう。
途中で設計者のほうから仕様の問い合わせが多く発生している
(3)
→問い合わせの件数と時期のデータをとれば、 その実態がわかります。 (4) テスト作業で仕様の確認が多く発生している
→仕様書が「検証可能」な状態になっていないと思われます。
(5) バグとして上がったが、現状の動きに合わせて仕様のほうを変更した件 数が少なくない
→分担を細かく分割された設計者のレベルでは、 仕様間の絡みが判断できな くなっている可能性があります。
(6) 動いてからでないと何もコメントできない、と顧客や営業の人にいわれ た
→どのような表現や構成であれば読まれるのか、 読み手の意見を聞いてみる 必要があります。
(7) 根本的なアーキテクチャ上の設計ミスが起きている
→仕様間の絡みが見えないか、 アーキテクチャ上の配慮の必要性が見えない 状態。
2.1 問題が明らかにされたか?
このようなケースが発生している場合は、 要求仕様書の書き方や構成に問題がある と疑って見る必要があるでしょう。
それにしても、 要求仕様に関連したバグやトラブルが多いのが目につきます。 そ れも、 今回が初めてではありません。 担当者は変わっていますが、その組織では5年 10年と同じように仕様の問題で振り回されているのです。 この種のトラブルを一気 に減らさなければ、 CMMIへの取り組みも効果を上げないだけでなく、 逆効果になる ことも考えられます。 本章では、もう少し深く、 仕様のトラブルが発生する原因、 あ るいは減らない原因について考えてみます。
2.1 問題が明らかにされたか?
テストグループからバグが報告されたあと、 担当者はその原因 (直接の原因) を探 求し、 ソースコードや関連する設計書などを修正します。 このとき、ソースコードを 修正するだけでなくエラーの原因プロセスを分析する必要があるのですが、 多くの組 織ではソースコードを修正するだけで終わっています。 しかも、 直接の原因の認識や 修正方法について検証していないこともあります。 担当者の 「終わりました」 という 報告だけで片付けているケースも少なくありません。 どうやらこのチームのリーダー は、バグが入り込むメカニズムを理解していないようです。 そのため、 1週間後にこ の修正では不十分なことが発見されたり、いままで問題がなかった機能で障害が出た ことが報告されたりするのです。
設計者テストで発生したバグの記録を確保していないとしても、 QAテストのバグ 報告書はほとんどの組織で残っています。 でもそこには、 バグの症状が出た理由が説 明され、それに対する対処の内容が記録されているぐらいで、バグの原因プロセスの 記述はどこにも見当たりません。 組織によってはバグの件数すら把握していないケー スもあります。 そのような姿勢では仕様の問題は何も解決しないでしょう。
たとえば、 バグデータはその他のデータと組み合わせると、いろいろなことが見え てきます。
1000行当りのバグ発生率
ソースコード1000行あたりのバグの発生件数。
この値からプロジェクト全体の作業の品質の一面がわかります。
機能別のバグ発生率
第2章
79
第2章 なぜ仕様のトラブルが起きるのか
1000行当りのバグ発生率を機能で分けてみたもの。
ここから、 機能間のバグの発生率の違いが見えます。 「合計」 では何も見えなかったものが、こうして複数のデータを組み合わせ ることで、 値の「差」 から、 どのように対応すべきだったかが見えるのです。 バグの 「発生率」 の低い機能における対応方法に、 その組織における仕様の 問題解決の糸口を見出せるかもしれないのです。
機能別の仕様変更件数とバグ発生率との対比
機能別に仕様変更の発生率とバグの発生率を対比させたもの。 これによって、仕様変更の多さとバグの発生率に相関があることが見えるか もしれません。 仕様変更が少ない理由を調べることで、 ベースライン設定後 の仕様変更の発生を押える方法を考えるきっかけになるはずです。
このように、データはそれをどう活かすかという視点で扱うことで、自分たちの問 題を映し出してくれ、 解決方法に気づくヒントを与えてくれます。 大事なことは、バ グデータから自分たちの組織の問題を見つけるという姿勢を見せることです。
バグは、組織のX線写真なのです。
2.2 仕様化の作業を放棄した
気づいている人もいるかと思いますが、 1990年代に市場から納期の短縮要求が発 せられました。 その対応策として、日本の多くの開発組織では、プロセスの改善と自 らの生産性向上を図るのではなく、 個人の担当範囲を狭めて人海戦術を採用したり、 さらには多くの作業を外注に出すことを選んだりしたところが少なくありません。 当 時流行った 「固定費削減」 や 「アウトソーシング」 という波もその選択を助長しま した。
その際に、 発注側では適切な要求仕様を書けないということで、 仕様をまとめると ころからの作業を外注先に肩代わりしてもらうという事態も起きています。 いわゆる 「丸投げ」 です。 実際にインドのソフトウェア企業にソフトウェアの開発を依頼する 際にも、要求仕様書の作成までも任せているケースも見られます (英語にしないとイ ンドのソフトウェアエンジニアに通じない、ということもあるでしょう)。 インドの 企業としては、自分たちがイメージできるだけの情報を収集し、 顧客と擦り合わせな がら仕様書にまとめて本国に送ることで、 顧客の希望するものに近いソフトウェアを
*1 固定費削減ということでアウトソーシングを選んでも、見か 上の「人件費」が減るだけで、組織の「開発費用」 は改善 されるわけではありません。
80
2.2 仕様化の作業を放棄した
開発できるでしょう。
その一方で、要求の仕様化作業を丸投げした発注側は、 代償として要求仕様書をま とめるスキルを失うことになります。 その結果、 21世紀に入って市場がコスト削減 の要求を発し始めたことへの対応策として 「分割発注」を選択しようとしても、自ら が仕様を書けない状態では「分割発注」 はかなうはずもなく、かといっていまさら他 のソフトウェア企業を選択することもできません。 要するに、 丸投げした外注先と心 中することになるのです。
またメーカーの場合は、 要求仕様が書けない状態では企画能力も失う可能性があり ます。 仕様のレベルで実現性を表現できないのですから、そこに書かれているものは 単なる 「夢」 や 「できるといいこと」 でしかないのです。
2.2.1 それって仕様か?
多くの組織では、それなりに 「要求仕様書」 が書かれています。 「要求仕様書」と 呼ばれるものがまったく存在しないということはありません。誰が書いたものかは別 にしても、双方の間に何らかの形の要求仕様書は存在します。 問題は、それが要求仕 様書として適切なものかどうかです。
結論からいえば、 「要求仕様書」としての条件を備えているものは、ほとんど見当 たりません。 もっとも、そのようなものが書かれているような組織には筆者が呼ばれ ることはないかもしれませんが、 筆者が認識している範囲では、第2部で説明するよ うな要求と要求仕様の条件を備えた要求仕様書は書かれていません。
それどころか、 「これが要求仕様書?」 といいたくなるもののほうが多いのです。 そこではカテゴリには分けられているものの、 「要求」 が表現されていませんし、 「仕 様」 といわれているのに特定できない表現を含んでいたり、 仕様なのか説明なのかわ からない表現であったり、 ハードをコントロールするフローチャートが書かれていた りしています。 これでは 「要求仕様書」としてのレビューには耐えられないでしょう し 設計や実装の途中で仕様の不備に気づき、 依頼者に確認のメールが盛んに発信さ れることも減りません。
しかも、 品質要求はどこにも書かれていませんので、 設計方法に工夫が求められる こともないでしょう。 そうして、 実際にプログラムが動き始めた段階で、 パフォーマ ンスが許容できる範囲を超えていることが指摘されるのです。 一般に、この段階では パフォーマンスを改善できる余地は少ないのです。 結局は、 仕様に制限をつけてその まま出すことになるかもしれません。
81
第2章 なぜ仕様のトラブルが起きるのか
□2.2.2 要求が表現されていない
仕様が書かれない理由として
●仕様の意味や目的、 表現などを知らない。 ②要求が書かれていない。
の2つが考えられます。
●の状況からは、仕様モレというより、 仕様の解釈のズレや仕様としての役を果し ていないことから仕様が勝手に想像されてソースコードが作られてしまう、という形 になって現れます。 一方2 の場合は、 主に 「仕様モレ」 を誘発します。 「要求」 の意 味や役割などは第6章で詳しく解説しますが、一般に 「要求仕様書」というタイトル は付いていても 「要求」 が表現されているケースはほとんどないのです。
組織のなかには、 「要求項目」 あるいは 「要件リスト」 という形でそこで実現した い機能のリスト (機能名と簡単な説明) が表現されたものはあっても、 「仕様書」 は 別の文書に書かれていて、 要件リストを 「仕様」と対応させて扱っていることはほと んどありません。 そこでは 「要件リスト」 とは単なる機能を紹介するものに過ぎない のです。 これに対して仕様書には、 機能カテゴリに分類されたなかに、 その機能にお いて振る舞ってほしい動きなどが羅列されています。
要件リストの 「要件」 と仕様書のカテゴリが一致する部分があるかと思えば、 要件 リストの複数の要件が仕様書のなかでは1つのカテゴリのなかで扱われたり、 そのな かの仕様の記述もそれぞれの要件 (の項目) に対応していなかったりします。 「仕様」 を書く際に、 「要件リスト」の分類とは別に改めて考え直しているのです。
そこにある要求仕様書に 「要求」 が表現されていないために、 その機能にはどのよ うな仕様が含まれるべきか、 どこまでの範囲の仕様が含まれるべきかが見えません。 「見えない」 ということは、書き手の思う 「範囲」 と読み手の思う 「範囲」 が一致し ないという意味でもあります。 そもそも、 書き手がその範囲をどのように設定したの かが見えないので、 書き手自身も仕様が漏れていることに気づかないし、 読み手も仕 様モレを判別できないのです。
□ 2.2.3 説明なのか仕様なのかわからない
仕様書と呼ばれているものを見てみると、
「以下は、この操作画面のボタンの説明です」
82
22 仕様化の作業を放棄した
と書いてあって、その下にそれぞれのボタンの名前が書かれ、 そこにわずかな文章で、 ボタンの動きを “説明” するものが書かれています。
・予備バーナー点火ボタン
このボタンを押すと予備バーナーに点火する。 予備バーナーは、タンクの温 度があらかじめ定めた保温温度を下回ると自動的にメインバーナーの点火の 種火ともなる。
というだけです。
たしかに、前半は予備バーナーの仕様です。 でも予備バーナーの点火に条件があ るのかどうかは、 この文章からはわかりません。 また、 点火中に発生する異常状態 に対する処理はどこに書かれているのか不安になります。 それに、 「予備バーナーは、 ・・・・・・」以降の文章は、 「予備バーナー点火ボタン」 にとってはタダの「説明」 です。 むしろ、「メインバーナー」 の仕様です。
組み込みシステムに限らず、 操作に関係する仕様は一般にこのような表現になって います。 おまけに、項目に「番号」 も付いていないことがあり、 電子メールで問題箇 所を指摘するのも苦労するし、 要件管理の障害にもなります。 このような状態では、 仕様モレを防ぐのは困難です。
□2.2.4 概要に隠れる仕様
これと似ているのが、 「概要」に仕様が潜んでいるケースです。
機能の見出しがあってその下に「概要」とあり、そこにこの機能で求められる動き を簡単に説明しています。 そのあとで 「詳細」 という文字があって、そこからいくつ かこの機能の振る舞いについて書かれています。
5章 計測機能
[概要] (ここに、この計測機能についての動作や代表的な振る舞いが書かれて います) [詳細] (ここから、計測の開始方法、 測定データの集め方、 集めたデータの表 示方法などの仕様が書かれています)
どうやらここでは、 [詳細] 以降に書かれているのが 「仕様」 に相当するもののよ
83
第2章 なぜ仕様のトラブルが起きるのか
うです。
このとき、 [概要] には計測から表示までの流れが簡単に説明されていて、 そのな かで計測方法を選ぶ方法が 「設定」 の項のなかで提供されています。 そして 「設定」 の画面操作で計測方法を指定しておくことで、設定された計測方法で計測が開始され ることが書かれています。 しかし、この計測機能の [詳細] 以降には、 そのような設 定の選択によって計測方法が変わることは一言も書かれていません。
表示方法として折れ線グラフと棒グラフも設定で選べることが [概要]に書かれて いますが、 [詳細] には、
「ボタン操作で計測を開始すること」 「集めたデータを画面に表示する方法」
が書かれているだけです。
これでは 「概要」 だからといって安心できません。 「詳細」 のところだけを見てい ては、仕様を見落としてしまう可能性が出てきます。 「要求」 なのか 「仕様」 なのか、 「あるいは「説明」 なのかを明確にして、その扱いを定義しておかないとつまらないと ころで仕様のトラブルを招いてしまいます。
もともと、 章の最初に 「概要」 として何かを書いたとき、 あとで概要ではなくちゃ んとしたものを書こうと考えた可能性があるのですが、 その場合は概要の部分との間 で記述内容の一部が重複します。 というよりそのような構成では重複せざるを得ない のです。 最初からそれを承知で書いているのですから、 「概要」 に書くのは “ざっと したもの” なのです。
□2.2.5 画面仕様も項目だけしかない 最近は、 組み込みシステムでも 「画面操作」 の機会が増えています。 それを受けて 「画面仕様書」 とか 「操作仕様書」 と呼ばれるものが書かれています。 しかしながら、 そこで書かれている内容は、 あまりにも貧弱です。 なかには画面遷移も省かれている ことがあります。 次ページの図2.1 のように、 いきなり個々の画面の要素配置図があ って、その下に表示域やボタンの簡単な説明が書かれているだけです。 それらの表示 域についての詳しい仕様はありませんし、 ボタンについてもそのボタンが押されたと きの動きを簡単に書いているだけで、 そのボタンが押せない状況や、 押したときの処 理としてそれまで入力していたデータのチェックやファイルへの保存、 画面への反映 などは書かれていません。 これではとても仕様と呼ぶわけにはいきません。
84
2.2 仕様化の作業を放棄した
↓図 2.1 一般的な画面仕様書の例
回線別 接続狀態 計測データ表示域 現在時刻 経過時間 開始 終了 一時停止 ・計測データ表示域 ・開始ボタン
レイアウトの下に、 それぞれ の項目名の下に仕様が記述 されるが、一般には仕様とし ては不十分なことが多い。
このようなレベルの画面仕様書では、 表示の条件や状況によってこの表示領域の表 示のパターンも変えなければならないことなどは、 実際に各画面のソースコードを書 く段階になってはじめて気づくのです。そうして、 その場で 「即席」 で対応されてし まうために他の画面との整合性が崩れたりします。 そこで判明した仕様がそれまで書 かれていた画面仕様書に反映されないとすれば、 そのとき判明した仕様を思い出すに はソースコードを読むしかなくなります。 こうして、 毎日の作業のなかで仕様のトラ ブルの種を埋め込んでいるのです。
2.2.6 仕様化に必要な時間を投入していない」
要求の仕様化が適切なレベルで実現するかどうかによって、 その後のソフトウェア 開発の命運が決まってしまいます。 当然、 仕様化作業にはそれなりの時間 (工数) が 必要になります。 この工数の投入を省けば、 あとで発生する仕様変更によって“失う 工数" はその何倍にも膨らんでしまいます。 多くの組織では、このような同じ過ちを 何度も経験してきたはずです。
なぜ、 要求の仕様化作業の時間が省かれるのでしょうか。 その理由として次のよう
85
第2章 なぜ仕様のトラブルが起きるのか
なことが考えられます。
(1) 開発プロセス全体が曖昧で、 成果物とプロセスの関係が不明確 →そのため、全体のプロセスが見えず、 現実的なスケジュールが立ちません。 (2) 仮説見積りの段階でソースコードのサイズを見積もっていない
→そのため、実装工程の工数見積りもサイズを伴わないために適正かどうか 検証できないし、サイズによる成果物の連鎖を使った進捗管理もできませ ん。
(3) ソースコードを実装するプロセスの生産性データを持っていない
→そのため、 いったいどれだけの工数があれば今回のソースが書けるのかが 見えていません。
それでも、 サイズ見積りのデータがあれば、 実際に作業をした結果として 得られた生産性データから見積りを調整できるのですが。
要するに、 目指すゴールに到達するための合理的なプロセスがないことと、 サイズ に基づく見積りと進捗管理の技術が欠けているのです。 そのために 「コーディングが 間に合わない」 という不安に押しつぶされ、 コーディング以外の作業はことごとく者 かれるのです。 このような組織では、マネージメントも "無力"です。
一般に、そこで投入している要求仕様書を作成するための工数は少なすぎます。 仕 様の項目数が見積もられているわけではないので、工数にも根拠がありません。 この ような根拠のない見積りのなかでは、 「コーディングが間に合わない」という不安を 解消できないのです。
2.3 ドメインの知識がない
要求仕様が書けない、あるいはどこまで書けばよいのか判断できない原因の一つに、 ソフトウェアの設計者が当該のドメイン知識 (依頼者の分野の専門知識) を持ってい ない、あるいは不十分なことが挙げられます。 メーカーのエンジニアはもちろんです が、依頼を受けてソフトウェアシステムを開発するソフトウェア企業のエンジニアで あっても、ある程度のドメイン知識は必要です。
「流通分野」 のソフトウェアを開発するのであれば、 流通の世界を知る必要があり ます。 非接触ICカードを使ってビルの入退館システムを開発するというのであれば、
86
24 バグの経験だけでは役に立たない
非接触ICカードや入退館システムのあり方を知らなければなりません。 カーナビの ソフトウェア開発に携わるのであれば、 GPSや関連する世界の規格や方式を知らなけ ればなりません。
もちろん、メーカーのエンジニアと違ってソフトウェア企業のエンジニアの場合は 即席の知識になるかもしれませんが、 それでもドメインの知識をろくに知らない状態 では仕様に関して何も判断できません。 UMLで設計できるとか、 JAVA言語が操れる とか、 C++の言語でコードが書けるといっても、 依頼者へのヒアリングのなかで出て くる用語の意味やその分野における制限や規制を知らなければ仕様化できません。 依 頼者のほうで書いた要求仕様書や、 関連の資料に書かれている用語の意味を理解でき ない状態では、 まともなソフトウェアが作れないのは当たり前です。 このようなエンジニアに、
「どうして、このドメインに突っ込まないの?」
と尋ねると、
「だって、次もこの顧客の仕事をするかどうかわからないじゃないですか」
という返事が返ってきたことがあります。 筆者がこの組織の責任者であれば、間違いなくこのエンジニアは次回のプロジェク トでははずすでしょう。 そのとき、 彼の 「予想」 は的中するのです。
「やっぱり別の顧客の仕事になったでしょう。 あのとき無駄な勉強をしなくてよ かった!」
本当に、これで客からお金をとるエンジニアといえますか?
2.4 バグの経験だけでは役に立たない
誰も好んでバグを作り込んでいるのではありません。 しかし、 バグのデータを集計 してみると、 バグの発生は明らかに人によって偏っています。 もちろん経験の浅さは その一つの要因ですが、 長く経験している人でもバグの発生率は偏っています。 その ために周りからは不誠実な行動とみなされてしまいます。 本人は、 前回も多くのバグ を作り込んだことを 「反省」 していて今回はあのようなことがないように 「意識」 し ているのですが、 現実はそのような意識だけでは変わりません。
87
88 第2章 なぜ仕様のトラブルが起きるのか
その理由は、 仕様モレを見逃した本当の原因プロセスが改善されていないからです。 誰でもプロセスを 「習慣」として身につけています。 つまり、 バグはその人の身につ けている習慣 (プロセス) がもたらしているのです。 仕様の書き方はもちろんですが、 仕様をどのような視点から見直すかという姿勢も、 作ってから直せばいいやという対 応も、「習慣」として身につけたプロセスが反応しているのです。
たとえば 「仕様モレ」 のバグは、 要求の仕様化プロセスのところで必要な仕様が漏 れていることに気づかなかったために、 その仕様に関連するソースコードが書かれな かったものがテストによって発見されたものです。 このとき、 必要な処理が行われて いないことに気づいたのは、 仕様化プロセスのところで抜けていることに気づかなか った人とは別の人です。
↓図 2.2 原因プロセスと発見プロセスが時間的に開いていることが大きな障害
仕様化 設計1 設計2 設計3 実装 テスト 仕様モレが仕込まれた時期 仕様モレが発見された時期
設計者は必要な仕様が漏れていることに気づかなかったのですから、自らが行う「設 計者テスト」 でもそのことに気づくようなテストは行われない可能性が高いのです。 その結果、QAテストで発見されることになるのですが、 こうして他の人に発見され たバグは「不具合報告書」 として担当の設計者のところに戻ってきます。 設計者とし ては、この不具合報告書を見て初めて必要な仕様が漏れていたことに気づかされます。 設計者は、
●不具合報告書に書かれている間違った動きの原因を究明し、
②漏れた仕様に相当するソースコードを補って、
③ 求められている動きになることを確認し、
④ 「修正完了」として報告します (正式には、もう少しきちんとした手続きになり ます)。
このとき、 不具合報告書の原因欄には 「仕様モレ」 と書き、 原因プロセスの欄には 「仕様化プロセス」 あるいは 「仕様レビュープロセス」 と記述されます。
2.5 レビューできた仕様書か
多くの組織ではこれで 「OK」 ということになっていますが、 これではこの設計者 が今後この種の仕様モレを事前に検知するための 「眼」 は手に入っていません。 一般 仕様モレは、いわゆる 「不注意」 でまとめてしまうことはできません。 「注意」 す れば防ぐことができるものではないのです。 そこには、 仕様書の構成などの「漏れる 仕組み」 や 「発見できない仕組み」があるのです。 その仕組みが改善されないかぎり、 次回のプロジェクトでもこの設計者は、 仕様作成段階で同じような仕様モレを紛れ込 ませてしまうでしょう。
唯一救われるケースとしては、設計者がテストを行う際に元になった要求仕様書を 読み直して不足に気づき、 不足していることを確認するテストが行われた場合です。 この場合は、仕様書の構成や順序などで不足に気づく際の「眼」 のようなものを手に 入れた可能性があり、 次の機会には文書の構成などを変更する可能性があって、 その ことによって同種のバグを未然に防ぐことができるかもしれません。 しかし、他の人 に見つけられた状態ではそのような「キー」 は手に入っていないため、 何度バグを経 験しても仕様モレのバグは減らないのです。
2.5 レビューできた仕様書か
仕様モレに気づくのは、主にQAテストの段階です。 設計者は仕様がモレているこ とに気づいていないのですから、 設計者自身によるテストでは発見されません。 そし て、 QAテストで発見されたことで 「要求仕様書のレビューの不足」 と指摘されるの です。 しかしながら、 要求仕様書のレビューを “十分" に実施しさえすれば、 本当に そのモレはレビューで発見できたのでしょうか。
成果物に対するレビュー”は、 「変換プロセス」から生み出された成果物の内容に、 隠れた不備や欠陥を指摘 (発見) するために行われます (次ページ図2.3参照)。 要 求仕様書もそれぞれの組織において何らかの形でレビューされているものと思われま すが、 内容や構成が仕様として不適当な状態ではレビューが機能しません。 具体的に は、要求仕様書の内容が以下の2つの条件を満たしていなければ、レビューによって 仕様モレや仕様どうしの衝突を発見することはできません。
設計や実装のイメージができるほどに具体的な表現であること (具体的) 仕様の記述が発散しないように 「範囲」 のなかでグループ化され整理されている こと (分類と整理)
*2 CMMI では 「ピアレビュー」 と呼んでいます。
89
第2章
なぜ仕様のトラブルが起きるのか
↓図 2.3 変換プロセスと検証プロセスの関係 A D 変換 変換 プロセス プロセス C B (更新) 検証 (参考) プロセス 検証 結果
設計プロセスは、基本的に 「変換プロセス」 で、 変換プロセスには 「変 換ミス」 を伴う。
レビューは 「検証プロセス」 の一種で、 変換ミスを発見し訂正する機能 を持つ。
仕様の記述がだらだらとまとまりのない状態、箇条書きされた項目が20も30も無 秩序に並べられた状態、 要求なのか仕様なのか説明なのかが曖昧で混在している状態 では、いくらレビューをやってみたところで仕様モレや仕様間の衝突が発見されるこ とはありません。 つまり、 レビューでこのようなモレや矛盾を発見するには、レビュ 一の仕方の工夫だけではなく要求仕様書の構成や書き方を変える必要があるのです。
レビューアにとって欠陥を発見し、問題を指摘しやすい要求仕様書の構成は、同時 に書き手にとっても仕様が漏れにくい構成なのです。
特に「概要」という文字のついた文書または 「節」はレビューに耐えられません。 内容は表面的で不完全ですし、書き手も 「概要」 ということでレビューに耐えるもの を想定していません。 そのような性質を持った 「概要」 のところに、 見落とされては 困るような 「仕様」 が書かれているとすれば、 あまりにも無神経な行為といわざるを 得ません。
□2.5.1 どこに何が書いているのかわからない レビューの障害になっているもう一つの理由は、要求仕様書のどこに何が書かれて いるのかがよくわからないことにあります。 そのことを作成者にいうと、
「目次を見ればわかります」
2.5 レビューできた仕様書か
といわれます。 書き手は、 どこに何を書いたかわかっているでしょうし、 わかってい ることを書いたのでしょう。 でも実際に目次からわかることは、 どの機能がどこに書 かれているか、あるいは用語の説明がどこにあるのか、といったことだけです。
要求仕様書の書き方や構成が個人に任せられていて、 人によって全体の構成が違っ
たり、一つの機能のなかで仕様を展開する際に、 仕様の括り方や設定情報と絡む仕様 の書き方、 エラーに関する記述の扱い方が違っていたりすることがあります (表 2.1 参照)。
↓表2.1 一つの機能の中でも仕様のリストに秩序がない
インク切れ監視機能
・残りの印刷枚数が10ページ未満のときは、 PCに通知しないで、 印刷処理を 続行する
・残りの印刷枚数が10ページを超えるときは、 PC側に 「危険」 を通知する ・インク残量が 「警報レベル」 を示しているときは 「警告」 をPCに通知して 新しい印刷の編集を停止する
・PC側から 「続行」 の指示を確認すればインク残量をチェックし、交換され たことを確認できたときは編集 印刷を再開する
・PC側から 「中止」 の指示が届いたときは、未編集のデータを廃棄する ・10ページ印刷ごとにインク残量を確認し、 残りのページ数との間でインク 切れの危険性を判断する
せっかく仕様をリストアップしても、これでは漏れている仕様に気づきにくい。
仕様も思いつくままに羅列していることが多く、 このままではどのような仕様が漏 れているのか気づくことが難しくなります。 また、 機能には多くの“パラメータ” が 絡んでいて、その組み合わせによって動きや表示などが変化します。 それらのパラメ ータは、 「設定」 というカテゴリで説明されていることが多いのですが、 記述があち
こちに点在していたりすると不安になってくるし、レビューの障害になります。
エラーに関する記述も、 機能ごとにまとめて書かれているケースと、 それぞれの振 る舞いの記述のところに配置されているケースがあります。 後者のほうが仕様書とし てエラーケースについての記述が漏れにくいと思われますが、 設計者にとって見づら いケースも考えられ、 前者の形のほうが安心できることもあります。 ただし、機能ご
91
第2章 なぜ仕様のトラブルが起きるのか
とにまとめるにしても、エラーの記述の順序は一致させてほしいものです。
このような書き方が放置されている状態では、大きなシステムにおいて複数の人が 手分けして要求仕様書を書くという場合に設計工程に支障が出るだけでなく、 要求仕 様書のレビューでモレや衝突を発見しようとしてもレビューの効果が上がらない可能 性があります。
本来なら、 特定のプロジェクト向けでもいいから、 初めに 「要求仕様書作成ガイド ライン”」のようなものを用意して、手分けして要求仕様書を作成する際にこれに従 うようにすれば、そのプロジェクトの要求仕様書の構成は安定します。 もちろん、こ れが組織の標準になっていない状況では、他のプロジェクトで書かれた要求仕様書と の間ではまだ構成や書き方の違いが残るかもしれません。 それでもその「ガイドライ ン」 がわかりやすく合理的なものであれば、 他のチームにも活用され、 時間の経過の なかで構成や書き方が組織のなかでまとまっていく可能性があります。
2.5.2
"仕様” になっていない」
要求仕様書のレビューで一番の障害は、 そこでの表現が 「仕様」 になっていないこ とです。 まだ抽象的な表現が残っていて、 その表現のなかにどこまでの動きを含んで いるのか見えないのです。 つまり、 書き手がどこまで認識してこのような文章 (仕様 表現) にしたのかが見えないため、漏れていると指摘するにも迷ってしまうのです (表 2.2参照)。
↓表2.2 仕様になりきっていない例
BYY03 (ネット販売) 購入の確認操作では誤操作が入る余地を排除してほしい
HOM07
部屋の様子を映したビデオは、インターネットを介して顧客のPCの画面から自 在に操作して見られるように
FLE10 設定データが変更されたときは、あとで再現できるように必要な情報と一緒に 保存すること
一般には、上記のようなレベルで 「仕様」として扱われていることが多いようだが、 下線部分が仕様になっていない可能性がある。 仕様になり切っていない場合は、 たとえばソースコードを書こうとしたときに、 排 除の仕方が決まっていないことに気づく。
全体がもっと具体的な記述になっていて、たまたまこの部分が明らかに抽象度が高 いということであれば、どうやらこの部分で具体的な動きや振る舞いがイメージでき ていない可能性があるため、 レビューで指摘しやすいでしょう。 しかし、全体的に具
*3 一般的には「手順書」と呼ばれているもので、 SP活動 を推進する組織の人が書いていることが多いようですが、筆者 はこれを設計チームの人が書くように勧めています。
92
2.5 レビューできた仕様書か
体性に乏しく抽象的な記述で構成されている場合は、 ある機能の部分で書き手が細か な動きに気づいていないのではないかと思われても、 それを 「欠陥」 として指摘しに くいのです。
その理由は、もしかすると書き手は指摘することに気づいているのかもしれないと いうことと、それが漏れているとすれば他の箇所も同じように漏れている可能性があ り、個々の曖昧な表現のなかから書き手がどこまで理解しているかを “推測" しなが ら指摘しなければならず、 それではとても指摘しきれないということだからです。 こ のような状態はレビュアーにとっては大変な負担です。
こうして、 仕様になっていない要求仕様書は、 たいした指摘もされずにレビューの 関門を通過します。 もちろんここでは必要な仕様化ができていない状態ですから、 設 計工程や実装工程のなかで仕様化が不足している箇所が "発掘” され、その段階で仕 様の確認や確認に伴う変更が頻発します。 つまり、これが現実の姿なのです。
□2.5.3 まとめてのレビューになっている 要求仕様のレビューの実態を調べてみると、 担当者が1ヶ月とか2ヶ月の時間を投 入してまとめ上げた 「要求仕様書」 を一気にレビューしているケースが多いようです。 レビューの実施時期は要求仕様をまとめる工程の終了付近で、
基本的には1回のレビューしか想定されていない
ここでは多くの指摘がなされないことが前提になっている
のです。 そしてこのレビューが終了したあと、 要求仕様書は設計工程に引き継がれる のです。
これでは、 要求仕様書のなかの特定機能の一部で仕様モレなどが指摘されるケース には対応できるでしょうが、根本的に仕様がまとまって抜けているとか、エラーのケー スがほとんど書かれていないとか、関連するパラメータに対する振る舞いがほんの一部 しか書かれていない、というような重大な欠陥はまったく想定されていません。
過去に、 何度も仕様モレやパラメータ記述モレを起こしているにも関わらず、 そし てこの間にそのような問題を克服するような仕様化技術を習得していないのに、 レビ ューでは大きな後戻りにつながるような欠陥が生じないことになっているのです。
このようなレビューになってしまう原因として、 第1に、 レビューの種類が認識さ れていないことが考えられます。 成果物の承認のための 「公式」のレビューと、 成果
93
第2章 なぜ仕様のトラブルが起きるのか
物に潜む欠陥を発見することを主たる目的とする 「半公式」 のレビューが使い分けら れていないのです。 公式のレビューとしては、 いわゆる 「ISO9001」 で勧められて いるような 「SDRx」 があります。 このなかの 「SDR1」 が要求仕様のレビューと位置 づけられていますが、 これは承認を目的としたレビューであって、 そのために工程の 区切りのところで実施されます。
本来なら、この公式のレビューの前に、 要求仕様を書き進めるなかで設計者や仕様 担当など直接の 「関係者」 だけで何度もレビューされる必要があります。 たとえば、 要求仕様書の全体構成を考えた段階で一度実施し、一つの主要機能の仕様化の前にも その仕様化の構成のイメージが固まったところでレビューし、 さらに実際に一つの機 能の仕様が書かれた時点でレビューしていく、こうして「逐次レビュー」 することで 後戻り作業を極力減らす工夫が必要なのです。 これによって、 仕様化の粒度も早い段 階で安定します。 必要なら、 適当な時期に、 あるいは扱っている機能の種類によって、 関係者の範囲を広げて特定の人の参加を求めてもよいでしょう。
ただし、逐次レビューには一つの危険があります。 それは、逐次仕様化しながらレ ビューすることによって、 前回のレビューの範囲では問題はなかったが今回のレビュ 一範囲のなかで以前に確認された仕様と矛盾するところが出てくる可能性があるとい うことです。そのため、 レビューの範囲を 「今回仕様化された範囲」 に限定すること は危険です。 「機能間の関連マトリクス」 などを参考にしながら、 仕様の矛盾に気づ く機会を設けることが大事です。
仕様の書き方に確信のないままに長い時間をかけて要求仕様書をまとめ、そうして 形式だけの堪え難いレビューを実施し、 仕様モレを指摘できないまま、あるいはクリ ティカルなタイミングが存在していることに気づかないまま設計工程に入り、 あとに なって大事な機能が実現できないということになるのです。 こんなことを繰り返して いるから「ウォーターフォール」のライフサイクルモデルが頭から否定されてしまう のです。
適切な仕様化が合理的な時間のなかでできれば、「ウォーターフォール」 であって も問題にならないケースはいくらでもあります。 逆に、 仕様化技術が不足しているこ とが「ウォーターフォール」 の弱点を拡大しているとすれば、その状態では「ウォー ターフォール」以外のライフサイクルモデルを採用してもうまくいくはずがありませ ん。 そこでできるのは、ただの 「試行錯誤モデル”」 になってしまうからです。
*4 そこでは「インクリメンタルモデル」と称しているものの、 その実態は、 仕様化もそこそこに試作を繰り返しているだけとい
うケースも少なくないのです。
94
2.6 FIXしたしないでもめる理由
2.6 FIXした ・ しないでもめる理由
依頼側が作成した場合も設計側が作成した場合も、 事前に回数を分けて細かくレビ ュー(ウォークスルー") することなくいきなり 「要求仕様書」 が提出され、そこか らレビューが行われます。 レビューに数日投入するとしても、その状態でできること は狭い範囲の 「調整」 でしかなく、 大きく編成替えすることは想定されていません。 いや、それは日程上不可能なことかもしれません。
その結果、 曖昧なレビューを通過した 「要求仕様書」 を “完成品” あるいは順当 な成果物として扱っています。 「一発レビュー」 の場合も、 結果的にそのレビューを 通過することで 「完成」 とみなされます。
事前に要求仕様書のレビューを実施したにも関わらず、テストで発見されるバ グのなかに仕様関係のバグが多く含まれていることは、 そこにある要求仕様書で はレビューでコメントが出せるものではなかったことを意味しています。
要求仕様書の 「あるべき姿」 を持っていない状態では、そこに示された要求仕様書 の内容や構成について十分に検討できません。 それよりも、 仕様化が不十分だと要求 仕様書に潜む “欠陥” は事前には発見されないし、 レビューの場でもコメントは出て きません。 何が抜けているのかわからない状態なのです。 そのために承認を渋ってい るのですが、 ソフトウェア企業のエンジニアからは、 “6月20日までにFIXしてくれ なければ設計作業に入れない” といわれるし、このままでは時間が無駄に過ぎるだけ だし･･････ ということで 「これでFIXということで、進めてください」 となるのです。 もともと、 適切に仕様化できていれば、 個々の仕様に対して間違いや変更を指摘す
ればよいだけです。 衝突している仕様は実現できるレベルに調整すればよいだけです。 そこに 「FIX」 という言葉は出てきません。
実際に 「FIX」 が求められている要求仕様書を見てみると、 全体的に具体化されて おらず (仕様のレベルになっていない)、 この状況でいくつかの機能の仕様に対して 「FIX」 が求められているということは、裏返せば、 その他の部分はソフトウェア企業 のエンジニアのほうで勝手に解釈している可能性があります。
公式のレビューを実施したことで表面的には合意したとはいえ、 仕様化が不十分な 状態である以上、その後の仕様変更は避けられません。 あとで必要な仕様が認識され ていないことが判明して仕様を追加しようとしても、 「FIX」 したことが言質に使われ
*5CMMI のピアレビューと同じ意味で使っています。
95
第2章 なぜ仕様のトラブルが起きるのか
てしまいます。 テストで発見されたバグが仕様のアンバランスが原因だったので仕様 を調整しようとしても、 「FIX」 を盾に 「仕様変更」 と主張されるのです。 “必要不可 欠な仕様だから、 すでに決まっている機能に含まれているべき” といえば、 “仕様書 に書かれていないものは、 当然仕様の追加となる” と反論します。 その結果、 法廷闘 争に持ち込まれることも起きてしまうのですが、現実には、文書になっていないもの は "仕様変更" と認定される可能性が高いのです。
最初に、もっと精度の高い要求仕様書が書ければ、そして 「FIX」 とは違ったかた ちで合意する方法をもっていれば、こんな醜いことにならなくて済んだのです。
96
筆者も、最初から本書で紹介するような要求仕様書が書けたわけではありま せん。 そして当然のように 「FIX」 を強要し、ことごとく失敗しました。 顧客 からは叱られるし、 料金の支払いは渋られました。 でも1年後にこの世界に復 帰したときには、 失敗の原因がつかめていました。 仕様書のあり方について研 究していくなかで本書で紹介するような構成や書き方のヒントをつかんだので すが、 その過程で 「FIX」 も強要する必要もなくなったのです。
2.7 途中で仕様変更が混乱する理由
要求仕様書について依頼者との間で合意が交わされてベースラインが設定されるこ とで、開発部隊は設計作業に入っていきます。 この流れは、 機能単位に小さくイテレ ーションを刻む場合も同じですし、 ｢インクリメンタル」のライフサイクルモデルを 採用した場合も基本的には同じです。 合意もなしに作業を進めることはほとんどない と思います。 問題は、 そこで合意した要求仕様書の仕様化の状態によっては、 ベース ライン設定後の仕様の変更が作業を混乱させてしまうことです。
仕様変更というのは、一般にはその名のとおり 「仕様」 レベルで変更が求められま す。 たとえば、
「データの区分が4のときには、 種別コードが一致する搬送データと一緒にファ イルに保存するようにしてほしい」
とか、
「温度基準1の下に温度基準0 (設定方法は別に定める)を設定し、 その温度に達 したときは加温のペースを10%落としてほしい」
2.8 望みはある
というように、 具体的な 「仕様」 のレベルで変更が求められます。
このとき、ベースとなっている (合意した) 「要求仕様書」 に 「データ区分=4」 の記述が存在していたり、類似の 「データ区分 =3」 や 「データ区分=5」 の記述が あったり、 同じような粒度の仕様がすでに表現されていれば仕様変更の混乱は少なく て済みます。
しかし、ベースとなっている仕様書が仕様としては中途半端である場合、 たとえば、 データの区分にまったく触れないで、単に 「搬送データと一緒にファイルに保存する」 とだけ書かれているようだと、 上記のような仕様変更は 「行間」 に相当するところで 発生してしまうことになります。 その時点で 「データ区分」 を判断する処理がどこか でなされているのか、いるとしても、今回の仕様変更に関連するところで行われてい るのか、 今回の仕様変更は誰が対応すべきか、といったことを判断するネタがないた めに混乱するのです。
もし、ベースの要求仕様書が適切な粒度で表現されていれば、 仕様変更の多くはす でに表現されている文章 (仕様) に対して発せられることになります。 その場合は変 更前の仕様がどこで処理されているかはすぐにわかるので、ほとんど混乱することは ありません。 実際に、ベースラインの要求仕様書に対して、 変更率が3%を割り込む ぐらいになれば、仕様変更も 「行間の変更」 はほとんどなくなります (第13章 「13.5.2 変更率5%以下の効果」を参照)。
2.8 望みはある
どうすれば、早い段階で仕様のモレや仕様間の矛盾 (衝突) に気づいて適切な調整 ができるのでしょうか?
それには、要求仕様書の構成や書き方を変えることが必要です。 仕様モレなどのエ ラーは “注意” で解決できる問題ではありません。 では要求仕様書の構成や書き方を どのように変えればよいのでしょうか? それは、 実際に設計やコーディングの段階 で仕様の不備に気づいて、 次々と依頼者に仕様の問い合わせを発し、それが元で仕様 の変更を招いた設計者自身が考え出せる可能性をもっています。
彼はそのとき仕様のモレや衝突に気づいたのです。 彼は必要な仕様を見い出す基本 的なスキルは身につけているかもしれないのです。 実際問題として、 そのスキルがな ければ仕様の問い合わせや仕様変更は起きず、 そのまま仕様モレのバグになったはず です。 ただ気づいた時期が遅かっただけなのです。 そこにある要求仕様書の構成が、
97
第2章 なぜ仕様のトラブルが起きるのか
彼の能力を隠してしまっただけかもしれないのです。
要求を仕様化するということは、仕様を 「決めていく」 作業でもあるのです。 仕様 を決めるには、その仕様に繋がっている 「選択肢」 を順々に決めていく必要がありま す。 見方を変えれば、 要求仕様書というのは仕様を 「決定する過程」 を表現すればよ 先に決めた仕様と衝突していたりお互いに仕様が絡んでいたりして調整する必要 があることに気づいたときには、 戻って修正すればよいのです。
実際に、 要求仕様書で仕様を決めずに設計や実装作業に入るということは、仕様の 段階では決まっていなかったことを 「決めながら」 作業を進めることでもあります。 そこで決めたことをソースコードに姿を変えながら進めているのです。 仕様の不備か ら発せられる質問は、決めていくなかで出されています。 そうして作業が前進してい るとすれば、それは 「決めていった」 結果です。 ただし、この方法で作業を進めてい くと、その過程ですでにソースコードになった部分と矛盾することが増えてきたり、 3週間前にいきなりソースコードにした仕様とバランスをとる必要があったりするた めに、次第に作業が混乱するのです。
問題は、ソースコードを書きながら仕様を決めていったことです。 「決めていく行為」 は要求仕様書を作成するところでやればよかったのです。 ところが、 多くの人は、 仕 様書を書くときは、
●仕様間の絡みを解決し、 きちんと 「整理がついた状態」 を表現するものと考えて いる
②頭のなかで絡みあう仕様をほぐしてから 「完成した姿」 を書こうとしている
ために、 収集がつかなくなっているのではないでしょうか。
絡み合う仕様のなかでは、ある仕様の選択肢のなかから一つを選んで (決めて) み ることで、 それと絡み合う仕様のほうも選択肢が決まってきます。 「A1 を選べば、 次 の仕様ではB2かB4のいずれかになり、 A2を選べばB2かB3に･･････」 と迷っている 間に、 「最初の仕様のところで、 A1にするかA2にするかをどうやって選べばよいのか」 わからなくなっていることがあるようです。 こんなことを頭のなかでやっているため に、 前に進まないのです。
もう一つ、 仕様化ができない原因として考えられるのは、依頼者から渡された 「要 「求仕様書」 に対して、設計者のほうで不足している仕様を "補充する" という発想そ
98
2.8 望みはある
のものがないことです。 その証拠に、 「仕様を補充する」 ための作業は確保されてい ません。 この部分を改善すれば、 要求仕様の問題の多くは解決するはずです。 あとは 実際に、どのような構成にし、 どのような書き方にすればよいかです。 その方法は、 第2部で説明します。
99
3T 章
要求仕様は不要か?
90年代に入って、ソフトウェア開発の組織にも納期の短縮要求が強まってきまし た。 自動生成ツールなどもこの要求を受けて出てきているのです。 CMMI のようにエ ンジニアリングプロセスをきちんと踏んでいこうという流れとは別に、 小さなプロジ ェクトでは、人数も少なく納期やコストも制限を受けているので、 要求の内容を判断 して何かを上手に省かなければなりません。 もちろん、 時間がないからといって思慮 もなく省いてしまえば間違いなく失敗するので、 省いた分をレビューや成果物の構成 や統合などでカバーする必要があります。
このような最近の傾向のなかで、要求仕様書を作るのを省こうとする動きがありま す。 確かに、現実にそこにある要求仕様書では仕様モレを防ぐ効果はありません。 複 数の機能間で仕様が衝突しているのを早期に発見することもできませんし、レビュー でも防ぐことはできません。
要求仕様書の構成や内容とは別に、“安全のため" に1人の担当者の分担を小さく したことも仕様モレや仕様の衝突の発見を困難にしているのですが、 現実にはそこで 書かれている要求仕様書はいまや必要性や有用性を失った状態です。 それでも依然と して従来と代わり映えのしない要求仕様書を書いているのは、これに代わるものが用 意されていないことと、 急に書いていたものを省くわけにはいかないからというだけ でしょう。
実際に、 多くの人は、 要求仕様書 (またはそれに相当する文書) は必要ないとは思 っていません。 確かに、 仕様モレや仕様の衝突を検出することには効果を上げないか もしれませんが、 これが省かれれば何を作ればよいのかわからなくなり、 それこそ収 集がつかなくなることは簡単に想像できるからです。
こうした状況のなかで採りうる選択肢は2つ考えられます。
●従来の要求仕様書に代わるものを提案すること
②要求仕様書の構成や書き方を変えて有効性を高めること
後者が本書で勧める方法です。 現実に書かれている要求仕様書には大きな欠陥があ りますが、 構成や書き方を変えることで有用性を高めることができ、 それによって要 求仕様書としての本来の役割を発揮するというものです。
これに対して、 前者の方法の候補として考えられているのは、設計プロセスとの統
3.1 テスト仕様で代われるか? 101
合でありテスト仕様書との統合です。 テスト仕様は要求仕様を別の視点で見たものな ので、 書き方が工夫されれば統合は可能でしょう。 ただし、 統合の仕方によっては障 害 (誰が書くかによって生じる問題、 ボリュームに対応できるか、工数の確保、 誰が レビューするか･･････など) が生じる可能性があるので、周到な準備と統合されたプロ セスの合理性が求められます。
この章では、要求仕様書を省こうという動きに対して、 その問題点などを整理して みることにします。
3.1 テスト仕様で代われるか?
いままでのような要求仕様書の有効性に疑問を抱いていた人たちは、 「役に立たな い仕様書を書くぐらいなら先にテスト仕様を書いたほうがまし」という趣旨の議論が 飛び交っていることに勇気を得ていることでしょう。 そこでは、 要求仕様書に代わる ものとして「テスト仕様書」 が提示されています。 確かに、優れたテスト仕様書(テ ストケース仕様書) は、その内容や構成によっては、一部の品質要求を除けば、要求 仕様書に代わることができます。
しかしながら、 まともな要求仕様書が書けない人や組織が、 仕様化技術の不足をカ バーできるようなテスト仕様書が書けるでしょうか。 それができるとすれば、それま での要求仕様書にまつわる問題は、 要員の配置のミスであり見積りや工数の振り分け の失敗に過ぎなかったことになります。
要求仕様書とテスト仕様書はその目的も機能も同じではありません。 タイトルが違 っているだけではないのです。 要求仕様書は、 要求されているものを "作るために " 必要な仕様を、作りやすくなるように工夫してまとめている文書です。 それに対して テスト仕様は、正しく作られているかどうかを確認するための具体的な項目を、 テス トしやすいように組み立てた文書です (次ページ図 3.1 参照)。
作るときには何人かに分担されている機能でも、 テスト (総合テストなど) では一 体にして、複数の機能の組み合わせや機能に関連する多くのパラメータをマトリクス などにして効率よく確かめることになります。 もちろん、こうした機能に付随するパ ラメータの情報などは設計者にとっても有用なものなので、 できれば設計段階で公開 されることが望ましいのですが、 設計の担当者の分担範囲が細かく区切られた体制で は、このような統制がとれた資料を作ることは容易ではありません。
第3章 要求仕様は不要か?
図3.1 要求仕様書を元にしてテスト仕様書を作る流れ 要求仕様書から システムを設計・ 実装する ソース 要求仕様書 要求仕様書から テスト仕様書を 作成する テスト仕様書
このように、 元来、 テスト仕様書と要求仕様書はその役目を異にしているものです。 確かに、 規模が小さく期間が短く設定されたプロジェクトのなかでは比較的容易に兼 用できると思われますが、 その方法が他の多くの場面にも当てはまるというものでは ありません。
102
3.2 仕様化しないほうが儲かる?
あるとき、筆者のホームページ(HP) の読者から、HPの記事を見て「自分の上司に、 “もっと早い段階で仕様化に時間を投入すべきでは?" と話しをしたところ、 上司か らは“仕様化しないほうが儲かる” といわれた」 というメールが届いたことがあります。 いわゆる「ADD ON 仕様」というやり方で、 一部のソフトウェア企業が日常的にとっ ている行動です。 このソフトウェア企業は自らが要求仕様書を書くことはしません。
依頼者から渡された 「要求仕様書」 は当然ながら表現は不十分なので、仕様のモレ や矛盾 (衝突) は多数残されています。 ただし、最初の時点ではそのような不備には 具体的には気づいていません。 当然、 ソフトウェア企業のほうではこのような状況は 何度も経験しているので、仕様が漏れていることは最初から予想しています。 少なく とも、依頼者から渡された要求仕様書のページをぱらぱらとめくればわかります。 「あ あ、いつものパターンだな」 というわけです。
この場面でとりうる行動としては、早い段階で依頼者から渡された要求仕様書の不 備を補っていく方法がありますが、 そのためには、設計者のほうに仕様化のスキルあ るいは仕様を表現するスキルが必要になります。 しかし残念ながら、設計者側に仕様 化のスキルがないためにこの方法がとれません。 結果的に、 設計や実装の途中で仕様
3.2 仕様化しないほうが儲かる? 103
の不備に遭遇することになるのですが、 ここでとる行動がさらに2つ考えられます。
● 何ができればよいのかを適当に解釈して作業を進めていく方法 ② 「仕様の問い合わせ」 ではなく、 「この記述からは○○の動きが求められている
と解釈します」 という形の ｢仕様の確認」 を逐次発信する方法
です。
● のように適当に解釈して進めた場合、 実際に動くようになってから依頼者は自 分がイメージして伝えたものとは違うことに気づき設計先に対応を求めることになり ますが、このとき設計先は 「仕様変更」として再見積りに誘導します。 これが 「ADD ON 仕様」 の一つの形です。
この変形として、 ソフトウェア企業から (いつもならあるはずの) 仕様確認の問い 合わせがないため、依頼者のほうが不安に思ってソフトウェア企業のほうに「○○の 機能のところで、 □□のケースでも同じように処理されますか」 と仕様の確認を行う ことがあります。 すると “待っていました" とばかりに、 「そのような仕様になって おりません」 とか 「いただいている要求仕様書ではそのように解釈されません」とい う言葉と、 それを組み入れるには 「仕様変更」 になる旨の返事が返ってきます。 「仕 「様変更」 に誘導するわけです。 これも 「ADDON 仕様」の一つのスタイルです。
②の場合も同じように 「仕様変更」 となるのですが、 依頼者より気づくのが早い分 だけまだ良心的かもしれません。
「ADD ON 仕様」というやり方は営業的には売り上げは伸びるでしょうが、 仕様の 変更がいつまでもだらだらと続くので、 そこで作られるソフトウェアのアーキテクチ ャは崩れてしまうでしょう。 また仕様変更が続くために現場のソフトウェアエンジニ アが疲弊することは避けられません。
確かにソフトウェア企業にとっては、依頼者側で書かれるできの悪い要求仕様書は 「金のなる木」 なのかもしれません。 こうなる原因として、依頼者側にもソフトウェ ア企業側にも仕様化技術が不足していることが背景にあります。 ADD ON 仕様のやり 方は、そのような状況のなかで当然の帰結として成立しているともいえます。
しかしながら、いつまでもこのような行動を取り続けていては日本のソフトウェア 産業そのものを衰退させるだけですし、変更に対応するのに必要以上にコストがかか ってしまうため発注側の企業も経営体質を弱めてしまいます。 つまり、双方にとって 「百害あって一利なし」 なのです。
104 第3章 要求仕様は不要か?
3.3
"I '不完全な要求仕様” の誤解
「要求のすべてを最初に決めるのは無理だ」 「そんなものを書いてもすぐに変更されてしまう」 「顧客はどうせ要求仕様なんて書けないし、こっちで要求仕様書を書いても読ん でくれない」
「だったら、さっさと動くものを作ってから改良するしかない」
そこで書かれている不適切な 「要求仕様書」 に振り回されているソフトウェアの開 発現場からは、このような声が聞こえてきます。
また、最近の 「Agile」 な手法を紹介する文献にもこのような現場の声を反映する ような文言が多く見られます。 要求仕様で悩まされているソフトウェアエンジニアの 皆さんにとって、悩んでいるのは自分だけではないということで、心強い (?) 味方 を得ているのではないでしょうか。
しかし90年代に入って、「品質要求」に続いて「納期短縮の要求」 「コスト削減の要求」 と立て続けに市場から要求が発信されているなかで、そのような姿勢で市場の要求に 応えられますか? もっと、 要求仕様のあり方を考える余地は残されているのではな いでしょうか?
たとえば、 多くの組織では、 「要求仕様書」 はおそらく "Word" のようなワープロ ソフトで書かれているのではないでしょうか。 そこでは、「文書というものは "Word" で書くものだ」という先入観が働いているのかもしれません。 そのこと自身は大きな 問題ではないのですが、 Wordで書くことで、一般には 「散文」 になってしまうこと が多く、 仕様モレが起きやすいという傾向が見られます (Wordが悪いのではありま せん。 構成や書き方の問題です。 表3.1 参照)。
もうひとつの問題は、 「要求」 が表現されていないことです。 これが、そこにある 要求仕様書の有用性を高められない最大級の問題なのです。 そしてその延長線上の問 題として、 「要求」 と 「要求仕様」 の区別がついていないことです。 実際にそこで書 かれている文章を読んでも、 「説明」 なのか 「仕様」 なのか判別しにくい例をしばし ば目にします(これもWordとは関係ありません)。 要するに、 そこにある要求仕様 書では 「仕様書」としての“役” を果していないのです。
このような状態では、 要求仕様書の段階で仕様のモレを防ぐことや、 仕様間の矛盾 (衝突) を発見することは困難です。 当然ながらこの後、 設計や実装作業のなかで仕
3.3 *不完全な要求仕様 の誤解
↓表 3.1 Wordで書かれた要求仕様書の事例
2.5 受信メールの検索機能
指定されたメール文の中で、 選択した文字列を 「キーワード」に指定できる
ただし、 1つのキーワードの文字列は最大12文字とする
■1つのメールでの 「キーワード」 の指定は何個でもできる
検索の際は、 複数のキーワードを 「AND」 と 「OR｣ で繋ぐことができる
■このとき、 指定できるキーワードは最大8個まで
■検索されたメールの 「Subject」 を一覧で見えるようにする
Wordで書かれる要求仕様書は、このように項目名の下に、 「いきなり仕様が列記されることが多いようだ。
様の不備に気づいたり、仕様変更の "頻発" に見舞われたり、 さらに収束しないバグ に追いまくられたりして多くのソフトウェアエンジニアは疲弊していくのです。
□ 3.3.1
はじめから要求を正しく把握することは困難か?
要求仕様書がうまく書けずいつも翻弄されている組織では、 「人間のコミュニケー ション能力は不完全であるから、はじめから要求を正しく把握することは困難」で「そ れよりも動くものをさっさと作ってから手直ししたほうが早い」 という論法に惹きつ けられるものがあるようです。 自分たちはいままで何とかして要求を正しく把握しよ うとしていたが、 それは無意味なことだったのか、そういう意味のないことを追いか けていたのか、というわけです。 この"アピール” は、 多くのソフトウェア開発の現 場の人たちに強烈に効いたと思われます。
確かに、人間のコミュニケーション能力は不完全です。 そこで“わかった" と思っ たことも、あとになってみると認識がずれていた、ということはしばしば起きてしま います。 でも、それは「“わかる”に潜む問題」 であって、“コミュニケーション能力 の不完全さ”で片付けて済む問題ではありません。 表現やプロセスをもう少し工夫す れば、 実際の作業に支障をきたさない程度にわかりあえるのです (第5章 「5.2 “わ かる"の問題に対応する」 を参照)。
「要求」 を正しく把握したかどうかは、最終的には 「結果」 でしか判断できないも のかもしれません。 依頼者の求める要求を正しく把握するための努力と工夫は不可欠
105
106 第3章 要求仕様は不要か?
ですが、それでも認識が食い違っているかもしれません。 それは、 その時点ではわか らないかもしれないのです。
実際にそのような場面はしばしば起きているので、そのような組織のなかで振り回 されている人たちには「初めから正しく把握することは困難」 という意見に説得 力を感じるものと思われます。 しかし、 要求仕様書の書き方や構成の工夫もしないで、 「正しく把握することは困難」 と切って捨ててよいのでしょうか。
「人間のコミュニケーション能力は不完全であるから、はじめから要求を正しく把 握することは困難」 で 「それよりも動くものをさっさと作ってから手直ししたほうが 早い」 という論法は、 仕様書として適切に書かれてない現状の要求仕様書をそのまま "肯定”したところの論理です。
多くの現場で書かれている要求仕様書には 「要求」 が文章の形で表現されていませ ん。 要求仕様書を作成する作業で行われているのは、要求を会話 (ヒアリング) のな かで認識し、そのなかに含まれるべき仕様をリストアップするだけです。 その記述に 不安を覚えたときは、その仕様を実現したときにどのような動きになるかといったこ と (説明) をだらだらと書き加えることぐらいです。
その前に、依頼者が簡単な文字にしたり言葉にして発したりする 「要求」 が、本当 に依頼者がイメージしていることを表現しているものかどうかを確認しないまま勝手 に解釈した状態で仕様を引き出そうとしています。 これでは仕様モレが起きないほう が不思議です。 いや、これではもっと厄介な 「要求ズレ」 が起きてしまいます。
依頼者のほうも、いきなり 「仕様」 が文章になってまとめられた要求仕様書を見た とき 自分が発した 「要求」 が表現されていないのでどのように伝わったのか確認で きません。 そこに並んだ仕様は、 ある程度は自分のイメージしていることを当ててい るように思われますが、 具体的に 「仕様」 のレベルになっていないため、 自分の発し た要求とどのような関係があるのか依頼者自身もそこからは真意を読み取れません。
これが現実に起きていることなのです。 そして、このような状況のなかで書かれて いる要求仕様書には有効性を見出せないかもしれません。 いくらレビューを繰り返し ても問題は発見できません。 でも、この状況は要求仕様書の構成や書き方を変えるこ とで大きく改善できるのです。 「人間のコミュニケーション能力は不完全である」と いって他に解決策を見出そうとしても、何らかのかたち (方法) で要求を把握すると ころでは結局 「要求の不完全さ」 から逃れられるわけではありません。 だったら、最 初のところで不完全さを改善する方法を見出したほうがよいでしょう。
33 *不完全な要求仕様の誤解 107
□ 3.3.2 初期に時間をかけて “完全な" 仕様化に取り組む価値はない? あるいは、 「ビジネスの環境は半年で変化する」 「だから時間をかけて “完全な"仕 様を書く価値がない」、 そのようなものを書いても書き上がったころには要求は変化 するというわけです。 確かに、 領域によってはそのようなスピードで変化しているで しょう。
しかし、このことが問題になるのは、
●設計作業に役に立つレベルの要求仕様書になっていない
②そのような要求仕様にもかかわらず、まとめるのに時間がかかりすぎている
からです。一般には、 要求仕様の作成にそれなりの時間を投入したにも関わらずほと んど 「仕様」 のレベルになっていないので、 仕様化作業に投入した時間は設計以降の 作業のなかで回収されません。 それどころか、設計工程のなかで改めて仕様化して不 足を補っているのが現実です。 これでは初期に仕様化に投入した工数は何だったのか ということになり、 「“完全な”仕様を書く価値がない」 という誘惑に負けてしまいます。
仕様化が適切なレベルで実現しているときには、すでに設計のイメージができてい ます。 「仕様」 であることの一つの条件は、仕様によって「実現可能性」 が見えるこ とです。 そこまで具体化するからその仕様が実現される設計や実装の場面が見えてい るのです。
多くの現場では、 設計の様子が見えるような具体的なレベルの仕様は、設計工程の なかで掘り下げるものと考えられています。 そのような考え方で書かれた要求仕様書 は、 当然、 設計や実装のイメージにはつながりません。 その結果、設計工程や実装工 程に入って "具体化” するなかで仕様のモレや衝突に気づくことになります。 どうせ 設計工程のなかで仕様を把握するのであれば、 要求仕様書を作成する段階で把握して もかまわないのです。 そのほうが仕様を引き出す際の効率は上がりますし、設計工程 ではその実現の方法を考えることに専念できます。 いや、実現したい仕様が明確にな っていることで、設計工程に入ったときには実現方法のアイデアを巡らせているので す。 その結果、 いままで設計工程で行われていた仕様化の時間の半分は要求仕様書を 作成する工程に移り、 半分は消滅します。 それ以外に設計方法を模索していた時間の 半分も消滅します。
さらに、設計工程で仕様の実現方法を考えているときに何日か前に設計方法 (実現 方法) を考えた機能の仕様との絡みを確認したいときは、 要求仕様書を見れば済みま
第3章 要求仕様は不要か?
す。 いままでだったら、 要求仕様書にはそのようなレベルのことが書かれていないの で、 すでに実装したソースをたどってそのときに決めた仕様を思い出すことになりま す。 適切な仕様が存在すれば、ソースをたどって仕様を思い出す時間のほとんどは消 えてしまうのです。
確かに、そこで書かれている要求仕様は “完全な" 仕様ではないかもしれません。 でもそれは “結果” でしかわかりません。 しかし、明確な 「要求」 の枠のなかで適切 に 「仕様」 が抽出されていれば、 仕様モレや矛盾が発見しやすくなり、 より好ましい。 状態に近づけることができます。 "完全" ではないかもしれませんが、ベースライン 設定後の要件の変更率を数%以下に抑えることができ、 QAテストでの仕様のバグ発 生率も1%以下に抑えることができます。 これ以上の“完全” を求めるのですか?
要件の変更率･･･ベースライン設定時の仕様数を分母にしたときの、その後の 仕様変更率
バグの発生率 生成したソース行数 (コメント行を除く) を分母にしたとき の、QAテストにおけるバグの発生率”
時代の変化のスピードが速いとしても、 要求仕様書が曖昧な表現のままでその後の 設計作業や実装作業を進めることができるでしょうか。 一般には、 実装しながら仕様 を確認したり、 新しい機能の追加が求められたりしたとき、 そこですでにソースにな っているいくつかの箇所とで矛盾することが判明して作り直すことが起きてしまいま す。 というよりも、作り直しは避けられなくなります。
ただし、そこでイメージされている要求仕様書の認識を間違えていて、 必要以上に 仕様化することにこだわっているために時間をかけすぎることへの反発を招いている のであれば、それは要求仕様書の意味を考え直すことをお勧めします。
□3.3.3 予測するよりも “適応” するほうが重要か?||||||||| 「仕様には “予測” する部分が含まれている」 というのは、明らかに 「仕様」にな っていない状態と思われます。
「仕様化」という行為は “決めていく " 行為です。 予測する部分があってもそれを 決めていき、 適切に調整された結果として残されたものが 「要求仕様書」 です。 もち ろん、 変化する可能性が高いのであれば、 変化の方向に対するコメントなども 「説明」 として書き添えておくことは大事です。
本当にそこで求められているような振る舞いが実現できるかどうかが見えない状
*1 バグ発生率は、必ずしもQAテストのバグに限定するもの ではありませんが、現実には設計者テストのバグの情報が把握 されていないため、 結果的にQAテストのバグ発生率になってしま
うのです。
108
3.3 不完全な要求仕様の誤解 109
態、あるいはそこで仕様として表現されているものでも動作範囲や振る舞いを "特定" できない表現が残っているような状態では、 設計者は必要な仕様を "予測" して不足 を埋めることになるかもしれません。 しかしながら、 設計や実装作業のなかで “予 測” した仕様は、一般には要求仕様書に書き加えられることはありません。 進め方に よってはここで関係者が集まって技術的なレビューを行って確認されるかもしれませ んが、 そのようなレビューが行われなければ、途中でその予測された内容が検討され ることはありません。 結局最後になって、 予測された内容は 「動作」として確認され ることになります。 そこで“予測” がはずれていることに気づかされるのです。 これ は、要求仕様書の存在を否定する理由にはなりません。
もう一つの問題は、 予測する部分が多くて仕様化を省いた状況で、 どうやって “適 応” するかです。 そのような状況で実際に動くものを作ろうとしても、実現する過程 で予測しなければならない状況は変わらないはずです。 それとも、要求仕様を書こう とすると“予測” が必要だが、さっさと動くものを作ればそのような予測が生じる余 地がないというのでしょうか。 もしそうだとすれば、やはり要求仕様書に対する認識 が間違っていると思われます。 実現性や検証可能性という特徴をもった要求仕様書で 「あれば、 「隙間」 を予測する必要はなくなります。
そうはいっても、要求仕様のなかで"予測” するところが一カ所あります。 それは、 仕様の変化の方向に対する予測です。 仕様はいつまでも同じではありません。時代が 変わり、環境が変われば仕様も変わってきます。 でも、この変化は予測しなければな りません。少なくとも変化の可能性を感じた場合は、いつ変化するかとか変化の方向 を予測すべきです。
「予測するよりも適応するほうが重要」 というときの“予測” が、この将来の仕様 の変化の予測だとすると、 変化の方向を予測もしないでいきなり適応した状態では、 実際に仕様が変化したときに最短の時間で対応できない可能性が出てきます。 確かに その変化が、システムが想定している寿命の範囲のなかで起きるかどうかわからない ようなことまで考える必要はありませんし、 変化を予感しなかった場合も予測しよう がありません。
その時点での仕様が成立している背景や条件などに目を配ることで、 仕様の 「安定 期間」(第8章 「8.14 "FIX" から“賞味期限” へ」参照)が見えてきます。 また、「理 由」 という角度から要求を見ることで、 要求のズレが早い段階で見えてくるので、 す ぐに要求を調整できます。
110 第3章 要求仕様は不要か?
このように、「不完全な要求仕様書」 の議論は、現状の要求仕様書の構成や書き方 をそのまま認めたところでのみ成り立つ議論なのです。 それには他に改善の余地はな い だから違う方法を採るべきだという論法のように見えます。
3.4
"コードなら書ける ” の仕組み
昔から、ソフトウェアエンジニアは通常の文書で要求仕様書を書くのが苦手です。 いや、 人との応対 (交渉) が苦手なのかもしれません。 彼らの多くは 「仕様は書けな いけどソースコードなら書ける」 といいます。 でもそれは本当でしょうか?
ソフトウェアエンジニアは通常、 コンピュータに自分の意志を伝えるための言葉や 文章 (命令文)を書く訓練は受けています。 それに、 自然言語と違って明確な記述上 のルールがあり、意志の伝え方が強く規制されています。 そのルールを覚えてしまえ ば、比較的容易にコンピュータに自分の意志を伝えることができます。
これに対して、 多くのソフトウェアエンジニアは自分の意志を人に伝えるための言 葉や文章を組み立てる訓練は受けていません。 それを意識して自分で学習することも やっていません。 必要な技術を身に付けていないのですから、 自分の意志が相手に伝 わらないのは当然です。
ソースコードとは、ある機能で求められる仕様をコンピュータで実行させるために、 コンピュータが理解できる言語で“具現化” したものです。 彼は、PCから届いたデ ータをチェックもしないで処理に回すことはよくないと思ったから、 受信時に丁寧な チェックをするソースコードを書いたのです。 どのようなチェックをすればよいのか を具体的にイメージできたから、見事なチェックプログラムが書けたのです。 それは ソフトウェアエンジニアの意志の表現だったのです。
コンピュータに自分の考えを伝えるためのソースコードが書け、 しかもそれが適切 なコードになっているとすれば、彼は仕様を考え出すためのスキルをある程度持って いることを意味します。 そうでなければ、必要なソースコードは浮かんできません。 したがって、 彼が人に伝えるための“仕様は書けない” というのは、
要求仕様書の構成が悪くて、 そこでは仕様をイメージさせないか、 日本語の文章に対する劣等感のようなものが邪魔をしている
と考えられます。
3.4 "コードなら書けるの仕組み 111
仕様を書くよりもコードを書くほうが早いか? 3.4.1 もしかすると、 要求仕様書に対する考え方を間違えているのかもしれません。 ソー スコードを書いているときに作業がはかどるように見えるのは、そこでは “決めてい く” 行為を押し進めているからです。 確かに、 初期の頃はどんどんソースコードが書 けるので作業がはかどるように見えるでしょう。 「仕様書なんか書いていたらこんな 感じにはならなかった」 と思えるかもしれません。
要求仕様書も “書きながら決めて” いけばよいのですが、一般にはそのように認識 されていません。 要求仕様書は、きちんと “決まったことを書くもの”と考えられて いるようです。 この考え方の違いが要求仕様書を作成する際の障害となっていること は確かです。
でも、決めていきながら書く (あるいは書きながら決めていく) のですから、あと になってすでに書いた機能の仕様との間で調整が必要になることもあります。 もちろ ん、ソースコードを書きながら進めていく場合も同じです。 ちょっと大きなシステム であれば、そのような調整の場面にしばしば遭遇します。 要求仕様書であれば表現を 調整したり仕様を移動したりすればよいのですが、いきなりソースコードを書いてい る場合は、仕様を思い出すためにすでに書かれたソースコードを読み直したり、 調整 のためにソースコードを修正する作業がどんどん増えてきます。 終盤では、 仕様の調 整作業が1日のなかに占める割合が半分を超えることも少なくないのです。 このこと は、 毎日の作業を計測してみればわかります。
確かに、プロジェクトの案件によっては、 簡単な要件リストにいくらか手を加えた ものがあれば、いきなりソースコードを書く方法でうまくいくかもしれません。 規模 も小さく仕様の絡みも少ないので短期間の開発が優先されます。 その上、 保守性の要 求もないような場合にはそれでもかまわないかもしれません。 いろいろな開発方法の なかの一つとして身に付けているのなら問題ないのですが、 いつもこのパターンとい うのでは困難に遭遇することになります。
一般には、 仕様書を書くよりもソースコードを書いたほうが早いというのは、 「慣れ」 という要素も大きいと思います。 要するに、 要求仕様書を書き慣れていないのと、 日 本語の文章を組み立てるのに時間がかかっていることが、 要求仕様書を書くことの壁 になっているのです。 彼が適切な要求仕様を眼にし、 その書き方を練習していままで とは違った仕様書を書けるようになったとき、 どちらが早いかはっきりするのですが。
112 第3章 要求仕様は不要か?
□3.4.2 設計しながら仕様を探り出す? 何度もいうように、設計者のなかには詳細な仕様 (?) は設計工程のなかで抽出す るもの、と認識している人も多く、 仕様に関するヒアリングが設計作業に入ってから 行われているようなことが少なくありません。 これは、
●分析と設計の区切りがわからなくなっていること
②設計とは何をすることかが見失われていること
③ 分析・設計手法での 「分析」 とは、 「仕様を見つけるための分析」 と認識してい ること
などが影響していると思われます。
たとえば、「ユースケース」 を使うことで 「誰がどのような機能を求めているか」 を発見しやすくなります。 これは 「要求」 の一種です。 しかしそこでは要求は発見で きても仕様は必ずしも発見されていません。 理由は二つ考えられます。
一つは、ユースケースの「シナリオ」 や 「記述」の構成上の制約、あるいは限界と いえるものです。 もう一つは、「(設計のための) 分析および設計作業を進めながら仕 様を見出す」 という姿勢で対応しているためです。 要求の仕様化の段階では何をヒア リングすればよいのかわからない、ということもヒアリングの時期が遅くなっている 背景にあると思われます。
"わざわざ" 仕様を文章にはできないけどソースコードなら書けるという人の場合、 実際に設計を進めていかないと、必要な仕様やその時点で決まっていない仕様に気づ きません。 というよりも、 そこで書かれている要求仕様書の構成が現実の設計や実装 の場面をイメージさせないために、 仕様書の作成段階では仕様に気づかないのです (“わざわざ” というのは、 同じことをこのあとすぐにソースコードにするのに、とい う感覚をいいあらわしたものです)。
確かに、 「分析」 と呼ばれる作業のなかである程度は必要な仕様に気づかせること はできるでしょうが、そこでの「分析」 は、 最適な設計方法 (実現方法)を考え選択 するための分析であって、 仕様を引き出すための分析ではありません。 そのため、 実 現方法の分析のなかでは仕様の導出には確実性に欠けるのです。 にもかかわらず、 「設 計しながら」というパターンに依存していては仕様の発見が遅れてしまい、結局は設 計や実装作業の後戻りが増え、どんどん時間が過ぎていくことになります。
B
35 GUI 構築ツールで仕様を引き出せるか?
「分析」 には、 要求仕様 (要件) を引き出すための分析と、そこで実現 が求められている要求仕様の実現方法を決めるためにどのようなデータ構 造を選択すればよいのか、どのようなアーキテクチャを選択すればよいの か、というように設計方法を選択するための分析の2種類あるのですが、 違いを意識して 「分析」 という言葉を使っている人は少ないようです。
3.5 GUI構築ツールで仕様を引き出せるか?
前回のプロジェクトで 「動くものがないとわからない」と顧客の担当者にいわれた こともあって、 今回は要求仕様書の代わりに 「GUI構築ツール」 を使って先に画面の 設計を進めて、 操作の様子や使い勝手などを直接顧客に見てもらうという方法がとら れることがあります。
確かに、一般に書かれている要求仕様書や画面仕様書では “動き” が見えません (動 きを連想させるような書き方になっていません)ので、それと比べればこうしたツー ルでそれらしく動く状態を見せたほうが早いかもしれません。
ただしこの段階では、 必要な画面の要素や操作の仕様を十分に把握して 「GUI」 を 構築したわけではなく、 その時点で設計者がわかっていることや過去の経験に基づい て作っただけです。 そのため、 計測結果を表示するスペースのところには何か適当な パターンが表示されているでしょうし、 ボタン操作も現実の動きに似せた動作をさせ るだけかもっと簡略化するかもしれません。 それがこの場面でできることの限界でも あるのです。
問題は、これで必要な仕様を引き出せるかということです。 人は、目の前に動くも のがあったり画面に見えるものがあったりするとき、明らかに動きがおかしいとか 表示内容や必要な操作が欠落しているということには気がつきます。 しかしながら、 「GUI構築ツール」 で動くものを見せられたとしても、計測データがその表示範囲を 満たすだけのデータ量が得られていないときの計測データの表示はどうするか、何ら かの理由でサンプリングデータが飛んでしまったときはどう表示するか、 表示の更新 はサンプリングのサイクルに同期させるのか、といったことには気づかない可能性が あります。
一般に、人は誰でも目の前に動くものがあるときはそれに誘導される傾向がありま す。 現実的な“動き” が目の前で繰り広げられていると、 その動きに思考の範囲が制
113
114 第3章 要求仕様は不要か?
約されるのです。 このとき、 「GUI構築ツール」 で画面の配置を見せながら、 表示領 域やボタンに関連するいろいろな「振る舞い」 をリストアップした要求仕様書や画面 仕様書があれば、 読み手 (GUIの画面を見ている人) の頭のなかで他の画面との関連 や細かな動きをイメージさせることができ、 単純に 「GUI」 の画面を見せるだけのと きとは違った状況に誘導できます。
もともと、 「検証」 という行為は、 読み手の頭のなかで "連想" を働かせ、 あっち へ飛んだりこっちへ振り返ったりしながらモレや欠陥を発見する行為です。 「GUI構 「築ツール」で“動く画面” を見せただけでは、この 「検証」 の機能を阻害する可能性 があるのです。
もちろん、このことは 「GUI構築ツール」 が悪いのではありません。 これを使う人 が、前回、客先の担当者から 「動くものがないと」 といわれたことの反動で 「GUI 構築ツール」 に依存しすぎ、 その負の要素に気づかないのが悪いのです。
第4章
仕様化の効果
ここまでの章で、 多くの問題は不適切な要求仕様書に起因していることを説明して きました。 これまでのところで、 要求仕様書として必要な機能が満たされていないこ とはいうまでもありませんが、 そのほかに、仕様を省いて “いきなりの設計” にとり かかるのも、頻繁に発生する再設計も、 見積りがうまくできないのも、 設計作業に入 れずにいつまでも入り口で徘徊するのも、 テストモレが起きるのも、 断片的な仕様メ モが無規律に作られるのも、その原因の多くは要求仕様の構成や内容が適切でないこ とに起因していることに気づいたでしょうか。
本書で勧めるルールに則って要求を仕様化することで関係者が実現することの内容 について特定 (Specify) できるレベルで仕様化でき、また仕様化の段階で「実現可能性」 が見えるので設計の形もイメージできます。 その結果、 この後の設計プロセスで行う 行為としては、これらの仕様を満たすために、
どのようなデータ構造を選択すればよいのか
どのような処理構造で対応すればよいのか
それらの処理は状態遷移のなかで実行されることになるのか
といった実現方法に考えを集中することになります。 仕様が具体的に表現されている ことで、 その仕様を実現するための処理のタイミングが見えているのです。
一般に、仕様は単純なものばかりではありません。 仕様同士で衝突していることも あるのですが、それは適切に 「仕様化」 しないかぎり気づくことはありません。 仕様 化が不十分だと、 設計段階か実装段階になってはじめて、すでに実装した機能の仕様 (ソースコード) と衝突していることに気づくのです。 この場合、 仕様の衝突は常に 過去に着手した機能の仕様との間でのみ検出されます。
仕様の衝突は、一般には大きく仕様を変更しないかぎり回避できません。 関係する 機能間で仕様を調整して “折り合いをつける" ことが必要です。 そのときは、処理構 造だけでなくデータ構造の変更も必要になることがあり、 双方の仕様に制限をつける ようなことも起きてしまいます。
一般に、設計以降の作業は仕様化作業と比べて投入される人が増えます。そのよう ななかで仕様の衝突が発見されれば、 後戻りの工数は必然的に増幅してしまいます。 しかし本書で勧めるような仕様化に取り組むことでその作業のなかで仕様間の衝突状
第4章 仕様化の効果
116
態が見え、その時点ですでに書かれた仕様間で調整することになります。 まだ設計作 業に入っていないので大きな混乱は生じず、 何よりも、 影響する機能や仕様のピック アップ作業の工数はソースコードで遡るのとは比較にならないほど少なくて済みます。
仕様化の出来栄えは、設計作業のなかで “ここで何をしなければならないのか"と いうことで戸惑ったり立ち止まったりすることがどれだけ減るかということからも判 断されます。 いままでであれば、 そこでとりかかっている機能の仕様に絡む問題を考 えながら、ときにはソースコードや設計メモなどを振り返って仕様を確認する作業が 日常的に行われていたのですから、 適切な要求仕様書が書かれることで設計作業の効 率が格段にあがります (いうまでもなく、この時間の何割かは、 要求仕様を作成する 工程に回っています)。
また、 組み込みシステムの開発では一般に仕様の絡みが複雑なこともあって、 新し い機能の実現の可能性を確認するために、しばしば安易な 「試作」 が行われてきまし た。 組織によっては、 そのために仕様化の作業が大幅に遅れてしまいます。
しかし、そこで表現する仕様のレベルが変わることで、 「試作」 で確認しなくても 実現可能性に対する見通しが見えやすくなります。 試作も本当にそうしてみるしかな いという場面に限定できるでしょう。
このほか、一般には設計や実装レベルで気づくような仕様が、 設計前の仕様化の段 階で明確になっていることで、設計工程や実装工程の時間が大幅に短縮されます。 こ こまでくると、 仕様化に工数を投入することに合理性を見出すことができるのです。
いままで、そこまで詳細に仕様を書いていては設計の時間がなくなると思われてい たのは、要求仕様の構成などを改善していないため時間をかけた割には仕様化が中途 半端だったからです。 仕様を拾い出したと思っても、要求の階層化も仕様のグループ 化もされていない状態では、 必要な仕様は抽出できていません。
本章では、 実際のコンサルティングのなかで確認できたことなどを紹介しながら、 仕様化に取り組むことの効果について説明していきます。
4.1 要求仕様書がすべての始まり
ソフトウェア開発において、 「要求仕様書」 は、 その後の設計プロセスの主要な入 力物であることはいうまでもありませんが、 そのほかにも多くのプロセスの入力とな る重要な成果物です。 たとえば、 テストケースの設計プロセスにとってはテストケー
4.2 一気に解消する混乱 117
スを作るための元ネタですし、計画段階で選定したライフサイクルや、それに沿って 構築したエンジニアリングプロセスも要求仕様で明らかになった内容によって調整し ます。 この要求仕様の出来栄えが不十分だと、プロジェクトのプロセスの「テーラリ ング"」が機能しません。
このほかにも要求仕様書は、より精度の高い見積りをするための元ネタです。 実際 には、要求仕様書を作成する前に行われている仮説見積りを調整するために重要な情 報を提供します。 事前に見積ったサイズ (項目数) に対して、 仕様化で明らかになっ た実績値を使って以降の成果物も含めてサイズ見積りを調整します。 仕様化が曖昧だ とこのときの調整の精度が低下します。
機能の実現性に関するリスクも要求仕様書から抽出することになります。 仕様が実 現性を見せる程度に具体化されていればその機能が容易に実現するものかどうかも見 えてくるので、 リスク管理の対象に選ぶ判断もできるのです。
さらに、仕様が明らかになっていれば、 作業の分担を決める際にも担当者との間で スキルのミスマッチを防ぐことができます。 あるいは、事前にスキルの不足が見える のであれば、 トレーニング計画に盛り込むことができます。 次ページ図4.1は、その ような関係をあらわしたものです。 このように、要求仕様書がよい状態で作られるこ とがソフトウェア開発を成功に導く大きな鍵になります。
4.2 一気に解消する混乱
通常、 コンサルティングの依頼は、 すでに品質の問題で相当に混乱した状態に陥っ てからきます。 なかには 「CMMIを導入して一気に問題を解決したい」という管理者 もいますが、 CMMI を 「銀の弾丸」 と思いたいのでしょうか。 しかしながら、 そこで 起きている問題には「プロセスに起因するもの」 と、 「エンジニアリングに起因する もの」があり、 CMMI だけでこの両方の問題を解決することはできません。
残念ながら、 すでに大きく混乱した組織がその状態で取り組めることは限られてい ます。 管理プロセスはもちろんエンジニアリングのプロセスも曖昧だし、多くの場合、 要求をソースコードに変換するための設計技術そのものも不足していることが多いも のです。 その上、これまでの混乱で受けたダメージで心理的にも新しいことに取り組 める余裕はほとんどありません。
それでも、
*1 CMMI で、 組織の標準プロセスを元に、プロジェクトの要 求に合うようにプロセスを調整する行為。
118 第4章仕様化の効果
図4.1 要求仕様書が計画や設計、 テストなどの入力となる
·要求仕様書
テスト計画
ライフサイクルの
選択プロセスの設計
テストケース 仕様
設計プロセス
で実現の目標
課題リスト
リスクリスト
(プロセス)
となる
|プロセスフローダイアグラム プロセス定義
(プロセス定義)
PFD:
(成果物定義)
PFD &
担当の割付け
(目標)
| 成果物一覧
サイズ
見積り
(プロセス)
プロジェクト計画書 を構成する
(目標)
(プロセス)
|工数見積り
担当分PFD
( プロセス定義)
プロジェクト スケジュール
「要求仕様書の出来栄えが、 その他の作業に大きな影響を与える。
要求の仕様化 プロセスの明確化 "2
個人別 スケジュール
の2点だけは取り組んでもらいます。 この2つを除外して解決するものは何もないか らです。
もちろん、 どの程度まで求めるかは状況によって異なります。 たとえば、 要求の仕 様化については、 要求を表現すること、 そのなかに仕様を収める取り組み、 曖昧性を 排除した仕様の表現などに取り組んでもらいます。
一方、プロセスの明確化については、 PFD (Process Flow Diagram) という表記法 を使って少しでも要求の特徴をつかんだ形でプロセスと成果物を表現します。 そして そこで見えた主要なプロセスや成果物の定義もある程度のレベルで取り組んでくれた ときは、ほとんど例外なく最初に設定された 「納期」 と 「品質」を達成します。 この とき、その組織が持っている設計技術は従来の技術のままで更新されていません。
2 本来は「プロセスの設計」という取り組みですが、このよ うな状態の組織には”設計”という行為は実現しないので、“明 確にする”というレベルで押さえているものです。
4.2 一気に解消する混乱 119
前回のプロジェクトで相当に混乱した組織であっても、要求の仕様化とプロセスの 設計をある程度のレベルで取り組むことができれば混乱は一気に解消します。 特に要 求の仕様化の効果は大きく、 設計以降の作業で滞ることなく進行しバグも大幅に減少 します。 これに対して、プロセスの明確化のほうは、 仕様化の効果を “倍加” する方 向で作用します。 ただし、 要求の仕様化を後回しにしてプロセスの明確化だけに取り 組んだ場合、 はっきりした効果は得られません。 このことから、 多くの問題は 「曖昧 な要求仕様」 に起因していることがわかります。
4.2.1 仕様の変更率が1/10に減った 一般に、品質問題で混乱している組織では、仕様の変更率は30%以上でなかには 100%になる組織も目撃しています。 ここでいう仕様の変更率というのは、図4.2の ように、ベースライン設定された仕様項目の総数に対して、 以後に変更された仕様項 目数の割合です。
↓図4.2 仕様の変更率
変更仕様項目数 x 100 総仕様項目数 変更仕様項目数: ベースライン設定後に発生した変更の仕様項目数 仕様項目数: ベースライン設定時の仕様 (と判断した) 項目数 ベースの仕様には、関係者が仕様と認識したものという意味が含まれる。 変更は、 要求レベルで出されることがあり、 要件管理のなかで仕様化さ れた際の仕様数で数える。
仕様の変更率が高いということは、それだけ設計や実装工程のなかで設計者が仕様 の変更に振り回されていることを意味します。 要件管理のなかで、 要件変更に伴って 投入した工数を累積すれば、 どれだけの時間が変更に対応するために消費したかがわ かります。 変更要件によっては、 1件の変更で5時間ぐらいかかるのは短いほうで、 なかには40~50時間ぐらいかかってしまうことも少なくありません。
仕様変更が50件あれば、 変更に対応するだけで1000時間を超えてしまいます。 少 し大きなプロジェクトでは、不適切な要求仕様のために2000~5000時間もの工数 が仕様変更で必要になるのですが、 実際にはこれらの工数を投入できないために必要 な変更制御のプロセスが省かれています。 その結果、 要件の変更で混乱し、さらに変 更制御を省いたことであとになって混乱してしまいます。 したがって、 仕様の変更を
押えることは混乱を防ぐ上で最も重要なポイントなのです。
120
実際に要求の仕様化に取り組んでもらったときは、 30%を超えていた変更率が7% ~2%にまで低下しています。 もちろん、 取り組み方によっては10%程度でとどまっ てしまうこともありますが、設計者たちが 「起死回生」 「汚名返上」 という姿勢で真 面目に仕様化に取り組んだときは、 変更率は数%にまで低下します。 取り組み前と比 べると、 変更率が1/10になってしまうこともあるのです。
変更率が1/10に低下するということは、いままでの方法では仕様変更の対応に 1000時間失っていたとすれば、これだけで900時間も手許に残ることを意味します。 もちろんこのために、 要求の仕様化には従来と比べて2倍の時間を投入していますが、 それでも400~500時間は手元に残るのです。 しかも、これは仕様変更の対応に費 やされたかもしれない時間だけであって、このほかに設計時の仕様確認に費やされる 時間なども大幅に減ります。
□4.2.2 仕様本当にそれだけの時間の節約になるのか疑う方もいるかもしれませんが、途中で仕 様変更が発生したときに、いったいどのような作業を行っているか振り返ってみて下 さい。
変更時に影響する仕様を確認できる
仕様変更が発生したときのおおまかな流れとしては、
●届いた変更依頼の内容の不備をチェックします。
②内容の軽重や変更の範囲を検討し、
範囲が広い場合は、 関係者を集めて対応方法を検討することになります。 ●現在の仕様と矛盾しないか、他の機能の仕様に波及するところはないかを検討し また結果、
●手分けして手戻り作業に入り、
●修正作業と確認作業が行われ、
対応の完了が報告される。
という流れになると思われます。 簡単な仕様変更でも5時間はかかるのです。 ここに 挙げたのは設計者の作業だけであって、 「CCB (Change Control Board のほう)」の 作業は含めていません。 また、 テストケースを変更する作業も含めていません。 変更 内容の重さにもよりますが、 このような作業が要件変更が発生するたびに行われてい
*3 CCBには、 構成管理のなかの「Configuration Control Board」 と要件管理のなかの「Change Control Board」の2種類 があります。 いずれも変更に対して関係者が評価・検討に加わ
ることで、勘違いなどのミスを防ぐのが狙いです。
るのです。
43 設計やのイメージができる 121
もちろん、 変更がある程度の率以上に発生する組織では、このようなステップをま ともに実行することはできません。 ~のステップが省かれるか簡略化されること になります。 理由は件数が多くてとてもそこまでやれないことと、 変更案件が細かな レベルで出てくること、そしてまともな要求仕様書がないために他の機能との整合性 などをチェックする方法がないこと、 などが考えられます。
要件変更は、しばしば 「仕様」 のレベルで届くことがあります。 たとえば、
「グラフの表示位置を計測データリストの右に変えてほしい」
「時間の表示の文字を3段階大きくしてほしい」
「カメラの首振りの角度を30°から45°に変更してほしい」
というように、 具体的な変更場所がすぐにイメージできる状態です。 そのため、つい 軽率に扱ってしまい、担当者からは1日で 「修正完了しました!」という報告が上が ってくるのですが、あとになって不十分な変更であったことが露呈し、変更モレが次々 とバグとして報告されてきます。その結果、合計で50時間もの時間が失われること になるのです。 これは決してめずらしいことではありません。
要求と仕様の違いを認識していれば、 変更が 「仕様」で届いたとき、そこから上位 の 「要求」 のレベルで変更を捉えることができます。 しかも、 適切な要求仕様書の構 成があれば、 上位レベルの変更がどの 「要求」 の変更 (影響が複数の要求にまたがる 可能性がある) に相当するのかもわかります。 その結果、 顧客から届いた仕様変更の 依頼はそのなかの "1つ" に過ぎず、 他に20箇所もの関連する仕様の変更が必要な ことが最初の段階でわかります。 本書で説明する技術を身に付けていれば1時間前後 で判明するのです。
4.3 設計や実装のイメージができる
たとえば、 カメラ画像の保存機能で 「カメラ部から送られてきた画像データを圧縮 してメモリデバイスに保存する」 という要求の場合、
カメラ部から届いたデータのビット欠落の補正処理 圧縮方法の選択方法とその制限
第4章 仕様化の効果
圧縮処理における制限や異常対応
サムネールを作るためのデータの間引き処理
ディレクトリへの登録情報
122
ファイル名の付け方
ファイルに登録できなかったときの処理
といった視点で具体的な振る舞い (仕様) が書かれていれば、 この段階で実現方法 (設 計のイメージ) や実装されたときの様子が見えてきます。 これに対して、単に、
画像データを圧縮してメモリーファイルに保存する
保存の際には、インデックスとしてサムネールを添付する
というだけでは、 具体的な設計のイメージはわいてきません。 そのため設計作業のな かでさらに詳しく、この機能としては 「何ができればよいのか」 ということについて 問い合わせたり検討したりすることになります。 そうでないと設計作業は進まないの です。 問題は、こうして設計作業のなかで明らかにした仕様は、 そこにある中途半端 な要求仕様書に書き戻されません。 その理由の一つは、もともとは設計作業のなかで 曖昧な箇所に遭遇したが確認した結果その障害を取り除けたので問題は解消した、と いう認識でそのまま設計作業に戻ってしまうことです。もう一つの理由は、 そこにあ 中途半端な要求仕様書に書き戻す 「場所」 がないのです。
確かに、そこまで詳細に仕様化するのにはそれなりの時間 (工数) が必要です。 し かし、要求仕様書の段階で設計のイメージができる状態になれば、 いままでのように 設計作業を中断して仕様の不足を補ってきた時間は必要なくなります。 その上、 設計 作業が中断しないことで設計プロセスの品質も向上します。 さらに、この機能に関す る仕様が具体的に記述された文書が残ります。
4.4 不用意な 「試作」 が減る
「要求」 の段階では、 それが実現するかどうかわからないことがあります。 また実 現しようとすると他の要求と (実際には仕様と) ぶつかってしまい、 使い方や性能に 何らかの制限を加えることになるかもしれません。
実際問題として、 設計や実装作業のなかで、 その機能はいまの段階 (CPUの性能や
44 不用意な「試作」 が減る 123
メモリサイズの他に工数も影響します) では実現しないということが判明することが ありますが、 そのことに気づくのが遅いと納期を目前にして仕様間の調整がつかず、 一部の機能が削除されたりしてバランスの悪い状態になったり手戻り作業が増えたり します。 もし、この機能に制限がつくことが仕様化の段階でわかれば、 関係する機能 との間でバランスをとることで使い勝手が悪くなることをある程度カバーすることも できます。 あるいは、データ構造の選択も含めて別の実現方法を考え出すことができ たかもしれません。
大事なことは、こうした問題が 「早く」 発見されることです。 早い段階で適切な仕 様化を進めることで、 仕様モレや矛盾が早く発見できるだけでなく要求の実現性にも めどがつきます。 仕様化作業のなかで、 その機能として求めたい性能や制限やそこに 関わるパラメータも含めて "決めてみる”ことで、
それは実現するものなのか
その制限は現実的か
そのためには、他の機能にどのような制限をつけることになるのか
といったことを考えたり、関係する機能間で調整したりできます。 これが単に「...・・・ 処理ができること」 というように "願望” を書いただけでは実現するものなのかどう か見えませんし、関係する機能との間でどのような問題が存在するのかも見えません。 結局、 要求の実現性を見極めるために 「試作するしかない」 という判断になっていく のです。 もちろん、ここで進めるような方法で仕様化を進めたとしても、結果的には 「試作」は残るかもしれませんが、 試作の回数は減るでしょう。
たとえば、
SMPO2.1 計測は最大10チャネル同時に行い、 小画面に表示する。
SMP02.2 そのうち1つのチャネルを拡大表示するように指定できる。 SMP02.3 拡大した計測画面では、できるだけデータをリアルタイムに更新した い。
と書けば、10チャネル表示中に、計測のタイミングを遅らせることなく拡大表示が 可能かどうかを 「試作」 して確かめようということになるでしょう。 しかし、
SMP02.3 拡大した計測画面は、データのサンプリングサイクルで画面を更新する。
124 第4章 仕様化の効果
と書けば、どうなりますか。
この仕様を実現するには、 表示時間等を計算すると残りの9チャネルの表示の仕様 を変えて
SMP02.5 拡大表示中は、残りのチャネルのデータの収集はサンプリングサイク ルで行うが、 画面への表示は収集サイクルと同期しないことを許す。
という仕様を追加することで、 設計 (実現方法) を “誘導” することができます。 このように、 要求仕様書では曖昧さを排除して仕様を“決めていく" ことで、その 仕様が実現するものかどうかが見えてきます。 もちろん、 その過程では "やっぱり無 理だ” ということで、 適当なレベルで妥協する方向に仕様が調整されることもありま す。さらには、仕様化してみたものの本当に大丈夫かどうか “試作して確認するしか ない”ということもあるでしょうが、 試作で確認したい項目はすでに 「仕様」 として 記述されていて、 そこで 「要確認」 のコメントが付いているのです。
4.5 設計や実装時に仕様の確認ができる
事前の要求仕様書が仕様として適切でなければ、ソースコードを書いているときに 「え~と、このデータチェックが必要だったっけ」 「他に繰り返す条件は?」と、他の 機能と整合性をとりながらソースコードを書くことになります。
要求仕様書の作成に重きを置かない組織では、このようにソースコードを書きなが ら仕様を補充していくことになります。 そのため他の機能の仕様とバランスをとった り他の機能の仕様に制限を加えたりする必要があると思われるときは、すでに書かれ たソースコードをさかのぼって少し前に決めた 「仕様」 を確認することになります。
最初の仕様化にかける時間を減らしてさっさと実装作業に入ることで、 最初は作業 がはかどっているように見えるのですが、中盤以降、こうしたすでに実装した機能の 仕様を確認する必要性が増えてきます。 これが終盤になると、ソースコードをたどっ て仕様を確認する時間は1日の半分を越えることも少なくないのです。 しかしながら、 そのソースコードはこれまで何度かこうした仕様の調整作業で部分的に書き直されて いるので、ソースコードから仕様を正しく思い出せるとは限りません。
もちろん、 適切なレベルでまとめられた要求仕様書があっても、 実際にソースコ ードを書いてくなかで他の機能の仕様との調整が必要なことに気づくことはあります が、その場合は、ソースコードを見るよりも要求仕様書を見たほうがはるかにはかど
4.6 レビューで感じる仕様化の効果 125
ります。 そして何よりも、 適切な要求仕様書があることで、 まだソースコードになっ ていない 「未実装部分」 の機能との間でも仕様の調整が可能であり、 その時点で要求 仕様書を更新し新しい関係を表現できるのです。 いきなりソースコードを書くスタイ ルでは、 「未実装部分」 の仕様の調整は不可能です。
4.6 レビューで感じる仕様化の効果
ヒアリングも含めて、 要求の仕様化が適切に行われたかどうかは、最後に仕様関係 の「バグ」の件数になって知らされます。 そしてまた、 仕様化の途中で行われるレビ ュー (ピアレビュー) においても、いま進めている仕様化の出来栄えを感じることが できるのです。
本書で勧めるように要求仕様書の構成や書き方を変えた組織では、 仕様化の出来栄 えが適切な状態になっていくにつれて、 レビューの場で仕様モレや誤解されやすい箇 所や仕様の衝突などが多く指摘されます。 最初は、 指摘が多くなることに不安を覚え るようですが、レビューで多く指摘されるということは、具体的に記述されたために 発見しやすい状態になっていることを意味します。 つまり、書き手が気づいていない ことが読み手にわかることで、レビューでの指摘件数の増加につながるのです。
仕様化が上手くできているときは、書いている人も設計や実装の様子まで具体的に イメージできるので、 そこで必要な仕様が抽出されていきます。 本来なら、 そのよう な状態は書き手にとっても間違いやモレに気づきやすいのですが、 書き手もまだ新し い書き方に慣れていないときは、 自分が気づくよりも先に周囲の人が気づくことにな ります。
次ページ図 4.3は仕様化の技術が身に付いていく様子をあらわしたグラフです。この ように、 仕様化が上手くできていく過程で、いったんはレビューでの指摘が増えます。 その後、書き方に工夫がなされることでレビューでの指摘が減っていきます。 もちろん、
こうして仕様化に取り組んでいく間、 仕様に関するバグはずっと減っていきます。
逆に、 書き方を変えたのにレビューでの指摘が少なくいままでと変わらないとか、 仕様に関するバグの発生率が減らないということは、 仕様化できていない状態が残っ ている可能性があります。
仕様の書き手も、 仕様化の技術が身に付いてくると、書いている段階で明らかに仕 様モレの不安が少なくなっている、あるいは不安そのものを感じなくなっているのが わかるはずです。
126 第4章 仕様化の効果
図4.3 仕様化ができていく様子 バグ件数 取り組みの効果が現れだした状態 仕様の書き方が改善がされるようになった状態 仕様化の改善が定着した状態 レビュー指摘件数
仕様化が進むと、いったんはレビューでの指摘が増える。
その後、仕様化に反映されることでレビューでの指摘は減っていく。 仕様のバグのほうは、一貫して減り続ける。
4.7 トータル工数が短くなる
コンサルティングのなかで、 要求仕様書をもっと具体的に書くように勧めると、
「とてもそこまで書いている時間がありません」
という返事が返ってくることがあります。 しかし、 仕様化されないままでは設計も実 装もできません。その証拠に、 設計作業のなかで依頼者との間で頻繁に仕様を確認し たり、他の仕様と調整したりしています。
あるいは、 「具体的な仕様は設計工程のなかで抽出するもの」 と教えられ、 そのよ うに思い込んでいることもあります。 この場合も、 設計や実装作業のなかで曖昧な仕 様に遭遇した時点で依頼者にメールを打って確認しながら進めることになります。 実 際に、 そのような仕様の問い合わせの作業を支援するための 「要件開発」 のツールも あります。そのような環境のなかでは、 仕様の確認に伴って手戻り作業が発生するこ とに疑問を感じなくなるかもしれません。
いずれのケースも、最初の要求仕様書の不足を設計作業や実装作業のなかで補って いるのです。 ここで問題なのは、その仕様化を設計や実装作業のなかで行うために、 設計や実装の工数が使われていることです。
図4.4は、設計時に仕様化作業を行っていた時間を要求仕様を作成する作業のほう に移した様子を示すもので、 「時間の足し算と引き算」 をやってみせた図です。
4.7 トータル工数が短くなる
図4.4 時間の足し算と引き算の様子
現状 中途半端な 仕様化作業 一本来必要な仕様化作業の工数 改善 これまでの 仕様化作業 設計作業 手戻り作業に費やした時間 仕様化作業に費やした時間 本来の設計作業 手戻り作業時間を50%圧縮している 仕様化作業時間を20%圧縮している
設計作業のなかで行われていた仕様化作業と、 その際に生じていた手戻 り時間を、 仕様化作業のなかに移した。 本来の仕様化作業のなかで行うことで、 作業の効率が上がるために20 ~50%の時間が圧縮できる。
ここでわかってほしいことは、設計工程で仕様化するよりも、 要求仕様書を作成す る作業のなかで仕様化したほうが効率的であり時間も短いということです。また、設 計作業や実装作業のなかで関連する機能の仕様間で調整をとる際も、 具体的に書かれ た仕様書をたどることができるので、調整作業も確実性が高まるのです。
設計してみなければ細かな仕様に気づかないというのは、そこで書かれている仕様 書の構成や書き方が設計の場面を彷彿させないものになっているからです。 要求仕様 書の構成や書き方を工夫することで、 設計段階 (や実装段階) で気づくような仕様は ほとんど仕様化作業のなかで気づくことができます。 それが、 システムや製品の動作 や制限として必要な仕様であれば、 要求仕様書の作成段階で気づいたほうが早いし、 そのほうが工数もムダに使われないのです。
結局、 この図からわかるように、 多くの現場で要求仕様書の作成工程に投入してい る工数は曖昧な要求仕様を書くだけの工数でしかなく、本来必要な工数を満たしてい ないのです。 そこで勇気をもって要求仕様書の作成工数を増やせば、その分いままで 設計段階などで行っていた仕様化の時間が減るので、 結果的に全体の工数は短くなる のです。
127
128 第4章 仕様化の効果
4.8 設計に入る前に機能の難易が見える
一般に書かれている要求仕様書で、 ある機能において求められている振る舞いを知 ろうとしても、そこでは要求のままであったり抽象的な表現が多く混じった状態であ ったりするため、果たしてその機能が実現したといえるにはそこに書かれている仕様 を実現すれば足りるのかどうかわかりません。 正確には、 その判断もできない状況で す。 要するに 「よくわからない」状態なのです。
そのような組織では、 設計作業や実装作業を進めていくなかで、 他の機能との絡み で振る舞いに制限がついたり、 そこで求められている処理スピードで実現するにはメ モリが足りなかったり、 他の機能が動いているなかでは通信経路で送られてくるデー タの取り込みのタイミングをはずす危険があることが見えてくるのです。 結局、 その 時点で発覚した障害 (制限) はソフトウェアだけでは対応できず、急遽 「DSP (Digital Signal Processor)」のチップを追加し負荷の大きい処理をDSPに回すように設計変更 されます。 もちろん、 納期は大幅に遅れることは避けられません。
この段階での設計変更は、 小型化などの外形上の制限を受けたり、 高速化を求めた ことで発熱の問題が発生したりというような「仕切り直し」 を招いたりします。 これ らは、早い段階で適切な仕様化ができていないことが背景にあるのですが、安易に 「試 作」 に依存する考え方もこのような設計変更をもたらします。
要求が適切に表現されてそのなかで必要な仕様が抽出されているとき、 そして仕様 が具体的なレベルで表現されているほど、 その要求の実現に関する難しさが具体的に 見えてきます。 他の機能の仕様との衝突も具体的なレベルで見えてきます。 そして、この段階で実現の難しさが明らかになったことで、
納期を考えてトレードオフの交渉に入ることができます。
開発や実装の順序を決める際の重要な決め手になります。
もしかすると、この段階でインクリメンタルモデルへの選択を決断するかもしれ ません。
この機能の担当者を選ぶ際にも大いに参考になります。
もちろん、リーダーなどの立場の人にとっては、リスク管理の対象として把握で きるし、
作業の見積りの際にも、いくらか余裕を持たせるような配慮もできるでしょう。
一般に、要求仕様書は 「決まったこと」 「実現が確実なこと」 を書くものと思われ
4.8 設計に入る前に機能の難易が見える 129
ています。 確かに、 「実現可能」 が仕様であることの条件の一つですが、 それは仕様 化を進めていくなかで最終的に実現可能な仕様に調整されていくのであって、 仕様書 の作成過程では 「書きながら決める」 「書きながら調整する」 という姿勢でのぞんだ ほうがうまくいきます。
本当にやりたいこと、 このように動作してほしいと思うことをとにかく具体的に書 いてみればよいのです。 そうすれば、他の機能の仕様が障害になっていたり、 現状で 想定されているコストなどの制約が障害になって実現しないことも見えてきたりしま す。 その時点で 「実現可能性」 のレベルに関係する仕様を調整すればよいのです。
多くの現場にある要求仕様書は、 実現の確信が持てないからという理由で表現を曖 昧にしたままになっています。
「100チャネル接続できることを目指す」
と書いているだけでは、このことに関連したデータの取り込み、 画像の展開、 データ の保存などの機能での仕様も 「希望」 になってしまい、仕様が衝突する様子が表現さ れません。
このように、 設計作業に入る前に実現の難しさが見えることで、いろいろな対応が 可能になるのです。 ところが現実はこれとはまったく逆で、 機能が実現しないことは 実装作業の終盤になったところでわかるのです(ときには、QAテストのなかでわか る)。 そのときは、上にリストアップした項目のすべてが何の意味も持たないのです。
4.8.1 早期にトレードオフの交渉ができる効果||||| 多くの組織では、機能や仕様のトレードオフの交渉は、 納期が迫って実現の見通し が立たないことが判明した時点で行われます。 この時点でのトレードオフの判断は、 選択肢としては問題の機能をカットするか、 期限を延長するかしかありません。
現実には、この機能ははずせないとなれば期限を延長するほうを選択することにな ります。 期限を延ばすことはできないとなれば、 その機能の開発作業を中止してリソ ースを他の機能に集中させるかもしれません。 皮肉なことに、 トレードオフで除外し てもよいような機能はむしろ比較的単純な機能が多く、 それらはすでにソースコード になっていたり、 もうすぐ完成する状態になっていたりするのです。
早期の仕様化が実現すれば、 設計前にトレードオフの交渉ができるので、 本当に今 回の開発プランからはずしてもかまわない機能や仕様をその段階ではずすことができ
第4章 仕様化の効果
ます。 その効果として、
はずされた機能の仕様が見えているので、次の機会に追加しやすいように設計上 の配慮ができるし、
設計前なので、 トレードオフに伴って関係する機能間で仕様の調整が可能だし、 途中まで実装していたのに、最後になって機能が封印されるような工数の無駄は 生じない
のです。
ここで問題があるとすれば、むしろ顧客側 (発注側)にこの時期のトレードオフの 申し出を本気で聞く姿勢があるかということです。 適切な見積り技術をもたない組織 では、最初から“できない” という言葉は拒絶します。 それは 「やる気がない証拠」 とか、 「値上げ交渉の手段」 とみなされるのです。 顧客側に合理的に見積りを検討す るスキルや度量がない場合は、この時期でのトレードオフの申し出は実現しないかも しれません。
それでも、ここまで具体的に仕様化できているので、この仕様に沿って見積りとス ケジューリングの見直しを行い、 少し見積りの実績値が見えた時点で工数の追加や期 間の延長などの条件の緩和を引き出す方法が残っています。
□4.8.2 仕様化でウォーターフォールの誤解を解く このような要求仕様書を最初に書くことに対して、
「それって、 ウォーターフォールのやり方でしょう」
130
という人も少なくありません。
つまり、「要求仕様書の作成 設計実装 テスト」 という作業の流れを持つも のに対して、単純に“ウォーターフォールモデル” と反応してしまうのです。 確かに 多くの組織では、このような作業の “流れ” のなかで何度も仕様モレや仕様の勘違い に遭遇していて、 設計途中で依頼者に対して仕様を確認する作業が頻発し、そのたび に作業が中断しています。 依頼者からの仕様変更も少なくありません。 このような状 況を改善するために何も考えなかったわけではないと思われますが、 結局は効果的な 方法に気づかないまま同じような書き方を繰り返してきたのです。
このような思いを支援するかのように、90年代に入って「ウォーターフォールモ 「デル」に対する反省が表面化し、 「RAD」 「スパイラルモデル」 ｢インクリメンタルモ
4.8 設計に入る前に機能の難易が見える 131
デル」 「UP」 「Agile開発」 と、 開発の期間を短縮したり、途中での仕様変更のリスク に対応したりする方法などが提案されてきました。
納期の短縮に対する市場の要請が厳しくなったことが背景にあり、 開発期間を短く 切って完成させていかないと長期間の開発では途中で仕様の変更で手戻り作業が発生 し、そのためにいつまで経っても納められないことも起きてしまいます。
一般に、数ヶ月の期間があればある程度の機能の範囲は完成するので、 そこでリリ ースすることでいつまでも提供できない (されない)というリスクを回避しようとい うのがインクリメンタルモデルです。
開発期間が長い場合に、ウォーターフォールモデルで開発すると仕様変更の影響を 受ける可能性が高くなります。 仕様化作業もそれなりの期間になるでしょうから、 そ こで状況が変わってしまい、 当初想定していた機能が大きく変更されてなかなかリリ ースできない事態に陥ってしまいます。 しかしながら、インクリメンタルモデルで開 発したからといって、 この種の仕様変更が発生しないわけではありませんし、発生し た仕様変更はすでにリリースしたところの機能に影響を与えることになるだけです。
たとえば、2回目のインクリメントで実装し納品した部分の機能が、 今回の仕様変 更の影響を受けるということで、 現在のインクリメントの作業を中断して先の納品部 分を作り直すことになるかもしれません。 そのとき、 適切な仕様化 (仕様に相当する もの)を省いて 「動くもの」 を作ることを優先してきた場合は、 機能追加に伴う変更 の影響箇所の特定に手こずって変更作業が混乱することは避けられません。 「インク リメンタルモデル」 を選択したことで問題が解決したわけではないのです。
確かに、長期の開発を1回のイテレーションで開発する (=ウォーターフォールモ デル) というのは、仕様変更によっていつまでも納品されないという危険が生じます。 かといって、 適切な仕様化を省いてさっさと動くものを作ることで、 この問題に対 応できるわけではありません。 「ウォーターフォールモデル」 が不合理に見えるのは 合理的な期間のなかで適切な仕様化ができないことが影響しているのです。
□ 4.8.3 インクリメンタル開発への切り替え 早期に要求が仕様化され、その結果として実現性の難しい機能が明らかになったこ とでトレードオフの交渉ができるということは、そこで実現性において危険性が高い 状況が見えたことを意味します。 したがって逆に、この段階でリスクを回避するため の開発プロセスを選択することもできるわけです。
132 第4章 仕様化の効果
機能や仕様に実現の優先度を設定し、実現性のリスクを避けながら段階的に実装し ていく方法として 「インクリメンタルモデル」 があります。 仕様化の結果、 当初予定 していた機能を全部実装するにはいくつかの機能で不安要素が強く、 場合によっては 大きな手戻り作業が発生する可能性があるという状況において、 当初の納期を変えな いで開発を進めるには段階的に作り上げていくしかないかもしれません。
｢インクリメンタルモデル」 は、 本来リスクを回避または軽減させるための開発プ ロセスで、その最大の特徴は、「スパイラルモデル」 と違って全体の仕様化を最初に 行うことにあります (図4.5参照)。 全体を仕様化したところ、 いくつかの機能の実 現性においてリスクの存在が見えたため、「ウォーターフォールモデル」 では危険が 大きいと判断して ｢インクリメンタルモデル」に切り替えるわけです。 もちろん、 仕 様化の前にインクリメンタルモデルを採用することを想定していてもかまいません。
そこでは、たとえば3回のイテレーションに分けて実装するという場合でも、3回 分の実装に対応する機能の仕様化は最初に行うことが 「インクリメンタルモデル」の 条件です。 ただし、 繰り返しを実装レベルだけで行うか、 設計と実装のレベルで行う
図4.5 インクリメンタルモデルでの2つのパターン 仕様 1 2 3 設計 1 2 3 実装 1 2 3 テスト 1 2 3 ・すべての機能の設計まで済ませたあとで、実装以降をイテレーションで刻む方法。 ・期限内に最後まで実装できる可能性があるときにとる方法。 仕様 2 3 設計 1 5 2 実装 1 2 テスト 1 2 S3 3 3 ・設計以降をイテレーションで刻む方法で、2回目以降で新たな機能を組み入れる
ために、 設計や実装上で手戻りが発生する可能性がある。 期限内に実装しきれない可能性が高いので、設計工程から繰り返す。
インクリメンタルモデルは、リスクを回避するためのプロセスモデルで、 最初のイテレーションでどこまでやるかで、いくつかのタイプに分かれる。
4.9 顧客との良好な関係を築ける 13
かは状況によって選択します。 所定の期間のなかである程度実現できるかもしれない という場合は、最初のイテレーションでモジュール設計までをすべて済ませてしまい、 実装だけをイテレーションのなかで優先順位に沿って進めていきます。 当初想定して いた範囲の機能の実現性が懐疑的な場合は、 モジュール設計までは行わず、 その前の 段階の設計で止め、 イテレーションはそこからモジュール設計と実装の範囲で繰り返 すことで実現性と期限のリスクに対応するわけです。
幸いにも、 本書で勧めている仕様化の方法によって、 実装が予定されているすべて の機能の仕様化が早い段階で終了しているので、 実装が後回しになる要求や仕様はこ の時点で優先順位付けによって明確になります。 設計する場合も、 仕様がすべて明ら かになっているので、 どこから先の工程をインクリメンタルにするかを選ぶことがで きます。
4.9 顧客との良好な関係を築ける
整然と整理され、かつ適切に仕様化された要求仕様書からは、 今回実現すべき機能 やそれぞれの機能に含まれる実現したいことが 「要求」 として明らかにされ、その要 求のなかで具体的な振る舞いや制限などが “仕様” として展開している様子を見るこ とができます。
その仕様は、すみずみに現実性がにじんでいて曖昧な表現は排除されています。 設 計者によってまとめられたこの要求仕様書には「裏」 がありません。 つまりそこに書 かれている 「仕様」 には違った意味に解釈できる余地はないのです。 それは 「信頼」 そのものなのです。
初めての顧客の場合、 最初の 「仮説見積り」 のときに「これくらいの状態の仕様で 項目数を見積もっています」 といって、 仕様の「サンプル」 を見せて 「仕様」 の意味 やその仕様の項目数がその後の成果物と連鎖する様子、 仮説見積りの意味などを説明 しておくとよいでしょう。
そうして、実際に書かれた要求仕様書の項目数が明らかになったとき、仮説見積り で見積もった要求仕様書のサイズ (項目数) と比べて2倍に膨れているといった場合 は、明らかに当初の工数では無理なことを説明し納期限を優先して機能をトレードオ フするか、機能を優先して納期限を延長するか、あるいはリソースを投入して工数を カバーするかといった交渉を行うことになります。 このとき、最初の仮説見積りと仕 様のサンプルと整然とまとめられて「隠し事」のない要求仕様書が決め手になります。
第4章 仕様化の効果
4.9.1 “別に料金を払う” といってきた 多くの場合、 そこで扱われている要求仕様書の表現は曖昧で、 具体的な仕様をどこ まで含んでいるのかわからないので、 人によって解釈が異なる可能性が出てきます。 QAテストで 「当然の動きができていない」 ということでバグとして上げたところ、「そ の動きはこの要求仕様書の範囲には含まれないので仕様追加になります」 ということ で、責任のなすり合いになることがしばしばあります。 納期などの 「約束」 も絡んで いるのでみにくい争いになります。 仕様化の能力がなくサイズによる見積りもできな い状態で、 最初から納期限に間に合わせる見込みもないのに他社よりも安い見積りを 出して仕事をとるやり方も、最後になって悲惨な結果を招く原因になっています。
コンサルティングのなかで、 従来の要求仕様書の書き方をやめて本書で勧めるよう に要求仕様書の構成や書き方を変えてレビューを数回実施したにも関わらず、 発注側 の担当者がちゃんと目を通していないために仕様書の効果に気づかないことがありま す。
設計側は前回のプロジェクトで大失敗したという 「前科」 が 発注側の担当者の先 入観となっているのです。 前回も設計側から要求仕様書 (に相当する文書) が書かれ ていますが、 それは“中身” のない機能の概要を記述したものだったため、 コーディ ングの段階に入ってから仕様の変更 (実際には仕様が確定していく状態) が頻発しま した。 今回は構成も書き方も変えたのですが、 発注側の担当者はどうせ読む価値のな い要求仕様書だろうと思っていたのでしょう。
このプロジェクトは、 発注側の予想に反してほぼ予定どおりに進行するのですが、 途中で発注側から数10件の 「仕様変更」 が入ります。 このとき、 数件の機能追加に 関する仕様変更に対して 「この変更分については別に料金を払うので、この変更分を 除いていったん現行どおりで納めていただき、 1ヶ月後にこの分の変更を組み入れた ソースコードを納品して下さい」という“付帯条件” が付いたのです。
いつもだったら「この変更もお願いします」 と “ねじ込む” ところでしたが、おそ らく発注側としては、もっと早く仕様モレに気づくチャンスがあったのにそれを逃し たという認識と、 設計側の作業が順調でほぼ予定の範囲で仕上がりそうだという状況 が“別に料金を払う" といわせたのです。
134
4.10 IT ゼネコンとの決別 135
4.10 IT ゼネコンとの訣別
日本では、 官公庁が発注するソフトウェアの案件に対しては、そのほとんどを 「IT 「ゼネコン」と呼ばれる一部の大手ソフトウェア企業が受注を独占してきました。その 背景には、 「汎用機」 と呼ばれる大型コンピュータが絡んでいます。 「汎用機」 の仕様 は、汎用機メーカー独自の仕様になっているため、 他のソフトウェア企業が受注する ことは不可能な状態です。
もう一つの要因は、 入札が要求仕様書の作成を含めて 「一括」 で行われることが多 く、応札するには要件を満たすような要求仕様を作成し事前に実現性を確認する必要 があります。 そのために応札の準備に多額の費用がかかると思われますが、 落札でき なければその費用は回収できません。 これでは中小のソフトウェア企業は応札できま せん。
この状況が 「IT ゼネコン」 を生み出したのです。 そのため、一般のソフトウェア企 業は「IT ゼネコン」の下請けに回ることになります。 現実に、 大口の案件の場合は、 5段、 6段の下請け構造もめずらしくないようですが、 そこまで下がってくると単価は半分 以下に細っていると思われます。
当然、 このような「IT ゼネコン」 が誕生する状況では、数千万円かかった応札コス トも何回かの落札のなかで回収しなければならないので、 何らかの形で膨らませるか 同業者の間で調整したくなるでしょう。
最近はコンピュータが小型高性能化するなかで、 官公庁のコンピュータも汎用機か 高性能のサーバーに置き変わろうとしています。 サーバーであれば、OSの仕様も 公開されているので、一般のソフトウェア企業でも応札が可能になります。 あとは、 発注の仕方を変えることで 「ITゼネコン」 からの脱却が可能になります。
4.10.1 分割発注への道
従来のように一括で発注され、応札のために多大なコストと時間をかけて仕様化し なければならない状態では中小のソフトウェア企業はリスクが高すぎて応札できませ ん。 この問題を変えるには基本的には発注者が要求仕様を書くことです (「第5章 5.4 要求仕様は誰が書くのか」 を参照)。
発注者が、自分たちが使いたいシステムの要求仕様書を作成し、これを実現してく れるソフトウェア企業を入札で選べばよいのです。 発注者が要求仕様書を書くことに よって、システムが大きい場合は 「分割発注」 して中小のソフトウェア企業にもチャ ンスを与えることも可能です。 ソフトウェア企業側も、多くのコストをかけて落札で
第4章 仕様化の効果
136
きないかもしれない案件の要求仕様書を書くというリスクは消えますし、 「IT ゼネコ 「ン」の下請けではなく 「元請け」として応札できるため、 従来のような多段の下請け 状態のときと比べれば単価も健全なレベルを確保できると思われます。
発注側も、 小さく分割することでリスクを分散できるのと、 自ら要求仕様書を書い ていることで、 受注したソフトウェア企業が開発に失敗したとしても別のソフトウェ ア企業を探すことができます。 何よりもベンチャーのソフトウェア企業が活躍できる ので、地方のソフトウェア企業も活路を見出すことができるでしょう。
ここで大事なことは、 発注側が書く要求仕様書の出来栄えです。 設計者が読んでわ かる仕様書であることが重要で、 それによって不足している仕様や他の仕様と衝突し ていることに気づきやすくなります。 もちろん、 最終的には設計者のほうで理解され ることが必要ですが、 その過程では不足している仕様などを追記していくことも可能 です。
発注側が要求仕様書を書けないという状況で、 「準委任」 という方法でベンダーに 要求仕様書を書いてもらうやり方を採用する動きが広がっています。 要求仕様書の作 成とこのあとの 「設計」 以降のプロセスを切り離すことで、 要求仕様書の作成の遅れ を問題にしないという効果があると考えられます。
ただしこのとき、こうして作成された要求仕様書に対して、 発注側がどれだけ内容 について理解しているかが問われます。 もし、ここで自分たちが書いた状態と同じ程 度の理解状態が得られているのであれば、 設計以降のプロセスを分割発注に切り替え ることもできます。 しかし、 そのような状態になれないのであれば、 単に工程を区切 って表面的に要求の仕様化作業を見積れない状況を隠しただけで、結局は、従来通り の 「丸投げ」と変わらないことになります。
4.11 要件管理に取り組める
米国カーネギーメロン大学ソフトウェア工学研究所 (SEI) がソフトウェア開発組 織の能力を高めるためのガイドラインとして1991年に公表したCMM が (実際には 1993年に公開された v1.1 が普及し、その後CMMIに変更されます)、 要件管理に組 織をあげて取り組むことの重要性を知らしめましたが、 要件管理に取り組むときの前 提として要求の仕様化についてはほとんど触れなかったために、かえって現場では混
乱が起きています。
4.11 要件管理に取り組める 13
ちゃんとした要件管理に取り組むには、 その前提として、 ある程度のレベルで要求 が仕様化できることが条件なのですが、 前提としての要求の仕様化に取り組まずにい きなり要件管理に取り組んだケースが多いと思われます。 その状況では、 CMMIに沿 って要件管理に取り組むにも、プロジェクトの中盤以降に仕様の問い合わせ (確認) や変更が "頻発” する状況は変わりません。
もちろん、 そのような状況にあっても、 何としても 「要件管理」 プロセスをきちん と実施しようとすれば、それ相当のリソースを投入し検討時間とリワークの工数を確 保すればよいのですが、それでは工程は大幅に遅れコストもオーバーすることになり ます。 そうかといって、 「要件管理」 プロセスを省けば、 昔のようにバグが多発する ことは目に見えています。
要件管理に取り組んでも、中盤から後半に入ったところで仕様の変更が頻発する状 況が変わらなかったり、仕様関係のバグが依然として減らなかったりするようでは要 件管理の効果は上がらないので、仕様化の取り組みも要件管理の取り組みも続かなく なってしまう危険があります。 3年経ってもCMMIのレベル2の段階からレベル3の 段階に進まない組織においては、この問題が横たわっていると考えられます。
要求がきちんと表現され、 その要求に対して仕様が適切に抽出されていることで、 合意の段階までのレビューで多くの仕様モレや衝突状態が指摘されるので、 中盤以降 での仕様変更は一気に減ってくれます。そうなれば、 要件管理もあるべき姿を追及で きます。 また、 仕様関係のバグが減ってくれればバグ全体の件数も1/5~1/10に 減少するので、 不具合管理も手抜きにならないのです。
このように、 要求が適切に仕様化できることの効果は計りしれないものがあるので す。
* 第
要件開発の重要性
これまで述べてきたように、ソフトウェアプロジェクトの失敗の背景には、 要求が 適切に仕様化されていないことがあります。 そのことは、多くのソフトウェアの開発 現場でも気づいていたはずです。 実際にバグの原因プロセスの分析を見ると、 分析の 誤差はあるものの、概ねバグの50%は仕様作成や仕様レビューなど要求仕様に絡む プロセスに問題があることを認識しているのです。
にもかかわらず、 一向に状況が改善しないのはなぜでしょうか? 原因として考えられるのは、
要求仕様というものをどのように表現すればよいのかがわからないこと
要求仕様をまとめる際につきまとう問題を認識していない
要求仕様書というものの存在意義を理解していない
といったことです。
そもそも要求仕様書とは何でしょう? 筆者は「要求仕様書」 を以下のように定義しています。
"要求 " すなわち今回のプロジェクトで実現してほしいこと (Requirments) について、 テストも含めた“作ることに集まった関係者”がその内容について 認識を特定 (Specify) できている文書
「仕様書」 は 「Specification」 の日本語ですが、 どのような状態かわからないままこ の言葉を使っていると思います。 英和辞書を引いても 「仕様」 「詳細」 「明細」 といっ た意味が書かれているだけでほとんど役に立ちません。 「USDM」 では 「Specification」 を、関係者がその内容について “特定できた (Specify) 状態”、すなわち同じもの(こ と)をイメージしている状態と定義します。
当然「要求」 レベルの表現では曖昧なものを含んでいるのでSpecify できません。 一般には 「具体的」な記述 (=仕様) にすることによって、 個々の記述に対して 関係者は同じ“もの”をイメージするでしょう。 そのような記述をまとめたものが 「Specification」 すなわち 「仕様書」と考えました (詳しくは第5章 「5.3 なぜ "要求 仕様書というのか?」 を参照してください)。
5.1 文書にする理由 139
ここでは、 要求の表現や仕様化の説明に入る前に、 要求仕様書のあり方や要求仕様 書にまつわる問題を明らかにしておくことにします。
5.1 文書にする理由
ところで、 顧客や依頼者の要件を文書 (要求仕様書) にする理由はどこにあるので しょう。
それは、文書にすることで、
これから始まるソフトウェアを “作る” 作業のゴールとしての要件を明らか にし、
顧客や開発関係者間でこれから“作るもの” に対して合意する。
ためです。
確かに、顧客は自分の要求を適切に表現できないかもしれません。 一般に、顧客は 要求を発する「プロ」ではないので、だいたいにおいてそのとおりだと思います。 そ のような状況でまとめられた現実の要求仕様書は安定しないし、 曖昧さを埋めるため に途中で仕様の変更は絶えず起きてしまいます。 だから、 要求仕様なんて書いても意 味がないからさっさとプログラムを作って実際に動かしてから顧客の希望するものに 調整すればよい、という意見を受け入れたくなる気持ちはわかります。 でも、その結 果はどうなるかは、 すでに第3章までのところで説明してきました。
結論としては、 そこで書かれる要求仕様書が不安定なのはもともと適切なレベルで 仕様化されていないからであり、 「要求」 というものが表現されていないために要求 の求める 「範囲」 が見えず、 本来ならそこで抽出されるべき仕様も範囲が不明確なた めに見落とされているのです。 さらに言えば、
「仕様」 は要求の中の "動詞"およびその " 目的語 " に存在する
ということに気付いていないために、 「要求」 が適切に表現されず、 その帰結として 必要な仕様も抽出されないのです。 つまり、要求仕様書としての構成や書き方を変え ることで、現状の問題の多くが解決するのです。
要求を 「要求仕様書」 という文書に展開することによって、
第5章
要件開発の重要性
要求仕様書の作成過程で仕様モレや仕様間の衝突を発見でき、
さらに関係者が要求仕様書をレビューすることによって、 同様の仕様モレや衝突 を検出できる
ことで、できあがりのイメージに迷うことなく設計作業に入っていくことができます。 このほか、文書にすることで以下のような多くの作業に活かされます。
要求内容に対して最適の開発プロセスを設計 (または調整) するためのネタとな る。
機能などの仕様を実現する際のリスクの抽出がはかどる。
要求仕様のサイズ (項目数) から以降の成果物のサイズ見積りを調整できる。 ソフトウェアの設計と並行してテストケースの設計の入力となる。
これとは別に、 実は要求を文書化する 「隠れた理由」があります。 それは
「文章にすることで、 本当に考えることができる」
ということです。 逆にいえば、 文章になっていないものは十分に考えたものとはいえ ないのです。 たとえば、
「拡大表示させるチャネルは、画面から直接指示できること」
という要求は、文章になっていない状態では “思いついたレベル” “そんなことがで きればいいなというレベル”かもしれません。 そのような機能を実現するには、他の 機能とのバランスも必要でしょう。 表示するチャネルの数が多くなったときは、 「ボ 「タン」のスペースを確保できるかどうかの見通しが必要です。
このように仕様を決めて行く過程では、関連する仕様との間で盛んに調整する必要 が生じますが、 "仕様が頭に浮かんでいる" だけの状態ではこうした調整は困難なの です。 その結果、 せっかくの機能も、 実装段階に入って多くの混乱をまき散らすこと になります。
要求を 「文章」 にすることで、 その文章から誤解を与えないように洗練した表現に ドレスアップできます。 さらに、 その仕様に関連する複数の仕様との間で "行ったり きたり"しながら調整し、 従来なら 「試作」 していたような場面でも、 要求仕様書の 上で実現性が見えるようになります。
140
52わかるの問題に対応する 141
このような効果は、 要求が適切に文書 (文章) にならないかぎり得られないことな のです。
5.2 “わかる” の問題に対応する
要求仕様書を難しくしているもう一つの問題が“わかる” の問題です。 “わかる” の問題は、ソフトウェアの開発現場ではほとんど認識されていないと思われます。 こ の問題は、 何も要求仕様書に限った問題ではありません。 自分以外の 「人」 と絡むと ころでは、必ず“わかる” の問題が発生するのです。
プロジェクトでは、 まず要求仕様書のところで他の人との接点が生じます。 たとえ、 「一人プロジェクト」 の派生開発であっても、 今回変更してほしいところでは他人が 絡むはずです。 その上、 要求仕様書そのものが、 依頼者の意図を設計者に「わかって もらう」 ための文書ですし、 設計者のほうもこの要求仕様書によって最終ゴールに対 して「わかった」 と認識し、 先の作業に進むことになります。
設計者が要求仕様書を書く場合は、 顧客がそこで書かれた要求仕様書 (=最終ゴー ル)に対して「わかった」との認識を示すことで先に進むことになります。 ところが、「わ かった」 と思ったはずのことがあとになって実は違う意味だったことが判明するわけ で、それが後半に入っての仕様変更につながるし、 事前に誰も気づかなければ仕様モ レのバグとなるのです。
多くの人は、 「わかる」 ということに対してあまりにも軽率です。 「個体」が違うに も関わらず、 自分が 「わかった」 と思ったことが相手の思いと一致していると勘違い してしまいます。 いや、 「わかった」 ことが一致していないことがあるなんて思いも よらないのです。 でも現実に、AさんのいうことをBさんが 「わかった」 と思っても、 わかったことが何らかの形で表現されないかぎり、AさんはBさんが 「どのようにわ かったの」 を知ることができません。 同時に、Bさんも自分が 「わかった」 と思った ことがAさんの思っていることと一致しているのかどうかを知ることができません。
要求仕様書に関しては、いたるところでこの問題に遭遇します。 この認識のズレを 少しでも解消するためには、Bさん自身がわかったことを自分の言葉で表現 (通常は 文章にする) してAさんに伝えるしかありません。 もちろんこのとき、Bさんが書い た文章をAさんが理解する場面で同じことが起きる可能性があります。 関係が入れ替 わっただけです。 もし、 そこで表現された文章に少しでも曖昧さを感じるのであれば、
第5章 要件開発の重要性
142
もう一度Bさんに対して •は、こういう意味ですね」 と折り返す必要があります。 最悪でも数回の折り返しで、 実際の作業には支障のない程度の「わかった」 状態に持 ち込むことはできるでしょう。
このように、 要求仕様書は、 最初に関係者 (一般には顧客、 設計者、 検査者) が最 終ゴールに対して合意する重要な文書です。 これが“わかる” の障壁に阻まれている ようでは、この先の作業が混乱するのは避けられません。 だからこそ、より正確に合 意できる (わかりあえる) ために要求仕様書の構成や表現を工夫する必要があるので す。
5.3 なぜ“要求仕様書というのか?
ところで、なぜ、ソフトウェアの開発の場に出される仕様書を、 「機能仕様書」 で はなく 「要求仕様書」 というのでしょうか?
多くの人は、こんな 「理屈」 には興味はないのかもしれません。 しかし、この「要 求仕様書」 の“要求” をどのように解釈するかによって、 そこで展開される “仕様" の意味や、このあとの派生開発における "変更要求” の意味にも影響を与えます。
筆者は、ここでの“要求” とは 「作って“ほしい (Require)”」 という意味だと解 釈しています。 機能仕様書は、 その製品やシステムが提供する「機能の詳しいこと (= 仕様) が書かれた文書」 であるのに対して、 「要求仕様書」 とは、 「作ってほしいこと (=仕様) が書かれた文書」 ということになります。
新規開発の場合、 要求仕様書は、 機能部分については機能仕様書とほとんど同じも ので、 「......できる」 と書かれている箇所を「·····できるようにしてほしい」 と読み 替えることで対応できます。 そのため、 従来は機能仕様書と要求仕様書をあえて区別 してこなかったとも考えられます。 ただし、これらを区別しなかったことの副作用と して、ソフトウェアの作り方や作る際の 「品質要求」 が省かれてしまったのです。 「品 「質要求」 のなかには、 機能仕様書には含まれないものもあるのです。 それは、 機能仕 様書は「作るための文書」 ではないからです。
「作るための文書」 の意味が如実に現れる場面として、“変更" を中心とした派生開 発のケースを考えてみてください。 派生開発における今回の要求書または要求仕様書 は、
53 なぜ要求 仕様書というのか? 143
「電話の呼び出し信号に対して無条件に呼び出していたのを、 発信者の電話番号 が非通知のときは、携帯電話の呼び出し音を鳴らさずに発信者に呼び出し中の音 を返すように変更して “ほしい”」
という表現になります。 これに対して、完成後の新しいバージョンの「機能仕様書」は、 今回の修正分だけでなくすべての機能の仕様を持っていて、 そのなかで 「発信者の電 話番号が非通知のときは携帯電話の呼び出しを鳴らさずに発信者に呼び出し中の音を 返し続ける」 となるはずです。 つまり、派生開発の場合は、 この 「差分」だけが “作 ってほしい” 要求 (変更要求仕様) なのです。 もちろん、 変更であっても 「要求仕様 書」 ですから、 今回の “作る作業” (この場合は変更する作業)には、
「既存の呼び出し機能に対して支障をきたさないこと」
「表の操作において反応に遅れを感じさせないこと」 (理由=非通知で電話がかか ってきていることが見えていないため) 「変更に際して現状の保守性のレベルを低下させないこと」
といった「品質要求」 もついてきます。
このように、 「要求仕様書」は “要求” -すなわち "作ってほしいことが書かれた文書 " であると認識することで、 機能要求、 品質要求、 その他制限の3つの要求の体系を含 むことになります。 それに対して 「機能仕様書」 は、 機能について詳細な動きなどを 記述したものですが、これでは “作ってほしい文書” としては不十分なのです。
このほか、機能仕様書が “作ってほしい文書” としては不十分な理由として以下の ことがあげられます。
(1) 機能仕様書は平均的な記述になる
機能仕様書には提供する機能についてひととおりのことは書かれていま すが、誰が作るかは想定されていないので平均的な記述になっています。 こ れに対して要求仕様書は “作ってほしい文書” である以上、この文書によ って目的のものをうまく作ってもらう必要があり、 そのため、 実際に作る 人 (担当する設計者) によって書き方や表現を工夫する余地があるのです。
(2) 品質仕様が書かれない
第5章 要件開発の重要性
品質仕様は、 機能仕様書には “パフォーマンス” などの個々の機能に付随 する品質特性については書かれているかもしれませんが、それはこれくらい の性能で ”動く”ことを説明するものであって、これくらいの性能で“動く ように作ってほしい” こととして書かれているわけではありません (読み替 えることはできますが)。 その他のシステム全体に関わる品質特性 (堅牢性、 操作性、移植性、 保守性など) については、機能仕様書ではほとんど触れら れることはありません。 というよりも、そこでは扱うことができないのです。 なぜなら、これらの品質要求は“作る”際にはこのように作ってほしいとい う意味の品質であり、“作る”ことを前提としていない機能仕様書では表現 する方法がないのです。
(3) 開発言語、 ライフサイクルモデル、 実装上の制限が書かれない
その他の規制としては、 開発言語、 ライフサイクルモデル、 実装上の制限 などが含まれますが、これらは機能仕様とはほとんど無関係ですので書かれ ることはありません。 理由は品質と同じで、これらの要求は "作る”際の制 限だからです。 もっとも、これらのなかには 「要求仕様書」 に表現すること にそぐわないものもあります。
このように、 「機能仕様書」では“作ってほしい” 文書としての役は果せないのです。
□5.3.1
作ることを誘導できなければ意味がない ||||||
ソフトウェア開発の現場では、ソフトウェア設計の多くを外注に出しているものと 思われます。 その際、 要求仕様書は発注側が書いていることも少なくないでしょう。 分野によっては、その分野に詳しいソフトウェア企業にヒアリングとセットで要求仕 様書の作成も任せていることもあるようですが、 組み込みシステムの分野では、外注 に出す場合は発注側が書いていると思われます。
ここで「要求仕様書」 の意味を認識していないことに起因するトラブルがあります。 それは、 外注に出す要求仕様書の書き方がいつも同じになっていることです。 外注先 のソフトウェア企業に優れたエンジニアがいる場合は上手く作れます。
そのようなエンジニアは、要求仕様書を受け取った段階で曖昧な箇所を見つけて「確 認」 を求めてきます。 そのような確認や質問を要求仕様書の構成に沿ってまとめて依 頼者に届けてきます。 この質問をまとめる方法の優れた点は、 複数の質問項目自体が どのような仕様に決定されるかによって影響を受けることが多く、 回答する側も、 既
44
53 なぜ *要求 仕様書というのか? 14
存の仕様と質問項目、 さらには質問項目間の絡みなどを総合的に判断して回答できる ことです。
これがバラバラに電子メール等で質問されると、 個々の質問に反応するように回答 してしまうために、 数日後に届けられる質問によって先の回答を撤回しなければなら ないことも起きてしまいます。 まとめて質問されれば、この種の問題の多くを回避で きます。 設計者のこのような行為は、 結果的に、 設計者の手で要求仕様書を補充して いることになります。 これが、優れた設計者の条件の一つです。
しかしながら、 いつもこのような優れた設計者に担当してもらえるとは限りません。 ソフトウェア企業によっては、 そのようなエンジニアは皆無というケースもあります。 そのような場合は、 要求仕様書の内容を理解できなかったり、 仕様間の関係やパラメ ータとの関係を把握できなかったりする可能性があります。 もちろん、 そのような状 態では質問も出てきません。 質問できる状態ではないのです。 そして、 質問がほとん ど出てこなかったことで、 依頼側としては、 「理解されている」 と誤解してしまうの です。 結果は、いつものように悲惨なことになるのです。
このとき、依頼者の書いた「要求仕様書」 は別に手を抜いているとは限りません。 優れたソフトウェアエンジニアが対応してくれるケースでは、曖昧な箇所などは質問 されることで埋めていくことができるのですが、 そうでない場合はその質問すらでき ません。 もちろん、 このようなソフトウェア企業に発注しなければよいのですが、 そ こに発注せざるを得ない事情は別にあるのでしょう。 それなら、要求仕様書の書き方 を変えればよいのです。 要求仕様書を “作るための文書" と定義することで、作る人(関 係者)の技術力や経験などを考慮して、 書き方や表現の細かさなどを変えることもで きます。
いわゆる 「自明のこと」を書くべきかどうかがしばしば問題になります。 機能仕様 書ということであれば記述すべきでしょうが、 要求仕様書であれば、 状況によって使 い分けるべきです。 要求仕様書は背後に 「納期」 や 「コスト」 を背負っていて、 それ に見合うような人選が行われているはずです。 今回の関係者の場合、 自明のことを記 述しなければ漏れる危険があるということであればしっかりと記述すべきですが、 納 期などを考慮して経験者を集めているということであれば、 要求仕様書の段階では省 くこともよしとすべきです。 それが 「作るための文書」 の意味です。
開発が終わって要求仕様書を 「機能仕様書」 に戻すときに、表現のバラつきを調整
第5章 要件開発の重要性
146
すればよいでしょう。 細かな表現に揃えることもあるでしょうし、 部分的に細かな表 現になっている部分は、 「補足説明」として切り出して文書の後ろにまとめたり、組 織内の共通の用語集に移動したりすることもできます。
□5.3.2 「作るための文書」であることの好都合 「要求仕様書」 を “作るためのことを具体的に記述した文書” であると規定するこ とで、いろいろと便利なことがあります。
たとえば、ソフトウェアの開発プロセスは、 要求の規模や内容によってプロセスの 種類もつなぎ方も変化させる必要があります。 要求が、 その後の作業や成果物を決め る 「元」 になるわけです。 要求仕様書には、 機能だけでなく品質要求や開発の制限も 含まれます。 また、意味的には納期 (期間) やコストも 「要求」 の一種です。
したがって、 設計のメンバーに経験の浅い人が混じっていたり、 実際に設計に当た るソフトウェア企業の担当者がこの製品やシステムのドメインに慣れていない場合、 要求仕様書の表現をより具体的にしたり、 表現に表や図を活用したり、他の仕様との 関連を指示したりしてイメージしやすくするような工夫をすればよいのです。 新人が 担当することになる機能だけ、周りと比べて詳しく表現してもよいのです。 要求仕様 書を作るための文書” と認識することで、このように書き方に変化をつけることに 支障はなくなります。
逆に、開発にあてることのできる期間が非常に短いときは、その期間でも実現でき るように当該ドメインに詳しい人や設計に熟達したエンジニアを集めることになりま す。このようなエンジニアでチームを構成することで、 要求仕様書を新人が担当する ような表現にする必要はなく、一般的には 「仕様」 になり切っていないと思われるよ うな表現でも彼らの間では "Specify (特定)" できるでしょう。 実際にそこで必要な 仕様を漏らさずに実装できるのであれば、 “作るための文書” としての「要求仕様書」 としては、それも許されると考えることができます。
CMMの原文を読んで研究していたとき、 要件管理の 「Act 2」に 「The software engineering group uses the allocated requirements as the basis for software plans, work products, and activities.」 という文章を見つけました。 この 文章は、一般には要件変更の場面に限定して解釈されているようですが、筆者
B
g
5.3 なぜ要求仕様書というのか?
自身は、以前から "requirement" を “作ってほしいこと” と考えていましたの で、この文章を読んだとき、 要求の内容によって、 プロセスや成果物の構成を 変えたりしてきた筆者のやり方と一致すると感じたものです。 実際、筆者の派 生開発では、新規開発とでは要求の性質がまったく異なるということから、 要 求仕様の書き方からその後の設計プロセスや成果物までも完全に姿を変えてい ます。
□ 5.3.3 新規開発と派生開発の 「要求」 の違いをあらわす 実際のソフトウェアの開発の大部分は 「派生開発」 と思われます。 派生開発には規 模の大きなものから小さなものまで千差万別で、変更しかないものもあれば、 たくさ んの機能の追加や削除の他に移植などが入り交じったケースも考えられます。
一般に、派生開発においては3つの間違いを犯しています。1つは「要求」の表現が「変 更」 を正確に表現していないことです。 変更ですから 「現在の状態」 と 「新しい状態」 を表現することが大事です。 いわゆる、 変更、追加、 移植、 削除の区別が明確である ことです。
2つめは、 「変更要求」 に対して 「変更仕様」 が展開されていないことと、 逆に、 「変 更仕様」 に対して 「変更要求」 が立てられていないことです。 派生開発では、変更は 要求のレベルで出される場合と仕様のレベルで出される場合があります。 ここでいう "仕様のレベル” とは、その表現で具体的にソースの変更する箇所を特定できるよう なレベルも含みます。
「受信バッファを4Kから8Kに変更する」
というのはまさに 「仕様」 のレベルであり、これだけでソースの該当する箇所を特定 できます。
変更であっても、 仕様は 「要求」 に包まれた状態でないと、 仕様モレが生じてしま います。
3つめの間違いは、 機能の追加や移植を「変更」 としても扱っていないことです。 新しく追加される機能についてはそれなりの要求仕様書が書かれますが、 新しい機能 を既存のシステムに追加するにも、 既存のソースコード (=実装レベルの仕様) を変 更しないかぎり新機能は動きません。 この変更部分を「変更仕様」 として扱うという 認識がないために、 機能の追加をするたびにシステムが止まってしまいます。 移植は
147
第5章 要件開発の重要性
148
機能追加の一種で、 作業的には機能追加よりも複雑になることが多いのですが、 逆に 「別のシステムで機能している」 ということで安易に扱われているのです。 言い換えれば、 多くの現場で起きている派生開発における問題は、 「派生」 の要求 仕様書が派生開発の特徴を無視した形で表現されていることです。
□5.3.4 派生開発では「差分」 の分だけが “要求”
派生開発のプロジェクトは、 元来ベースとなるソースコードに対して 「ここを変更 してほしい」 という 「差分」 の要求によってプロジェクトが動き始めます。 そのため、 ベースとなるソースコードが数100万行あろうと、 差分である修正規模に対して工数 やコストが見積もられます。
「差分だけを要求として扱う」と考えることで、 差分を実現するだけの成果物やプ ロセスが成立します。 “ここを変更してほしい” という 「要求」 を集めたものが今回 このプロジェクトで実現する(したい) ことのすべてとすることで、 差分に見合うプロ セスや成果物が設計され、さらにその差分に見合う見積りや計画が作られることにな ります。
そして、差分の 「変更要求」 を、
「画像表示で1画面に表示するコマ数を、 8コマ表示から10コマ表示できるよう に変更する」
というように、 「現状」 と 「変更後」 を並べて表現します。
このように旧状態と新状態を併記する表現は、「機能仕様書」 の世界では考えられ ないと思いますが、 「作ってほしい文書」 であればまったく違和感はありません。 そ れどころか、旧状態と新状態を表現するほうが依頼者の意図 (=要求) が明確に伝 わります。 また、 実際に変更作業をする設計者も、 ソースコード上の該当する箇所を 「旧状態」 で確認できます。
ソースコードの変更方法についてのレビューでも、 旧状態と新状態が併記されてい ることで、 少しでも現状のシステムに対する知識がある人ならその修正方法が適切な ものかどうかを判断できるかもしれません。
これが単に 「1画面で10コマの画像を表示できる」 と変更を指示されたのでは、 修正すべき箇所を特定する際にも間違いやすくなるのです。 もちろん、 変更が終わっ て動作も確認したあとで、 整備された新しいバージョンの機能仕様書では 「1画面で
5.3 なぜ要求仕様書というのか? 14
10コマの画像を表示できる」 という表現になります。
多くの現場では、 派生開発の要求仕様書は、 完成して整備されたあとの機能仕様と 同じ表現になっています。 実際に、 派生開発であっても新規開発で使うような 「要求 「仕様書」 が作成されることも少なくないようです。 しかしこれでは、 前の状態がわか らず、何が変更されるのかがわかりません。 その変更で影響する箇所の調査も難しく なるし、 変更作業の見積りも曖昧になってしまいます。
□5.3.5
機能仕様書との関係
製品やシステムが提供する機能の動きや振る舞いを詳細にかつ客観的に記述したも のは 「機能仕様書」 あるいは 「製品仕様書」 と呼ばれるものです。 これは、“作ること” を前提としていません。 これに対して 「要求仕様書」 は、 “作ること” を想定した文 書です。
新規開発の場合は、 機能仕様書をベースにして、 要求仕様書とするために必要な品 質要求を追加する形で対応できます。 機能部分は客観的な表現になっているかもしれ ませんが、それを "作ってほしい” と読み替えることで十分対応できるでしょう。あ とは部分的に詳細にすれば足りると思われます。
これに対して、 XDDP という派生開発アプローチでは、新しいバージョン (Ver. 2.0)のシステムは「差分」で作られます。 このとき新しく追加される機能については「追 加機能要求仕様書」 で記述され、 変更箇所を記述したものは 「変更要求仕様書」で記 述されます。 そこには、新しいバージョンのソフトウェアを作るための差分の 「要求」 が仕様に展開され、さらに“作る" に当たっての 「品質要求」 や 「その他の要求」 も 含まれています。 こうしてVer.2.0のシステムが作られます (次ページ図 5.1)。
派生開発のプロジェクトが終わったあとで、 旧バージョンの機能仕様書に対して今 回の「差分」の変更要求仕様書に示された変更要求や変更仕様、 さらには追加機能の 要求仕様書の内容をマージして、 新しいバージョンの機能仕様書が作られます。 ここ でマージして作ったのは、あくまでも 「機能仕様書」 です。 そこには、パフォーマン スなどの機能に付随する品質要求や仕様は含まれていますが、 保守性のように純粋に "作り方” に対する品質要求ははずされています。 というよりも、 機能仕様書には含 まれる意味がないのです。
図5.1のマージされた 「機能仕様書 V2.0」 は、 そのシステムの新しいバージョンが 提供する機能や振る舞いについての仕様は書かれていますが、 あくまでも、 「V2.0」 のシステムの機能や振る舞いを説明する文書に過ぎません。 "作る" という使命を持
150 第5章 要件開発の重要性
↓図 5.1 機能仕様書が要求仕様書になり機能仕様書に戻る
“作る” ときだけ 「要求仕様書」 になる
機能仕様書 V1.5 差分を抜き 出して要求 プロジェクト 終了後に、 作 る要素を除外 し機能を中心 にマージする 仕様書にする V2.0の企画 V2.0用 | 新機能を含む 変更要求仕様書 「追加機能要求仕様書 V2.0の機能や振る 舞いを説明する文 書に過ぎない |機能仕様書 V2.0 V1.50 ソース 差分に基づ いて新バー ジョンのソー スを作り出す V2.0 ソース
っていない文書を 「要求仕様書」 と呼ぶのは適切ではないでしょう。
5.4 要求仕様書は誰が書くのか
ところで、 「要求仕様書」 は誰が書くべきなのでしょうか?
簡単にいってしまえば、 要求仕様書は 「依頼者が書くケース」 と 「設計者(側)が 書くケース」 があります。
社内での開発案件の場合は、 設計者が仕様作成に深く関わっていることが多いと思 います。 その場合の企画部門の人は大きな機能などの“要求” を伝えるだけで、 実際 の仕様は設計者が決めて両者で確認しあうことになります。
一方、請負で外注に出す場合は、 ほとんどは依頼側 (発注側)の誰かが書いている と思われます。 なかには、 金融関係など特殊な分野の場合は依頼先の設計のエンジニ アが仕様を書くこともあるようですが、 そのようなケースを除けば、 外注に出すとき は概ね依頼者のほうで要求仕様書をまとめていると考えられます。 そこでは、依頼側 の企画の人であったり、設計グループの誰かであったりします。 しかしながら、設計 の経験が少なかったりして仕様化のスキルが不足している場合は、第1章で紹介した ような混乱が起きてしまうのです。
↓図 5.2
5.4 要求仕様書は誰が書くのか
要求仕様書は誰が書くか?
依賴者 設計者 要求仕様書 要求仕様書 設計者自身が書く 実際には設計しない人が書く
依頼者が書くケースと、設計者 (側) が書くケースがある。 また、 設計側が 書く場合でも、 実際には今回のシステムを設計しない人が書く場合がある。
設計者自身が書く場合、そこに書かれた仕様は設計者自身が認識していることなの で、依頼者を交えたレビューなどの検証プロセスで仕様のモレや衝突をチェックする ことで仕様としての完成度は上がります。 もちろん、 要求仕様書の書き方や構成はレ ビューの成果に大きく影響しますが、書かれていることが実現されないようなことは 一般には起きにくいと考えられます。 必要なら、 「追跡」 によって設計途中で要求仕 様書と設計書を照合することで、その仕様の実現状況を確認できると思われます。 したがってこの場合は、 仕様として要求仕様書に適切に抽出されるかどうかで結果が 決まることになります。
これに対して依頼者が仕様を書く場合は、 そこに書かれていることは依頼者が“こ うした動きになるべき" と認識していることであって、 設計者は依頼者が認識してい る仕様を“理解” し、 依頼者と同じ認識の状態に達する必要があります。 このときの問題として、
●設計者のほうで、 人の書いた仕様 (文章) を 「理解する」 スキルが求められます が、これは簡単にできることではありません。 特に、文章が書けない人には他人 の文章を理解することは容易ではありません。
②依頼者は要求と仕様についての認識が薄いことが多く、 「仕様書」 には要求と仕
*1 筆者の「要件管理」 では要件の実現性に対する追跡 機能を持たせており、最初に設定した追跡のレビューのタイミン グでレビューされます。
151
第5章 要件開発の重要性
152
様が混ざってしまうことが考えられます。
このような状況のなかで、 設計者のほうで仕様のモレや矛盾を見つけるには、設計 者自身に自分で仕様書を書くのと同等のスキルが求められます。 しかし、依頼者が書 いた要求仕様書の 「構成」や書き方が悪いときは、設計者の理解を妨げてしまうのです。
設計側の人が要求仕様書を書いたときでも、 実際に設計しない人が書いたときは 上にあげたような依頼者が書いたときに起きる問題に近い問題が発生します。ただ、 「文化」 的には設計者に近い人が書いていることもあって、 問題の範囲は限られるで しょうし、すぐに確認できる状況にあると思われます。
ここで求められているのは、 依頼者と設計者の間 (実際にはテスト担当者も含む) で要求仕様書について 「合意」 でき、かつ、 事前にできるだけ多くの仕様モレや矛盾 ( 衝 突) が検出されていることです。 そのためには、 何らかの形で設計者自身が要求仕様 書を書く、 または補足することが必要になります。
5.5 顧客からの要求仕様書を洗練する
一般に、ソフトウェアの設計を外注に出す場合は、 依頼者のほうで 「要求仕様書」 をまとめることになるので、 外注先の設計者はそこに書かれている要求仕様書の内容 を理解し、依頼者の認識に近づく必要があります。 しかしながら 「理解する」という 行為は、ときには「作成する」 行為よりも難しいこともあります。 理解するというプ ロセスで適切な 「成果物」 を出さなければ、 当人も周囲の人も、彼が 「理解できた」 ことを知る方法がないのです。
そのため、依頼者が書く要求仕様書は仕様としては少し不足気味に書き、 設計者の ほうで仕様を理解しながら質問などの形で不足している箇所を補って、 元の仕様書に 加筆していく方法がよいでしょう。 依頼者のほうも、 設計者の手で不足が埋められて いく様子を見ることで、 設計者の理解の状態を判断することができます。
いわゆる、 要求仕様書の「ベースライン設定」 は、こうしたひととおりの質問箇所 をクリアしたあとに行うべきで、この洗練期間中は暫定合意という段階とすべきです。 しかしながら多くの失敗の事例を見ていると、依頼者から交付された時点が正式に要 求仕様書を受領した日としているケース多く、そこでは要求仕様書を設計者の手で洗
56 仕様モレと仕様間の衝突を早期に発見する 15
練する機会を確保していません。 ここから多くの問題が発生しているのです。
設計や実装過程に入ってから五月雨式に仕様の問い合わせが出される原因も、 交付 時に仕様が詰め切れていないからです。 もちろん、 これとは別に、依頼者からも仕様 の変更が発生します。 事前に書かれた要求仕様書は、 依頼者の一方的な視点で書いた だけであり、 しかも所定の期日に間に合わすことを優先した可能性もあって、 内容に 不足があることは避けられないのです。
もっとも、依頼者から渡された 「要求仕様書」の内容を洗練するには、設計者にも 要求仕様書が書けるスキルが必要になります。 実装していく過程で仕様の不足に気づ く人であっても、 必ずしも要求仕様書の状態で欠陥に気づくとは限りません。 そのた め、 仕様化のスキルが不足した状態では、 仕様の洗練期間が設定されてもそこで何を すればよいのかわからず、ひととおり “ざっと” 目を通したぐらいで 「合意文書」 と なるのです。
5.6 仕様モレと仕様間の衝突を早期に発見する
大事なことは、そこで実現してほしいこと、 実現しようとしていることを関係者に わかるように要求仕様書にまとめることです。 しかしながら、 書き手にはこれで通じ るだろうという自分勝手な思い込みがあったりします。 また、 大事な仕様が漏れてい たり、他の機能の仕様と衝突していることに気づかなかったりします。
一般に、この状態のまま設計作業に入ってしまうために、仕様モレや衝突に気づく のが遅れてしまって混乱しているのです。 計測データの表示中もランダムに送られて くるチャネル別のデータを取り込まなければならないことに気づいたものの、そこで 表示するチャネルは6チャネルもあり、 単純に受信バッファの内容を表示していたの では新しいデータを受信できないことがわかったのは、 評価グループから 「ときどき 表示するデータが飛んでいる」 という報告を受けたときだったりするのです。
急いでバグの原因を究明していくなかで、 このバグを直すには受信バッファと表示 用バッファを別にしなければならないのと、表示中であっても受信バッファに溜まっ たデータをすぐに取り込んで該当するチャネルの表示用バッファに移さなければ次の データが受け取れなくなること、こうした動きを実現するにはシングルタスクの周期 構造のアーキテクチャでは無理だということがわかります。 そしてデータも単純にチ ャネルごとの 「配列」 構造ではリングバッファ構造でしか対応できず、 必要なメモリ データを計算すると足りないことがわかったものの、期限までに修正することは困難
154 第5章 要件開発の重要性
なためとりあえずチャネル数に制限をつけてリリースする、ということになってしま うのです。 あるいは、慌てて変更しようとして、 すでにソースコードになっている無 関係な部分を壊すのです。
不適切な要求仕様の下では、こういうことは日常茶飯事で起きています。 このため に 50%もの工数を追加することも起きているのです。 適切な要求仕様書を作る過 程で、仕様モレや仕様の衝突をできるだけ早い段階で発見することができ、こうした 問題を根源から消してしまうことができるのです。
5.7 要件開発をスケジュール管理のなかで行う
多くのソフトウェアの開発現場では、 要求仕様書を作成してからプロジェクトの計 画を立てています。 その理由を尋ねると、 要求が仕様化されないとその後の工数が見 積もれないというのです。 確かに、 仕様化された状態であれば機能ごとの難易も見え ます。 ファイルを扱うタイミングも、 画面操作で確認する場面も、時間的にクリティ カルな動きが要求されるところも見えるので、 設計以降のプロセスについてある程度 の工数が見えてくることは確かです。
しかしこの結果、要求仕様書を作成する作業は、 全体のスケジュールの管轄外に置 かれることになります。 つまり、
●要求仕様書を作成する作業の工数はやってみなければわからない、というなるか、
状態に
②根拠もなくある程度の期間のなかで要求仕様書をまとめようとする
ことになります。 前者は、いつ終わるかわからないのと、リリースされたときには プロジェクト全体の2/3以上の時間を先食いしていることもあります。 それでいて、 内容が不十分で仕様モレや衝突の可能性が高いとなると、この後の混乱は避けられま せん。 設計プロセス以降、 特にテストプロセスの工数が犠牲になり、 テストが不十分 な状態でリリースを迫られるのです。 このことが、 テストグループの人たちのモチベ ーションを著しく損ねているのです。
後者の場合は、これまでの経験 (必ずしも成功した経験ではない) から今回の仕様 作成期間を想定しそのなかでまとめようとするのですが、 もともとどれくらいの仕様 項目数になるのか (サイズを)見積もっていないので、いくつかの機能の仕様化でも たついている間に多くの時間を失ってしまいます。 しかも、このあと残されている機
5.8 要件開発と要件管理は車の両輪 155
能の仕様化にどれくらいの項目数が予想されるかも見積もっていないので、担当者は 仕様モレを気にしながらも先を急ぐことになります。
このように、仕様化の作業がスケジュールの枠外に置かれた状態では、 仕様として の精度も安定せず、 仕様モレや衝突の状態が混じっている可能性が高くなります。
事前に仕様の項目数を見積もって仕様化の作業をスケジュールの管理下に置こうと すると、仕様の粒度についてもある程度の想定ができていなければなりません。 この 結果、 実際に仕様化を始めたとき、 当初の想定よりも細かく分けたほうがよさそうだ といったことに早く気づくことができ、 そこで見積りを調整し場合によっては担当者 を増員する判断もできるので、 仕様書の出来栄えを犠牲にしなくても済むのです。 また、このような状況であれば、 当初の想定よりも大幅に仕様が増えることに早く 気づくので、 機能レベルでのトレードオフの判断も仕様化作業のなかででき、無駄な
工数を使うこともなくなるのです。
5.8 要件開発と要件管理は車の両輪
要求仕様の書き方を改良して、 仕様モレが起きにくく仕様の衝突に気づきやすい表 現方法を手に入れ、そのうえで要求仕様について関係者の間で合意してベースライン が設定できたとしても、その後の仕様の変更はある程度は避けられません。 小さな変 更であれば、当初の期限のなかに吸収することができるでしょうが、すべての変更を 期限内に受け入れることができるとは限りません。
ベースライン設定以降に発生する要件の変更は、その内容や影響範囲、 変更量や工 数などをしっかり検討したうえで対応を判断しなければなりません。 こうした 「要件 管理」のプロセスがいい加減だと、せっかく仕様モレしにくい形で要求仕様を書いて も簡単に崩れてしまいます。
一般に、 要件管理が破綻するのは、
●仕様の変更が多過ぎるのと、
②仕様の変更がすでに設計や実装の段階に入っている状態で発生するのと、 ③適切な要件管理プロセスが実施されていないかルーズに扱われている
からです。
156 第5章 要件開発の重要性
いま効果的な仕様化に取り組んだことで、途中のレビューでも多くの仕様モレや仕 様の衝突箇所が指摘されているので、残っている問題は減っているはずです。 つまり、 上の1と2はある程度押えられているはずなので、あとは3の要件管理に確実に取り 組むことで要求仕様に関する混乱は大きく改善できるはずです。
また、要件管理によって、 仕様の変更率などの要求仕様の出来栄えを知るためのデ ータを手に入れることができ、 要求仕様書の書き方などにフィードバックできます。 せっかく要求仕様の書き方を工夫しても、この後の 「要件管理」 がいい加減だと“や りっ放し” になってしまい、ここまでの努力が台なしになってしまいます。 「要件開発」 と 「要件管理」 は車の両輪のようなもので、 「要件開発」に力を入れようとする分だけ「要 件管理」 にも真剣に取り組むことが重要です。
5.9 要求工学における世界の動き
ソフトウェアの開発のなかで、 「Engineering」 という文字が使われるところが3カ 所あります。
[Software EngineeringJ [Requirement EngineeringJ 「Re-Engineering」 です.
では、「Engineering」 とは何かと思って辞書を引いたところ 「工学」 と出てきてし まい、よくわかりません (辞書によっては 「巧みな処理」 という意味が書かれています)。 そこで筆者は「誰でもその手順に沿って進めていけば、 “ある程度の範囲の結果”が 「得られる仕組み」と解釈しています。 たとえば、石油の 「Plant Engineering」は、石 油を投入口から流し込めば、 事前に定めた手順通りに処理されて灯油やガソリンなど に生成されて出てきます。 この仕掛けがEngineering です。
ソフトウェアの開発でも、それに似た方法を確立しようというのがSoftware Engineeringの目指すところです。 そして、 Requirement Engineering の場合は、要求 を適切に捉えて仕様として表現すれば設計のプロセスに接続できるか、あるいは、 要 件から設計のプロセスまでを含めて効果的なプログラムの生成を導くことを狙ってい ます。
もちろん、現実には “誰でも"というわけにはいきません。 それなりの知識と技術 を習得している必要はありますが、投入される要求 (仕様) が多少ばらつくなかでも、
5.9 要求工学における世界の動き 157
ある程度の結果を得ようとしているのです。 属人性は完全に排除できるものではあり ませんが、可能なかぎり Engineeringのなかに吸収しようという考えは追及していく べきでしょう。
従来、ソフトウェアの品質などの問題は設計方法で解決しようとしていましたが、 1990年代の初め頃に、 要求仕様の問題をクリアしないと設計では対応しきれないと いうことで認識が共有されました。 そして 「Requirement Engineering」の第1回世界 大会が1993年に開催されたのを皮切りに、 世界中で要求仕様のあり方について研究 が進められるようになり、 90年代後半から、 順次その成果が発表されるようになっ てきました (巻末の文献リスト参照)。 2004年9月には、 第12回世界大会が京都で 開催され、またCMMIの普及もあって、 日本においても 「要件開発」 の重要性につい ては認識が広まったのではないかと思われます。 実際、 2005年1月に 「要求開発ア ライアンス (ReDA)"」 という活動組織が結成され、 「要件分析」 のモデリングを模索 する動きにも繋がっています。
この間、2000年代に入って 「要件開発」 の方法がいくつか発表されています。 そ の中には 「I*」 「KAOS」 「E3VALUE」 「AGORA」 などの要件開発技法があります。 これ らの方法に共通しているのは、 要求の抽出あるいは発見に力点が置かれていることで、 発見した要求をどのように表現するかということについてはほとんど触れられていま せん。
また、これらの要求開発技法には、たとえばビジネスゴールからビジネス要求、 さ らにそれを実現するためのアクションを階層的にとらえようとしていて、そのための 気付きのキーワードを提供しているものがあります。 しかしながらそこで扱われる要 求やアクションの抽象度が高く、 このままでは設計作業の中で仕様を抽出することに なります。 もっとも、 設計作業の中で仕様を抽出することを肯定しているのかもしれ ません。
それでもビジネスゴールを達成するための 「システム要求」 の抽出には威力を発揮 すると思われます。
一方「USDM」 が扱えるのは「システム要求」 から下位層の部分です。 システム要 求は一般に「機能」 であり、 「振る舞い」 で表現することで、そこから先を 「USDM」 に引き継ぐことができます。
*2 「要求開発アライアンス (ReDA)」 http://www.openthology.org/
第5章 要件開発の重要性
この他、要求分析モデリングに関するアイデアもいくつか提案されてきています。 広く普及しているUMLの表記を使って要求を探り出す方法もあります。 発見された 要求をまとめて管理するツールもでてきました。 ただ、こうした“モデリング”の概 念は要求の抽出”のレベルであって、“仕様の抽出”は“具体化”の世界の話なので、 一般的なモデリングの世界と"具体化”の世界を橋渡しする考え方や方法が必要 になります。 「USDM」 はこの場面においても効果的に対応できます。 "モデリング で抽出された要求は 「USDM」 ではほぼ上位要求に該当するので、そこから 「USDM」 で引き継ぐことができます。
158
*2 第
部
要求仕様を書く
第2部では、 本書の主要なテーマである USDM による要求仕様の書き方について解 説します。 要求の役割から、 要求の書き方、 階層化のテクニック、 仕様の表現方法や表現 する際の注意点などを要求仕様全般について 扱うとともに、 要求仕様書の応用として、派 生開発における要求仕様 (変更要求仕様) の 書き方と画面仕様の書き方についても触れる ことにします。
要求
"
を書く
バグの原因分析から原因が 「仕様モレ」 であると判断されても、 具体的に仕様モレ を防ぐ方法を手に入れなければ、 次のプロジェクトでも場所を変えて仕様モレが発生 してしまいます。 仕様モレは、 「注意」ではほとんど防ぐことはできません。 もちろん 「不 「注意」によるものも混じっているでしょうから、そのような仕様モレは 「注意」のレ ベルを上げることで防ぐことができるでしょうが、根本的には要求仕様書の構成や書 き方を変えたりしなければ解決しないことのほうが多いのです。
本書で勧める要求仕様の書き方は、テストや実装中に発見される仕様モレや仕様の 衝突が起きる最大の原因は、 「要求」 が表現されないことにある、 という考えに基づ いています。 また、 要求は 「範囲」 を持っており、 要求が適切に範囲を表現すること によって、 さらにその要求の中に含まれる動きを示す 「動詞」 を適切に表現すること によって、要求を実現するのに必要な仕様を漏れなく引き出すことができるのです。
しかしながら、一般にはこのようには認識されていないため、 要求仕様書に 「要求」 が表現されていることはありません。 そのため、 そこにある 「要求仕様書」 では、 仕 様モレを発見しようとレビューを繰り返しても、あるいはレビューでの指摘件数をノ ルマと課してもほとんど何も変わらないのです。 要求仕様書の構成が邪魔をしている のです。
本書で勧める要求仕様書の構成や表現方法が身に付いたときには、 仕様モレも仕様 の変更も大幅に減少します。 むしろ仕様モレよりも、要求モレを防ぐほうが難しいこ とに気づくでしょう。
なお、ここでは要求や仕様の事例にExcel の書式を使っています。 これは、 Excel が USDMの構成を維持するのに適していることが理由で、 Excelでなければできないと いうことではありません。
6.1 要求の役割
「今回のプロジェクトでの新規の要求は何でしょうか?」 「要求が多いようですので、当初の日程では難しい状況です」 「要求を最初に確認したいので、 ヒアリングの場を設定願います」
6.1 要求の役割 161
というように、 「要求」 という言葉は、ヒアリングのなかで自然に交わされます。 しかし、 「要求」 がきちんと文章に表現されることはほとんどありません。 あるいは、 仕様と しての 「要求仕様」 の存在は認識されていても、 「要求」 の存在は認識されていません。
「要求は何でしょうか?」 というように、言葉では "要求” という表現を使っても、 実際に文書のなかで要求を明確に表現していないのです。 少なくとも、筆者がコンサ ルティングで呼ばれたところで書かれている 「要求仕様書」 には、 「要求」 は書かれ ていません。
多くの現場で書かれている 「機能仕様書」 や 「要求仕様書」 にも、 「要求」 を目に することはありません。 確かに、以下の例のように 「要求」 は "抽象的" なものであ り、要求自体はそのままソースコードに変換されるわけではありません。
「入力した納品日が指示されている注文書を一覧で表示する」 「各計測点での計測データは比較しやすいように画面に表示する」
抽象的なものだから表現されないというわけではないでしょう。 おそらく、 表現す る習慣がないだけ、 あるいは要求を表現することの重要な役割を認識していないだけ と思われます。
「USDM」では、「要求仕様書」 は、 「要求」 とそれを実現するためのいくつかの 「仕 「様」 がセットで書かれた文書と捉えています。 つまり、それぞれの機能に含まれる 「要 「求」 と、 その要求を満たすための 「仕様」 で構成されることになります。 この場合の 「要求」 とは、
「表示ボタンを押したら、 そのときに受信している複数のデータを色分けして重 ねて表示してほしい」とか、
「あとでデータを編集できるように必要なデータを保存してほしい」
というように、 実行されるべきことに曖昧さを含んだものです。
これに対して、 「仕様」 は、 これらの要求のなかで表現されている 「動詞」 および その目的語から引き出すことができます。 たとえば、
ボタンが押せる条件
受信しているデータの表示の仕方
データの組み合わせの問題
162 第6章 要求を書く
データが受信できていないときの対応 表示がオーバーするときの対応 表示中にデータが受信されたときの対応
などに関する具体的な記述です。
設計者にとって、最終的に必要なのは「仕様」のほうです。 仕様が設計の対象であ りソースコードに変換されるからです。 そのため、仕様のほうは意識されるのですが、 要求の役割には誰も注目しません。 しかし、要求には仕様を “導出” するという非常 に重要な役割があります。 このとき要求の表現が不適切だと、そこから適切な仕様が 出てこないのです。
多くの現場では、 要求について特別に意識することはなく、 「機能名」 の形で文書 の 「見出し」 として使われています。 たとえば、
「2.6 データ表示機能」
「3.8 編集機能」
というように、機能カテゴリをあらわす 「タイトル (小見出し)」 があって、その下 にそれぞれの機能のなかで考慮されなければならない仕様がいきなり記述されていた りするのです ( 表 6.1)。
↓表 6.1 Word の要求仕様書で見られる要求の表現
2.5 画像拡大機能
■画像表示域の下に「スライダー」 がある
■スライダーの「ボタン」 を右に移動すると、 画像を移動分だけ拡大する
■逆に 「ボタン」 を左に移動すると、 画像を移動分だけ縮小する
確か2.5 画像拡大機能 というのは、文書の見出し、 あるいは区切りとしては有効だが、 これでは 「要求」 にはならない。 要求としては、せめて
に、
要求 DEX04.02
画面に表示されているスライダーの操作によって、 画像を任意の大 きさに拡大する
というように表現してほしい。
6.1 要求の役割 163
こういう事例を多く目にしますが、 この形では必要な仕様がモレてしまいます。
6.1.1 要求には 「範囲」 がある
確かに、 「要求」 は抽象的な表現です。 しかしその代わりに、 適切に表現された 「要 求」 は実現したいことの 「範囲」をあらわすことができます。 「範囲」 とは仕様を入 れるカゴのようなものです。 逆にいえば、 そのような 「範囲」 を見せるように表現し なければ、 要求としては適切な表現ではないということになります。 そしてこの 「範 囲」こそが、そこに含まれるべき 「仕様」 の抽出を容易にするのです。
たとえば、 表 6.2の 「A」 の段と 「B」 の段を比べてみて下さい。
↓表 6.2
表現を工夫すると範囲が見える
A 印刷できない状況が発生したときは担当者に知らせる 要求 PRT11 B 印刷途中で用紙やトナーが不足するとわかった時点で登録されてい る担当者にメールで知らせる 1週間の天気予報を表示する 要求 WTH01 要求 ALM03 A B A B 天気予報をネットから入手して、 最初の2日分は時間単位で表示し、 その後の5日分はそれぞれ1日単位で予報を表示する 予想との乖離が一定以上開いたときは通知する 商品毎に設定されている当日の売り上げ数量の予測に対して、 実売 データとの間に大きな開きがあるときは警告メッセージをマネージ ジャーのPC画面に出す A 設定データが変更されたときは、指定のファイルに保存すること 要求 FLE10 B システムの設定データが変更されたときは、あとで再現できるよう に日付などの必要な情報と一緒に指定のファイルに保存する
表現を工夫することで、 要求が求める 「範囲」 が見える。 "動詞" を見せることで要求がはっきり伝わる。
ここから、
その機能では、このように動作してほしい その機能の及ぶ範囲はここからここまで
といった情報が読み取れます。
要求そのものは「具体性」を持っていません。 しかしその要求に範囲が示され、そ してその範囲の中の動きが “動詞” の形で表現されることで、その要求を満たすべく 「仕
第6章 要求を書く
164
様」 が導出されることになります。 要求が適切に表現されていないと、 必要な仕様が 導出できません。 言い換えれば、 要求には 「仕様」 を抽出するという重要な役割があ りますが、 「範囲」 を表現することでその役割がうまく実現します。
したがって、 要求を表現するときは、
いかにして要求を適切に表現するか
どうすれば、仕様が上手く抽出できるように要求を表現できるか
がポイントとなります。
多くのソフトウェア開発の現場で書かれている 「Word」 で作られた形式の要求仕 様書で仕様モレが多発するのは、 「要求」 が表現されていないからです。 「要求」 は、 仕様を導出することが最大の役割です。 その意味では、 「仕様化」 作業は、むしろい かにして 「要求の表現」 を適切なものにするかという戦いでもあります。
6.2 要求の表現
一般の要求仕様書は、 表 6.1 のように機能別に分類され、
2.5 画像拡大機能
とあって、すぐ下にいきなり画像拡大機能に関連した 「仕様」 が列記されます。 つまり、 「要求」 が表現されていないのです。 確かに、
2.5 画像拡大機能
というのは、文書の見出しや区切りとしては有効ですが、 これは 「要求」 にはなりま せん。 要求としては、
DEX04.02 画面に表示されているスライダーの操作によって、 画像を任意の大 きさに拡大する
というように動詞形で表現してほしいのです。
この表現は、 まだまだ曖昧さを含んでいて、 このままでは設計にとりかかれません (要求だから当然です)。 しかし、 ここで求められているのは、スライダーの操作と連
6.2 要求の表現 165
動させるかたちでの画像の拡大縮小の機能であって、 それ以外の拡大縮小は考える必 要はありません。 拡大縮小の範囲もスライダーに設定されている値の範囲に限られま す。 仕様は “この範囲で” 抽出すればよいのです。
要求を "動詞" 形で表現することのメリットは、要求に "動き" を持たせることが 狙いです。 依頼者は、設計者が書いた要求仕様書を読んでもよくわからない、といい ますが、そこで書かれている要求仕様書に動きを感じないことも原因となっていると 考えています。
2.5 画像拡大機能
とあって、いきなり仕様が “散文” のなかで表現されては、 どれが仕様でどれが説明 なのかもわかりません。 しかも、 提供する機能のなかの象徴的な振る舞いについて仕 様が展開されているだけで、 機能全体の“動き” が、ボタン操作に伴う”流れ”とし て書かれていません。 それに対し、 要求を動詞で表現することで、要求仕様書に「モ デル」としての役割を持たせることができるのです。
このほかに、要求には 「変更要求」 (第10章参照) と 「品質要求」 があります。 い ずれの要求であっても、 仕様化されなければ実現しません。 そして仕様化するために は、範囲を持つかたちで要求が表現されることが重要になります。
6.2.1 要求の表現の難しさ
しかしながら、 実際に 「要求」 を表現してみようとすると、 要求を表現することが 意外と難しいことに気づかされます。 長い間、一度も要求を文章で表現してこなかっ たのですから無理もありません。
これに対して、「仕様」については、これまで漏らすまいと必死に表現してきました。 もちろん、 そこで表現してきたのは必ずしも仕様として適切なものではないのかもし れませんが、 "仕様” はずっと意識してきたはずです。 そのため、 改めて要求を表現 しようとするところで引っかかってしまうのです。
コンサルティングのなかで、要求仕様を書くように勧めると、
「ソースコードなら書けるが、 文章にするのは苦手で・・・・・・」
という人が少なくありません。
166 第6章 要求 を書く
しかし、ソースコードが書けるということは、どこかで 「仕様 (らしきもの)」 を 捉えたことを意味します。 そうでなければ、ソースコードの形にすることはできませ ん。 ソースコードはコンピュータに伝えるための言語であって、 ソフトウェア技術者 はそのための文法は習得しています。 ありがたいことに、 人間が使う言語の文法と比 べれば非常にシンプルなのですぐに覚えられます。 実際、コンピュータに自分の意志 を伝えるにはそれくらいの単語と文法で足りるのですが、 文章にして人間に伝える場 合は、単語もはるかに多く文法も複雑で、しかも同じ思いを伝えるにも何とおりもの 表現が可能です。 このことが、 要求仕様を人間が理解できるように表現することの難 しさとなっているのです。
しかも、いままで 「仕様」 ばかり意識してきたので、 「要求」 という観点から捉え てきませんでした。
「キーワードでメールを検索した結果から、 以下の項目を抽出して一覧表にして 表示する」
という仕様は考えついても、このような仕様を包含するような
「キーワードでメールを検索した結果を選択しやすいように
表示する」
というような要求で表現することには慣れていないのです。
□6.2.2 「範囲」 をあらわしているか
「範囲」 を読み取れるように要求を表現できるようになるには、練習が必要になり ます。 155ページの表6.2の例にもあるように、
「印刷できない状況が発生したときは担当者に知らせる」
というのでは、範囲が特定しにくい部分があります。 たとえば、 「印刷できない状況」 というのは、範囲が広すぎるかもしれません。
印刷しようとしてできない状況を対象としているのか、
電源を投入したときに、このままでは印刷できない可能性があることころまで含 んでいるのか
がわかりにくいのです。 また、 「担当者」 はおそらく別の操作で指定されているとし ても、「知らせる方法」 としてどこまで含んでいるのかも見えにくいのです。
そこで、
6.2 要求の表現 167
「印刷途中で、 用紙やトナーの不足がわかった時点で担当者にメールで知らせる」
とすることで、電源投入時に用紙切れを検出することは(ここでは)含まないことが わかります。 また、 印刷できない理由もトナーと用紙に限っていますし、知らせ方も メールという手段に限定されています。
この結果、 印刷途中でのトナーと用紙の不足を検出する方法や検出のタイミングが 仕様として引き出されます。 また、 担当者を特定する方法として、 「設定」のところ に誰のアドレスも入っていない場合や、 不足の原因によって知らせる担当者を選択す る方法などが仕様化されるでしょう。 さらに、
送信するメールの文章
そのなかにトラブルが発生したときの時間
不足している用紙のサイズやトナーの色の情報を電文のなかに組み立てる様子
などが仕様化され、 メールの送信も1回だけか、 一定時間内に交換されないときは再 送することも仕様化されるでしょう。 このように、 要求が適切に 「範囲」 を示すこと で、仕様の抽出が大いにはかどるのです。
□6.2.3 すべての"動詞" を表現しているか 機能要求は 「振る舞い」 でもあります。 「振る舞い」 というのは、一般にイベント に始まり、
「入力処理」 - 「変換処理」 - 「出力処理」
などの一連の処理 (動作) を行って止まるまでの動作の範囲を意味します。 振る舞い は、こうした一連の 「動き」 をもっています。
仕様とは、そこにある 「動き」 すなわち "動詞" (およびその目的語) に対して、 具体的な制約や処理内容や選択肢などを記述したものであり、 プログラムコードは、 こうして引き出された 「仕様」 をコンピュータに実行させるために書かれたものです。 つまり、 「要求」 という振る舞いの中に含まれている 「動き」 すなわち“動詞”をす べて表現してしまえば、それぞれの動詞およびその目的語について必要な仕様をモレ なく記述することができます。
たとえば、
第6章 要求 を書く
168
「印刷途中で、用紙やトナーの不足がわかった時点で担当者にメールで知らせる」
という要求には、直接見えている動詞としては
「不足が“わかる”」
「メールで“知らせる”」
の2種類ですが、 よく読むと、
「用紙やトナーの量を“知る”」
「メールを “組み立てる”」
「担当者のメールアドレスを “読み出す”」
といった動詞も見えてきますので、それぞれの"動詞"に対して
用紙/トナーの残量の入手方法
用紙不足の判断基準
トナー不足の判断基準
メッセージの構成
メールアドレスの場所
通知方法 (再送などを含む)
について仕様化すればよいのです。
ただし要求の表現によっては隠れた "動詞"を読み取るには少々訓練が必要になる かもしれません。 そこで動詞を見つけやすくするために上の要求をもう少し工夫して
「印刷途中で、用紙やトナーの残量を入手し規定量を割り込んだことがわかっ た時点で、 登録されている担当者に電文を組み立ててメールで知らせる」
と表現することができます。 これくらいであれば 「要求」 として邪魔にはならないで しょうし、もれなく "動詞"を見つけてもらえるでしょう。
このように要求の範囲が狭い、 すなわち隠れているものも含めて 「振る舞い」 の中 に含まれる "動詞"の数が少ないときは、ちょっと表現を工夫することでそこにすべ ての"動詞"を表現することができますが、 要求の範囲が広いときは、 上位の要求の
63 要求には 「理由」 がある 169
中にすべての"動詞" を表現することはできません。
実際の「振る舞い」には20~30個の 「動き」 すなわち "動詞" を含むものあります。 これをだらだらと散文の形で記述したのでは、 "つなぎ”の部分に不必要な文章が混 じってしまう可能性があり、 「要求」 としての役目を果たさなくなります。
このように要求の範囲が広い場合は「分割・階層化」 という方法を使って、 1層目 の要求では 「振る舞い」 そのものを簡潔に表現して 「範囲」 を押さえることに重点を 置きます。 そして複数個に分割された2層目の要求の中ですべての"動詞" を表現し ます。 たとえば2層目の要求が10個に分割された場合、 それぞれの要求で2~3個の "動詞" を扱うことができますので、合計で20~30個の動詞を扱う (表現する)こと ができるのです。 (「第7章 要求の階層化テクニック」を参照)
6.3 要求には 「理由」 がある
ソフトウェア開発者に限らず、 日本では、自分の思いを的確に言葉にしたり、文章 で表現したりする訓練を受けることがありません。 そのため、 自分が発する言葉や 自分が書く文章が相手にも同じ概念で受け取られるとは限らないことに気づきませ ん。 それが、 「コミュニケーションの不完全性」 となったり、 「顧客はまともな要求仕 様を書けない」 というところにもつながったりしています。
最初の要求の表現が不適切であるために、 あるいは、 そこで表現されている要求が 依頼者が本当に希望するものを表現していないために、 その後の仕様の抽出で的を外 したり不足したりしてしまうのです。 そして不足を補う形で、あとになって仕様変更 が多数発生することになります。
ここには「わかる」の問題も関わっています。 人の話を聞いたり本を読んだりして「わ かったと思ったのは、その人がわかったと思った範囲だけ」 の話であって、 そこでわ かった範囲が話し手や書き手の認識と一致していないことには気づかないのです。
ヒアリングの場でも、顧客は自分の思いを話しているのに相手には必ずしも正しく 伝わっているとは限りません。 インタビューしているほうも、その時点では、顧客の 思いを理解している (わかった状態) と思い込んでいるので、そのままでは双方の間 で認識が食い違っていることに気づくことはありません。 結局、 システムが動くよう になったところで、顧客は自分の思いが伝わっていなかったことを知らされて騒ぎだ すのです。
*1 日本では 「国語」の時間のなかで、自分の考えるところを 繹法」 と「帰納法」 で表現する訓練は行っていません。
第6章 要求 を書く
170
この状況が、 「コミュニケーションの不完全性」 として認識されています。 この認 識のズレを調整する働きをするのが 「理由」 です。 要求にはそれが必要な理由や背景 があるはずで、 それを要求と一緒に (セットで) 捉えるのです。 依頼者は要求をうま く表現できないといわれますが、 理由と組み合わせることで依頼者の思いがどこにあ るのか見えるようになり、要求の表現) が修正されます。 依頼者が要求をうまく表 現できないのであれば、 設計者のほうで理由を確認して要求のブレを修正することで、 早い段階での要求の仕様化がはかどります。 少なくとも、 設計者のほうに、 人間の言 葉とコンピュータの言葉をつなぐ役割があるのですから。
逆に、 要求に対して適切な理由が付かない場合は、 要求の表現が曖昧か、 要求その ものが不純な動機で出されている場合が多く、 そのままでは仕様の抽出にも支障をき たします。 不純な要求が存在していることで、他の要求の仕様を歪めてしまうことも あります。 このため、 要求には必ず 「理由」 をセットにします。 理由の欄が空欄の要 求は、 不安定さを残している可能性が高いのです。
「理由」 との遭遇:
筆者はもともと「背景」 というキーワードを使って、 依頼者の要求のブレを調 整してきましたが。 1993年に入手した 『翻訳版ソフトウェアエンジニアリング』 (参考文献6) のなかで、 要件定義と要求仕様が章を分けて扱われていて、 要件 定義のところで "reason" というキーワードでその要件の必要性について記述 されていました。 それ以降、 「背景」 から 「理由」 に乗り換えたわけです。
要求と理由がフィットしないときは、要求そのものが不純か、要求の表現が適切で はないケースが多く、 この段階で、要求を見直したり表現を調整したりします。 顧客 も、こうした調整の過程を見ることで、 自分の発した要求が相手に正しく伝わってい くことを見ることができます。
要求に付随する 「理由」 は、 必ずしも1つとは限りません。 たとえば
「社員であれば、社内ネットワーク上でWeb操作によって図書を借りることがで きる」
という要求の理由としては、
6.3 要求には 「理由」 がある
「残業時間で担当者がいなくても貸出しの手続きができるようにしたい」 電話での申し込みで起こっていた、担当者が聞き間違うことをなくしたい」 「貸出し申し込みが重なったときに誰が早かったのかわからなくなるのを防ぎた 「い」
といった理由が考えられます。 もちろん、 考えられるすべての理由を記述しなければ ならないということはありません。 今回の要求にとって重要な理由だけ記述するとい うことで問題ありません。
「理由」 は、 本来は仕様にも存在するのですが、 すべての仕様に理由を付けると煩 雑になってしまい効率的ではありません。 そこで、仕様に対して理由を付けるのは、 特にその仕様の必要性を感じるときだけにします。 たとえば、 「設計のことを考えると、 どうしてもこういう仕様にならざるをえない」 とか、 「他の仕様とのバランス上の制 限がある」 というときなどです。 このような場合には、 なぜそのような仕様になるの かという 「理由」 を付けておくとよいでしょう。
このほかにも、途中で仕様を変更したり削除しときなども、 「なぜ、このような仕 様になったのか」 「なぜ削除されたのか」 を書き留めておきたいと思ったりすること もしばしばあります。 このようなときも、 【理由】 として書き残すとよいでしょう。
6.3.1 なぜ「理由」にこだわるか||||||
依頼者からの要求は、 必ずしも吟味されたうえで発せられているわけではありませ ん。 パソコンで操作しているときに “ひらめいた " 機能であったり、通勤の電車のな かで “思いついた” 機能であったりします。 このこと自体は、別に悪いわけではあり ません。 ヒット商品の裏側には、こうした “ひらめき” がもたらしたものも少なくな いはずです。
問題は、そのひらめいたことを人に伝えるときに起きます。 人に伝えるには、 自分 のなかで思いやイメージを 「言葉」 にして表現することになります。 このとき、 それ をあらわすような言葉を自分の 「辞書」 から探して、 それにぴったりな言葉か、 それ に近いと思われる言葉を探し出してくるのですが、 これだって、本人の思い込みを排 除できません。
たとえば、
171
第6章 要求を書く
インクの残量を調べて、印刷できない可能性があれば印刷を依頼した人のPC に知らせてほしい
172
と表現し、これで相手に自分のイメージを伝えたと思うかもしれません。
確かに、 「範囲」 も適切にイメージできるので、ここから、 残量の調べ方や印刷で きないと判断する基準、 印刷を依頼した人のPCの割り出し方、 そのPCに表示するメ ッセージと表示の形、 などの仕様を導き出すことになります。
実際には、 この仕様を展開していくなかで、 「印刷できないと判断する基準」 のと ころで壁にぶち当たる可能性があるのですが、 その前に、 依頼者はなぜこの要求をほ しがるのだろう、 この要求が必要な (有効な) 理由は何だろう、と考えます。
要求のなかには、そういう視点で考えた時点ですぐに 「理由」 に気づくものもあり ますが、なかにはよくわからない、あるいは複数の理由が考えられるということもあ り、 そのようなときは、 依頼者に質問するなどして聞き出すことになります。 聞き出 すといっても、
「あのー、 その要求が必要な理由は何でしょうか?」
と切り出すわけにはいきません。 こんな質問のしかたでは、 依頼者の本心を聞き出す ことはできません。
たとえば、この要求がどんな状況のなかで出てきたのかを考えて、 依頼者との会話 (ヒアリング)のなかでそれとなく探ってみます。 その結果、 この人は、以前に200 ページの文書を印刷した際に、 時間がかかるのでしばらくコーヒーを飲んで休憩した あとに戻ってきたら、半分ぐらいのところからインク切れによって文字がかすれて見 えない、という経験をしていてそれがこの要求を発した理由だったことがわかります。 こうして 「要求」 を追及することで、 この要求で解決したいこと (状況) が明らかに なるのです。
ヒアリングする際に、 この要求が有効とする背景を考えてみて、
「皆で使い合いしている状況であれば、 この機能はありがたい
ですね」
と誘ってみることで、 依頼者の本音を引き出すこともできます。 その結果、
6.3 要求には 「理由」 がある 173
印刷中に文字がかすれたくないから
というのが理由だとわかったりします。
また、動きや感覚的なものを要求として表現するのも容易ではありません。 「クリ アに表示してほしい」 とか 「弾をよけるときは躍動感が伝わるように飛び上がってほ しい」 というときも文章で伝えるのは簡単ではありません。 もちろん、 “クリア"の 度合いはこのあとの仕様のなかで規定されるでしょうし、 「躍動感」 も数値化された 形で仕様に展開されるかもしれませんが、 そのような仕様を引き出すにも要求の表現 力が問われます。 【理由】 のところで、 なぜクリアな表示が必要なのか、あるいは躍 動感によって次の動きにスムースに移ったように見せたい、といったことがわかれば、 仕様化する際にも大いに参考になります。
でき上がったときに、
「わたしがイメージしたものとちがう。 こんなものを要求した覚えはない」
といわれることもなくなるのです。
子供から、今度の夏休みにディズニーランドに連れていってほしい、と 「要求」 されたときも 「理由」 を探ってみてください。 もしかすると、 春休みにディズ ニーランドに行った生徒が教室のなかで話題の中心になっているのを見て、自 分も行ってみたい (話題の中心になりたい)と思ったのが理由かもしれません。 この場合、 状況によってはディズニーランドに行ったとしても 「二番煎じ」 に なってしまい、 目指す話題の中心になれない可能性が出てきます。 そのような 場合は、 理由のほうを優先して行き先を変える (要求を変える)ことを提案し てみてください。 子供にとっても、自分の思いと上手に向き合う術を覚えるし、 論理的に考えることの意味を体得する機会になります。 「要求と理由」 は 「要 求仕様書」 に限った話でないのです。
□6.3.2 要求と理由でセット このように、 「理由」 を付けることで、 要求の表現がスムースになります。 言い換 えれば、「要求」 と 「理由」 のセットで本当の要求なのです。 本書では、 要求と理由
第6章 ※要求を書く
174
を分けて表現しますが、 次のように一つの文章で表現することもできます。 たとえば、 前にあげた例では、
印刷中に文字がかすれたくないから、インクの残量を調べて、 印刷できない可 能性があれば印刷を依頼した人のPCに知らせてほしい
と表現することができます。 結果的には同じような効果が得られると思いますが、 要 求と理由を分けて表現することで、 どれが要求でどれが理由なのかが明確になるのと、 同じ要求でも理由を取り換えやすくなります。 それによって、 引き出された仕様の調 整もやりやすくなるのです。
↓表 6.3 理由は文字がかすれたくない
要求 PRT07 インクの残量を調べて、 印刷できない可能性があれば印刷依頼者のPC上 に知らせてほしい 理由 印刷途中で印字がかすれたくないから
理由とセットで表現することで、 本当の要求がつかめる。
たとえば、 表6.3の理由が見えたとき、 設計者によっては 「印刷途中で文字がかす れたくない」という理由を解消することは技術的に困難であることにすぐに気づきま す。 つまり、現時点の技術では印刷前に 「途中で印刷できない可能性を判断すること」 が困難なのです。 ページ数で判断できるとは限りませんし、PC側から印刷データの 最初に、必要とする (と予想される) インクの量を知らせるようなプロトコルもあり ません。 印刷できるかどうかは “事前に印刷” してみなければわからないからです。
つまり、この要求は、 この 「理由」 では実現できないことになります。 要求によっ ては、こうして実現できないことがわかった段階で削除されますが、 この要求の場合 は、印刷できない可能性があることをPC上に表示するという要求そのものは、 ほし い機能と思われます。 このような場合は、 「要求」 や 「理由」 の置き換えを図ります。
たとえば、「印刷前に、 印刷できない可能性を知らせる」 という要求から、
「印刷開始時に、インクの残量を調べて残量が少ないときは交換の必要性を画
第2部 要求仕様を書く
要求仕様にまつわる問題
6.3 要求には 「理由」 がある
面に表示し、 印刷中にインクがかすれる危険があると判断されたときは、 印刷 を停止させる」
という方向に変えます。
この結果、ここでの残量の確認のタイミングは、「印刷開始時」 と 「印刷中」の2 種類必要なことが明確になります。 そして印刷開始時の判断は、 平均的な使用量から 割り出してインクの残量と比較すればよいだろうということ、そしてまだ印刷を始め ていないので、 表示も 「予報」 と 「警報」 の2段階で表示し、 判断は人に任せること にします。
一方、印刷中には、 「定期的」 にインクの残量を確認して、 残りのページ数によっ て印刷を停止するかどうかの判断を行えばよいということも見えてきます。 この場合 も、単に停止するだけでなく、残りのページ数を表示しておくことで最終判断を人に 任せる仕様を作り出すことができます。
このように、要求に理由をセットすることで依頼者の思いを的確に把握でき、 実現 性とのバランスから適切な方向に誘導することで、 あとから仕様が変更される可能性 を潰すことができるのです。 また、 理由を考えることで、 この要求の変化の方向が見 えることがあり、 予想される変化に耐えられるように設計のなかで配慮することもで きます。
□6.3.3 慣れないうちは理由に要求が混じる これまで何度も、 最終段階になって顧客の要求を間違って解釈していたことが判明 して作り直しを経験してきたのに、その原因がどこにあるのか気づかなかったため同 じ間違いを何度も繰り返してきたのです。おそらく、 本当の原因をきちんと分析して こなかったものと思われます。 「仕様モレ」 と 「要求の誤解」 は、 間違いのレベルが 違います。 確かに、 どちらもバグとして指摘されるかもしれませんが、 原因がまった く違います。
多くの人は 「要求」 を表現してきませんでした。 そしてそのようななかでは 「理由」 も表現されることはありません。 そこでは、要求を考えるときに 「理由」 や 「背景」 を一緒に考えるということに気づかなかったとしても無理はありません。
そこで、 理由と一緒に要求を書いてもらうのですが、 慣れない間は、 次ページの表 6.4 のように 「理由」 のほうに要求が記述されていることもあります
175
第6章
要求を書く
↓表6.4 理由のほうに要求が表現される
要求 SET05 設定画面を修正すること 理由 以前のバージョンとの違いを明確にするため設定画面の大きさと、 項目 の配置を変更する 要求 SET05 設定画面の大きさと、 項目の配置を変更する 理由 以前のバージョンとの違いを明確にするため
慣れないうちは、 理由のところに要求が書かれていることがある。
「設定画面を修正すること」 というのは、 従来では、
5.1 設定画面の修正
と書いていた機能タイトルを、 そのまま動詞形にして "要求らしく” 見せたものです。 これまで、 要求を表現してこなかったため、 要求をどのように表現すればよいのかわ からず、このような表現しか考えつかないのです。
ところが、 理由のほうには、 しっかりとこの要求の必要性と、 そこでやってほしい ことが書かれています。 この “やってほしいこと” というのは、まさに 「要求」 です。 要求の欄には表現されなかったものが、 理由の欄に出てきているのです。 このような ケースは、コンサルティングのなかでしばしば目にします。 逆にいえば、もし理由を 表現しようとしなかったら、 適切に要求を表現できないままになっていたのです。
このように要求を書き慣れない間は、 「理由」 のなかに要求が書かれることがある ので、 その場合は要求と一緒に見直して下さい。 要求として表現されるべきものは、 きちんと要求の欄に表現されなければ、 要求としての効力を発揮しにくいことがあり ます。
たとえば、
要求 = 温度を計測する 理由=水温を設定温度に維持するため
と表現された場合は、おそらく、 水温を計測する方法などの仕様しか出てこない可能 性があります。 しかしながら、 「維持する」 のは理由ではなくて要求であることに気
176
63 要求には 「理由」 がある 177
づけば、 新しく理由が必要になります。
その結果、
要求=ボイラーの水温をこまめに測定して設定温度を維持する 理由=燃料の消費を最小限に押えたいから
と表現されると、 計測方法のほかに、水温を設定温度に維持するための仕様が引き出 されることになります。 またその際に、燃費を最小限に押えるという理由が、計測の タイミングや加温や温度維持のアルゴリズムに影響を与えるはずです。
多くの人は、長い間要求を適切に表現してこなかったため、 「要求をつかむ」 とい うことにてこずると思われます。
要求 = 再生中も自由に選局ができる
理由=1つの曲を再生しているときに、 このあとの曲を選んでおきたいから
上の例の場合の 「理由」 は、 要求の“自由に” を補足しているもので、 「再生を中 断することなく、 このあと聞きたい曲を選ぶことができる」 というのが要求です。 で は理由は何か?
昔のように、カセットテープやCDの場合は、最初から聞こうと思っているアーテ ィストの曲のテープやCDが装着されているので、このような要求は出てきません。 別のCDや他のアーティストの曲が聞きたくなったら、 再生を止めて交換するしかあ りません。
これに対して、最近はハードディスクや大容量のICメモリーを装備しているので、 装置内に数 100~2000曲も入っていて、 そのときの気分によって選択できる必要が 生じたのであり、 その操作が再生中にできる必要が生じたのです。 そこで要求と理由 は次のようになります。
要求 =再生を中断することなく、 このあと聞きたい曲を選ぶことができる 理由=内蔵している大量の曲から、 その場面で聞きたい曲やアーティスト、 再 生方法を指定したいから
178 第6章 「要求 を書く
この結果、 単に再生中 "でも" 「次の曲」 を1つ選ぶだけでなく複数の曲を選んで おいたり、アーティストで選んだり、 再生方法を変更したりできる機能を実現するた めの仕様が導き出されることになるのです。
ヒアリングで聞き出せることには限界があります。 時間的にも限られていま すし、ヒアリングする相手も限られています。 適切な準備と方法を持って対応 しなければ、こうした制限の影響を受けてしまいます。
「要求」 に範囲を持たせた表現をするのも 「理由」 をセットにして表現する のも、限られたヒアリングの機会のなかで、 顧客がいわなかったことのなかで 必要なことや有効なことに気づく機会を増やしたいからです。 "指示されてい ないことまで考える必要はない” という考え方もあるようですが、 簡単に気づ く範囲のものであれば、そしてそこまで対応することで製品やシステムの価値 や競争力が高まるのであれば、 “そこまで考える”ことに躊躇することはない、 というのが筆者の考えです。
6.4 必要なら「説明」を付ける
一般に書かれている仕様書のなかにはいろいろな表現が混ざっています。 「機能の 概要」という小見出しの下に、機能の種類やそこでの振る舞いの一部が書かれている ことがあります。 「概要」 だと思っていると、 実はそれが仕様であったりするから怖 いのです。
一般には、「概要」 という枠のなかで書かれているものは、 仕様とするには内容が 不足する傾向があります。 そのうえレビューする側も 「概要だから」 ということで検 討が甘くなるし、 レビューの場で指摘されたほうも「ここは概要ですので、代表的な 動きしか書いていません」という応対になってしまいます。 このように、 「概」の文 字が付く文書は、一般にレビューに耐えうるものではないのです。
もともと概要での表現は要求や仕様に近くなるため、そのあとに書かれる 「仕様」 とも多くの箇所で重複する部分が発生します。 そうなると、 あとで仕様が変更される ときに、 仕様のほうだけ修正されて概要のなかの記述が残ってしまいます。
そして、 何よりも問題なのは、 概要は開発期間の最初のほうで書くことになるため、 それを書く時間は確実にあるのですが、 そこで中途半端に時間を使ってしまい肝心の
6.4 必要なら 「説明」 を付ける 179
「仕様」 を書く時間がなくなることです。 だから、 筆者は、原則として「概」という 文字の付く文書や構成は採用しません。
一般に要求仕様書のなかには、 仕様の記述のなかで、 その仕様の理解を助けるため に用語の意味を説明したり、動きの事例を付けていたりするケースも少なくありませ ん。 このような場合、 注意して読まないとそれが仕様なのか説明なのか、あるいはど こまでが仕様でどこからが説明なのか判断を間違えることがあります。
↓表 6.5 仕様なのか説明なのか?
3.8 水量の表示
貯水タンクには、水の量を計るために50センチ間隔で10個のセンサーが付 いており、水を検出するとセンサーが 「ON」になり、センサーのデータか ら水の量を知ることができます。 このときの様子がPC画面上のタンクの図 に反映されます。
これでは、仕様なのか説明なのかよくわからない状態だ。 仕様が、 散文形式で書かれるときに起きやすい。
表 6.5 は、 一般に書かれている要求仕様書で表現されているごく普通の表現ですが、 50センチ間隔とか10個のセンサーが付いているというのはタンクを製造する人に対 する仕様であって、ソフトウェアに対する仕様ではありません。ソフトウェアエンジ ニア向けに特にセンサーの意味を知らせる必要があると思うなら、 【説明】 というキ ーワードを使ってセンサーの個数や間隔を、 図を付けて説明すればよいでしょう。
それよりも問題なのは、 表6.5には 「要求」 が明確に表現されていないことです。 ソフトウェアに対する要求としては、
「各センサーの 「ON/OFF」 状態からタンクの水量を表現する」
あるいは、
「各センサーの 「ON/OFF」 状態からタンクの水量を判断して、PC上のイラスト 上に表現する」
というのが該当すると思われますが、上の例 (表 6.5) のような表現では、何がソフ トウェアに対する要求で何が説明なのかわかりません。 しかも、 PC上に表示するこ
要求を書く
第6章
180
とが求められているのか、センサーで水の 「位置」 を知るだけでよいのかもわかりま せん。 まるで「どれが仕様か当ててみましょう」といっているようなもので、 仕様モ レを奨励しているのかと思いたくなるケースもしばしば目撃します。
仕様は、 「仕様である」ことを明示して記述すべきです。 USDMのExcelのテ ンプレートでは、仕様には “□ (チェックボックス)"の記号を先頭に付けて、 それによってこの項目を仕様として認識していることを一目で識別できるよう にしています。 また、 この記号は、他の文書との照合などの“チェック”に使 います。 たとえば、 仕様レビュー済みとか、この仕様が設計やテスト仕様のな かで確実に扱われていることを確認したことを示すので、現実には3つくらい は必要でしょう。
もし、仕様のなかでも、何か説明しておく必要があるのであれば、 【説明】 という キーワードを付けて記述するとよいでしょう。筆者自身は、表6.6のように要求には 「理由」と「説明」の欄を必ず設け、要求の理由は必須とし説明は必要を感じたとき に使用するように勧めています。 また仕様のほうでも、必要であれば 【理由】や【説 明】 というキーワードを使って記述します。 ただし、仕様に説明や理由を付けるとき は、仕様と同じ 「箱」 のなかに収めることをお勧めします。
↓表 6.6 要求と仕様に説明を付けた例
要求 CH-02 理由 説明 印刷開始時にインクの残量を調べて、 最後まで印刷できない可能性が あれば印刷依頼者のPC上に知らせてほしい 印刷内容を知っている人に、最初に印刷できない可能性を知らせたい 印刷途中の監視機能は既に提供されており、これは印刷開始時に知ら せるもの 印刷開始の操作を完了した時点でプリンターと交信してインクの残量 CH-02-1 (全カートリッジ分)を知る。 【理由】 印刷ボリュームと比べて判断する必要があるから ロロロ CH-02-2 「注意」 または 「警告」のアナウンスを出したときは、 「確認」の操作 によって印刷処理を続ける 【説明】 インクの交換はこの間に行い、交換後に「確認」 操作によって 印刷を続ける 要求には、理由と説明の欄を固定的に設けているので、そこに説明を書くが、 仕様には、
| 説明の欄は最初から確保していないので、仕様の欄の中で 【説明】 というキーワード を付けて記述する。
6.4 必要なら「説明」 を付ける 181
こうしたキーワードを使うことで、「一見したところ仕様とも受け取れるような表 現が説明のなかに書かれていても、それは仕様としては認識しない」 というルールが 確立され、 無駄な混乱を防ぐことができます。
□6.4.1 要求の理解を助けるもの 「説明」 は、基本的には要求の理解を助けるものです。 要求で求めている振る舞い の理解を助けるために、 そのボタンで動き始めるメカの仕組みを説明したり、その要 求が実現したときにどのような状態になるのかを説明したり、 その機能に関連した規 則や準拠すべき標準を説明したりします。
このような内容のものは、 仕様のなかに混じってしまうと煩雑になってしまいます。 また、人によってはこの種の“説明” は必要ないこともあります。 機能仕様書として は書かれていなかったものが、 要求仕様書となった時点で、このままではこの機能の担 当者には理解されにくいと判断して、 その時点で説明の欄に追記することもあります。
これまで、 「概要」として書かれていたことなどは、ほとんどが 「説明」 として書 くことができます。 【説明】 ということであれば、そこに書かれていることが 「仕様」 なのかどうか迷うことはありませんし、 仕様の一部と同じことが書かれていても、「重 「複」しているとは受け取りません。 単に、 一例をあげて説明しているものとして扱わ れるので混乱は避けられます。
□6.4.2 用語集への展開 このように要求仕様書に書かれた 「説明」 は、 開発が終わったあとは要求仕様書か ら切り離して用語集に移すこともできます。
一般に、メーカーの場合はその製品を継続して提供するので、 要求仕様書で明らか にした仕様や説明は要求とセットにして用語集に移すことができます (表 6.7参照)。 用 語集に移行することによって事前の学習テキストとして活用でき、その分、 実際のソフ トウェアの開発時に用意される要求仕様書では仕様化作業を減らすことができます。
表 6.7 要求仕様書から用語集を参照する
要求 MAL01-02 いくつかのキーワードを組み合わせて検索できる 理由 可能性のあるキーワードで最初から絞り込んで探したい 說明 キーワード検索の仕様は、 用語集 「キーワード検索」 を参照のこと
機能によっては用語集に仕様化されていることで、関係者は事前のトレーニングや研 修などの機会を通じてキーワード検索で必要な仕様を理解しているので、ここでは参 照を指示するだけで済む。
第6章
要求: を書く
こうすることによって、 そこにいる人たち全員の共通した知識となるだけでなく、 要求仕様書の作成時間も短縮できます。 また、 新しくその組織に参加する人にとって も、このような用語集が整備されていることで早く周りの人の知識のレベルに追いつ くことができます。 そして、 開発の一部 (または全部) を外部のソフトウェア企業に 発注する場合も、この用語集を使うことで発注側のドメインの知識を素早く習得して もらえるのです。
日本の組織ではこの種の 「用語集」 を目にすることはほとんどありません。 その原因として考えられるのは、 個々の機能に対する十分な仕様書が作れない ことが影響していると考えています。 いったん適切な内容を持つまともな仕様 が書かれれば、 それを切り出すことで簡単に用語集やテキストになります。 こ れができる組織は、 ますます省力化できるのです。
6.5 要求のカテゴリ化
要求仕様書は、それ自体が明確な思想 (体系)の下に整理されていることが大事で す。 特に新規に開発する場合、 そこに含まれるべき機能を思いつくまま並べているよ うでは、 仕様モレを防ぐことはできません。 いや、 仕様どころか、 要求そのものも漏 れてしまいます。
図6.1は、 要求仕様書全体がどのように構成されるかを示したものです。 製品全体、 システム全体をそれを構成する機能などのカテゴリに分割します。 このとき、 一般 には提供する機能で分割されることが多いと思われますが、 組み込みシステムの場合 は、ハードウェアなどの機器構成や回路設計上の機能単位に分割することも考えられ ます。
大きくカテゴリに分割したあとは、 個々のカテゴリのなかで提供される 「要求」 を 配置します。 ここでの要求の大部分は、
「いくつかのキーワードを組み合わせて検索できる」
「印刷開始時に、インクの残量を調べて残量が少ないときは交換の必要性を画面 に表示する」
というような機能要求になります。
182
65 要求のカテゴリ化
↓図 6.1 要求仕様書の内部構成
製品全体の構成
|カテゴリ名
要求を表現する
要求の階層化によって 範囲を狭める
設定された範囲のなかでの仕様の抽出
要求を表現する
カテゴリ名
設定された範囲のなかでの仕様の抽出
要求を表現する
設定された範囲のなかでの仕様の抽出
要求仕様書全体が、こうした明確な構造をもつことが望ましい。
このとき、要求の扱う範囲が広すぎるときは、要求を階層化して個々の要求の範囲 を狭めて仕様を引き出しやすくします (「第7章 要求の階層化テクニック」 を参照)。 そうして 「仕様」 は、 この要求の下に階層化されます。 要求仕様書全体をこうした階 層構造で構成することで漏れにくくするのです。
そして、 漏れにくい構造というのは漏れていることを発見しやすい構造でもあり、 仕様などの追加に対しても、それがどこに収まるべきかがわかりやすい構造でもある のです。
6.5.1 コンテキスト図でシステムの境界を明確にする 今回のプロジェクトで開発するシステムに求められる機能を選定するために、コン テキスト図 (概観図) を使ってシステムがカバーする範囲を特定するとよいでしょう。
次ページ図6.2は、 構造化分析などで使用するコンテキストダイアグラムですが、 これによってシステムの 「内」 と 「外」 が見え、 「境界」 が明らかになります。 シス テムの 「外」 には、 「アクター」 や 「ターミネーター」 を配置することで、 外部世界 とシステムとの関わりもイメージしやすくなり、システムで提供することになる (提 供すべき) 機能も見つけやすくなります。
また、開発するシステムが大きい場合、 いくつかのチームでシステムを分割してと
183
第6章
要求 を書く
184
りかかることも考えられますが、その場合も、分割の単位でコンテキスト図を作成し、 それぞれの分割単位との関わり方を明確にしておくことが大事です。
図6.3のようなダイアグラムが示されることで、 隣のシステムから求められる機能 や振る舞いが明確になります。 一般に、ユーザーが目にするような機能や操作する機
図6.2 構造化分析のコンテキスト図の例
操作 操作指示 表示データ 表示 ボタン 高速計測システム 計測結果 計測器 パラメータ 計測データ ログデータ ˙設計情報 HDD 設定情報
ターミネーターの代わりに、 「アクター」 を使ってもよいだろう。
図6.3 コンテキスト図でシステムを分割する 搬送機器 操作 パネル データ データ 搬送 受信部 解析部 制御部 表示 状況 | 表示部| 表示 データ ファイル |宮本チーム 長谷川チーム 棚柿チーム
この分割は、開発の分担を分けるときのほかに、斬新的に開発を進めてい く場合にも使える。
6.5 要求のカテゴリ化 185
能については機能を特定しやすいのですが、 これから開発するシステムとの接合点は 作り方によって変わってしまうという側面もあって、 曖昧な状態でそれぞれのブロッ クの開発にとりかかってしまいます。 これが、 大きなシステムでの失敗の一つのパタ ーンです。
むしろ 「境界」部分は早い段階で決めてやることで、それぞれのブロックでの機能 を特定しやすくなり、 仕様化もはかどります。 もちろん、 実際に仕様化が進み、 設計 が進んでいくなかで境界部分の仕様を調整する必要が生じるかもしれませんが、 定義 されている仕様が変更されることはそれほど混乱は起きないものです。 混乱が起きる のは、明確に仕様が文章になっていない状況で変更が発生するからです。
この種の「境界」は、一般には 「インターフェース」 と呼ばれ、 これを早期に決め ることでシステムの内と外との間に出入りするデータやイベントを特定しやすくなり ます。
ソフトウェア開発の現場にいる多くの人は、 「インターェースを先に決める」とい う認識は持っています。 しかしながら、 現実にこの種のインターフェースが早期に決 められるケースは多くありません。 実際には、各チームの設計が進んでいき、このイ ンターフェースの部分をカバーする関数が具体化したことで、 はじめてインターフェ ースがでてきます。 その結果、 インターフェースの公開が遅れ、 でき上がったときに は非常に細かなインターフェースになってしまい使いにくい結果になるのです。
こうした事態になる理由は、 内部の設計が進んでいかないとどのようなインターフ ェースになるかわからない、と思っているからです。 逆に、 インターフェースから決 めてしまえば、大部分はそれに合うように内部のモジュール設計が可能であり、こう することで関係者が同時に作業を進行させることができます。 途中で変更が必要にな ったときは、正式な手続きで変更すればよいのです。
そして、インターフェースが後回しになるもう一つの理由は、こうした全体の構想 を考えるときに、 図 6.2や図 6.3のような図を活用していないことです。
□6.5.2 システムの世界を分割する
コンテキスト図で示された範囲が、 今回開発するシステムの範囲です。 このなかで、 求められる機能や品質の抽出を円滑にするために、システム全体を適切なカテゴリに 分割します。 カテゴリの分け方については、それぞれの組織のなかに参考にできるも のがあるかもしれません。 そこにあるものがある程度活用できるものであれば、 それ をベースにして改良すればよいでしょう。
第6章 要求を書く
186
カテゴリに分割した段階で、 漏れている機能領域はないか確かめることが大事です。 ここで漏れるということは、 機能そのものが漏れることになったり、 ある機能が別の カテゴリに紛れ込んでしまって工数を浪費することになったりします。
カテゴリ分割は、一般には、製品やシステムの 「機能」を中心分割することが多いと 思われますが、 組み込みシステムではハードの構成に沿って分割する方法もあります。
●機能で分割する例
ここでは、今回開発するシステムが提供する機能で分割します。 ただし、単に機能 を羅列するだけでは、担当者の注目度や意識の状態によって機能の並び方が変わって しまいます。 要求や仕様はお互いに絡んでいることが多く、 並び方によってこの文書 を見る人の“連想脳” に影響するのです。 当然、 このあとに行われる各機能カテゴリ 内での要求のリストアップや、 仕様の抽出に影響します。
大事なことは、明確な基準を持ち込み、 それを関係者が共有することです。 たとえ ば、 図 6.4のような、 構造化手法のアーキテクチャ分析で使用するテンプレートを参 考に使う方法があります。
図6.4 アーキテクチャ分析のテンプレート図
表示/UI処理 変換处理 制御处理 入力处理 出力処理 保守・診断処理
このテンプレートは、リアルタイム 拡張された構造化分析手法のなか の、 アーキテクチャ分析のなかで使 用されるものなので、 どちらかとい うと、 組み込みシステム向けに考え られている。
しかしながら、 その他のシステムで も、おおむねこのような分類でシス テムを捉えることができるものと考 えられる。
このテンプレートを使って、 たとえば 「入力処理」 という分類に該当する機能をリ ストアップします。
写真データの入力
動画データの入力
6.5 要求のカテゴリ化 187
音楽データの入力
製品が変われば、 備える機能も変わってきます。 また、
地図データの表示
地図データの自動更新
電話番号による検索
走行データの入力
GPSデータの入力
などの機能が、 「UI処理」 や 「入力処理」 「変換処理」 「保守処理」 といった領域で把 握されることになります。
このとき、しばしば忘れられるのが、 「機能設定」 や 「環境設定」 「稼働中の接続機 器の確認」 などの 「保守機能」 や 「診断機能」 です。 これらの機能は、表から見える 機能の華々しさに隠れてしまって、つい忘れられてしまいます。 テンプレートは、こ うした“忘れ物” を防ぐ効果もあります。
機能によっては、このテンプレートの複数の領域にまたがるものもあります。 入力 機能にあると思って見たところ見当たらないとしても、図6.4のようなテンプレート が仲介していることで、 変換機能のほうに収められていることに気づきます。
●構成で分割する例
メーカーの場合、 一般に顧客側で要求仕様書が作成されますが、 要求仕様をまとめ る担当者がハード設計の経験者である場合、機器のハード構成で要求仕様書のカテゴ リ分割を構成することがあります。
次ページ図 6.5は回路設計者が設計の過程で残す、 いわゆる 「ブロック図」 ですが、 これを要求仕様書のカテゴリ分割に活用することができます。 もちろん、ソフトウェ アの要求仕様書を書く段階では、 回路設計はそこまで進んでいないと思われます。 し たがって、 要求仕様書をカテゴリ分割するためにこうしたブロック図を書くかもしれ ませんが、 まったく初めて開発する製品でないかぎり、 ある程度の精度でこうしたプ ロック図を書くことはできると思われます。
コンテキスト図や、 カテゴリ分割のテンプレートなどは、顧客を巻き込んで共通の 認識の上でこれから要求の仕様化作業に入るのに大いに活用できるものです。このカ テゴリ分割と機能の抽出の段階から顧客を巻き込むことが、プロジェクトの成否に大 きく影響するので、できるだけ「図」 を活用して、顧客側の担当者にも入りやすい状
第6章
要求を書く
↓図6.5 機器構成による分割のイメージ
188
メイン基盤回路図 電源 GSP制御 モジュール モジュール オプション ボード制御 モジュール 外部バス 切り替え モジュール 共有メモリ モジュール ソレノイド制御 モジュール USB モジュール PCカード モジュール キー入力 モジュール 表示パネル制御 モジュール
回路上に組み込まれた設計モジュールを使って、 カテゴリ分割する。 それぞれのモジュールのブロックのなかで、 そのモジュールに関連する 機能をリストアップする。
態を提供することが大事です。
また、カテゴリの分類ができたところで、今回のプロジェクトでは対象としないカ テゴリがある場合は、 当該カテゴリは対象外であることを図の上で明示しておくこと で双方の間で誤解が生じることを未然に防ぎます。 カテゴリ分類の図から削除しない 理由は、そのほかのカテゴリの仕様化を進めていくなかで、 今回対象外のカテゴリの 機能や仕様に対しても何らかの影響や制限が出てくる可能性があるからです。 今回は 開発の対象にはなっていませんが、 今後開発の機会が生じたときのために気づいたこ とを書き留めておくことができます。
6.6 要求のモレを防ぐことが重要
多くのソフトウェア開発の現場では、仕様モレに神経をとがらせています。 確かに、 そこでは仕様モレが頻発していて、 設計や実装の途中で仕様として明確にされていな いことにしばしば遭遇しては後戻りしています。 バグにならずに済んだとしても、仕 様として要求仕様書に記述されていなかったものであることには変わりはありませ ん。 もちろんこのほかに顧客のほうからも、
6.7 品質要求を確認する 189
「計測データの表示の精度は何段階まで想定されていますか?」
という質問が飛んできます。 すでに実装段階に入っているのですが、 顧客の担当者が 気になったので要求仕様書を見たところ表示精度の段階に関する仕様が見当たらなか ったので、すでに実装段階に入っているにもかかわらず3段階の表示精度の切り替え を選択できるように仕様が変更されます。 これも、 仕様モレの一種です。 もちろん、 モレているのは小さな 「仕様」 ばかりではありません。一つのまとまった機能に近い ものも抜け落ちているのです。
このように、これまで現場では仕様モレが頻発していたのです。 しかしながらこれ は、 そこで書かれている要求仕様書の構成から発している問題であって、 要求仕様書 の構成や書き方を変えることで一気に減少します。 理由とセットで要求を適切に表現 することで要求の範囲を見せ、さらに必要に応じて要求の範囲を狭めるために要求を 階層化し、 狭められた要求に含まれる "動詞" をすべて表現することで仕様の抽出が スムースに運びます。 必要かつ有効な仕様が次々と要求仕様書に現れてくることで、 仕様モレに対する不安はどんどん減少していきます。
むしろ注意しなければならないのは 「要求」のモレであり、 要求に隠れている“動 詞”の抽出モレです。 これが漏れていることに気づくためには、 カテゴリ分割から要 求までの上位の構造がどのように考えられているかです。 カテゴリの分割や要求の分 割 階層化に漏れがない、隙間がないことを確認できることが大事です。 分析手法の テンプレートを使ったり、 回路設計のブロック図を使ったりするのも、 最上位のカテ ゴリの分割に隙間がない状態を確保するためです。 これが隙間なく把握されているこ とで、その下の要求の抽出でも、モレにくくなります。 そして、 要求さえ適切に表現 できれば仕様の抽出は容易になり、モレも防ぐことができるのです。
その結果、 ベースライン設定後の仕様の変更率が 「3%」 以下になるのもめずらし くはありません。
6.7 品質要求を確認する
多くの要求仕様書で抜け落ちるのが 「品質要求」 です。 とくに、 文書名が 「機能仕 様書」 となっているケースでは、 「性能」 などの機能に関連した品質以外はほとんど 扱われることはありません。 ソフトウェアを開発する際には品質要求を付けるという
第6章 要求を書く
190
認識が稀薄なことが原因です。 なかには、 文書のタイトルは 「要求仕様書」 となって いても、機能仕様書との違いが認識できていないため、 内部の構成は 「機能仕様書」 とまったく変わらず、品質に関する要求はどこにも書かれていないということもしば しばです。
「機能仕様書」 では、保守性などの 「ソフトウェアの作り方に関係する品質要求」 や、 操作性や対故障性、 応答性などの 「ソフトウェアの使い勝手に関係する品質要求」 を 記述する 「場」 がなく、 このような品質要求はモレてしまいます。 その結果、機能に 関する要求と仕様だけが記述され、 そして実現されることになります。
しかしながら、たとえすべての機能を満たしても、一つの品質要求が満たされなけ ればソフトウェア (製品) としての価値が失われることがあります。 そのことは、ビ ジネスアプリケーションであろうと、 組み込みシステムであろうと同じです。
確かに機能的には実現していて、 要求した6ヶ月間の 「顧客別の売り上げ動向」は 画面上で見ることはできでも、多くのファイルをアクセスするようになっているため に表示されるまでに5秒もかかったのでは使い物になりません。
操作性の悪いシステムを使わせることは、操作する人に大きなストレスを与え、誤 操作が増えたりして職場全体の作業効率を低下させます。 機能は実現しているといっ ても、これでは依頼者は納得しません。 システム開発に投じた費用がムダになるだけ でなく、いまから改修しようとすれば余分な費用がかかってしまいます。 組み込みシ ステムであれば、インターネット上でその悪評は瞬く間に広がってしまうでしょう。 そして他社の製品に流れた顧客は、このあと数年間は戻ってこないのです。 いや、そ のあとも戻ってこないかもしれません。
このように品質の未達成の問題は、個々の機能の完成度よりも深刻な事態を招く可 能性があるのです。 それにも関わらず、 「品質」 に対する認識は依然として低いのが 現実です。
依頼者も機能にばかり気をとられて、最初に品質要求を確認していません。 もしか すると、 品質要求の伝え方を知らないのかもしれません。 それでも、 設計する側に品 質特性の知識があれば、そのなかから今回のシステムに必要な品質特性を顧客側に確 認して、 適切に品質要求の形にして要求仕様書に盛り込むことができるのです。
「品質」 といわれても何を指しているのかよくわからない、という返事が返ってく ることがあります。 「品質」 という概念は抽象的なもので、 この言葉自体は何ら具体 性を持っていません。
6.8 品質要求の表現
実際には表 6.8のように、 「保守性」 「操作性」 「応答性」 「対故障性」 「理解性」「完 「全性」「交換性」 といった 「品質特性」 (あるいは「品質属性」) のほうを使います。
↓表6.8 品質特性の一覧
機能性 品質特性 (Functionability) 信赖性 (Reliability) 使用性 (Usability) 効率性 (Efficiency) 保守性 (Maintenability) 移植性 合目的性 (Suitability) 成熟性 (Maturity) 理解性 |实行効率性 (Understandability) (Time Brhavior) 正確性 (Accuracy) 障害許容性 習得性 (Fault Tolerance) (Learnability) 劉品質特性 接続性 回復性 操作性 (Interoperability) (Recoverrability) (Operability) 整合性 (Compliance) セキュリティ 資源効率性 Resource Behavior 変更作業性 (Changeability) 安定性 (Stability 試驗性 (Testability) 置換性 (Replaceability) 解析性 (Analysability) (portability) 環境適応性 (Adaptability) | 移植作業性 (Installability) 规格準攤性 (Conformance) (Security)
6.8 品質要求の表現
(ISO-9000-3. 品質特性・副品質特性より引用)
「機能ごとの品質要求」 としては「パフォーマンス」 が代表的で、 「モジュールの交 換性」も通常は特定の機能に対して課せられます。 一方、「システム全体に対する品 質要求」 としては、 「保守性」 や 「操作性」 「理解性」 などが代表的です。
これらの品質要求は、 製品やシステムによって必要とする品質特性が特定できると 思われるので、 個々の組織で製品やシステム別に 「品質特性」 を一覧にして、
各品質特性の説明
当該システムにおいて有効か
具体的な表現(事例)
を次ページ表 6.9のようなリストにしておき、 組織の共通の知識とすればよいでしょ う。
このようなリストがあれば、 要求仕様書を作成するときに、 依頼者との間で品質要 求が機能ごとに存在するか全体として存在するかを検討することができ、最初から品 質要求がモレていたということもなくなるでしょう。
品質要求は、最初に明示されないかぎり実現することはありませんし、さらにいえ ば、明示したとしても具体的に仕様化されないかぎり、 やはり実現されないのです。
191
第6章
要求を書く
なお、品質要求は、それぞれの機能に付随するものとソフトウェアシステム全体に 関わるものの2つに分けることができます。
192
↓表6.9 品質要求チェックリスト
品質特性 接続性 認識 要求表現事例 VFが同じなら接続機器を特定するこ 品質特性に対して、想定できる要求 |とがない を表現する 外部からの無許可進入を許さないこ セキュリティとと、 許可された状況のデータを保 有する 移植性 |指示された単位処理モジュールを別 のシステムに移植する際に煩雑さが なく、 間違いにくいこと 操作性 設定されたレベルに対応した範囲で のみ操作を認める ログインからログアウトまでの操作 者のすべての操作記録を保存する ○○機能に必要な処理モジュールを 1つのソースにまとめる 操作の煩わしさや間違った操作を誘どのボックスを入力しようとしてい わない るのか迷わないように 反応や応答のスピードでストレスを 文字、数字、 全角、 半角などの操作 感じさせない で煩わしくないように チェック
それぞれの品質特性の意味と要求の事例を載せたリストを使うことで、 今回の開発で必要な品質要求を探しだす。
□6.8.1 機能に付随する品質要求
一般に認識しやすい品質要求は個々の機能に付随する品質要求で、計測データを取 得してからグラフにして表示するまでの時間を規定したり、 新しく追加する機能を実 現する際に、その機能に必要な処理 (データ定義を含む) が他のシステムに移植しや すく作るように指示したりします。
表6.10に、 いくつか品質特性を想定し、 そのなかで見かける品質要求を表現して みます。
もちろん、これらは 「要求」 なので、 そのような品質要求を必要とする「理由」 も 記述します。 その結果、 そこで求められている品質要求を実現するための設計方法の 選択肢が絞られることもあります。
要求 = 「50msのサンプリング周期内で、 32チャネルのデータを集めること」 理由=「各測定点での装置のバラつきを○○時間内に安定させるために、同一 サイクル内で収集したデータを比較して表示させる必要があるから」
6.8 品質要求の表現 193
↓表6.10 品質特性別の要求の例 パフォーマンス 要求 更新ファイルのバックアップは、 操作開始後4秒以内で終了すること 要求 計測データをグラフ表示している画面のリフレッシュは、 データ収集時間以内で終 わること 要求 電源ONのあと、 初期画面が表示されるまでの時間は2秒以内であること 接続性 要求 要求 USB2.0 を備える外部記憶メディアであれば、 支障なく接続できること Windows XP、 2000のOSに対応すること 移植性 要求 要求 ICカードの読み込み機能は、他のシステムに混乱無く移植できること この機能は今後他の製品にも組み込むことを想定しているため
というように記述することで、 この品質要求を実現するためには、データの収集方法 を「ポーリング」 で集めるか 「セレクティング」で集めるかを判断するために仕様を 絞り込んでいきます。
機能に付随する品質要求は、その機能を実現する ( 設計する) に当たって、作り方 の面で考慮してほしいことを指示するものです。
電源ONのあと、 何気なく必要な初期設定を終えてからオープニング画面を出した のでは5秒近くかかってしまうところが、 事前に 「2秒以内に表示すること」と指示 されていることで初期処理を2つに分ける基準を設け、 オープニング画面の前に実施 しなければならない初期処理をやっておき、 残りの初期処理はオープニング画面の表 示の裏で実施するような方法で実現することになるかもしれません。
事前にこのような品質要求がなければ、 設計に何の配慮も働かず、あとになって改 修を迫られて混乱するのです。
一般に、パフォーマンスの要求は、 適切なデータ構造が前提となることが多く、最 初に不適切なデータ構造が持ち込まれた場合はデータ構造から作り直すことになりま す。その結果、以前のデータ構造を前提としている処理モジュールをすべて作り直す ことになってしまいます。
また、最初から 「移植性」 が求められていることで、接続されたICカードの規格や 必要なメモリサイズを最初に確認するためのVFを設計するでしょうし、メモリの獲得
第6章 要求 を書く
194
も最初のオープン処理のなかでシステム領域から取得するような設計にするかもしれま せん。このとき、移植性の要求がなければ、 バッファは適当にグローバル領域から獲得 したり、データ構造も切り分けできないような形で定義されたりするかもしれません。
□6.8.2 製品・システム全体に属する品質要求
機能に付随する品質要求と違って、 製品やシステム全体に関する品質要求は、しば しば定義されないまま設計作業が進められています。この種の品質要求を実現するに は対応すべき箇所が広範囲にわたっているため、 最終テストの段階で品質が達成して いないことが判明したときは全体にわたって作り直しになる危険性が高くなります。 それだけに、最初に品質要求を明確にし、適切に仕様化する必要があります。
●操作性
操作性としては、たとえば起動時や終了時の操作が容易であることや、 間違った操 作になりにくいことが要求として求められます。 また、 そのなかで表示される操作画 面に対する判断の容易性も求められます。 操作画面の場合は、 全体にわたっての操作 性の他に、 最終確認を求める画面や重要なデータを入力する画面など、特定の画面に おける操作性や安全性が指示されることもあります。
要求= 「操作ミスが起きにくいこと」
理由= 「画面上の指示に応じて入力する項目数が前回の5倍に増えている」
この場合は、特定の操作場面を指しているのではなく、 操作画面全体に対する「注 「文」 といえるもので、関係する操作画面全体のバランスを意識した仕様化が必要にな ります。 あるいは、 事前に統一した 「思想」 のようなものを確立しておくことも必要 になります。
要求 = 「個人情報の入力画面では、入力操作がスムースにできること」 理由= 「半角、 全角、 英数字 漢字といった入力データのタイプが異なる操作 が多いから」
この要求の場合は、 特定の画面 (複数画面の可能性もある) に対する品質要求とな っていて、そこでの操作の煩わしさが予想されるので、 特別に注文を付けた形になっ
6.8 品質要求の表現 195
ています。 最初にこのような要求が明確に指示されていることで、 入力ボックスに応 じて文字属性を内部から設定するような仕様が展開されることが期待できます。
●対故障性
要求 = 「システムへの違法進入を防ぐと同時に侵入者の履歴を確保すること」 理由= 「このシステムの構成のなかには個人情報が含まれている」
これを実現するには、ハードウェアの支援が必要になるかもしれませんが、 すべて の機器で実現するとは思えないので、 対象となる機器を特定したり切り離す際の仕様 が導き出されたりするでしょう。
●セキュリティ
要求 = 「接続する機器が故障しても、システム全体の動きを止めないでほしい」 理由= 「工場のラインを制御している装置だから
●保守性
要求 = 「新規に開発するに当たって、 そのあとの保守開発で崩れにくいこと」 理由= 「最低5年間の派生開発をスムースに行いたい」
保守性については、いわゆる動作させての 「テスト」 で検証できないので、要求と して指示されることが少ないようです。 そのため、 そのあとの派生開発で苦労します。 また、保守性を実現するための設計技術をもっていないことも多く、 なかなか実現し ないのが現実です。
7% 章
要求の階層化テクニック
第6章で、 要求の役割は仕様を引き出すことにあることを説明しました。 スムース に仕様を引き出すには、 要求が範囲をうまく表現しなければなりません。 ところが、 範囲を表現したとしても、要求の扱う範囲が広すぎると仕様の抽出が拡散して漏れて しまいます。 せっかく要求を表現しても、 結果的には、 範囲を持たないのと同じこと になってしまうのです。
たとえば、一つの機能要求は、その機能を満たすのに必要な仕様が入る 「箱」を意 味します。 箱に書かれた 「要求」 の表現や範囲 (大きさ) が適切だと、その箱に入る べき仕様を拾いやすくなるわけです。 しかしながら要求の扱う範囲が広すぎたり、要 求の表現が大雑把 (曖昧) で範囲が曖昧だと、 そのなかに入るべき仕様が発散したり、 必要な仕様が漏れていても気づきません。 要求の範囲が広すぎると思われるときは、 要求の箱 (範囲) を小さくして、 要求が求めている 「範囲」 を絞り込んで仕様をイメ ージしやすくすることが重要です (図 7.1 参照)。
この様子は、 ちょうど構造化設計の「凝集度」の考えに似ています。 いくつもの機 能を含んだモジュールよりも、一つの機能に絞り込む (機能的凝集にする)ことで、 そこで実現すべき処理が明確になるのでプログラムの間違いが減っていきますが、 要 求と要求仕様の関係もそれに似ているのです。
要求の表現に 「範囲」 を持たせ、 さらに 「理由」 をつけることで要求のブレを押え ることができますが、 要求が求める範囲が広いと、 仕様を引き出すという要求本来の 役割が十分に発揮できません。 範囲が広いということは、 要求に含まれる "動詞"が
図7.1 大きな箱を細分化し、 項目別に引き出しをつける
要求: メールをキーワード検索して中身を見たい 要求: メールをキーワード検索して中身を見たい メールのグルー キーワード 選択された プを選択する で検索する メールの 検索されたメール を表示する 内容を 表示する
「メールをキーワード検索して中身を見たい」という要求のまま、 そこに含 まれる仕様を抽出するのではなく、 さらに、 「メールのグループを選択する」 「キーワードで検索する」 「検索されたメールを表示する」 「選択されたメー ルの内容を表示する」 といった形で 「要求」 を小分けにすることで、仕様 の抽出を容易にする。
第
7.1 要求を階層化して範囲を狭める 197
多いという意味でもあります。 そこで範囲を狭めるために要求を分割して階層化しま す。こうして、 要求がその範囲を十分に狭めて、 下位層の要求に上位層の要求では隠 れていた“動詞”も含めてすべての動詞を表現したとき、 仕様のモレはほとんど起き なくなるのです。
ここでは、 要求を階層化する方法について説明します。
7.1 要求を階層化して範囲を狭める
要求を一つの範囲を持つ 「集合」 と捉えたときに、その集合の範囲が広すぎては仕 様が発散してしまうので、要求を分割して範囲を小さくしますが、このとき、要求に 「階 層化」の考えを持ち込みます。 要求が大きな機能を表現している場合は、その機能の なかにもう一段小さな要求の箱を並べるわけです。
たとえば、
「電子メールのグループを指定して、そこからキーワードで検索してメーラーで 再利用したい」
という要求を考えてみましょう。 この要求は、単にどこにしまったかわからなくなっ た電子メールを検索できることだけを求めているのではありません。 よく読んでみる と、送信および受信メールのなかの文章 (文字列) を適当にキーワードで探し出して、 そのキーワードを含む電子メールをリストアップし、 発見された電子メールを開くと ころまで含んでいることがわかります。 しかも検索にあたっては、 事前に電子メール のファイルをグループ化してあって、 検索の際にはこのグループを指定することも知 らされます (太字の動詞がこの要求の範囲をあらわします)。
つまり、このままでは取り扱う範囲が広すぎて、 検索の仕方や発見された電子メー ルの表示方法などの仕様が思いつくままにリストアップされる可能性があるので、こ の下に範囲を限定したいくつかの要求に階層化します。 次ページ図7.2は、 要求を階 層化した様子をあらわしたものです。
要求を分割して階層化するときのポイントは、その要求に含まれるすべての 「動詞」 を表現することです。 もちろん、 上位要求に表現された文章には、その要求の範囲に 含まれる動詞をすべて表現しているとは限りません。
第7章 要求の階層化テクニック
図7.2 「送受信した電子メールをキーワードで検索したい」 を階層化した例
電子メールのグループを指定して、そこからキーワードで 検索してメーラー上で再利用する 表示された検索グループの中から一つを指定する | いくつかのキーワードの入力を受け付け、 それらを組み合わせて検索する | 検索結果を表示し、見つかったときは 「subject」 などの情報を一覧で表示する 一覧の中から選択されたメールを開く 一つのメールを開いた状態でメーラーに繋いで編集できるようにする
「電子メールのグループを指定して、そこからキーワードで検索してメー ラー上で再利用する」 という要求では少し範囲が広いので、それを5つ に分割して、 1段階層を落としてみた。
上位層で隠れていた動詞を下位層で可能な限りすべて表現する。
「送受信した電子メールをグループ化し、 指定のグループのなかで任意のキー ワードで検索し、 そのキーワードを含む電子メールを探し出して画面に表示し ...J
とだらだらと書かれることはありません。 あくまでも、
「電子メールのグループを指定して、そこからキーワードで検索してメーラーで 再利用したい」
という文章から、どこまでの動き (動作=動詞) を含んでいるのかを読み取るのです。 もちろん、その過程で要求の表現を調整することもあります。 「検索したい」という だけでは、 検索したあとのことが含まれないと思われてしまうというのであれば、
「送受信した電子メールをキーワードで検索して表示したい」
と言葉 (動詞) を足してもよいでしょう。
階層化は、このように上位の要求に含まれている動き (動作) を適当な単位で区切 って、下位層の中ですべての 「動詞」を引き出すことでもあるのです。 また、要求には両端の動作が表現されていることもあります。
198
7.1 要求を階層化して範囲を狭める 199
「動画像のデータを受信して再生する」
という要求は、 「受信する」 から 「再生する」 までの間にある動き (振る舞い)を全 部含んでいると思われます。 たとえば、 この要求には、
動画像データを受信する
受信したデータをファイルに保存する
保存ファイルを読み出す
読み出しながら再生する
受信しながらも再生できる
・再生中にいろいろな操作ができる
・一時停止と再開
・繰返し再生の指定
再生中止
・画像の調整
といった動きが隠れていると考えられます。 もちろん、 勝手に判断する必要はなく、 不安があれば依頼者に確認すればよいのです。 その結果、 表7.1 のように分割 階層 化できます。 •
↓表 7.1 内包する動詞から分割階層化した例
要求 VIS.1 動画像のデータを受信して一時保存しながら再生する 理由 動画像データの受信間隔のばらつきの調整のためと、途中で再生をさかの ぼることに対応するために一時的に保存する必要がある 說明 逆に、著作権の制約から再生が成功したデータは確実に削除することが求 められる 要求 VIS.1.1 接続されたコネクタから動画像データを受信する 理由 複数のコネクタが存在するため 要求 VIS.1.2 受信したデータをファイルに保存する 理由 要求 VIS.1.3 理由 数ブロック受信するまで一時保存する 保存ファイルを読み出しながら再生する 動画像データの受信間隔を調整する 要求 VIS.1.4 再生中に一時停止の操作ができる 理由 (この他、 いろいろな操作要求を扱う=省略)
200 第7章 要求の階層化テクニック
要求 VIS.1.10
動画データが終了した時、 または強制終了したときは一時保存 データを削除する
著作権に抵触するため
このように要求の範囲を分割して狭くすることで、 実際の 「仕様」 の抽出は範囲を 狭めた要求のなか (一つの動詞のなか) で進められ、 仕様の発散やモレを防ぐことが できるのです。
このとき、 上位の要求が求める範囲と、 複数に分割された要求が求める範囲の合計 が一致していることが必要です。 いったん一致していると認識されたら、 あとは、範 囲が特定された下位の要求について、 そこに含まれる仕様を考えることになります。
理由
□7.1.1 分割の基準 範囲の大きい要求を分割して階層化するには、 何らかの分割の基準が必要になりま す。 何でもいいから分割するというのは適切ではありませんし、 それではうまく分割 できません。 要求を分割・階層化する際の基準が曖昧だと、 下位の要求の設定 (表現) が不安定になり、 分割された要求の間に隙間が生じます。
仕様のモレや衝突を未然に防ぎ、 そこでまとめられた要求仕様書に対して合意する ために大事なことは、 書き手と読み手が要求仕様に関して同じ 「土俵 (基準)」 を共 有することです。 書き手がどのような観点で要求を分割しているかが見えなければ、 共有することができなくなります。
「分割・階層化」 としては、 構造化設計における 「モジュール分割」 があり、 そこ には4つの基準が定義されています。
設定-入力変換 出力分割
・トランザクション分割
データ構造分割
共通分割
モジュール (関数) を分割階層化する際には、これらの分割基準を組み合わせるこ とですべての状況に対応できます。 実際にどのような基準で関数を分割したのかわか らなければ、 気になる処理がどの関数で対応されているのか探す際に苦労します。
そこで要求の分割 階層化にも、これと同じような基準を導入します。 分割の際に 注意しなければならないことは、 「隙間」 が生じないことです。 ここでは、
7.1 要求を階層化して範囲を狭める 201
時系列分割 (時間軸分割)
構成分割 状態分割 共通分割
という基準を (状況によって組み合わせて) 使って並べることにします。 これらの基 準によって、大きな範囲を持つ要求を適当な範囲に狭めることができ、 範囲が適当に 狭められたことで、 そのなかに含まれるべき仕様の抽出もスムースにはかどります。
実際には、 時系列分割でもよし、 構成分割でもよし、 というケースもあります。 ま た、図7.3のように、 全体としては時系列で分割し、 そのなかの一部分で構成分割が 行われるというケースもあります。
↓図 7.3 分割基準の組み合わせ
要求1 要求2 .. 要求3 |時系列分割 要求4 -構成分割 要求5 要求6 ・時系列分割のなかで、 構成分割が含まれて いる状態 ・異なる分割基準を包含するときは、要求を適 当なグループでわけて分割基準を整理する 要求7 この事例の場合は、 は時系列 分割になっている
このあとのヒアリングやレビューにおいて、 顧客側もこのような分割と階層化のな かでいろいろな仕様を検討したり、仕様のモレに気づいたりすることになるので、こ うした分割方法について顧客との間で合意しておくことが望ましいでしょう。 以下に、4つの分割基準について説明します。
7.1.2 時系列分割
これは時間軸に着目して、要求を分割し並べる方法です。 「時間軸」 といっても、
202 第7章 要求の階層化テクニック
はっきりと「開始から○○まで」 「○○から△△のときまで」という形では、一般に は 「要求」 の形にはならないので注意が必要です。
要求を分割 階層化する理由は、 上位の要求が示す範囲が広いことにあるのですが、 分割のポイントは要求の範囲のなかに含まれる動き (動作や処理)を見分けることで す。 上位の要求に含まれる "動詞" が時系列な動きを示しているときは、分割したあ とに時系列で並べることになります。
たとえば、
要求 選択されたグループの送信と受信の電子メールのなかからキーワードで 検索して内容を見ることができる
という要求の場合、 「キーワードで検索する」 という行動のなかには、 検索したもの を表示して内容を見ることも含まれていることや、 そもそもキーワードで検索するた めの前処理のようなものも含むことが見えれば、
階層要求 1: メールボックスのグループから1つを選択できる 階層要求 2: いくつかのキーワードを組み合わせて検索できる 階層要求3: 検索結果を扱いやすく表示する 階層要求4: 表示されたメールを選択し、内容を見ることができる
というように、時間を追うようにして分割することができます。 あるいは、
要求 : 複数選択された新しいプログラムをダウンロードしてインストールできる
という要求では、ダウンロードするためには選択する方法が必要なのと、単にダウン ロードできればよいのではなく、 動作させることができる状態に持って行く必要があ るということで
階層要求 1: ダウンロードするプログラムを一覧表示のなかから選択する 階層要求 2: 新しいフォルダを確保してダウンロードし実行可能な状態にする 階層要求3: 連続的にダウンロードできる
7.1 要求を階層化して範囲を狭める 203
というように分割できます。 こうして分割した要求を表現しているときに、ダウンロ ードを開始する前にダウンロード開始可能なことを確認する必要があることに気づく かもしれません。 その要求を 「階層要求2」 のなかで対応させるのであればこのまま でよいでしょう。もし、領域を確保するのがいろいろと複雑で、これを 「階層要求2」 のなかに含めてしまうと 「階層要求2」 の範囲が広くなってしまうという場合は、
「ダウンロードするプログラムを収容できる領域を確保
という要求を独立させて、
する」
階層要求 1: ダウンロードするプログラムを一覧表示のなかから選択する 階層要求 2: ダウンロードするプログラムを収容できる領域を確保する 階層要求3: 新しいフォルダを確保してダウンロードを行う 階層要求4: 連続的にダウンロードができる
というようにダウンロードを開始する要求の前に挿入します。
これらはいずれも、時間的な流れのなかで要求を分割 階層化し、下位層の要求の
範囲を狭めたものです。 また、 要求を分割して範囲を狭めたものの、要求のカバーす る範囲を明確にしておく必要を感じるときは、 要求に付属する 「説明」 のなかで触れ ておくとよいでしょう。
一般に 「シナリオ」 と呼ばれるのはこの形です。
7.1.3 構成分割
これは、その要求に含まれる「機能」や「構成」 で分割する方法で、時間的な順序 性を持ちません。 コマンド別に要求を分割したり、 メッセージの種類で分割したり、 並立する機能で分割したり、 H/Wの構成をヒントに要求を分割したりする方法です。 たとえば、
要求 : PCからの印刷要求に対応する
という要求の場合、 「印刷要求」 には多くのコマンドが絡んでいて、これを一つの要 求のなかで仕様化するには範囲が大きすぎると思われるときは、以下のように印刷に
| 第7章 要求の階層化テクニック
絡むそれぞれのコマンド別に要求を分割する方法が考えられます。
204
階層要求 1: Status コマンドでは印刷の状態をPCに知らせる
階層要求 2: Printコマンドでは、 それまでに届けられている印刷データを印刷 する
階層要求3: Frameコマンドでは、ここで指定されている印刷領域に合わせて 以後の編集を行う
のように、各コマンドに要求を分割します。
この場合、分割の基準は 「コマンド」 であって、これ自身は時系列の要素はほとん ど持ちません。 それでも、実際に使用されるときは 「Printコマンド」 よりも 「Frame コマンド」 のほうが先に発行されるのであれば、 階層要求の2と3の順序を変えたほ うがよいでしょう。 つまり、 全体としては 「構成分割」 という基準を採用しているの ですが、そのなかに時系列分割の要素を取り入れることで、読み手に無用な混乱を与 えないようにします。
さすがに 「PCからの印刷要求に対応する」 というままでは、 どのような仕様が必 要かわからなくなったり、 仕様化にとりかかるきっかけを失ったりしますが、
階層要求 1: Status コマンドでは印刷の状態をPCに知らせる
と分割されたことで、 仕様化の作業としては、ここではPCに知らせる 「印刷状態」 を特定し、それをPCに知らせる際の形式と手順を仕様化することになります。 あるいは、
要求 : 計測して保存されているデータをいろいろな方法でグラフに表示する
という要求を階層化する場合は、 実際にデータの計算方法や表示方法別に要求を階層 化することになります。 もちろん、 階層化しなくてもこの要求から仕様を展開できる のであれば、無理に分割・階層化する必要はありません。 実際にこの場合では、保存 されているデータの所在を特定する方法を具体的に記述したり、 処理の方法として、 計算方法やグラフの種類を選択する手段を仕様化したりすることで足りることも考え られます。
7.1 要求を階層化して範囲を狭める 205
構成分割は時系列分割のなかに現れることがしばしばあり、多くは図7.4のような 構造を持ちます。
図7.4 時系列分割のなかに構成分割を含むパターン
保存データのなかから計算対象のデータを選ぶ 時系列分割 計算式や加工方法の種類に応じて処理する | 処理された結果を指定の形式で表示する 「構成分割
□7.1.4 状態分割
これは構成分割に似ていますが、 「状態」 という概念が見えている場合は、それを 使ったほうが分割はスムースにできます。 分割の基準としては、 時系列分割と構成 分割で大部分がカバーできると思われます。 「状態」 は、 ある視点で見ると「時系列」 の要素を持っていることがあり、 また別の場面では 「構成」 の要素を持っていること があります。
たとえば、
要求 通信装置で結ばれたホストと複数の端末の間を仲介してホストへのデー タ収集を支援する
という要求の場合、 時系列的な視点から見れば、セッションの確立から通信処理、 セ ッションのクローズという分割が考えられます。 また、 セッション確立後には、端末 の選定やデータ収集要求などのコマンドによる処理が考えられるので、この部分では 構成分割が可能となります。
このようなケースは、ほかに画面に応じた処理を要求として捉えるときにも見られ ます。 画面処理の場合は、 もともとそこにある画面の流れを示すために 「画面遷移」 という "状態” が存在していることが多く、 「状態」 という分割基準を導入すること でこのような場面に対応しやすくなります。
第7章 要求の階層化テクニック
206
階層要求 1: ホストからの端末問い合わせメッセージに対して、 接続されて いる端末の情報を返す。
階層要求 2: ホストから確認済みのメッセージを受けて、 選択された端末を 接続中の状態にする。
階層要求3: ホストから送信指示が送られてきたときは、端末に引き渡し、 受信の準備に入る。 階層要求4: 端末からホストに送信するデータが届いたときは、 形式を統一 してホストに送信する。
階層要求5: ホストから接続断の指示が届いたときは、端末に通知し、受信 終了を確認して最終データとしてホストに引き渡す。 階層要求6: 端末からの終了を確認してホストとの接続を切る。
このほか、 やく再接続待ち状態> といった 「状態」も考えられ ます。
このような場面では 「状態」 を基準にして要求を分割するほうがわかりやすいし、 状態遷移とリンクすることができるので仕様化もはかどります。
□7.1.5
共通分割
これは、上位の要求を分割階層化したときに、異なる上位要求の下位要求に同じ要 求が出現するケースで、これを共通機能として切り出して別に扱う方法です (図7.5 参照)。
上位の機能が 「シナリオ」 の特徴を持っている場合には、そのなかにいくつかの機 能にまたがって共通する機能が存在することがあります。 たとえば、 ATMの入金機 能や照会機能などの機能はシナリオの性質をもっており、 そこで要求されている入金 機能や出金機能には、
7.1 要求を階層化して範囲を狭める 207
7.5 シナリオ機能のなかに共通機能が含まれる様子
シナリオ機能1 共通要求 シナリオ機能2 共通要求 各シナリオ機能のなかでは、 「カードから口座番号を読み取る」 共通要求 と、階層要求だけを表現しておき、 実際に「カー ドから口座番号を読み取る」 という要求は共通要 求のなかで仕様化する。
階層要求k : カードまたは通帳から口座番号を読み取る 階層要求m: 取引の結果をレシートまたは通帳に印刷する
といった共通する要求を内包しています。 これらの階層要求を入金機能や出金機能の カテゴリのなかで仕様化することは適切ではありません。 もちろん、 代表して入金機 能のなかの 「階層要求k」 で仕様に展開することも、 保守性を損ねることになります。 このような場合には、入金機能や出金機能から切り出して、 「共通機能」のところで 仕様化します。 そのため、 個々のシナリオ要求のなかでは、 要求を階層化するだけで、 そこでは仕様化しません。
共通機能とつなぐために、
階層要求k : カードまたは通帳から口座番号を読み取る。 (詳細は 「共通機能」 の要求 CRD01 を参照)
というように「参照先」 を示しておくとよいでしょう。
208 第7章 要求の階層化テクニック
7.2 「MECE」 の活用
このほか、要求を階層化する際のポイントとして、 「MECE (ミッシー) *1」という 観点が有効に活用できます。 「MECE」 は、 2001年頃に筆者のコンサルティング先の 人に教えられ、急いで『ロジカルシンキング』という本を手に入れて確認したものです。 「MECE」 では、漏れない"グルーピング” という考え方を持ち込みます。 そしてそ れを表現する方法として、 「ロジックツリー」 という階層図を使います (図7.6 参照)。 ツリーの各階層で、 「MECE」 すなわち、 “モレない、 ダブらない状態” を確認するわ
けです。
図7.6 ロジックツリーの例
電子メールのグループを指定して、そこからキ ーワードで検索してメーラー上で再利用する 表示された検 素グループの 中から一つを 指定する いくつかのキー ワードの入力を 受付け、それら を組み合わせ て検索する | 検索結果を表示 し、見つかったと |きは「subject」 |などの情報を一 覧で表示する 一覧の中か ら選択され たメールを |開く 一つのメールを 開いた状態で メーラーに繋い で編集できるよ うにする 上位の要求の範囲が、 下位の5つの要求の範囲の合計と一致すること。
USDMによる表記法でも、要求を階層化したときには“モレない、ダブらない状態” を確認する必要があります。 そのためにも、 要求を階層化したときにそれぞれの要求 が確実に範囲を示していることに注意を払う必要があります。 表現が悪くて範囲が曖 昧な状態では、それぞれの要求に隙間のない状態やダブらない状態を確認することが できず、 仕様モレを招いてしまいます。
「MECE」 に類似する考え方として、 バーバラ・ミントの 『考える技術・書く技術』 という文献に、 「ピラミッド図」 (図7.7 参照) というものがあります。 この本も、 別 のコンサルティング先の人から教えられて、慌てて読んだものです。 これらに共通し ているのは、上位層と階層の合計が一致するように階層を設定するという考え方です。 「MECE」 やバーバラミントの本を読んでみると、筆者が偶然に気づいた、 要求を
*1 「Mutually Exclusive collectively Exhaustive」 の略。 「それ ぞれが重複することなく、全体としてモレがない」という意味。マ ッキンゼーの「ロジカルシンキング」「問題解決プロフェッショナル」
参照。
73 階層化しても 「要求」 に変わりはない 209
階層化する方法が仕様モレが発生しにくいことには根拠があったということです。
↓図7.7 ピラミッド図の例 電子メールのグループを指定して、そこからキ ーワードで検索してメーラー上で再利用する 表示された検 素グループの 中から一つを 指定する いくつかのキー ワードの入力を 受付け、それら を組み合わせ て検索する 検索結果を表示 し、見つかったと きは 「subject」 などの情報を 覧で表示する 一覧の中か ら選択され たメールを 開く 一つのメールを 開いた状態で | メーラーに繋い で編集できるよ うにする 基本的には「ロジックツリー」 と同じ。
7.3 階層化しても 「要求」に変わりはない
要求の範囲を狭くするために分割し階層化したとしても要求には違いないので、し っかりと 「範囲」 が見えるように表現し、 「理由」の欄も埋めるようにしてください。 とはいっても、 階層化して範囲を狭めたことで 「理由」 を立てにくくなることがあり ます。
要求 : PCからの印刷要求に対応する
という要求には必要な理由は書けても、それを階層化したところで現れてきた
階層要求 2: Print コマンドでは、それまでに届けられている印刷データを印刷 する
という階層要求には理由は書きにくくなります。 うまく考えつかないようなときは、 しばらく 「空欄」にしておいてください。 最終的には埋まる可能性がありますし、 そ
210 第7章 要求の階層化テクニック
れでも埋まらないときは上位要求の理由を継承しているかもしれません。 そのような 場合には、 上位要求と同じ理由を書いておいて下さい。
たとえば、
階層要求 2: ダウンロードするプログラムを収容できる領域を確保する
という要求の場合、 ダウンロード途中でメモリに収容できないことが判明したときは ダウンロードを中断しなければならず、 獲得したメモリも元に戻す必要が生じたり、 その間はシステム内の空きメモリは「0」 という事態に陥ってしまって“デッドロック* に陥ることを防いだりする、 というはっきりした理由が存在します。
理由の欄をいつまでも 「空欄」にすることは避けて下さい。 空欄のままに放置する ことに慣れてしまうと、 理由を見つける能力も低下してしまい、 せっかく階層化して も隙間が発生したり範囲がダブったりしていても気づかず、 結果的に仕様モレを起こ してしまうことになります。
7.4 依頼者と分割の基準を共有する
外部のソフトウェア企業に出された案件で、 ソフトウェア企業の設計者が一生懸命 になって要求仕様書を書いて依頼者に提出しても、 1週間たって確認に出向いたとこ ろ、
「読んでもよくわからなかった」 「動くものがないとわからない」
といわれてしまうということを経験している人は少なくないと思います。
原因の一つは、そこで書かれた要求仕様書では個別の機能を説明しているだけで「動 「き」が見えないことが考えられます。 いったいこの機能はどのような場面で作動する のかが見えないのです。もう一つの原因としては、要求仕様書の構成が見えないこと です。 確かに、目次には機能の項目が並んでいます。 でもそれらの項目は機能を順番 に並べただけですし、 個々の機能のなかにはいきなり仕様が羅列されていますし、 そ こに書かれている仕様がどのような順序で並んでいるのかもわかりません。 たとえば、 「タイマーボタン」 の仕様のところには、
7.4 依頼者と分割の基準を共有する 211
●このボタンを押すとカウンタの表示が 「+1」 される ② ボタンの操作が終わって20秒後にはカウンタの表示を消す ③ カウンタの表示は 「00~59」 までとする
といった仕様が並んでいます。 これらの一つ一つは確かに仕様としての条件を備えて
いるようですが、 実は②と③の順序が違うだけで “読みにくさ”を感じます。 このようなケースはまだましなほうで、多くは曖昧な表現が残ったままで仕様にも なっていません。 要求の状態のままのものと、 仕様と認められるものが混じって並ん でいると、その順序に何の法則性も感じないために読み手は疲れるのです。 これでは、 顧客に 「動くものがないとわからない」 といわれてしまっても仕方がありません。
要求に範囲を持たせ、 さらに理由をつけるのは、関係者の間で要求仕様に対する認 識を共有することが目的です。 そうすることで、
「当然、ここには検索時のキーワードの入力方法に関する仕様が書かれなければ 「おかしい」
と思えるわけで、
「それなら、 検索キーの文字の長さの制限も、ここに書かれるべき」
というコメントも出てくるのです。
また、せっかく要求を分割しても、 分割の基準がよくわからない状態では、 検索キ 一の文字列の制限はどこに書いてあるのだろうかと、 要求仕様書のなかを探し回るこ とになります。 探したけど発見できなかったというので、「入力する文字列の長さを 規定する仕様が漏れている」と指摘すると、思わぬところに書いてあるという返事が 返ってきたりして憤慨することになります。 これでは、 要求仕様のレビューははかど りません。
要求仕様書について顧客を含めて関係者の間で 「合意」 するには、
文書の構成がわかりやすいこと
要求が適切な範囲をもって表現されること
要求につけられた理由が要求の目的をより明確にしていること
要求を分割 階層化した際の分割の基準を共有できること
が満たされていることが条件になります。
212 第7章 要求の階層化テクニック
7.5 階層は2層ぐらいで止める
要求の階層化は、 要求の範囲を狭めるために重要なテクニックですが、 階層の深さ は2層程度でよいでしょう。 あまり深くなると煩雑になってしまい、 逆に階層化のメ リットが薄れてしまいます。 たとえば図7.8のように、 2層目の要求の範囲に大きな ムラが生じると、大きめの範囲を持つ要求をさらに階層化したくなります。 その結果、 一部の要求だけが3層になってしまいます。
このように部分的に3層になったとしても、2層目がしっかりしていることで、 す ぐに階層の意味が崩れてしまうわけではありません。 しかし、このような状況を安易 に受け入れていると、 要求の階層化が雑に扱われる危険があります。
一般に、 階層が部分的に3層になるとしても、一つの上位要求の階層がすべて3層 になることはほとんどありません。 したがって、 3層目を受け入れるということは、 階層の深さがばらばらになることを意味します。 当然、 3層目になると、要求に理由 をつけにくくなり、理由づけも甘くなってしまいます。 日常的に深さを雑に扱ってい ると、 1層と2層の階層化でも雑になってしまいます。 この場合は、 一部の仕様が要 求に収まっていない状態になるので、 仕様モレが起きる危険が非常に高くなります 第8章 「8.11.3 仕様を裸にしない」 を参照)。
一般的には、要求の階層にムラが生じるのは、 要求の持つ範囲にムラがあることが 原因です。 安直に 「下位要求2」 を階層化するのではなく、 「下位要求2」 に含まれる "動詞" を検証して、2層目のレベルで分割することを目指して下さい。 ほとんどの 場合は、これで範囲のムラを調整することができます。
↓上位要求 下位要求 1 上位要求 下位要求 1 下位要求 2 下位要求2 下位要求 21 下位要求 22 下位要求3 下位要求4 下位要求3 下位要求 23 下位要求4 下位要求の箱の大きさは、 要求の持つ範囲をあらわしている。 図のように「下位要求2」 の範囲が大きいとき、この部分だけ階層化し
図7.8 階層にムラが生じる様子
たくなる。
*8 第 章
要求を仕様化する
多くのソフトウェア開発の現場では 「仕様モレ」 「仕様の誤解釈」 「仕様の衝突」 な ど 「仕様」 に悩まされています。 仕様のモレや仕様間の衝突を防ぐには、 まず 「要求」 を適切に表現することが大事です。 それができた状態で、初めて仕様について考える ことができるのです。 前章までのところで要求についての説明をひととおり終えまし たので、ここからは 「仕様」 について考えてみることにします。
仕様とは何か、どのように表現すれば仕様として通用するか、 仕様を表現する際の 注意点や仕様であることを妨げる表現などについて説明します。
8.1 仕様とは
いうまでもなく、 仕様とは、要求 (実現してほしいこと)を満たすべき“具体的な 振る舞い” の記述です。 そして、最終的には、 何らかの形でプログラムのコードに変 換されることになります。 1つの仕様が数十行のソースコードに変換されることもあ れば、たった1行のソースコードになることもありますが、いずれにしても仕様であ る以上、 必ずソースコードの形に変換されます (ソースコードにならないのであれば 【説明】 とすべきです)。
また、「仕様」 であるということは、ソフトウェア開発の関係者 (たとえば、要求 を発する側、 要求を実現する側、 実現したことを検証する側など) の間で、 具体的で あるという意味で合意 (Specify) できたものです。 そして、 「具体的」 であることに よって「検証可能」、 すなわち、 それが実現していることを検証するための方法も考 えられるのです。
したがって、 要求仕様書としての合意を前提としたレビューが行われる前に、 ソ フトウェアの検査部門の人に、 「検証可能」 という側面から要求仕様書のレビューを 実施してもらうことはとても重要なことなのです。 このときのレビューは、 仕様の内 容ではなく、 「その仕様の表現でテスト方法が考えられるか、正しさの判断が可能か」 というところに焦点を絞ります。 筆者の経験からも、この段階で 「検証可能」のレビ ューが実施できた場合、 そのプロジェクトは失敗しません。
現実には、このような段階で検査部門の人によるレビューはほとんど行われていな いと思われます。 その主な原因は、そこにある要求仕様書は、 要求も表現されておら ず階層化もされていません。 仕様らしい記述と要求のままの姿をした記述が思いつく
第8章 要求を仕様化する
214
ままに書き並べられているだけで、 「仕様書」としての条件を満たしていないからです。 もう一つの原因は、 適切な時期に要求仕様書として検査部門に提示されないことです。
8.2
"Specify" の意味
「“仕様” であるためには、どこまで細かく書けばよいか」ということがいつも議論 になります。 その背景には、そこまで具体的な仕様の表現は設計工程に入ってから行 うという認識が身に染み込んでいることが考えられます。 つまり、 要求仕様書作成工 程のなかでは、要求仕様書としてとてもそこまで詳細に書けない、いや、書く時間が ない、と思っているのです。ときには、「とてもそこまで書いておれない」 とまでい います。 しかし、今回開発するソフトウェアシステムが、 本書で紹介するような詳細 なレベルではとても書けないほどの量になるというのであれば、 逆に、 それを書かな いで仕様がモレなく実現すると考える根拠はどこにあるのでしょうか。 思いつくまま にソースコードを作り込みながら明らかになった仕様を足して行く方法で、 そのよう なシステムが実現するというのでしょうか。
確かに、それが 「仕様」 として十分 (必要な) な表現になっているかどうかを判断 するのは簡単ではありません。 その上 "Specification" という単語を辞書で調べても、 「仕様書」 「明細」 「詳説」 といった訳しか出てこず、 これではほとんど役に立ちません。 「具体的」 とか 「詳細」 という言葉を使っても、 人によって認識が違うために、 「仕様」 の細かさに対する認識も食い違ってしまうのです。
要求仕様書とは、要求で表現されている機能について誤解なく “合意する " ために 書かれるもので、 その要求のなかに含まれる「実現すべき機能 (細かなWhat)」 を明 確にするためのものです。 当然、 仕様について関係者が合意するためには、ある程度 の具体性をともなった詳細な表現になっていることが求められます。
要求仕様書において、その記述が“仕様” であるための条件としては、その記述内 容が “Specify"、すなわち“特定できる” 表現になっているかどうかです。特定でき るということは、関係者の間で認識に曖昧さがなく、 同じことをイメージできる状態 を指します。 ここで重要なことは、「どこまで細かく表現すればよいか」ということ ではなく、その記述で 「今回のプロジェクトの関係者が実現内容について “Specify できる” (特定できる) ものであるかどうか」ということです。
8.2 "Specify"の意味 215
依頼者としては、でき上がりのイメージと実際のできとがずれていない状態。 設計者のほうは、依頼者の考えていることがイメージできる状態。 検証者の立場からは、実現されていることを検証する手順が見えていて、そ れがずれていない状態。
ほかにもいるかもしれませんが、 作ることに対する関係者はそれほど多くは ありません。
すでに要求のところで触れたように、 「要求」 である以上は、 その要求に関係する 人は特定されます。 その限られる関係者の間で、誤解なく 「Specifyできた」と認識 できるかどうかが重要です。 合意が実現するものであれば、 細かさの程度は均一であ る必要はないと考えます。 逆に、関係者のレベルに合わせて、 項目によって詳細さが 調整されていてもよいのです。 要求を仕様化する目的は、 要求を "Specify" すること であり、 要求されていることが “わかる”ことが大事なのです。 たとえば、
COM02 受信バッファが一杯のときは、それ以上受信しない
という文章には、 (一般論ですが) 特定されていない(と思われる) 表現がいくつか 含まれています。 「一杯のとき」 では “特定” できないでしょう。 また 「受信しない」 というだけでは何をすればよいのかわかりません。 したがって、 一般にはこれでは仕 様になっているとはいえません。 しかし、この分野のソフトウェア開発に慣れている 人たちであれば、 「一杯」 の意味や 「受信しない」ときの処理を知っているかもしれ ません。その場合は、 上記の記述でも 「仕様」 と認められます。 これが「要求仕様書」 です。
□8.2.1 均一である必要はない 「仕様」 にはもう一つの問題があります。 それは、仕様書全体に 「均一」の記述に しなければならないかということです。
結論からいえば、 均一な表現にする必要はない、と考えています。 この点に関して 多くの人は誤解をしていて、 要求仕様書と機能仕様書の違いを認識していないと思わ れます。
「要求仕様書」 は、 “作ってほしい” ことについて “Specify" できたことが書かれ ている文書であり、 作ることに関係する人たちがわかりあうための文書です。 極端に
216 第8章 要求を仕様化する
いえば、 彼らがわかりあえる文書であればよいのです。
機能やそのなかの要求によっては、そこにいる人たちの間では自明のこともあるで しょう。
SIM125 HDDの転送性能を計測する
というだけでは、 計測する 「転送性能」 が特定されていませんし、 「計測方法」 も特 定されていないので、この表現では一般には仕様とは認められません。 明らかに 「要求」 のレベルです。 それでも開発の関係者にとっては、 「転送性能」 や 「計測方法」 につ いては自明の事として "Specify" できている場合は、これを「要求仕様」として認め てもよいでしょう。
これを 「認定仕様」といいます。 つまり、一般的な判断では仕様とはいえないが、 その状況のなかでは関係者には "Specify" できる状態であれば仕様と認める、とい うものです。たとえば、 表8.1の 「HOT125」は、 “沸いた状態の判断”や“知らせ方" が特定されていないので、このままでは 「要求」 の状態とみなされます。 しかしなが ら、「関係者」にとっては、 “沸いた状態の判断” は自明の理であり、 “知らせ方” も 「お風呂が沸きました」とアナウンスすればよいことは知っていて、 関係者としては "Specify" できるというのであれば、この状態で 「認定仕様」 と判断します。
「要求の前に 「□」の記号が付いているのは 「認定仕様」 として認めたことを意味し ます (「□」 は、 本来は仕様につけるチェックボックスです)。
↓表8.1 認定仕様の例
☐ 要求 HOT125 お風呂が沸いたら音声で知らせる 理由 風呂に入れる状態になったことを知らせる必要がある 要求 HOT126 お風呂が沸いたらすぐに風呂に誘導したい 理由 燃料の消費を節約する ☐ HOT126.1 "沸く "状態の1分前に“もうすぐお風呂が沸きます" と知らせる
「□」の記号が "仕様”であることを示す。 「HOT125」は、 「沸く」 「知らせる」 の動詞に対して仕様が必要と見なされるため、 一般的には要求と判断されるが、 今回の関係者には、この状態で "Specify" できると 判断し、これを 「仕様」と認定したもの。
たとえば、あるクライアントでまとめられた要求仕様書は、 仕様として1100項目 ほど書かれていましたが、 そのなかの半分は認定仕様でした。 なかには、一般論から 判断してわずかに特定できない部分を含むものから、 「○○試験ができること」 とい
8.2 “Specify* の意味 217
うように、 外部の人にはまったく内容がわからないものまで含んでいます。 それでも、 ベースライン設定後の仕様変更率は7%ぐらいでおさまっていました。 もちろん、 最 初に約束した納期は守れました。 このクライアントは、「依頼者から仕様変更の嵐に 見舞われて困っている」 ということで相談にきたのですが、 その際の仕様変更率は正 確なデータはありませんが、 低く見積もっても30%は超えていたと思われます。
□8.2.2 ベテランを投入する意味
たとえば、 急に3ヶ月先のショーに出品することになった場合、 あるいは、 いろい ろな事情で納期が極端に短くなったプロジェクトの場合、 少しコストがかかっても過 去にそのドメインを十分に経験している人や設計能力の高いベテランを投入する意味 は、それによって細かなレベルで仕様を書く時間を省けるという計算もあるからです。 したがって、 その分野に精通したベテランを投入したにもかかわらず経験の浅い人が 担当するときと同じように表現を細かくしているようでは、コストをかけてベテラン を投入したメリットが薄れてしまいます。
逆に、一部の機能は経験の浅い人が担当することがわかっているならば、その範囲 は、自明のことも明記したり、 図や表を入れたりしてわかりやすくすればよいのです。 ここで書かれている文書は 「要求仕様書」 であり、 納期を背負っているのです。 納期 を含めて要求されていることが実現できるように誘導できなければ、 要求仕様書とし ての価値は失せてしまいます。
案件を外部のソフトウェア企業に発注する場合も、この問題で失敗していることが 多いようです。 外部に発注する場合、 一般に発注側が要求仕様書を書くと思われます が、外部のソフト会社の専門とするドメインや担当者のレベルや経験の度合いによっ て、仕様の表現に工夫が必要になります。
前回発注した外注先のソフトウェア企業では、発注側のドメインに精通した優れ たエンジニアが対応してくれたことで早い段階でまとめてヒアリングの機会が設けら れ、そのあとはまったく問題なく終了したとします。 その結果、 この外注先は発注側 のなかでは高く評価されているかもしれません。 そこで今回もまたそのソフトウェア 企業に発注することになりました。 ところが今回の製品は前回のときの製品とはまっ たく違ったドメインに属するもので、 その外注先には当該のドメインに精通している 人はいません。 そのことは契約前にわかっていました。 でも、発注側のリーダー (あ るいは仕様担当者) は、 新しい製品の要求仕様書を前回のときと同じような構成と仕
第8章 要求を仕様化する
218
様の粒度で書き、 それを外注先のソフトウェア担当者に渡します。 彼は、このソフト ウェア企業が開発に失敗するとは想像もしていません。 自分が書いた要求仕様書(実 際は機能仕様書) には手抜きはありません。 前回と同じように丁寧にまとめたつもり です。ところが、 見事に失敗してしまうのです。
一般に、 このような場合、 受注したソフトウェア企業に責任があると認識されてい ます。 確かに、ソフトウェア企業のほうもドメインに精通した人がいない状態で受注 しなければ問題にはならなかった、という論法も成立するでしょう。 しかしながら、 そのような状態であることを最初に認識したうえで発注しているのです。そうなると、 受注したソフトウェア企業に一方的に責任があるとはいえなくなってしまいます。 コ ストや発注のタイミングの問題なども絡んでいるので、このような状態で発注される ことはしばしば起きていると思われます。
このような場合の対応方法としては、 発注側で書いている要求仕様書の構成や内容 について、ソフトウェア企業の人 (担当者) がわかるように書くこと”です。 あるいは、 そうして書かれた要求仕様書を受注側の担当エンジニアが理解していく過程で、要求 仕様書に不足部分を書き足したりすることで、 "Specify" できていることを確認する ことができます。 その結果、 要求仕様書の内容はでこぼこになるかもしれません。
「納期」 も要求ですので、「関係者」 全員がベテランで構成されているときは、要求 仕様書の記述は粗くても実現できるでしょうが、 “未知の人" が何人か混じっている 状態であれば、要求仕様書の記述の詳細さは “マダラ模様” になるかもしれません。
8.3 仕様で衝突する
一つのソフトウェアシステムに組み込まれる多くの機能は、 それぞれがまったく独 立しているわけではありません。 類似の機能もあれば、 異なる機能の仕様同士が衝突 あちらの仕様を優先するとこちらの仕様に制限がつくことが起きることもあります。
接続したカメラからデータを吸い上げる機能と、 すでに保存されている画像データ を読み出して画面に表示する機能は、それらの機能がパソコン上で実現するのであれ ば、独立しているといえるかもしれません。 パソコン上では吸い上げたファイルを保 存するための領域で制限されることはないでしょうし、 画面に表示する機能も、 表示 前にメモリ上で展開するかもしれませんが、 そのメモリ領域がデータを吸い上げる機 能と衝突することがあるとは思えません。
*1 それができないのであれば、このようなソフトウェア企業に 発注すべきではないのです。
8.3 仕様で衝突する 219
しかし、これがパソコンではなく 「ビューア」 のような製品となると、 状況は違っ てきます。
CAM02 カメラから吸い上げた画像データをメモリ上に保持する CAM03 吸い上げた画像データをボタン操作によって1つずつビューアの画面に 表示する
という要求が一つの製品のなかに存在する場合、 装備するメモリの容量によっては、 カメラから吸い上げた画像データをメモリ上に保持するための仕様と、 指定の画像デ ータを画面に表示する際の仕様とがぶつかる可能性があります。 画像を展開するため の領域を最初に確保することを許せば表示機能には支障はないかもしれませんが、 カ メラから画像データを吸い上げるほうの機能には、 吸い上げたデータを収容するメモ リが不足する可能性がでてきます。 そのため、
CAM02.03 吸い上げたデータを収容するメモリが不足する場合は、 吸い上げを いったん中止し、 吸い上げデータがメモリ上に残っていることを知 らせる
という仕様にするか、 ビューアで表示するときはカメラを切り離して操作したいとい う理由から吸い上げ機能のほうを優先し、 表示のための展開メモリが少ないときやメ モリが確保された状態に合わせて展開時の解像度を変えるような仕様になるかもしれ ません。
このように、機能 (要求) は仕様に展開されることでほかの機能の仕様と衝突して いることに気づくのです。 なかには要求のレベルで衝突する “可能性がある”ことが わかっていることがありますが、 それでも具体的にどの部分 (仕様) で衝突している のかは、実際に仕様を展開してはじめて見えてきます。
仕様の衝突そのものは解消することはできないかもしれませんが、早い段階で衝突 していることがわかれば、 衝突している仕様間で仕様を調整して妥協点を見出すこと ができます。 片方の仕様を100%実現してしまうから、もう片方の仕様に大きな制約 がついてしまい、 製品としての魅力を失わせてしまうのです。
多くの組織では、コーディング作業のなかで以前に書いたソースコードの部分と衝 突していることに気づいて、慌てて仕様を調整してソースコードを書き直しています。 発見の時期が遅い場合や、 調整の範囲が広くていまからソースコードを弄るのが危険
第8章 要求を仕様化する
という場合は、あとで発見されたほうの仕様に著しい制限をつけることがあります。 そのような組織では、本書で勧めているようなレベルの仕様は、 設計作業のなかで 明らかにしながら進めていくものと認識されていることが多いようで、 仕様の衝突に 気づくのが遅れることは避けられないでしょう。
8.4 いつ仕様化すべきか?
要求を仕様化する時期については、いろいろな意見があるようです。 「設計してみ なければどのような仕様が必要かわからない」 とか、 「細かな仕様は設計しながら見 つけていくもの」と認識している状況では、 仕様化の時期が遅くなってしまいます。
この場合の問題は、 仕様化の作業が遅いというだけでなく、 設計工程のなかで問い
合わせなどを通じて明らかにされた仕様は 「要求仕様書」 に反映されないことです。 途中で仕様を問い合わせていることから判断して、そこで書かれている要求仕様書は 明らかに仕様になっていないと思われますが、要求仕様書としては"それでよいと認 識 されているために更新されないのです。 設計工程のなかで仕様を問い合わせてい ることを問題とは思っていないのです。
このほかに、早期に仕様化されない原因としては、 適切な仕様化の方法や表現の規 範を持たないことが考えられます。 またそのため、早期に仕様化することに対して、「と ても膨大な量になって書けない」という反応になることも予想されます。
しかしながら、 適切な仕様化の方法を持っているのであれば、 そしてその技術に慣 れているのであれば仕様化は早いほうがよいし、 設計段階や実装段階でわかることな ら、要求の仕様化の段階で明らかにしたほうがいろいろな点でメリットがあります。
仕様の項目数の見積り値を調整するための実績データが得られる
仕様間の衝突にも早く気づくことができる
仕様が見えたことで機能の実現に対するリスクが見える
といった利点があります。 また早期に仕様化したことで、
設計や実装のイメージができる
設計や実装の工程に入って実現方法に迷うことが減る
実装中にほかの機能の仕様を確認することが容易になる
ので、要求の仕様化のところで使った工数は、 あとの工程で十分に回収できます。 逆に、
220
8.5 検証可能性について 221
仕様化しないで実装作業に入った場合、 ソースコードを書きながら関連する機能の仕 様を確認するには、ソースコードを読んで仕様を思い出さなければなりません。 プロ ジェクトの後半になると、この種の時間が1日の半分を占めることもあり、 適切な要 求仕様書があれば確認作業は大幅に短縮されます。
あるいは、 実装作業のなかで判明した仕様によっては、 すでにソースコードになっ ているところを作り替えることになってしまいます。 当然、 ソースコードは傷み、 そ こにバグを埋め込む可能性が出てきます。 それだけではありません。 終盤になってつ まらない仕様の問い合わせが依頼者に届いたり、 仕様に制限をつけることを求めたり するために依頼者の不信を買ってしまい、 このあとの作業にも支障をきたします。つ まり、早い段階で仕様化することに対して問題は何も生じないのです。
アジャイルに関連する文献のなかには、
「人間のコミュニケーション能力は不完全であるから、 初めから要求を正しく把 握することは困難」
「ビジネス環境は半年で変化するので、 初期に時間をかけて "完全な” 仕様化に 取り組む価値がない」 「仕様には、“予測” の部分が含まれている。 予測するよりも“
適応するほうが重要」
という論調が展開されて、 「さっさと動くものを作る」ことが推奨されています。 確かに、ドメインによっては、さっさと動くものを作ってそれを動かしながら必要 な仕様を見つけて仕込んでいく方法が可能でしょう。 しかし、そのやり方では混乱が 増幅する領域も多いのです。
それが実現するには、 文書にならないとしても仕様を十分に知っていることと優れ た設計能力が必要であり、 実は卓越した予測能力が働いているからできる、という部 分も少なくありません。
8.5 検証可能性について
要求が仕様に展開されて適切に表現されているということは、 そこで書かれている ことが "関係者" の間で "Specify" できることを意味します。 このとき、 Specify する 「関 係者」 にはテストの担当者も含まれます。
Specifyできる状態を “検証可能” の側から言い換えると、それが設計者によって
222 第8章 要求を仕様化する
実現されていることを検証する手順や手段が見える、 ということであり、 実際にこの 仕様が実現しているかどうかを検証して確かめることができることを意味します。
要求仕様書から、その仕様 (機能)に関連するパラメータが明らかになっており、 それらのパラメータを使って必要十分な組み合わせのテストが設定できる状態であれ ば、 その要求仕様書は 「検証可能」 な状態にあるといえます。
一般に、 仕様モレや仕様に関するバグが多く検出される組織で書かれている要求仕 様書では、主要な機能についての特徴的な振る舞いについて “説明” しているものの、 その機能全体の振る舞いまでは触れていません。 その機能がほかのどのような機能と 絡んでいるのかもよく見えなかったりします。
また、 「設定機能」 などでいろいろなパラメータが自在に設定できることになって いて、 そこには設定の方法や上限値、 デフォルト値、 などの仕様が示されているので すが、それらの項目や値がどの機能に“パラメータ” として絡むのかということにつ いては一切書かれていなかったりします。 書き手としては、 ある程度はわかっている のでしょうが、それが明確に表現されていない状態では、 テストエンジニアにとって は "Specify" できる状態とはいえません。
現実には、要求仕様書の書き手が機能に作用するパラメータを理解しているのであ れば、何らかの形で表現されることのほうが多いと思われます。 逆に、そのような情 報が要求仕様書に表現されていない状況では、 機能とパラメータの関係を適切に認識 していない可能性のほうが高いのです。 あるいは、 そのような情報を表現する方法を 持っていないだけかもしれません。
仕様としての表現が曖昧でパラメータとの関係が特定できない状況が残されている 場合、設計者が「これで要求を満たす」 と考えて実現したことと、 評価する人が
「この場面ではこの動きができているべき」
「このパラメータを "ON" にすることよって動きが変わるべき」
と考えてテストしてみることの間で食い違いが発生してしまいます。 評価者のほうが 広い範囲をカバーしてくれているときはバグとして拾われるのでまだ救われるのです が、逆の場合は、テストで発見されず欠陥を抱えたまま市場や客先に出てしまいます。
このように、 テストエンジニアは、 設計者の想像力を超えなければなりませ ん。 そのため、 多くの設計の場面をくぐり抜けて、 設計者の陥る落とし穴や勘 違いしやすい場面、 要求仕様の表現との因果関係などを知りつくしているぐら
8.5 検証可能性について 223
いの人が望ましいのです。 それにも関わらず、 多くの組織では、 「テスト」 を 設計よりも一段下に見ていて、優れた人材を回そうとしません。 これでは、優 れたテストエンジニアは育たないし、 早晩、 日本で作られるソフトウェアシス テムは、 市場の評価を失うときがくるでしょう。
☐ 8.5.1 テストエンジニアによるレビュー 要求仕様書に表現されていることが検証可能な状態になっていることを確認するた めに、 検証者による事前チェックが必要です。 できれば、 要求仕様書を最終的にベー スライン設定するためのレビューの前に、 検証の責任者によって「検証可能」の観点 からチェックすることをお勧めします。 というより、 事前にチェックしてください、 というべきかもしれません。 それくらいこのチェックは効果的です。 もちろん、チェ ックする人のスキルが前提になっていることはいうまでもありませんが、 逆に、この ようなスキルをもったテストエンジニアを確保しなければならないということです。
テストエンジニアは、 そこに書かれている要求仕様書の検証可能性を見抜かなけれ ばなりません。 仕様化が不十分でこれでは解釈がわかれると判断できること、あるい は機能とパラメータの関係がわかりにくく、 これでは設計者が必要なパラメータに気 づかない可能性があると判断できることが必要です。
ときには、テストの担当者が、 要求仕様書から機能と設定値の関係表などを作って 確認することも必要でしょう。そうしなければテストケースを設計できないからです。
要求仕様書の構成によっては、 個々の機能がどのような操作や動きのなかで実行さ れるのかが見えず、それらの操作がどのような状態遷移のなかで振る舞うことが求め られているのかわからないことが起きます。 そのような状態では、設計者も仕様を勘 違いしたり見落としたりする確率が高いことが予想されます。
「操作の手順や流れをあらわした状態遷移のようなものはないのですか?」
と質問すると、仕様の担当者からは逆に
「状態遷移は設計のなかで考えるものではないのですか?」
という質問を受けることがしばしばあります。 「状態遷移」 という言葉に無条件に反 応しているのでしょう。 確かに、 関数の制御構造の設計のなかに 「状態遷移」 があり
224 第8章 要求を仕様化する
ますが、これは、そこに存在するいくつかの関数をどのような場面で動かせばよいの かを決めたものです。
これとは別に、システムとしての振る舞いや操作の手順なども 「状態遷移 (図/マ トリクス)」 であらわすことがあります。 この場合の状態遷移は、 「条件文」 の一種と いう意味です。
「もし目的のファイルが存在しないときは、 その場で生成して処理を続行する」
というのと同じです。
「いったん硬貨が投入された状態になれば、コースを選択し直す操作はエラーに なります」
という表現が、ダイアグラムとかマトリクスになっているから 「設計」 だというのは 短絡的です。 だらだらと文章で書かれるよりは、 ダイアグラムやマトリクスを使って 振る舞いをわかりやすく表現するほうが効果的です。 もちろん、 ダイアグラムやマト リクスの限られたスペースに表現しきれない情報 (仕様) は、 欄外に文章で補うこと も必要です。
むしろ、一般に書かれている要求仕様書にこのようなわかりやすい表現が見当たら ず、 テストエンジニアが困惑するような表現をいつまでも続けていることのほうが問 題なのです。
8.6 固有の番号を付ける
要求や要求仕様には固有の番号を付けることが必要です。 この番号の使い道は要求 仕様のなかで 「特定する」ことが第一ですが、このほかにも多くの使い道があります。 たとえば、
●メールでの問い合わせに番号があると便利
②要件管理で実現性の追跡項目に指定されたときに、番号を埋め込んで追跡しやす くする
要件の変更があったときも、 変更依頼書とつないだり、 変更作業を追跡するため に埋め込む
トレーサビリティ マトリクスの要件欄に引用する (マトリクスと一体化したと きは出番なし)
8.6 固有の番号を付ける 225
Sテストケース仕様書と要求仕様をつなぐ際に使用する
というように、 幅広い使い道があります。 上にあげた項目の0~は要件管理のなか で行われる項目です。 つまり、仕様の固有の番号がなければ要件管理そのものが成り 立たなくなるのです。
一時代前は、要求仕様書の問い合わせや確認作業はFAXで行っていたので、仕様の 項目を個別に識別するような番号が付いていなくても、 ボールペンで直接書き込んで FAXすることで相手に伝わったものです。 電子メールの時代になったことで、個別に 識別できる番号が付与されていない状況では、 仕様の問い合わせなどの作業の効率が 著しく低下します。
個々の仕様に対する 「実現性の追跡」の場面では、 この番号が「要件追跡リスト」 で管理されます (「8.6.3 要件の実現性追跡に重要な手掛かり」 参照)。 当該要件 (仕 様を含む) が追跡の対象に指定されていることで、 設計の担当者は関連する設計書や ソースなどにこの番号を埋めていき、 追跡レビューの際にこの番号を使って関連する 箇所を速やかに探し出します。
仕様の変更の場面では、 変更依頼書のなかに該当する仕様の番号を記録することで、 変更依頼書と要求仕様がつながります。 変更が仕様の追加になったときも、あとで新 しく追加した要件に割り当てられた仕様番号を変更依頼書に記録しておくことで、変 更依頼から仕様をたどることができます。 適切なツールがあれば、この種の追跡は容 易に実現します。 また、こうした番号を付与することで、 仕様の記述が散文形式から 箇条書きになりやすく、 要求仕様書としての保守性にも貢献します。
番号の付け方としては、 「REC.03.02」 のように機能をあらわすような「記号」と「数 「字」 を組み合わせた形 (記番号) にするとよいでしょう。その製品やシステムのなか で、適切に分類されたカテゴリ (機能が中心になると思われます) に対応した記号を 付け、以後の派生開発においても同じカテゴリであれば、継続的に同じ記号を使い続 けることで、変更要件の管理やテストケース仕様との連携がしやすくなります。
Wordで要求仕様書を書く場合は、 段落の番号をそのまま仕様の番号に使用 すると、そのあとの文書構成の変更や章の追加などによって、 仕様の番号がす べて変わってしまうことになるので、 特に注意が必要です。
*2 一般に認識されている要件管理のなかには、仕様変更 時の追跡は規定されていますが、 実現性の追跡は含まれていま せん。 実現性の追跡は私の経験のなかで要件管理の一環とし
して取り入れているもので、この方法を取り入れないと設計ミスな どの発見が遅れてしまうのと、ケースによってはテストでは発見で きないこともあり、それをこの追跡で発見します。
226 第8章 要求を仕様化する
「記号」 を安定させるために、 カテゴリはできるだけ早く確定させることが大事で、 機能単位の要求のリストアップを急ぐことで、 要求ごとの番号化もできるだけ早く安 定させることです。 ときにはあとから要求が増えることもありますが、 カテゴリに変 化がなければ、 体系のなかで 「記番号」 の番号のほうに余裕を持たせておくことで、 途中に発生する変更を吸収することもできます。
この仕様に付与された番号はテストケース仕様ともつながるので、 カテゴリ名や番 号付けの“体系” は、要求仕様書のベースライン設定後は変更しなくても済むように してください。 もっともベースライン設定前であれば、 個々の仕様に付与された記番 号を付け替えることもあるかもしれませんが、関係者が多くなると混乱する可能性が あるので避けたほうがよいでしょう。
□8.6.1 番号の確定は少しあとに回そう 仕様化の最初の段階では、仕様レベルの番号の確定作業は少しあとまわしにします。 せいぜい、表8.2のように要求の記番号を複製しておくような形で留めたほうがよい でしょう。
いくつか仕様が列記されたとき、そこに列記された仕様が触れているテーマが散乱 することがあります。 表8.2では、 該当するメールが発見されたときの表示やメール の中身の表示に関する操作が思いつくままに並んでいて、このままでは仕様モレを防
↓表 8.2 番号を途中まで複製した例
要求 FND07 検索結果を扱いやすく表示し、そこから選択したい 理由 目的のメールが一つとは限らないので、 絞り込めるような操作がしたい FND07- 開示されたメールの中にある検索キーワードと一致している文字列を赤 色で表示する ☐ FND07- 検索されたメールの件数を一覧の上に表示する ☐ FND07- 検索されたメールの 「Subject」 を一覧で見せる ロ FND07- 一度不要として消されたメールを復活することができる ☐ ☐ FND07- 不要なメールを選んで一覧から消すことができる FND07- 該当するメールが存在しないときは 「該当なし」 を表示する FND07- 一覧から1つのメールを選んで、 その内容を見ることができる
仕様が安定するまで要求の番号をペーストし、 後ろに"- "や"。"を付けた状態でしばらく置いておく。
8.6 固有の番号を付ける 227
ぐことは困難になります。
そのような場合は、抽出された仕様のなかで共通点を探して、仕様を "グループ化" することが必要になります (8.8 さらに範囲を狭めるためのグループ化」を参照)。 またそのグループ分けのなかで類似の機能要求の仕様化を進めていくことで、よりわ かりやすいグループ化の観点が見えることもあり、 そこで確定したグループ分けに沿 って仕様の番号を確定させます。
いつまでも仕様の番号を確定させることを引き伸ばすと、 今度はその間で仕様の問 い合わせなどが発生したときに支障をきたしてしまうので、適当な時期に確定させる ことになります。 そのために、ときにはすでにグループ化したあとで新たにグループ 分けの規準を整理し直すこともあり、 その場合はグループを移動することになります。 そのような“手戻り作業” が少しでも少なくなるように工夫が必要です。
いずれにしても、 拙速な番号付けによって仕様を適切なグループに並び替える機会 を失わないように、 仕様の番号を確定するのはこうした状況を見て少し安定してから でよいでしょう。
□8.6.2
番号化における注意
個々の仕様に固有の番号を付けるときの注意点として、 小さくなりすぎた仕様に対 して、一つずつ番号が割り付けられているケースがあります。 特に、いくつかの「変数」 が組み合わさったかたちで条件が設定されるような場合、 その一つずつに番号が割り 付けられてしまうと、かえって見にくくなり仕様のモレを見失う危険が高くなります。 表8.3の例は、 個々の状態におけるイベントの発生に伴う振る舞いに対して一つの
仕様としての番号を付与しているため、番号が細かくなってしまい、かえって見にく くなっています。
これらの条件は、 実際には 「1カ所」で判断されることが予想されるので、全体に 1つの記番号を与えて、そのなかで展開しても差し支えないでしょう。 逆に、条件の なかに、 まったく別のタイミングで判断されるようなものが混じっている場合は、そ れぞれに記番号を割り付けるほうがよいと思います。
この問題は、「ペースト作文」とも絡むことが多いようです。 手書きで要求仕様書 を書いていたときは、このような書き方は書き手のほうが耐えられません。 しかし、 パソコンが普及したことで、 ワープロ操作で文章を書くことができるようになりまし た。 手書きとの違いの一つが「ペースト作文」 です。 次ページの表8.3の例はまだ条 件を分けるパラメータが少ないのでペーストの出番も限られていますが、なかには条
第8章 要求を仕様化する
↓表 8.3 番号が細かく割り付けられた例 COM02.01 接続待機中に、装置切り替え操作が行われたときは、 操作無効の表示 をする COM02.02 接続待機中に、 接続不可の通知が届いたときは、 接続失敗の表示をす る COM02.03 接続待機中に、 電源断のボタンが押されたときは、 電源断のシーケン スに入る COM02.04 COM02.05 接続中に、装置切り替えの操作が行われたときは、 切り替えのシーケ ンスに入る 接続中に、 接続断の通知が届いたときは、 接続断の表示を行い接続待 機中状態に入る COM02.06 接続中に、電源断のボタンが押されたときは、 接続を切る処理を行っ ていったん待機中の状態に入る
上の例は、まだ条件が少ないので読み取ることができるが、下の例のように 条件に関わるパラメータが多くなると、読み手に不快感すら与えることもある。
THM01-1 自動設定#12がオフで、 残メモリサイズが設定値1未満の場合は、監 視ペースを5分に1回とする THM01-2 自動設定 #12がオンで、残メモリサイズが設定値2未満で、 接続点数 が5以上のときは、 監視間隔を3分にする THM01-3 自動設定#12がオンで、 残メモリサイズが設定値2未満で、 接続点数 が5未満のときは、 監視間隔を2分にする THM01-4 自動設定#12がオンで、 残メモリサイズが設定値2を超える場合は、1 分間隔で監視する
件のパラメータが4つ5つと出てくるケースもあり、 組み合わせの種類も10数個に なるとペースト作文でないと実現しないと思われます。
表8.3のような場合は、明らかに状態遷移かデシジョンテーブルで表現したほうが わかりやすく、 実際にそれらの条件判断はまとめて一つの場所でマトリクスかテーブ ルで処理されると思われるので、表8.4のように全体で一つの番号を割り当てて表現 するほうがよいでしょう。
□8.6.3 要件の実現性追跡に重要な手掛かり 仕様に個別の番号を付与することが、 その後の要件の変更に対応するための要件管 理プロセスをきちんと回すための重要な手掛かりになります。 番号が付いていなけれ ば変更に対応することは困難です (仕様変更に関する要件管理については第13章で 詳しく説明します)。
ここでは、要件管理のなかのもう一つの機能である実現性の追跡についてもう少し
228
8.6 固有の番号を付ける 229
↓表8.4 デシジョンテーブルであらわした例
COM02.01 接続待機中、 接続中 装置切り替え操作、 接続不可通知、 電源断ボタ ンの組み合わせと、 そのときの処理 (振る舞い) の関係を以下の表に 示します。 接続 待機中 接销中 置切り 接觸不可 替え操作 の通知 電源新の ボタン 处理 操作無効の表示 |接続失敗の表示 電源断のシーケンス 切り替えのシーケンス 接続断の表示、 接続待機中 状態に入る 接続を切る処理、 接続待機 中状態に入る
詳しく説明します。 要求が適切に仕様化されることで、 仕様間で衝突している状況が 見えやすくなります。 そのため、 設計に入る前に、ここで衝突している仕様がどのよ うな調整が必要か考えることになるのですが、場合によってはもう少し設計方法 (実 現方法)を詰めてからでないと判断できないことがあります。 このような場合には、 これらの仕様項目 (要求のレベルで管理するかもしれませ) を 「追跡リスト」に掲載 し、これらの仕様に関する設計作業にめどがついた時点で 「実現性についてのレビュ -」 を計画します。
追跡リストに載った要求仕様の記番号は、その後の設計書やソースコードに埋めて いくので、あとで追跡のレビューを実施するときに関係する箇所を探し出すことがで きます。 こうして追跡の対象にすることで、 事前に追跡の目的が明確になっているの で、設計作業のなかでも、問題点を明確にするような設計資料が残されます。また、 うまくいかないことがもっと早くわかることもあり、 早い時期にアーキテクチャを変 更することができます。
ただし、早い段階で仕様化できていない状況ではこうした追跡は実現せず、テスト のなかで衝突していることが判明したものの、そこからアーキテクチャを作り替える 時間も費用も残っていないという事態に陥るのです。
実現性の追跡で、 少し性質の異なるケースもあります。 仕様が決まっていくなかで、 その機能を新たに作るのではなく、 すでに存在している製品やシステムからの「移植」 で実現しようということもあります。 仕様化作業のなかで既存の製品の仕様との違い が明らかになったことでこの種の判断がやりやすくなるのですが、 そのときにソース コードがそのまま使えないことがあります。 機能の振る舞いは同じでも、ハードウェ
8.7 要求の階層のなかで仕様を捉える 231
テストケースにモレがないことを確認します。 双方で番号を交換できればよいのです が、それが実現しない場合でも表 8.5のように、 テストケース仕様書のほうに、そこ でテストされる要求仕様の項目番号を埋めるくらいはやっておきたいものです。
8.5 要求仕様の番号とテスト仕様の番号を交換する様子 要求仕様書
要求 FND07 検索結果を扱いやすく表示し、 そこから選択したい 理由 目的のメールが一つとは限らないので、絞り込めるような操作がしたい ☐ ☐ ☐ ☐ ☐ ☐ ☐ ☐ ☐ FND07-01 検索されたメールの件数を一覧の上に表示する FND07-02 該当するメールが存在しないときは 「該当なし」 を表示する FND07-03 検索されたメールの 「Subject」 を一覧で見せる テスト仕様書 関連要求仕様 テスト番号 テスト内容 番号 FND07-01 T-FND10.05 FND07-02 T-FND10.06 T-FND10.07 FND07-01
双方向にリンクされていないが、テスト仕様から、 そこでテストされている要求仕 様の項目番号が見えるようになっている 一方、 要求仕様の「チェックボックス」の3つ目が "■"になっていることで、テス ト仕様が用意されていることを確認したことを示している。
8.7 要求の階層のなかで仕様を捉える
要求を仕様化するポイントは、いかに制御された要求の範囲のなかで仕様化するか です。 要求そのものも、 適切に 「範囲」 を持つように表現されないと仕様の抽出は不 十分になります。 そして、 要求の表現は悪くない状態でも、要求の求める範囲が広い ままだと抽出される仕様は発散してしまい、 仕様モレを招き入れてしまいます。
たとえば、次ページ表8.6 のように 「送信および受信した電子メールをキーワード で検索したい」という要求の表現では、範囲が広くて仕様を引き出すのに苦労します。 この要求が求めているのはどこまでなのかがわかりにくいのです。 もちろんこれでも、 探し出す際のキーワードの入力方法や発見したときの表示の仕方など、 当然この要求 のなかに含まれることが明白な仕様は引き出せます。 しかし、 検索時のキーワードの
第8章 要求を仕様化する
↓表 8.6 範囲が広いままの要求の例
要求 MAL01 送信および受信した電子メールをキーワードで検索したい 理由 説明 メールが多くて、 関連するメールを探せない
細かな指定の仕方や検索結果の表示、 発見されたメールの表示方法なども仕様化して おく必要があることには気づかない可能性があります。
一般に書かれている要求仕様書には、 「要求」 そのものが表現されていないため、 必要な仕様を抽出するのは難しいのです。そのような要求仕様書では、必死になって 仕様モレを防ごうとすること自体が虚しい行為ともいえます。
□8.7.1 「範囲」 が見えることで仕様が引き出せる 要求の求める範囲が広いと思われるときは、 分割 階層化のテクニックを使って要 求の求める範囲を狭くすることで、 仕様を抽出する際に特定の場面に集中できます。 次ページの表8.7は、 「電子メールのグループを指定して、そこからキーワードで検 索したい」という要求を一段階層化したものです。 これによって仕様の抽出は、 「い くつかのキーワードを組み合わせて検索できる」 という要求の下では、キーワードの 指定の仕方に関することに特定して仕様を抽出することができます。
また、 「検索された電子メールのリストを表示し、そこから目的のメールを選択する」 という要求の下では、 一覧表示の仕方とメールの選択方法に限定したなかで、扱いや すくなるような仕様を考え出せばよいことになります。
このように階層化された要求の下では、 抽出される仕様が30個も40個も並ぶこと は滅多にありません。 そのような場合は、 一般に要求の範囲が広すぎると考えられる ので、階層化するかそのまま要求を分割して一つの要求が扱う範囲を狭める必要があ ります。
そうして狭められた範囲のなかでは、 仕様を抽出する作業はいままでと違って大い にはかどるのです。 これまでの要求仕様にまつわる問題のなかには、 仕様化作業に時 間がかかることが背景になっていることがあります。 その製品にはどうみても数千項 目もの仕様が存在すると思われ、 いったいどれだけの時間がかかるのか想像できない ために、 「膨大」 という文字が頭にちらついて邪魔をします。 1時間で40項目の仕様 を抽出できれば、5000項目の仕様はわずか130時間で抽出できるのです。 1時間に
8.7 要求の階層のなかで仕様を捉える 233
表 8.7 要求を階層化した例
要求 MAL01 電子メールのグループを指定して、そこからキーワードで 検索したい 理由 メールが多くて、 関連するメールを探せない 説明 要求 MAL01-01 理由 表示されたメールの検索グループの中から一つを指定する 仕事上のメールとニュース等のメールを分けて扱いたい 説明 要求 MAL01-02 理由 いくつかのキーワードを組み合わせてメールを検索できる 可能性のあるキーワードで探したい 説明 要求 MAL01-03 検索結果と検索された電子メールのリストを表示し、そこか ら目的のメールを選択する 理由 目的のメールが一つとは限らないので、 内容を確認する必要 がある 説明
「電子メールのグループを指定して、そこからキーワードで検索したい」という要求を、 3つの要求に分割したことで、 今度は、 範囲が絞られた要求の中で仕様を抽出すれば よい。
40項目を抽出するのは、ある程度慣れてこないと難しいと思いますが、 多少不慣れ な状態でも1時間に30項目ぐらいは可能です。 それでも170時間です。 慣れればも う少し早くなります。
問題は、 投入した時間に対して適切な項目数が生み出せないために起きています。 USDM による仕様の表現方法を使えば、それぞれの階層化された要求の下では仕様は スムースに抽出できます。
もし、そこにある要求の下で仕様の抽出がはかどらないような場合は、要求の表現 を疑って下さい。
要求で求めている範囲が見えるか?
要求の範囲が広すぎないか?
第8章 要求を仕様化する
理由が要求の意図を示すように適切に表現されているか?
この要求の下で何ができればよいのか?
それぞれの仕様はどのような状況で動作すればよいのか?
234
動作した結果はどのような形で返すか ?
といったことに注意を払って仕様化してください。
8.8 さらに範囲を狭めるためのグループ化
ここで紹介しているのは、 要求を分割 階層化して要求の求める範囲を小さくする ことで、 個々の要求のなかで仕様の発散を減らして仕様モレや仕様の衝突を防ぐ方法 です。
しかしながら、 要求を分割 階層化したとしても、 要求によってはそのなかに含ま れる仕様の数が多くなることがあります。 おそらく、この方法に慣れてきて要求の分 割・階層化が上手くできるように工夫できればこのような状態も少しは改善すると思 われますが、 最初から理想的な大きさの要求を立てることは容易ではありません。 し たがって、 要求の粒度のバラつきから、仕様が10数個~数10個になるような要求も 出てくるものと思われます。
1つの要求のなかにリストされる仕様が多くなると、必然的にいろいろな場面につ いての仕様が混ざり、 焦点がぼやけてしまいます。 たとえば、
設定などのその機能の動作条件についての仕様
データを計算する際の種類についての仕様
計算結果の表示方法についての仕様
計算結果の保存についての仕様
などの仕様がリストアップされ、 それらが何の規律もなく混じってしまうと、せっか く要求の範囲を狭めたメリットが薄れます。
そのような場合は、 次ページの表8.8のように、 仕様として触れていることの対象 の違いなどからグループに分けて、 さらに集合を小さくし、 できるだけ混じり気のな い仕様のグループを作ることが大事です。
表8.8に列記されている仕様はわずか8個です。 これだけでも何の規律もなくリス ト化されてしまえば、 仕様モレを発見することは困難になります。
8.8 さらに範囲を狭めるためのグループ化 235
↓表8.8 仕様が< > 記号でグループ化されている様子を示した例 要求 FND07 理由 検索結果と検索された電子メールのリストを表示し、そこから目的のメ ールを選択する 目的のメールが一つとは限らないので、 内容を確認する必要がある FND07-5 FND07-6 FND07-1 検索されたメールの件数を一覧の上に表示する 1件以上発見されたときは、メールの 「Subject」 を一覧で見せる 検索されたメールに連続番号を付けて表示する FND07-7 FND07-10 一覧から1つのメールを選んで、 その内容を見ることができる 検索されたメールの件数が10件を超えるときはスクロールバーを見せ る FND07-11 開示されたメールの中にある検索キーワードと一致している文字列を赤 色で表示する
「グループ化」 は、グループをあらわす記号 (<>) を使って適当なグループ名 (名 詞形で記述する) を挟みます。
というのがグループ名です。
抽出された仕様がいくつかの対象を扱っていると判断されるときは、対象をグルー プで表現して、 抽出された仕様をそれぞれのグループのなかにまとめます。 グループ の大きさのめどとしては、「7±2」 を参考にしてください。 この数字は厳格なもので はありません。 グループ化した結果、 あるグループには仕様が1つしか含まれないこ とも起きてきますが、グループで分割した場合は、一般に、 個々のグループのなかの 仕様は数個程度に収まると思います。
このほか、グループで区切る際の注意として、 表8.8のように仕様の項目番号をグ ループ名で遮ってください。 明確にグループで区切られていることによって、範囲を 狭める効果が得られます。
また、グループ間は、番号に少し余裕を持たせてください。 それによって、あとで 仕様の追加があっても番号体系を維持することができます。
要求を分割・階層化し、さらに仕様をグループ化するのは、 仕様のモレを発見しや
236 第8章 要求を仕様化する
すくするためです。 せっかく仕様のモレを発見しやすくしたのに、番号に隙間がなけ れば、発見された仕様を追加するのに適切な番号を持つことができなくなります。 表8.8の事例では、グループ間の番号に隙間を空けています。
□8.8.1 要求の分割基準を準用
グループによる仕様の分割も一種の要求の 「分割」 なので、 分割の基準は要求の分 割のところで使った4つの基準が応用できます。 ただし、この場合は 「共通分割」 は 実態に合わないので、 実際には
時系列分割 構成分割 状態分割
の3つでおおむね対応できると思います。
たとえば、 表 8.8のも操作の時系列で分割されていて、 読み手のほう も時間の流れのなかでこれらのグループを認識することで、グループの欠落やそのな かの仕様のモレを発見しやすくなるのです。
大事なことは、 による仕様の分割も、 明確な基準に沿って行うことで グループ間に隙間が発生するのを防ぐことです。
ちなみに、 要求を階層化した際に下位層の要求が多くなってしまうと、 要求 そのものも発散してしまい要求のモレに気づかない可能性がでてきます。 その ような場合は、 次ページの表8.9のように要求そのものを“グループ化” して 整理することも有効です。 このとき、 グループ名は2層目の 「要求」の欄をさ えぎってください。
□8.8.2 グループ分けのパターン化||||| 要求の下で仕様を抽出する際に、 を先に設定する方法があります。 た とえば、
「お湯が沸いたら知らせる」
という要求では、 との2つが特定されていない部 分として見分けることができると、あとはこれをにしてその枠のなかで
8.8 さらに範囲を狭めるためのグループ化 237
↓表 8.9 要求をグループ化した例
要求 MAL01 印刷開始時も含めてインクの残量を計ってインクが不足する可能性があれ ばPC上に知らせる 理由 途中でインクがかすれることがないようにしたい 要求 MAL01-01 印刷開始時にインク残量を入手する 理由 要求 MAL01-02 残量のレベルと印刷枚数からインク切れが起きる可能性があ ればPC上に表示する 理由 要求 MAL01-03 交換操作を行ったときは、交換の確認ができれば印刷を開始 する 理由 要求 MAL01-04 プリンター側に印刷中にインクの残量を計って監視するよう に指示する 理由 要求 MAL01-07 印刷中にインク切れを監視し危険があればPC側に知らせる 理由 要求 MAL01-10 理由 プリンター側からの通知を適切にPC上に表示し対応を求める
仕様を抽出すればよいのです。 このように、 先に適切なグループが設定できるのであ れば、グループを設定したほうが仕様の抽出が容易になります。
また、コマンド処理のように類似の機能要求がいくつか存在する場合、 一つの要求 のなかで扱ったグループのセットがほかの機能にも当てはまることがあります。 グル ープのセットを 「テンプレート」 として使うわけです。 その結果、 ここから先はグル ープの枠内に範囲を狭めてから仕様を引き出すことができます。
一般に、要求が 「構成分割」 や 「状態分割」 で分割・ 階層化されたときにこの方法 が使えることが多く、 経験を重ねると、 要求を構成分割した時点でもっともグループ が豊富に現れそうな要求を見つけることができ、 そこで仕様化に取り組みます。 グル ープ名はその過程で発見されることになりますが、そこで発見されたグループ名のセ ットはほかの要求にも当てはまることが多いのです。
たとえば、
238 | 第8章 要求を仕様化する
というようにをパターン化できることがあります。 こうしたパターン を「テンプレート」 として使うことによって仕様モレが起きにくくなります。 このよ うに先にグループ名が設定されると、あとは “芋づる式” に仕様を引き出すことがで きます。
また、 をパターンとして使った場合、 要求によってはグループに適 当な仕様が存在しないことがありますが、 そのような場合は
該当なし
という形にすることをお勧めします。
□8.8.3 "動詞" からグループを設定する方法 この他に、要求のなかの動詞から仕様を引き出すためのを設定する方 法があります。
一般に機能要求においては、 2層目の要求のように十分に範囲が狭められた要求で は、そこで実現してほしい動きをすべて 「動詞」 の形で表現できます。 この 「動詞」 をヒントにを設定します。
たとえば、
「表示ボタンを押したら、 そのときに受信している複数のデータを色分けして表 「示する」
という要求の場合、
88 さらに範囲を狭めるためのグループ化 239
「(ボタンを) 押す」
「受信した (データ)」
「(複数のデータを) 組み合わせる」
「(複数のデータを) 色分けする」
「(データを) 表示する」
という動詞とその目的語が見えます。
つまりこの要求は、これらの動きを詳細に仕様化し、 それを実現するためのソース コードが記述されることで満たされることがわかります。 ここから以下のような仕様 のが設定できます。
あとは、それぞれのごとに、必要な仕様を抽出するだけです。 そして、 この後の仕様化の作業には多くのSEを投入して、 一気に仕様化を進めることもでき ます。
このように、要求の範囲が狭められた状態になれば、その要求に必要なすべての動 詞」を表現することができます。 そしてそれぞれの 「動詞」 を中心に仕様のを設定することで、仕様がほとんど漏れることなく抽出できるのです。 これが 「USDM」 の特徴です。 またレビューアも、 要求の範囲が狭められていることで、 そ こに隠れた動詞がないかを探すことは難しくありません。
そして、それぞれのの中で引き出された仕様は、基本的に単一の 「動 詞」 に対する仕様になっており、 その適切さの判断、 さらには必要な仕様が不足して いるかどうかの判断は容易にできると考えられます。
こうした一つの動詞に対して仕様のを設定する方法は、 構造化設計で 提案されている 「機能的凝集」というモジュールの尺度に対応しやすいこともわかっ ています。 実際、 多くの場合、 この仕様のが一つの関数に対応します。 これによって、 設計との対応付けもスムースに運ぶのです。
第8章 要求を仕様化する
□8.8.4 要求の代役としてのグループ この、による分割は、要求の階層化に代わる表現方法でもあります。 たとえば、計測ファイルを呼び出して、いろいろな計算式で計算してグラフにして表 示することに関する仕様が抽出されているなかで、
というグループ名は、
「REQ.05 レコード内のなかの項目数が不定な計測データをもれなく処理する」
とすれば 「要求」 の表現になり、その下に繰り返しのデータ数を判断する方法や、 カ ウントの仕方に関する仕様が記述されることになります。 この意味では、 でも要求の階層化でも同じ効果が得られます。
ただし、 の代わりに「要求」 の表現を使うと、 要求がさらに一段階層 化されることになるため、 固有の番号の桁が増えてしまいます。 あまり桁が長くなっ たり、このことで部分的に階層が深くなったりすると混乱することがあるので、 その ような場合はを使って階層が必要以上に深くなることを防ぎます。
ただし、 は基本的には“名詞” で表現するので、 注意しないと「範 囲」をイメージしにくい表現になってしまいます。 たとえば、
といった表現では、 どのような動作や選択を扱おうとしているのかがわかりにくく、 そこに展開される仕様が要求を満たしているかどうかを判断することが難しくなりま す。 グループ名>に要求の性質を持たせるためには、 範囲をあらわしていることを 意識してグループ名を選んで下さい。
名詞だと範囲を表現しにくいというので、 のよう に“動詞” で表現しようとすると、要求なのかグループなのか判別できなくなります。 これが要求だとすれば 「理由」 がほしいし、 要求の表現が中途半端で 「範囲」 も曖昧 だったりします。 それよりも、 本来なら階層化された要求として表現すべきところを 中途半端に 「要求」 が使われる危険があるので、 グループ名を "動詞" で表現するこ とは避けて下さい。
240
8.9 シナリオ機能と単純機能の違い 241
このは要求の代役ということで、 要求を階層化して範囲を狭める作業 のなかで、 動詞に着目してこのような仕様のを設定することは許される 範囲です。 逆にこの段階でを記述することで、 要求の記述の中に適切な 「動詞」 を表現することができます。 ただし、その先の 「仕様」 の抽出作業は、要求 (仕 様のグループを含む) の記述をひととおり終えてからにしてください。
8.9 シナリオ機能と単純機能の違い
コンサルティング先の担当者から、
「仕様化しているときに同じ仕様が何度も出てくるのですが、 これはどうすれば よいのでしょうか」
という質問が出されることがしばしばあります。
これは、 機能要求を仕様化しているなかで起きます。 機能要求には 「単独の機能要 求」 と 「シナリオ的機能要求」 の2種類があり、 要求が 「シナリオ」の性質を持つ場 合は、異なるシナリオ要求のなかに同じ 「機能の仕様」 が出現することがあります。
たとえば、銀行の 「ATM」 では、 「入金」 とか 「出金」 「送金」 といった 「機能」 の 要求を階層化 (または仕様化)していくなかでこの状態に遭遇します。 表8.10は、 要求の階層化を使って「入金機能」 の要求を階層化したものです。
↓表8.10 シナリオ機能 (入金機能) を階層化した例 入金機能
要求 ATM.1 カードまたは通帳から確認した口座に対して、任意の現金の入金を受付け、 結果をレシートまたは通帳に印刷する 理由 説明 要求 ATM.1.1 カードまたは通帳を読み込んで口座番号を取得する 理由 要求 ATM.1.2 取得した口座番号が適正な口座であることを確認する 理由 要求 ATM.1.3 適正な口座であることが確認できた時点で入金希望額の確 認と現金の投入を受付ける 理由 要求 ATM.1.4 入金された金額を口座に加算する 理由
第8章 要求を仕様化する
要求 ATM.1.5
処理結果を通帳またはレシートに印刷する 通帳に印刷するときは未記帳情報も一緒に記帳する
理由
このとき、 「ATM.1.1 カードまたは通帳から口座番号を読み取る」 や 「ATM.1.5 処理結果を通帳またはレシートに印刷する。 通帳に印刷するときは未記帳情報も一緒 に記帳する」 という要求は、ほかの 「出金機能」 や 「送金機能」 の階層化のところで も出てきます。 したがって、 それぞれ階層化要求のところで仕様に展開した場合は、 間違いなく仕様が重複します。 かといって 「入金機能」のところで仕様に展開して、 そのほかの箇所では 「入金機能の項を参照」 とするのも保守性が悪くなります。
シナリオ要求の場合は一般に、このような「機能の重複出現」 の問題がつきまとい ます。 したがって、 この場合は 「共通分割」 によって
242
要求 KOZO2 カードまたは通帳から口座番号を読み取る
という形で 「純粋な機能要求」 として独立させ、 そこで、
カードまたは通帳を選択する方法
カードから口座番号を読み取る方法や読む際の制限
通帳から口座番号を読み取る方法や、 通帳であることに起因する読む際の制限 本人確認の方法
カードや通帳からの読み取り時のエラー処理
について仕様化し、 入金機能や出金機能などの要求からは 「参照」 する形にするのが よいでしょう。
なお一般には、ここで挙げた 「ATM.1.1」 から 「ATM.1.5」 程度の表現だと、仕様 と認識されているかもしれません。 もし、 今回のプロジェクトに参加している関係者 がこの程度の表現で仕様モレもなく実現するのであれば、 「認定仕様」 として仕様に なっていると認めますが、 通常はこのような表現では 「仕様」 とは認められません。
たとえば、仕様のなかで、 カードの読み方や口座の判定方法、レシートの印刷内容 などが具体的に特定される必要があります。 関係者の間で特定できていないにも関わ らず、このような状態のまま 「仕様」 として作業を進めてしまうために、 設計や実装
8.9 シナリオ機能と単純機能の違い 243
のところで行き詰まってしまい、 そこで作業を中断して依頼者にカードの読み方や判 断方法などを確認するメールを打つことになるのです。
☐ 8.9.1 ユースケースだけでは仕様を拾いきれない
オブジェクト指向によるソフトウェア開発が広がりをみせるなかで、要求の表現に 代わるものとして「ユースケース」 が使われることが多くなっています。 確かに、ユ ースケースは要求に対応させることができますが、 そこでは 「シナリオ」 的な要求を 扱うことが少なくありません。
「シナリオ」の特徴は“フローチャート”になりやすいことです。 そのために、 シ ナリオで表現したままでは前述したように必要な仕様を見落とす可能性が高くなりま す (8.10 「フローチャートの落とし穴」 を参照)。
ただ、UMLでは、シナリオはクラス間シーケンスと対応させることで、 シナリオの 基本的なシーケンスを検証する目的があります。 最近ではシナリオに代わって「ユー スケース記述」 を使う方法があるようですが、 この場合は確かに従来の記述方法より も 「仕様」を表現しやすくなると思われます。
ただし、ユースケースから 「仕様」 を引き出しやすくするために、 ユースケースの 粒度が小さくなって、いわば単一の動詞を扱う傾向があり、 その場合は必要な 「動詞」 がモレる可能性があります。
そこで、この問題を解決する方法として、ユースケースを「上位要求」 と捉え、 シ ナリオのレベルを 「階層化した要求」として表現し、 具体的な仕様は階層化した要求 の下に展開する方法があります。 表8.11 -a の 「SEKI01」 はユースケースとみなすこと ができます。 このとき、 「SEKI01.1」 から 「SEKI01.5」 はシナリオに相当します。 そし て仕様は、 階層化された要求 (「SEKI01.1」 ~ 「SEKI01.5」) の下に展開します。
Actor とユースケースを使うことで、 要求の存在に気づきやすくしてくれます。 「モ デル」 の効果です。 その効果を活用して要求を抽出し、 あとはシナリオに展開しさら に仕様に展開するのです。
↓表 8.11 - a 上位要求をユースケースに見立てた例(1)
要求 SEKI01 操作画面から指定された講演の座席を予約し、 代金を引き落として予約番 号を表示する 理由
第8章 要求を仕様化する
要求 SEKI01.1 会員番号が入力されることで講演名が表示された開始画面を表 示する 理由 要求 SEKI01.2 理由 要求 SEKI01.3 開始画面から講演名を1つ選択することで、 座席の予約状況を 知ることができる 講演の座席の予約図を見ながら空いている指定席の座席を予約 できる 理由 要求 SEKI01.4 理由 予約が成立したときは、料金は事前に登録されているクレジッ トの口座から引き落とす 要求 SEKI01.5 予約番号とバーコードを含んだ予約結果を画面に表示し印刷を 勧める 理由 說明 表示された予約結果は予約者の方で印刷して会場に持参する
↓表 8.11-b 上位要求をユースケースに見立てた例(2)
新規登録に必要な情報を入力して書籍DBを更新し、 書籍に貼る管理用シー ルを印刷する 管理に必要な情報をDBに登録する必要がある 新規登録画面の中で新規に登録する書籍のISDN番号または書籍 名を入力し、既に登録されているかどうか書籍DBを検索する 追加の購入に対して同じ情報を入力するムダを省くため 要求 Lib10 理由 要求 Lib10.1 理由 要求 Lib10.2 理由 要求 理由 これで 「在庫」 状態になる。 管理シールはこのあと書籍に貼る 新規登録画面の入力ボックスに書籍属性を入力し、 登録する書 籍の数を入力する 書籍検索に耐えるための情報となる 「登録」ボタン押下で、 数分だけ書籍情報を作成して書籍DB Lib10.3 に登録し、 管理用シールを册数分印刷する。 既存書籍の場合は 册数が更新される
8.9.2 “フローチャート” の落とし穴 ||||||||||| 要求に対する 「仕様」の記述が“フローチャート” のように “流れ” で表現される ことがあります。 仕様の記述が “流れ” を含むことは「シナリオ」 的な機能では自然 ですし、そのこと自体悪いわけではありません。 ただ、 “フローチャート”になって 一連の処理として“完成” した状態が表現されていることで、 そこに何が欠けている
8.9 シナリオ機能と単純機能の違い 245
のか気づきにくいという問題があります。 見かけ上は仕様の不足を感じないために、 納得してしまうのかもしれません。
たとえば、表8.12のように「“終了” するまで "CAL09.1" を繰り返す」 と露骨に フローチャートの特徴が現れるケースは多くありませんが、仕様を 「構造化記述言語」 で書く方法が普及したこともあって、このような流れを持つ表現をしばしば見かけま す。 しかしながら、 仕様がフローチャートになることによって、
位置データを使用する前に内容をチェックする必要はないのか?
XXコードに一致しない事はないのか? 一致しない場合はどうするのか?
計算結果を表示する際の桁取りは?
表示範囲を超えた場合は?
繰り返す条件は “終了” だけか?
ということが見えにくくなります。 仕様がフローチャートのように表現されることで、 例外条件など本流からはずれた仕様が忘れられてしまう可能性が高くなるのです (最 近のユースケース記述では などのキーワードを使って対応しているよう です)。 これが“フローチャートの落とし穴” です。 もちろん、この段階でモレた仕 様のいくつかは、 実際には設計作業やコーディングのなかで気がついて、 一連の確認 作業を経てソースコードに組み込まれると思われますが、 手戻り作業が発生すること は避けられません。
↓表 8.12 フローのように流れを持つ例
☐ CAL.09.1 PCから到着した定点測量ファイルを読んで位置コードを取り出す ☐ CAL.09.2 定点ファイルのデータの中から位置コードが一致する定点データを取り出す ☐ ☐ CAL.09.5 計算結果を画面の 「測定一覧」 に表示する □ CAL.09.6 PCから到着した定点測量ファイルが“終了するまで "CAL09.1" を繰り返す
では仕様が“フローチャート” になりそうな場合はどうすればよいのでしょうか? 対応策としては、 を使います (8.8 「さらに範囲を狭めるためのグル ープ化」 を参照)。 たとえば、
第8章 要求を仕様化する
といったくグループ>を使って仕様の流れを区切る (流れを切る)ことで、隠れてし まいそうな仕様が引き出しやすくなります。
その結果、 処理を繰り返す条件はファイルの終了だけでなく、 ファイル入力に失敗 したときや最初からファイルが空っぽのとき、 さらには、 「中断」 ボタンが押された ときなど1つではないことに気づきます。 そして、 現在の 「後ろ判定」 の位置に記述 されていると設計ミスを招きかねないので、 というグルー プ名にして 「前判定」 の位置に移動すべきことに気づきます。
8.10 仕様と要求の混在の問題
一般に、依頼者のほうでまとめられた要求仕様書には、 要求なのか仕様なのか、は たまた説明なのかがよくわからない状態で混じっていることが多いものです。 また、 設計者のほうでまとめた要求仕様書でも、 実際には仕様になりきらないままの表現が 混じっていることがしばしばです。 関係者の間では、 その状態で "合意” しているこ とになっているのですが、 本当のところはその状態で “Specify" できていることは ほとんどありません。 当然、このような状態の要求仕様書のまま設計にとりかかると、 仕様モレや仕様の矛盾が頻発することは避けられません。
この場合の対応としては、次の2つの方法が考えられます。
●仕様になりきっていないものを要求と位置づけて、その下に新たに 「仕様」を展 開する
②曖昧な記述部分を具体性のある用語に置き換えて仕様として存在させる
ただし、1の場合は、 このまま要求を階層化する (一段下の階層に落とす) のは、 現在書かれている 「仕様」 が、 最上位の要求の下に展開されているときに限ります。 この状態が2層目のところで起きているのであれば、 そこでさらに階層化するとこの 部分だけが 「3層」 になってしまいます。
中途半端な仕様を要求に変身させるとしても、その要求が存在することになる位置 で要求の階層を揃えなければなりません。 図8.1はこのときの様子を示していますが、 図8.1の(A) のケースでは、周りの仕様も適当な要求を設けてそのなかに収容する必
246
8.10 仕様と要求の混在の問題
幕図8.1 中途半端女仕様混クㄧㄡ
ク一ㄡA
要求
仕様
要求
仕様
要求
仕様
仕様
仕様
仕様
仕様
要求
仕様
仕様
仕様
仕様
仕様
要求
000 仕様 仕様
問題の仕様を要求に対応させることで、周囲の仕様も適当な要求を設定し 子、老の下配置寸る。
ㄅㄧㄡB
要求
仕様
仕様
要求
仕様
要求
仕様
要求
仕様
仕様
仕様
要求
仕様
仕様
要求
仕様
仕様
要求
仕様
仕様
仕様
仕様
仕様
要求
仕様
仕様
要求
問題の仕様を分割して仕様としての完成度をあげたり、 上位に新たに要求 を配置してそこに収容する。 その過程で隣の仕様も専用の要求を設置する 必要が生じることもある。
247
248 第8章 要求を仕様化する
要があります (「8.11.3 仕様を裸にしない」 を参照)。 これに対して図8.1の (B) のケ ースは、(A)のようにその位置で要求にすると3層になってしまいます。 したがって まずは、問題の仕様 (仕様になりきれていない仕様) を適当に分割 整理して既存の 上位要求のなかにそのまま収めるか、 分割 整理したところで上位に新たに要求を設 けて、そこで下位の仕様を振り分けることになります。
関係者が、 要求と仕様の違いを認識しそれなりに仕様化に慣れるまでは、この混在 の問題はしばらく解消しないかもしれません。
いずれにしても、設計者は仕様化のスキルの習得を急がなければ仕様モレを防ぐこ とができません。 まずは設計者のほうで要求レベルの表現を適切に仕様化することに 取り組むことをお勧めします。 設計者は、 どうせ仕様をイメージできなければ設計で きないのですから。
同じようなことが、 ヒアリングのなかでも起きることがあります。 特に、 要求の 確認や、階層化のヒアリングの場において、 聞き手の理解を促すために 「たとえば ･･････」という切り出しで 「仕様」 が示されることがあります。
このときの仕様は、必ずしも話しの流れに沿った形で示されるとは限りません。 そ れは、話しのなかで話題が反れていったり飛躍したりすることがあるからです。 それ でも、 事前に 「体系」 を示したり、 要求をまとめたものや要求を階層化したものを用 意したりすることで、いま説明された仕様がどの要求に収まるものか判断できるし、 その場で依頼者に要求のリストを見せて仕様の収容先を相手に確認することもできま す。いずれにしても、事前に要求のリストなどを準備していかないと、 ヒアリングの 場でこの飛躍に振り回されることになります。
8.11 仕様から要求を立てる
製品になったときに実際の動きとなって見えるのは、すべて仕様です。 「沸騰」 ボ タンを押せば湯沸かしを開始したり、 一定の温度に達すれば湯沸かし動作を止めて沸 騰したことをチャイムで知らせたりするのも仕様です。 銀行のATMの前に立つと、「操 作を選択して下さい」 とマシンのほうからしゃべりながら自ら画面を変えて操作を誘 導するのも仕様です。
いや、正確にいえば、仕様をソースコードに変換したものが作動しているのです。 このとき、要求そのものは見えません。 要求は抽象的な概念であって、 具体的な動作
811 仕様から要求を立てる 249
を持った実現対象ではないので、外からは見えません。 要求は、目に見えたり動いた り聞こえたりする仕様から想像するしかないのです。
最近の風呂は、温度や水量の管理を自動でやってくれます。 設定されたレベルでお 湯のバルブを閉じるのも仕様です。 そのほかにも、 風呂が沸いたときに 「お風呂が沸 きました」とかわいい声で知らせてくれます。 この 「お風呂が沸きました」としゃべ る仕様の要求は、 きっと
「沸き上がったら知らせる」
というものでしょう。 その要求のなかで、 沸き上がりの判断やアナウンスの仕方に関 する仕様が定義されていて、そのアナウンスの仕様が声になって聞こえるのです。
ところがこの風呂は、もう一つ別のタイミングでしゃべるのです。 それは、「もう すぐお風呂が沸きます」 というもので、これをしゃべるのは 「お風呂が沸きました」 というアナウンスの約1分ほど前です。 この仕様の要求は、 「沸き上がったら知らせる」 ではないことは誰にでもわかります。 まだ設定されている水温に達していないのです から。 では、この 「もうすぐお風呂が沸きます」 という仕様の要求は何でしょうか?
可能性としては2つ考えられます。 1つは、「“お風呂が沸きました" という沸き上 がりのアナウンスを聞き逃さないために、 少し前に予告する」 という要求です。 もう 一つは、前者の要求と少し絡みますが、 「光熱費の無駄を減らす」 という要求です。
この風呂のメーカーの人と話をする機会があり、この点を確認すると、 「最短時間
で風呂に誘導するという “要求” があったと思います」という返事が返ってきました。 ミネラルウォーターやお茶のペットボトルのキャップを開けるとき、3回転が必要 なものから、約半回転で開くものまで3種類あります。 これも 「仕様」 です。 ネジ溝 の切り方が違っているのです。 3回転必要なキャップは途中でキャップを持ち替える 必要がありますが、 半回転で開くペットボトルのキャップはその必要はありません。 ここから、 どのような要求があったのだろうかと推測します。 たとえば、(サッカー などの) スポーツの試合の最中に水分補給しやすい」 とか、 「指の不自由な人や高齢 者にも優しく操作できる」 といった要求が想像できます。
このように眼に見えるもの、耳に聞こえるもの、 操作できることは、すべて仕様で す。 そこから「この要求は何だろう?」 と、 要求を考えるのです。 店の棚に並んだ商 品を見ても、 家庭のなかの電機製品を見ても、TVのコマーシャルを見ても、 プロ野
第8章 要求を仕様化する
球の練習風景を見ても、JRの駅員の行動を見ても、 「この要求は何だろう?」 という 視点で要求を探るのです。 多くの人は、 「仕様」 には慣れていますが 「要求」には不 慣れです。 普段から仕様にふさわしい要求を表現する練習をすることで、 本番でスム ースに要求を表現できるようになります。 こうして、 日常のなかで仕様にふさわしい 要求を設定するスキルを養う方法もあるのです。
□8.11.1 要求を立てる意味
本書で勧めている要求仕様書のテンプレートには、 必ず 「要求」 と 「理由」 を書く ようにしてありますが、一般に Wordで書かれている要求仕様書の場合、仕様が明確 な形で要求に包まれていることはほとんどありません。 第6章の表 6.1 に示したよう に、カテゴリをあらわす項目名の下に、いきなり仕様と思われる項目が思いつくまま に羅列されているのがほとんどです。 そこでは、それぞれの仕様がどのような 「要求」 に属するのかということは見えるようになっていません。 仕様と要求の関係を意識し て書かれていないからです。 そこからわかるのは、「それらの仕様は、確かにその機 能カテゴリに属するものであろう」ということだけです。 その結果、 抽出されるべき (実現されるべき) 仕様が漏れてしまいます。
昔、 男子用のトイレで、 使用後にその場を離れると自動的に水が流れる仕様が入っ た製品を初めて見たとき、いつものように “この要求は何だろう?" と思いました。 単に 「水を流すためのボタンを押し忘れてもかまわないようにする」ことか、あるい は 「タンクに溜めた水を定期的に一斉に流すのに対して節水効果を狙う」ことか。 い やいや、そもそも使用後に水を流すのは汚れの付着を防ぎたいのだろうから、 「使用 後に自動的に水を流すことで、 使用に伴う汚れの付着を “確実に " 防ぐ」 という要求 があってもよいのかなと、 あれこれ想像したものです (表8.13)。
↓表 8.13 自動水洗の要求は?
WTRO1-1 要求 使用後に自動的に水を流すことで、 使用に伴う汚れの付着を確実に防ぐ 理由 使用後にすぐに水を流さないと汚れが付着しやすい
| 使用後に自動水洗される製品を見て、 勝手に想像した要求。
こうして要求を立てたことで、 それなら状況によっては 「使用前にも一定量の水を
250
8.11 仕様から要求を立てる 251
流す」 という仕様があってもよいのに、と思ったのを覚えています。 設置場所によっ ては、週末はまったく使用されないため使用される間隔が開いてしまうことがあり、 そのような場合は、 使用前にも水を流したほうが汚れの付着を少なくできるからです。
それから数年後、 実際に使用前に水を流す機能を持った便器が別のメーカーから登 場しました。あのとき、 仕様から要求を立てることで、 使用前と使用後に自動的に水 を流す仕様に気づいていれば、この機能は完全に独占できたのかもしれません (ただ し、これは筆者の勝手な想像で、 実際に両方の機能を実現できなかったところにどの ような事情があったのかは知りません)。 仕様から要求を立てることで、その仕様に 関連する仕様を一気に引き出すことができるのです。
また、 ある企業を訪れたとき、 そこに製品がずらっと並んでいてそのなかの古くな った製品のなかに面白い動きをする仕様がありました。 その企業の人に 「この動きは どういう意味を持っているのですか?」と聞くと、 「いや、 昔からうちの製品にはこ の仕様が付いているのです」 という返事が返ってきました。
確かに、 新しい製品にも同じ動きをする仕様が組み込まれています。 しかし、 この 仕様の要求や理由がわからない状態ではいつまでも “同じ仕様” を引きずることにな り、時代の変化のなかで、 顧客 (市場) が求める仕様を提供できなくなる危険があり ます。 「要求」 に立ち返ってみれば、いまの時代に適合した新しい仕様か、もっと効 果的な仕様が出てくるかもしれません。
□8.11.2
ふさわしい要求に収容する効果
要求に理由を付けたり、 要求の範囲を狭めたり、さらに仕様をグループ化したりす ることで、それまで一連の仕様として並んでいたなかに性質の異なる仕様が浮き上が ってくることがあります。 また、 要求のなかにリストアップされた仕様を何度か振り 返っているうちに、「こういう仕様も必要ではないか」と要求の範囲の境界付近の仕 様が追加されることがあります。 時間的な順序のなかで、こういう仕様が付加されや すいのです。
その結果、 要求や理由を共有しないと思われる仕様が混じってしまい、前後の仕様 と“次元 (範囲)" が違っていたりすることがあります。 ちょうど、 「みにくいアヒル の子」 の状態です (次ページ表 8.14)。
第8章 要求を仕様化する
↓表 8.14 みにくいアヒルの子の事例
要求 MAL01-02 いくつかのキーワードを組み合わせて検索できる 理由 可能性のあるキーワードで探したい ☐ MAL01-02-1 検索したいキーワードを入力できる ☐ MAL01-02-2 複数のキーワードを 「AND」 と 「OR で繋ぐことができる MAL01-02-3 キーワードは最大8個まで指定できる MAL01-02-4 検索されたメールの 「Subject」 を一覧で見せる
「MAL01-02-4」 の仕様が、ここにある要求と理由を共有しない。
このような例は頻繁に起きているのですが、 一般に書かれている要求仕様書では「要 求」 を表現していないために気づかないのです。 たとえば、
3.5 温度監視機構
・ウォームアップ完了時から遡って30秒間の平均温度をベース温度として取 得する
・平均温度は、このほかに 「平均温度取得ボタン」 が押下されたときも、 そ の時点から遡って30秒間の平均温度を取得する
. 平均温度の単位は0.1度とする
30秒間の温度データの上下幅が10度以上開いたときは平均値として採用 しない
・平均温度を取得するポイントは測定ポイント設定で指定できる
・測定ポイントは1カ所から最大5カ所まで設定可能
・平均温度は、監視モニターの各ユニット単位に表示する
というのが一般的な要求仕様の表現です。 ただし、 最後の仕様はそれまでの仕様と違 って表示について触れたものですが、 これらの仕様はすべて温度監視機構に関する仕 様であることは間違いないのと、 範囲を持つ 「要求」 が表現されていないために特に 違和感なく受け入れられてしまいます。
表 8.14 では、MAL01-02-1~3は検索する際の仕様なのに、 MAL01-02-4は検索結 果の扱い方に関する仕様です。 このような場合は、 問題の仕様が所属すべき要求が違
252
8.11 仕様から要求を立てる 253
っている可能性が高いので、 「その仕様が何について触れているのか」を考えふさわ しい要求に収容するか、あるいは新たにふさわしい要求を立ててそこに収容すること になります。 この場合は、 MALO1-02-4にふさわしい 「要求」 を設定して、 そこに収 めることにします。
表 8.15 では、 「検索結果と検索された電子メールのリストを表示し、そこから目的 のメールを選択する」 という要求を設定し、 そこに収めることにします。 当然、 最初 はその 「1つ」 の仕様しかありません。 仕様番号も変わります。 もちろん、 新しく立 てた要求にもその要求が必要である 「理由」 を書くことはいうまでもありません。
↓表 8.15 新しい要求が立てられた例
要求 MAL01-02 いくつかのキーワードを組み合わせて検索できる 理由 可能性のあるキーワードで探したい MAL01-02-1 検索したいキーワードを入力できる MAL01-02-2 複数のキーワードを 「AND」 と 「OR」 でつなぐことができる MAL01-02-3 キーワードは最大8個まで指定できる 要求 MAL01-03 検索結果と検索された電子メールのリストを表示し、そこから目的の メールを選択する 理由 目的のメールが一つとは限らないので、 内容を確認する必要がある MAL01-03-1 | 検索されたメールの 「Subject」 を一覧で見せる
「MAL01-03-1」の仕様を収容するために、 「検索結果と検索された電子メールのリスト を表示し、そこから目的のメールを選択する」 という要求が設定された状態。
"はみ出し仕様” が、それにふさわしい新たな要求のなかに収まったとき、 画面に 表示しきれないケースの扱い方や、 目的のメールを選ぶ方法などの新しい仕様が浮か んできませんか? ふさわしくない場所に紛れ込んでいたままでは気がつかなかった ことが、その仕様にふさわしい要求が設定されてそこに収まったことで、 「それなら こういう仕様も必要だろう」 と次ページ表8.16のように新しい仕様が次々と姿をあ らわすことがあります。 これが仕様から「要求」 を立てた効果なのです。きっかけと しては、一つの"はみ出し仕様” を収容するために新たな要求を設けたことにあるの ですが、要求はそれ自体が範囲をもっているので、 適切な範囲を持つように表現され ることで、ほかにもその範囲を埋めるべき仕様が見えてくるのです (表8.16)。
章 要求を仕様化する
要求 MAL01-03 する仕様が抽出された状態 検索結果と検索された電子メールのリストを表示し、そこから目 的のメールを選択する 理由 目的のメールが一つとは限らないので、 絞り込めるような操作が したい MAL01-03-1 MAL01-03-5 MAL01-03-6 MAL01-03-7 MAL01-03-2 検索されたメールの件数を一覧の上に表示する 該当するメールが存在しないときは 「該当なし」 を表示する 1件以上発見されたときは、メールの 「Subject」 を一覧で見せ る 検索されたメールに連続番号を付けて表示する 検索されたメールの件数が10件を超えるときはスクロールバー を見せる MAL01-03-10 一覧から1つのメールを選んで、 その内容を見ることができる MAL01-03-11 開示されたメールの中にある検索キーワードと一致している文字 列を赤色で表示する
8.16 連鎖的に関連
もともとの仕様は「MAL01-03-5 検索されたメールの「Subject」 を一覧で見せる」だが、 「要求が立てられたことで関連する仕様が抽出され、さらに自身の仕様の表現も調整さ れている。
上の温度監視機構の例でも、
「指定のタイミングで、各測定ポイントの平均温度を取得する」
という要求を立てていれば、 最後の表示に関する仕様はこの要求の範囲からはみ出し ていることに気づき、
「取得した平均温度を各測定ユニットの監視モニターに表示する」
という要求を設定することができるでしょう。 その結果、 未測定のときの表示や、測 定中の表示、 測定結果が信用できないときの表示方法などが仕様として見えてくるの です。 また、 計測した平均温度を表示する理由によっては、計測データの表示のほう で、 平均温度との乖離値によって何らかの表示上の工夫がなされることもあります。
はっきりしていることは、「要求」を表現しない仕様書では、これらの仕様の多く は 「仕様モレ」 のバグとなっていた可能性があるということです。 もちろん、このな かのいくつかは設計や実装途中で発見され、 設計者の判断で対応されているかもしれ
8.11 仕様から要求を立てる 255
ませんが、それでもいくつかの仕様はモレてしまいます。
□8.11.3
仕様を 「裸」 にしない
仕様は、それを包むにふさわしい要求のなかに収めることが必要で、仕様を要求の 外に放り出さないことが大事です。 特に、 要求と仕様が混合した状態から要求を階層 化した場合、 仕様はその下位層に展開されることになりますが、このとき仕様の所属 が曖昧になってしまうことがあります。 図8.2は、 そのときの様子をあらわしたもの です。
最初は最上位の要求の下に仕様が並んでいたものが、 その後、 漏れていた仕様が発 見されたことでいくつかのグループで2層目に要求が設定され、部分的に階層化され た状態になったのです。 この結果、 一部の仕様は2層目の階層化要求に含まれない状 態になっています。 この状態を「裸の状態」と呼んでいます。
裸の状態を問題にするのは、階層からはみ出した仕様については、適切な範囲をも った要求のなかに収まっていない可能性があり、そこから仕様モレが発生しやすくな ることです。
↓図 8.2 仕様が裸になる様子
要求 要求 | | 仕様 要求 要求 仕様 仕様 - 仕様 要求 仕様 T-X 仕様 | 仕様 要求 仕様 仕様 仕様
最初は、 1段目の要求の下で仕様が並んでいたが、その後、一部で要求が 階層化されたことで、 いくつかの仕様が裸になってしまった。
256 第8章 要求を仕様化する
要求仕様を「Excel」 で書いていれば、 アンバランスな状態になっていることはす ぐに発見できます (次ページ表8.18 参照)。 「Word」 でも、 項目に確実に番号付けを 行うことで、ある程度この状態を防ぐこともできるのですが、 番号が付けられていな いと仕様が要求の 「箱」 からはみ出しても発見できないかもしれません。
たとえば、 表 8.17 では、 階層化された要求の下に、仕様がきちんと収まっています。 しかしながら、 急造で要求を仕様化したり、 あとで一部の仕様だけを階層化した要 求のなかに収容したりすると、 表8.18のように一部の仕様が裸になってしまうこと があります。
これは、 当初 「MAL01-01」 が仕様としては曖昧すぎたため、そこだけ階層化して その下に3つの仕様を抽出したわけですが、その結果MAL01-1 からMAL01-3が階層 化の構造からはみ出したものです。 この場合は、 MAL01-01 を階層化した時点で、 ほ かの仕様にもそれにふさわしい要求を設定し、それぞれの要求の下に配置替えをする
↓表8.17 階層化した要求の中に、 仕様が収まっている例 要求 MAL01 電子メールのグループを指定して、そこからキーワードで検索してメーラー 上で再利用する 理由 メールが多く、 関連するメールを探せない 説明 要求 MAL01-01 表示されたメールの検索グループの中から一つを指定する 理由 仕事上のメールとニュース等のメールを分けて扱いたい MAL01-01-1 事前にグループ化された検索グループを一覧表示する MAL01-01-2 一覧から選択した一つの検索グループを対象とする MAL01-01-3 グループが選択されなかったときは、先頭のグループを対 象とする 要求 MAL01-02 いくつかのキーワードの入力を受付け、それらを組み合わ せて検索する 理由 可能性のあるキーワードで探したい MAL01-02-1 検索したいキーワードを入力できる MAL01-02-2 1つのキーワードの最大文字数は26文字とする MAL01-02-3 複数のキーワードを 「AND」 と 「OR」 で繋ぐことができる MAL01-02-4 キーワードは最大8個まで指定できる ☐ MAL01-02-5 キーワードが入力されている状態で 「検索」ボタンが押さ れることで指定のメールボックスの検索を開始する
仕様が階層化された要求の中に、 きれいに収まっている。 (ただし、必要かつ有効な仕様がすべて抽出されていない)
8.12 ペースト作文の弊害 257
要求 MAL01 ↓表 8.18 一部の仕様が、 要求からはみ出した状態になっている例 電子メールのグループを指定して、そこからキーワードで検索してメ ーラー上で再利用する 理由 メールが多く、関連するメールを探せない 説明 要求 MAL01-01 表示されたメールの検索グループの中から一つを指定す る 理由 ☐ MAL01-01-1 ☐ ☐ MAL01-01-3 仕事上のメールとニュース等のメールを分けて扱いたい。 事前にグループ化された検索グループを一覧表示する MAL01-01-2 一覧から選択した一つの検索グループを対象とする グループが選択されなかったときは、先頭のグループ を対象とする 検索したいキーワードを入力できる MAL01-02-2 1つのキーワードの最大文字数は26文字とする ☐ MAL01-02-1 ☐ ☐ MAL01-02-3 複数のキーワードを 「AND」 と 「OR」 で繋ぐことができる ☐ MAL01-02-4 キーワードは最大8個まで指定できる
「MALO2-1」 ~ 「MAL02-4」 が、 階層化要求からはみ出している。
必要があります。
要求の階層を深くするときは、 上位要求に対して同じ深さに要求を階層化すべきで す。 そうでないと、 はみ出した仕様は 「範囲」 を見失う危険が生じるのです。
8.12
"ペースト作文” の弊害
手書きの時代には“ペースト作文 " の問題は起きなかったのですが、最近はPCを 使って要求仕様書を書くようになったことで、 しばしば 「ペースト作文」 が行われま す。 既存の文章をコピー&ペーストで複製したり、一つの文章を書いてそれをコピー &ペーストしたりして、 そのなかの一部を変更して新しい文章を作っていくことも可 能になりました。 いわゆる “ペースト作文" です。 特に、条件の組み合わせに関連し た仕様では、「ペースト作文」 が頻繁に行われています。 プログラムのコードも、こ この方法によって一つの関数が3000行にも達する関数を作ることが可能(?)になっ たのです。 ここまでくると、 PCやワープロも悪魔の道具に見えてきます。
表8.19 のようなケースは、書き手としてはペースト作文で書いていくことが可能 です。 生成された文書の文字数も一気に増えるので、生産性も高くなったように見
第8章 要求を仕様化する
258
えるでしょう。 しかし、「ペースト作文」 は書き手にとっては便利な方法であっても、 読み手にとってはペースト技術? を使って読むことはできません。 それにペースト作 文の文章は、読み手にとってはとんでもなく苦痛です。
ペースト作文が読みにくい理由は、 表8.19の例のように前の文章と比べて一部の 文字が変化しているだけで、 そのほかはほとんど同じ文章 (文字) が続くからです。 その場面で読み手に求められるのは、ほとんど同じ文字の羅列のなかから “異なる文 字” を発見することです。 “どこか違うか” ということに注意が引きつけられるため、 条件の組み合わせが漏れていることを見落としたり、 解釈を間違えたりする危険が高 くなります。 もちろん、 ある論理の仕様が漏れることに気づかないということも起き てしまいます。 仕様モレの何割かは、こうして不用意に 「ペースト作文」 された箇所 から発生しています。
↓表8.19 ペースト作文の事例
THM01-1 前回温度が基準値以下で、かつ、今回温度が基準値1以下の場合は、「A」 THM01-2 前回温度が基準値1以下で、かつ、 今回温度が基準値1を超える場合は、 「B」 THM01-3 前回温度が基準値2以下で、かつ、 今回温度が基準値1以下の場合は、「B」 THM01-4 前回温度が基準値2以下で、かつ、 今回温度が基準値1を超える場合は、 「C」 THM01-5 前回温度が基準値2を超え、かつ、 今回温度が基準値以下で、 自動設 定ONの場合は、 「D」 THM01-6 前回温度が基準値2を超え、かつ、 今回温度が基準値2以下で、 自動設 定OFFの場合は、「E」 THM01-7 前回温度が基準値2を超え、かつ、 今回温度が基準値2を超える場合は、 「F」
手書きのときには、 このような状況では
「前回温度が基準値1以下で、かつ、今回温度が基準値1を越える場合は、 処理B」 「々 基準値2以下で、かつ、 々 基準値1以下の場合は、 処理B」
というように “々" の記号を使ったはずです。 まだこのほうが変化点を見つけやすい ので、 問題も発生しにくくなります。
通常、ペースト作文が行われるのは、いくつかの変数が絡んだ条件文の複製です。 そのような場面では、 図8.3のように 「PADフロー」 か 「デシジョンテーブル」など
8.12 ペースト作文の弊害 259
を使うほうが、読み手に優しく伝わり、 条件のモレや矛盾などを発見しやすくなりま す。
ペースト作文される傾向は、 「Excel」 で文章を書くときのほうが多くなるよ うです。 Excelの場合は、無意識のなかで短い文章の箇条書きになったり、要点 だけの文章になったりすることが多く、 そのことがペーストの元になる文章を 提供しているものと思われます。 これに対して 「Word」 の場合は、文章その ものが散文になってしまうことが多く、 “流用” しにくいのではないかと思わ れます。
図8.3 表 8.19 の例をPADとデシジョンテーブルにした例
PADフロー 監視ペースを5分に1回に落とす 残メモリサイズ 5 監視ペースを2分に 残メモリサイズ 1回にする 基準値1 - B ≤ 基準値1 B ≦ 基準値2 > 基準値1 - C S 基準値1 ON D > 基準値2 ≦ 基準値2 OFF E > 基準値2 - F
同じことでも、 PAD図やデシジョンテーブルにすることで条件が見やすく なり、定義が漏れていることも発見しやすくなる。
第8章 要求を仕様化する
8.13 「否定表現」 などの曖昧な表現を避ける
すでに述べたように、要求仕様とは "Specify" されたものです。 ところが現実には、 "Specify" できていないと思われる表現が盛り込まれたまま 「仕様書」としてまかり 通っています。
「データを処理しきれないときは、それ以上データを受信しない」 「モードが “待機” の場合は、受信したデータを加工しない」
このような表現は、ヒアリングの場や文章での表現のなかでは自然に使われること があります。 そしてその場では、 それで、「わかった」 と認識されます。 この種の文章の特徴は 「if文」 だということです。 つまり、
「IF モードが “待機" のとき THEN 受信したデータを加工しない」
という 「if文」 の構造を持っているのです。 そのため、 ほとんどの場合、 ソースコー ドになるときには 「if文」 で処理することに気づきます。 ところが、 実際にコードに 変換するときになって、 「i」 の片側が定義されていないことに気づくのです。 つまり、上記の例では、
モードが “待機” 以外のとき･･････ 受信したデータを加工する (通常の処理) モードが “待機” のとき･････ 受信したデータを加工しない
という構文になるのですが、 「加工しない」 といわれても、 「加工しないだけで受信は 「続ける」のか、あるいは「受信も止めるのか」 が明らかになっていないことがあります。 「受信したデータは捨てる」のか、 「どのようにして受信を止めるのか」といったこと が定義されていない場合は、 設計や実装作業のところでとまどうことになるのです。
このように……は という表現を、筆者は「否定表現」 と呼んで注 しない」 意を促しています。 実際の現場では、 要求仕様書を作成する段階ではこのような 「否 「定表現」 のままで "合意” しているケースが多く見られます。 ただし、 前後の文脈で 判断できることもあるので、見かけ上で否定表現が使われているからといって必ずし もその要求仕様書が適切でないというわけではありません。
「否定表現」 は、一般には大げさな事態にはなりません。 ちょっとした対応が決ま っていないだけです。 ただし、 実装作業のなかで、 急遽加工しないだけでなくエラー として処理するとわかったものの、エラーコードの適当な位置に 「空き番号」 がなく
8.13 「否定表現」 などの曖昧な表現を避ける 261
後ろのほうの番号を割り当てるしかないようなケースも発生します。 また、 そのよう な時期 (実装段階) になって、 つまらないことで確認を求めてくるので、 依頼者の信 頼を失う危険もあるのです。
なかには、ホスト側にしばらく送信を見合わせてもらうためのプロトコルが必要に なったり、 バッファの構造がテーブル構造では対応できないことが判明しそこからリ スト構造に切り替えたり、 割り込みの情報をフラグで知らせていたのを、 FIFOの処 理を保証するためにイベントの通知にリングバッファの構造を持ち込んだりすること もあります。 このような場合は、 一部で設計のやり直しになり工数が追加されるだけ でなく、間に合わせの対応になることも多く品質を低下させる危険もあります。 した がって、 「否定表現」 も軽く扱えないのです。
そこで書かれている仕様の表現が 「否定表現」 にあたるときは、 前後の仕様を見て 「then」 と 「else」 の両方が明らかになっているかどうかを確認してください。 たとえば、
「データを処理しきれないときは、それ以上データを受信しないでください」
という仕様の場合、 前後を見ても処理しきれないときの仕様が書かれていないときは、
「データを処理しきれないときは、 送信側にデータの送信を一時中断するように 「要請する」
とすれば、問題は解消します。
どうやら「否定表現」 というのは、私たちは日常生活のなかでほとんど注意を払う ことなく使われているのかもしれません。 見知らぬ道路を車で走っていると、
「この先、○○トンネル、 大型車は通行できません」
という看板を見ることがありますが、これも 「否定表現」の要素を持っています。 道 路は通常は通行できるものなので、もし大型車を運転していてこの看板を見たときに 「じゃあ、 自分はどうすればいいのか」 と判断に迷うことになります。
インターネットのコンテンツにも否定表現を見つけました。 次ページ表 8.20は、 ある自治体の保険所のホームページでのなかで見つけたものです。 そこには、健康診 断の内容や実施日時などについての説明 (仕様) が書かれていますが、 表 8.20 でわ かるように、 一番上のほうに 「従業員の雇入時及び定期の健康診断は実施していませ 「ん」 とあります。 この部分が 「否定表現」 になっています。
262 | 第8章 要求を仕様化する
↓表8.20 インターネットで見つけた否定表現の例
※健康診断書 (進学免許のため)の発行
※労働安全衛生法による従業員の雇入時及び定期の健康診断は実施していません。 受付時間等 問い合わせ 受付時間 午前9時~10時 実施日いずれも水曜日 ・9月8,22日 10月13,27日 11月10,24日 12月8,22日 1月12,26日 2月 9,23日 3月 9,23日 ・診断書の発行は原則として2週間後になります。 ・料金は健診項目により異なります。 ○○係 TEL: 000-000-0000 FAX : 000-000-0000
ある自治体の保険書のホームページの中で見つけた否定表現。 | 2行目のの健康診断は実施していません」という部分が否定表現になっていて、 情報が正しく伝わらない。
このホームページを見る人は、 健康診断の実施や申し込みに関する情報を得たい人 ですが、もし、その人が「従業員の雇入時の健康診断」 に該当する場合は、ここから は何の情報も手に入りません。 結局、 保険所に電話で問い合わせることになるのです。 この場合は、 「従業員の雇入時及び定期の健康診断は (実施していませんので)、 市内 の民間の医療施設で受けて下さい」 と書かれていればよかったのです。
「否定表現」の問題は、このように 「if文」 の両側の仕様の定義が揃わない危険が あることですが、 「if文」 は必ずしも否定表現の形で書かれるとは限りません。 たと えば、
「展開に必要なメモリが確保できるときは、 そのまま画像を展開する」 「在庫があるときは、 発送の手配をする」
というのも 「if文」 です。 そして、これらの例では、 「if文」 の“肯定側" の仕様だけ が書かれていて "否定側” の仕様が抜けているので、このまま実装作業に入ると「否 定表現」 のときと同じ問題が生じます。
このように、 必ずしも否定表現でなくても、 「if文」 の両側の定義が揃っていない ままになっていることがあります。 文章を書く人の“習慣” のようなものが作用する こともあります。 「否定表現」 という言葉は、 「文」 の両側の仕様の定義が漏れてい ないことに気づくための「キーワード」として覚えて下さい。
8.13 「否定表現」 などの曖昧な表現を避ける 263
このほかにも、「等」 や 「etc を使ったりすれば、その瞬間に "Specify" できな くなり仕様ではなくなってしまいます。 もちろん、 要求仕様書の作成の途中では、 ま だ 「等」 の状態を解消できないかもしれないので、 その場合は、「○月○日までに決 「める」というコメントを付けておくようにするとよいでしょう。
また、処理の対象となるケースが複数存在すると思われる状況のなかで、 仕様には 代表的なケースだけが書かれていることもありますが、 そのままでは "Specify” でき ません。
この場合は、表 8.21 のようにその仕様の文章の下に、 具体的に 「ケース」を列記 して特定すればよいでしょう。 「等」 や 「etc」 も 通常はこの方法で対応します。
↓表 8.21 仕様の下にいくつかケースを列記した例
LOG01.02 以下のコマンドを受信したときは、その時点でのログデータを、規定 のフォーマットでログファイルに出力する。 • Start command ・Stop command ・Set command Write command . Read command 受信時間 ・コマンド名 ・受信データ
この場合、関係するコマンドなどの項目を縦に並べるほうがよい。 ・また必要に応じてで区切る。
また、複数の仕様が一つの仕様番号のなかに含まれているケースもありますが、こ れも仕様モレや設計モレを起こす原因になります。 細かく分けすぎるのも煩わしさが 表面に出てしまいますが、 ソースコード上で実現の場面が異なるような仕様は確実に 分けないとあとの管理がやりにくくなります。
特に、Word を使った場合は 「散文」 形式で要求仕様が書かれることが多く、その なかには複数の仕様はもちろん、 概要や説明も混じりやすくなっているので注意が必 要です。
第8章 要求を仕様化する
8.14 "FIX" から“賞味期限” へ
ソフトウェアの開発で、いまでも問題になるのが 「FIX」 です。 筆者も、 汎用機時 代の初期の頃は「○○日までに仕様をFIXしてください」 と、 顧客に仕様のFIX を迫 ったものです。 一般に、 「FIX」は依頼者から言い出すことはありません。 依頼者は、 基本的には (同じコストで) 少しでも多くの仕様を盛り込みたいと思っているのに対 して、開発側は少しでも仕様を減らしたいと思っています。 そして時間が経つほど仕 様が増えていきます。 その状況のなかで 「FIX」 を持ちだすのは、ほとんど例外なく ソフトウェアを開発する側からになります。
顧客だってFIXしたいのでしょうが、顧客側にも競争相手が発生したり、 ビジネス の環境の変化が早くなったりして時代がそれを許さなくなっているのです。 当時でも、 納期の半年前に仕様をFIXしきれないという事態が起きていたのですから、いまでは もっと厳しくなっているはずです。
それにもかかわらず、いまでも顧客にFIXを迫るソフトウェア企業のエンジニアが 数多くいるようです。 『日経コンピュータ』 の 「動かないコンピュータ」 という連載 記事に書かれている記事のなかには、外注のソフトウェア企業との間で、 「FIXした」 とか 「していない」 とかでもめているケースが少なくありません。 もちろん、 社内開 発であっても、 FIXしきれない状態にあることは同じです。
ソフトウェアを開発する側にとっては、 設計や実装の途中で仕様が変更されること で、 そこでの作業が混乱することを避けたいと思うのでしょう。 でもいったい、 途中 で仕様が変更されたときにどのような混乱が生じるのか、 なぜ混乱が生じるのか、ど の仕様が変更されると困るのか具体的に考えているでしょうか。 「途中」 といっても 状況は単純ではありません。 設計作業に入った直後から、 設計作業がほとんど終わっ た頃、 実装作業の途中、 テストに入っている段階と、 いろいろな場面があります。 ま た、変更といっても規模によっても影響は違ってきますし、 「途中」 の状況によって も影響は変わってくるでしょう。もちろん変更の内容によっても変わってきます。 い ったい、何を恐れているのでしょう。
要求仕様のベースライン設定後に仕様 (ときには機能や要求レベル) が変更された ときの対応として 「要件管理プロセス」 があるはずです。 そのなかの 「要件変更プロ 「セス」(変更制御プロセス) において、 届けられた変更依頼の内容を評価 検討して 必要な対応がなされれば済むはずです。 もちろん、 その結果によっては最終期限を延 長することもあるかもしれません。 可能な限り最初の約束の範囲に収めようとするの
8.14 "FIX* から賞味期限
はよいのですが、 すべてが最初の約束のなかに収めきれるとは限りません。 変更の件数が多すぎては 「要件変更プロセス」 も混乱するので、 要求仕様の構成や 書き方を改良して仕様変更が起きにくいようにすることは重要です。 しかしながら 「途 中で変更されると混乱する」 というだけでは短絡的すぎます。
☐ 8.14.1
なぜFIX を要求するのか?
ではいったいどうして 「FIX」 を要求するのでしょうか。 第2章 「2.6 FIXした・ しないでもめる理由」 のところでも少し触れましたが、一つの理由として考えられる のは、そこにある要求仕様書の構成や内容の不備から、発生する変更に対応するのが 難しい状態にあることが多いということです。
仕様の表現が粗く 「要求」 のレベルから脱していない状態では、 第2章 「2.7 途 中で仕様変更が混乱する理由」 でも触れたように、仕様変更が"行間” に発生します。 これが変更の対応を難しくしているのですが、 同時に、このような要求仕様書は仕様 としての条件を満たしていないために本当の意味で双方が “合意” できない状態にあ り、 それを “前進” させるために 「FIX」 が要求されるのです。 その結果、 「FIX」は その後に仕様変更が発生することの 「予約語」 となってしまいます。
もし、要求仕様の表現が適切であれば、 内容についての問題はレビューなどの手続 きのなかで改善され “合意” できるかどうかの問題になるので、 「FIX」 を要求する必 要はなくなります。
2番目の理由として考えられるのは、要求仕様書を作成するのに時間がかかってし まい、これ以上に内容を洗練する工数がとれなくなっているためです。 現状の要求仕 様の状態で先に進めないと、 最終納期に間に合わないというところから 「FIX」 が要 求されるのです。 要求仕様書の構成や書き方によっては、内容を安定させるのに仕様 化に時間がかかりすぎることも起きてしまうし、時間をかけてもよくならないことも あります。
3番目の理由としては、 適切な 「要件管理プロセス」 (特に 「要件変更プロセス」) を持たないためです。 そのため、変更が発生したときの影響を見極めることができな いときは、 途中での仕様変更を忌避したいという思いから、 「FIX」 の言質をとるこ とで仕様変更時の対応工数を獲得しやすくするのです。
要件管理プロセスについては、設計側だけの認識では効果がありません。 仕様変更 を発する関係者全員が要件管理の意味と対応、 その必要性について理解している必要 があります。 これはプロジェクトに入る前に確認すべきことで、これを最初に怠って
265
266 第8章 要求を仕様化する
しまうと、 仕様変更が不安になって 「FIX」 の防波堤を積み上げたいと思うのも無理 はないかもしれません。
また、「要件管理プロセス」 に対する不安には、変更に対するサイズ見積りの技術 の不足も影響します。 サイズ見積りの技術に不安がある状態では 「FIX」でガードを かけて、それでも変更が要求されたときは、安全を十分に仕込んだ日数を要求するこ とで対応することになるのです。
□8.14.2 FIXに潜む落とし穴
「FIX」の問題は、顧客との間で “もめごと” になるというだけではありません。 顧 客に不用意に 「FIX」 を求めたことによって、 設計者自身が 「FIX」 された仕様をそ のまま実現するだけの姿勢になり、 この先の仕様の変化を察知するための工夫も変 化の可能性を設計や実装のなかに折り込むこともしなくなってしまうという問題があ ります。
極端にいえば、 「FIX」 したとおりに設計し、 仕様に書かれている 「定数」 をそのま まソースコードにも使用するかもしれません。 その結果、ソースコードに 「3」 とい う数字がいきなり現れてきます。 ある関数のなかの繰り返し文のなかの最大回数を示 す「3」 と数字と、そのループのなかに含まれている計算式のなかで使われている 「3」 という数字の違いがわかりません。
「FIX」された(FIXを勝ちとった)ことによって、この数字の違いを意識し、ソー スコード上に近い将来の変化に対応できるように表現する必要性が見えなくなるので す。 もちろん、 いつ変化するかわからないことに対応する必要性はないかもしれませ ん。 でも、 ちょっと考えたら仕様から変化の時期を予想できることも少なくありませ ん。
最近の潮流として、 「仕様は変更されるもの」という認識が広がっています。 もと もと 「要求」 も表現されず仕様モレを発見できない構成であれば、 仕様変更は避けら れません。だからこそ、多くの人はXP (eXtreme Programming)などの文献の記述 に惹かれるのです。 問題は要求仕様書の構成や書き方にあり、そこに多くの改善の余 地があるにも関わらず、そこでは「仕様をバカ丁寧に書いてもすぐに陳腐化する」か らということで要求仕様を書く意味 (意義) を否定する方向に使われています。
その一方で、 中途半端な要求仕様書を書いて顧客に仕様のFIXを求めるというのは、 明らかに矛盾した行動です。
□8.14.3
8.14 "FIX" から *實味期限
その仕様は何に依存しているのか?
FIXに代わって 「賞味期限」 という観点から、そこに書かれている仕様の変化の方 向を見る方法があります。 この観点を持つことによって、
｢この仕様は何によって維持されているのか」
「何が変われば、この仕様は変化することになるのか」
という視点を手に入れることができます。 仕様によっては、そのときの税法などの「法」 を根拠にしていたり、 通信や放送などの「規格」 に依存していたり、それまでの作業 の習慣に基づいているだけだったり、 「最近の3ヶ月」のデータ量に基づいていたり します。 組み込みシステムでは、 そこで使用されている 「LSI」 などのチップの性能 に依存していることもあります。
たとえば、計測結果の表示を 「 - 8.4 ~ +16.8 の範囲で0.2刻みに表示する」 とい 仕様は、現在使用しているADコンバーターの性能によって決まっているとすれば、 この仕様の賞味期限は ｢この部品が使われている間」 ということになります。 そこで この部品の寿命や部品の特徴から変化を予測することで、 設計上に何らかの配慮をす ることができます。 自分で判断できないときは、依頼者に「この部品は今後数年間は 使いますか?」 とたずねればよいでしょう。
このADコンバーターはすでに10年以上も前の部品で、いまはもう少し精度の高い 部品があり値段もだいぶ下がってきているということがわかれば、それほど長くは持 たない仕様として設計や実装に配慮できます。 そのときは、 レンジの幅も広がるでし ょうし、刻みも 「0.1」 単位に変わるかもしれません。 何も 「-8.4~+16.8の範囲 で0.2刻みに表示する」 という仕様に対して 「FIX」 を要求する必要はないのです。
その仕様の 「根拠」になっていることや 「依存」しているものがしばらく変わらな いものなのか、 それとも、 まもなく 「賞味期限」 が切れるようなものなのかを判断す ることで、 その仕様が変更される可能性” が見えることが少なくありません。 変更 される可能性が見えていれば、 それが今回の開発期間で起きる可能性があれば、 仕様 の番号を使って途中で変更されても対応できるように作業を進めることができます。 あるいは、変更の方向性も見えることがあるので、設計上で対応できるのです。 この ように適切に仕様化されているなかでは、 「FIX」 という言葉は使用されることはなく なります。
「実際に部品の交換が起きるかどうかわからないのだから、 そこまで対応する必要
267
第8章 要求を仕様化する
はない」という意見もあるでしょうが、 それは 「賞味期限」 を検討したうえで判断す ればよいでしょう。
また、顧客に対してわけもなく 「FIX」 を要求するよりも、
｢この仕様は何に依存していますか?」
「何か部品に依存していますか?」
「最近のデータ量から割り出されたものですか?」
というかたちで質問するほうが、 顧客と一緒になって 「賞味期限」 を検討することが できますし、要求仕様書のなかにそのように決めたことを“明記” しておくこともで きます。 「FIX」でガードするよりも、このほうが気が利いています。 何よりも 「合意」 した文書になるのです。
8.15 品質要求の仕様化
機能であろうと品質であろうと、それが要求として表現され適切に仕様化されない ものは実現されません。 残念ながら、 「要求仕様書」 といっても 「要求」 の意味を正 しく理解していなければそこに書かれているのはそのほとんどが機能についての仕様 で、 これでは 「機能仕様書」 と同じです。 なかには、 品質要求についてはどこにも書 かれていない 「要求仕様書」 もあります。
設計者も、機能のほうに興味の中心が置かれていて、いかにして機能要求をはずさ ないかということに腐心しています。 確かに項目的には圧倒的に機能仕様のほうが多 いのは確かですが、せっかくたくさんの機能の仕様を満たしていても、 たった一つの 品質要求をはずせば製品としての価値は失せてしまうこともあるのです。
品質の仕様化をはずさないためには、 「要求」 の段階で 「品質要求」 をしっかり引 き出すことが重要です。 そうでなければ、 品質についての仕様化は忘れ去られること になります。
しかしながら、 機能仕様と違って、 品質の仕様を実現するにはそれなりの設計技術 が必要です。 機能仕様の場合は、指定されたファイルからデータを読み出して指示さ れたようにデータをチェックし、 計算ミスがないように注意してアルゴリズムを考え て実装すればよいのですが、 品質仕様の場合はそこで求められる設計技術は異なるこ とがあります。
パフォーマンスの品質要求として「○○時間内にホストに応答のメッセージを返す
268
8.15 品質要求の仕様化 269
こと」が求められているような場合、 正しいメッセージが正しい返送先に送られたと しても、「○○時間内」 に到達しなければ "不合格” になります。 つまり、返送する メッセージを正しく組み立てることとか返送先を正しく入手する設計技術とは別に、 確実に 「○○時間内」 に返送するために、これらの処理に関わるタスクのプライオリ ティや、どのタスクにこれらの機能を振り向けるか、あるいは高速に返送するために どのようなデータ構造を設計するか、といった設計技術が求められるのです。なかで も、「保守性」 という品質特性には、独特の設計技術が必要になります。
品質要求を仕様化する場合は、 機能要求と違ってちょっとした工夫が必要になりま す。 要求を階層化するときも、 機能要求の場合は、下位の要求の持つ範囲の合計が上 位の要求が求める範囲と “一致する” という認識で階層化します。 要求に対する仕様 化も同じように、 要求の範囲に含まれると思われる仕様を引き出したわけです。
これに対して品質要求の場合は、必ずしも範囲が “ぴったり” はまるとは限りませ ん。 たとえば、
「USBのモジュールは、交換しやすいように作ってほしい」
という要求では、 どのように設計・実装されれば "交換しやすい" 状態を満たしてい るかというところに明確な客観的合格基準があるわけではありません。 品質要求は、 その時点で提供されるハードウェアなどの環境条件、 開発期間などの制約、 そしてそ こで設計に携わるエンジニアのスキルなどを総合したかたちで実現されるような仕様 にならざるを得ません。
たとえば 「交換性」 に関わることとして、 表8.22 のような仕様に展開できます。
表8.22 交換性を仕様化した例
USBのモジュールは、交換しやすいように作ってほしい 要求 USBQ01 理由 暫定的なデバイスとして採用したが、 適当なデバイスが現れれば交換 したい 説明 USBQ01.01 外部の機能 (他の機能) に提供するモジュールを持たない ☐ USBQ01.02 ☐ USBQ01.03 ☐ USBモジュールで使用するデータの構造は外部から完全に隠蔽する USBモジュールで使用するバッファなどのメモリ領域は、ローカル領 域かシステムのプールから獲得すること USBQ01.04 USBモジュールで使用するスタックは最大使用時で1K以内であること
270 第8章 要求を仕様化する
品質要求の多くは、「これらの仕様が実現していればその品質要求を満たすとみな す」というように “みなす" という視点が導入されることが多いのです。 これが品質 要求の仕様の特徴です。
ただし表8.22 の仕様を実現するには、
既存機能(ほかの機能) に提供するモジュールを持たないモジュールの作り方 データを隠蔽する方法
グローバルデータを使用しない設計技術
管理と処理を分離してフラットな呼び出し構造に設計する方法
いざ交換時に参考になる設計資料を作成する技術
などについての技術が求められます。 これらの設計技術は、 「機能」 を実現するとき の技術とは違っているのです。
品質要求には 「機能ごとに設定される品質要求」 と、 製品やシステムの 「全体にか かる品質要求」 があり、 仕様化も品質特性によって少し注意が必要です。
□8.15.1 機能に付随する品質要求の仕様化
個々の機能に付随する品質要求として代表的なものに「パフォーマンス」 や 「応答 「性」 があります。 また、USBなどの機能に対する「交換性」 というのもあります。 特 に、デバイスに関係する機能モジュールは、 その実現方法に対して 「交換性」 の要求 が課せられることがあります。 新しいデバイスの出現に、速やかに対応することが狙 いで、それは最初から考えて設計されていなければ容易には実現しません。
表8.23にパフォーマンスの仕様の例を紹介します。 従来の製品は、画像データを 1 ファイル分受信してから画像を表示していたため、操作した人は表示されるまで待っ ていました。 当然、 評判が悪く製品の売れ行きにも影響したと思われます。
これに類似したことは現実にしばしば起きています。 前回の開発のときにこの機能 に対して求めたのは、
「指定された一つの画像ファイルを受信し、 それを画面に表示する」
「その後は、 "NEXT" と "BACK" のボタン操作に応じて画面を切り替える」
というもので、 機能要求としては実現していましたが、 画像ファイルが大きいときは すべてを受信するまで何も表示されず、 操作した人はいつ表示されるのかわからずに イライラさせられていました。 このような結果になったのは、 パフォーマンスに関す
8.15 品質要求の仕様化 271
る品質要求を課さなかったことが原因です。 設計者としては、 機能要求を満たしたの です。 でも、製品としては失敗作です。
そこで今回は、 「ファイルの受信開始から1秒以内に最初の画像を表示する」とい うパフォーマンスの要求をつけました (1秒は目標であって仕様ではありません)。
パフォーマンスの仕様の例 ↓表8.23
ファイルの受信開始から1秒以内に最初の画像を表示する 要求 PAF01 理由 すべてのデータを受信するまで表示しないわけにはいかない 說明 PAF0.01 データ全体の受信時間は平均で20秒ほどかかる 先頭の画像データの受信が終えた時点で画像の表示を行い、2枚目以 降の画像データは、 その間に受信する ☐ PAFO.02 受信中は 「受信ランプ」を点滅させ、この間は 「NEXT」 「BACK」 の 操作は止める ☐ PAF0.03 受信終了後は、 通常の操作ができる
これまでは、すべてのデータを受信しないと画像を表示しなかった。
ここでの仕様としては、 1枚目の画像データを受信した時点でそれを画面に表示す るというものです。 残りのデータは表示している裏で受信するように設計してほしい、 受信中は画面の操作ができないことは我慢する、というものです。
この仕様を見て、 読者はずいぶんと設計の世界に踏み込んでいると感じると思いま す。 要求仕様は設計に対して中立ではありません。 もともと機能では「こういう動き をしてほしい」というのが仕様ですから、その仕様を実現するには特定の設計方法に 絞られることがあります。 つまり、 仕様は設計を誘導する力を持っているのです。
品質要求においても、そこで展開される仕様によって設計の形が誘導されてもおか しくはありません。 逆に、 「何とかしてこういう動きを実現してほしい」 という希望 を追及していくためには、設計方法を指示しない “ぎりぎり”のところで設計を誘導 できる表現力が必要になります。 そうでなければ、ソースコードになるまでわからな いという状態になるか、さもなければ仕様作成の段階で設計方法を確定させてしまう ことになります。
□8.15.2 保守性などの要求の仕様化 品質要求には、 特定の機能に関係せず、製品やシステム全体に課せられるものがあ
272 第8章 要求を仕様化する
ります。 その代表的なものは 「操作性」 「保守性」 「対故障性」 といった品質特性です。 これらの品質特性を実現するための要求は、 特定の機能に付随したものではありませ ん。 製品やシステム全体に対する品質要求なのです。 表8.24 は故障が発生したときの動きを誘導する仕様が示されています。
↓表8.24 対故障性に関する品質要求の仕様の例
要求 QUA.03 (対故障性) 接続する機器が故障しても、 全体の動きを止めないでほ しい 理由 | 工場のラインを制御している装置だから ☐ QUA.03-1 回復処理が完了するまでこの装置をシステムから切り離す ☐ QUA.03-2 操作パネルに、「機器番号」 と 「トラブル発生し、切り離しました」 を表示する QUA.03-3 "トラブル中に送信の依頼が来たときは 「エラー中」 のメッセージを 返し、 この依頼を無効にする ☐ QUA.03-4 接続状況の問い合わせに対して、 当該機器番号に対して 「エラー中」 のステータスを返す
この種の品質特性で実現が難しいと思われるのが 「保守性」 の要求です。 通常、 機 能要求は、それが実現していることを動作させて確認できます。 品質要求でも 「操作性」 などはほとんど実際に動作させて確認できます。 しかしながら 「保守性」や「交換性」 のような品質要求は、 実際に動作させて確認できるものではありません。 保守性の場 合は、それが実現していないときは、次回以降の派生開発で一つの関数が3000行に も達するのを見つけて、「何という作り方だ!」 「誰だ、こんな関数を作ったのは」 と いう声が聞こえることになります。 そこには、保守性という要求をどのように仕様化 すればよいのかがほとんど知られていないことが背景にあるものと思われます。
次ページの表8.25は「保守性を高めてほしい」という品質要求を仕様化したものです。 保守性の仕様を実現するには、 クラスやモジュールの“凝集度” の概念が必要にな ってきます。 保守を繰り返しても崩れにくい凝集度や複雑度というものを知っていな ければなりませんし、 どうすればそのような凝集度でモジュールを構成できるのか、 どうすれば適切な複雑度のモジュールになるのかを知っていなければこの仕様は実現 しません。 処理と管理を分ける方法や、タスクの外にグローバルデータを出さない設 計技術が必要です。
保守性の要求をこのような形で仕様化し、これらの仕様を満たすことで今回の「保
8.15 品質要求の仕様化 273
「守性」 の要求を満たしているとみなします。 もちろん、 この仕様に関して依頼者との 間で "合意” が必要なことはいうまでもありません。
このように、機能であろうと品質であろうと、 仕様であるためには実際に“行動で きる” “実現できる” “検証できる”ことが必要で、これらが表現されていなければ仕 様であるとはみなされません。
↓表8.25 保守性の要求に対する要求仕様書の事例
QUA.02 (保守性) ソフトウェアの保守性を向上させてほしい 要求 理由 この後5年以上、ここから製品展開したいから QUA.02-1 一つのクラスに含まれるメソッドは10個以下とし、それを超える場合は 事前に了解をとる QUA.02-2 モジュールの複雑度は20以下を原則とし、それを超える場合は事前に了 解をとる ☐ QUA.02-3 モジュールの凝集度も”手順的凝集度以下になる場合は事前に検討する QUA.02-4 処理と管理は明確に分離し、 関数の呼び出しの深さは5以内とする QUA.02-5 タスク間でアクセスし合うグルーバルデータを作らない。 アクセス時 間等による制限から、グローバル・データとなることが避けられないと きは、技術確認会議で承認されること 【説明】 割り込み処理との間で共有するケースはこの制限外となる
これらの仕様は、明らかに機能に関する仕様とは性質を異にする。
□8.15.3 変化する保守性の定義
最近になって、 「保守性」 の定義が変わろうとしています。 本来の 「maintenability」 から 「serviceability」 や 「supportability」 という定義に変わる傾向が見られ、 日本語 的には 「運用・保守性」 という用語も使われ始めているようです。
確かに運用担当者や保守担当者の操作や活動を支援するためのプログラム処理の必 要性については認めますが、それは果たして 「非機能」でしょうか。 機能として、表 現することもできますし、 「操作性」 の中で扱うこともできます。
100歩譲って 「運用・保守性」を認めるとしても、従来の 「maintenability」 として の 「保守性」 の定義は残すべきです。 これを置き換えてしまうことで、 「作り方」 の 規制をかけられなくなります。
筆者は長く 「派生開発」 の世界で開発作業をやってきました。 その経験から
第8章 要求を仕様化する
274
「maintenability」が消えることによって、 派生開発の現場で大きな混乱が生じると危 惧しています。
□8.15.4 品質要求はテストでも確認する | 一般の機能要求は、 仕様化することで "検証可能” であることを確認できます。 同 じように、 品質要求も具体的に仕様化することで実現でき、さらに実現できているこ とを確認できるのです。 ただし、 機能要求と同じように、 動作させて確認できるとは 限りません。
「パフォーマンス」 や 「応答性」 「操作性」 「効率性」 「対故障性」 などの品質要求は、 実際に動作させることでそこで指定されている仕様が満たしていることを確認できま すが、 「保守性」 や 「交換性」 のような品質要求は動作させて確認できるものではあ りません。 これらの品質要求は、 設計書やソースコードを検査 (静的検査) すること で、実現していることを確認することになります。
たとえば、「保守性」 の仕様のなかに出てくるものとして、 複雑度の規定や関数の 呼びだし構造の深さ、 関数内の制御の深さや行数、 ファンアウトの数などをソースコ ードを入力して検査するツールがあります。
これに対して、 「交換性」 の要求は、 人の手で実際の設計書を検査して仕様を満た しているかチェックすることになります。 いくつかの項目は保守性が見えるツールで 検出できるかと思いますが、 それができてもわずかな項目しか確認できないと思われ ます。
8.16 確定しない仕様の表現
多くのソフトウェアの開発現場では、 要求仕様書の作成が終わってから、いままと め上げた要求仕様書に基づいて見積りが行われ、 スケジュールが立てられているよう です。 しかしこれでは要求仕様書の作成作業がスケジュール管理の枠の外に置かれて しまい、 要求仕様書が書き上がった (と判断された) ときには、 設計以降の工程を大 きく圧迫してしまいます。 仕様化前の見積りを省いて仕様化作業に入ってしまうと、 ほとんどのケースでこのような事態に陥ってしまいます。
要求仕様書を作成する作業も、 事前に項目数の見積り (仮説見積り)を行い、その 見積りとスケジュールに基づいて仕様化の作業にとりかかるべきです。 見積りによっ ては要求仕様書が希望する日時に間に合わないことがわかるはずで、 その場合は必要
8.16 確定しない仕様の表現 275
なリソースを確保したり、 全体の日程を調整したりすることも必要になります。 最初 から不可能な日程で作業をすべきではありません。 適切な見積りに基づいたスケジュ ールと進捗管理の下で、予定した日程で仕上げることを目指すべきです。
もちろん、ここで基準にしているのは 「仮説見積り」 ですから、 実際の仕様化作業 のなかで得られる実績値によって逐次見積りの値を調整し、 必要に応じてリソースを 確保したり機能を調整したりします。
事前に要求仕様の項目数を見積もることで、「これくらいの表現を基準とする」と いう仕様としての 「状態」 を想定することができます。 つまり、でき上がりの状態を この段階でイメージすることになります。 ところがほとんどの現場では、仕様化前に 項目数の見積りを省いているために、でき上がりのイメージがありません。 そこにあ るのは、 「要求仕様書のでき上がりの予定日 (努力目標日)」 だけです。
この結果、二つの行動が選択されます。 一つは、 要求仕様書の内容の善し悪しを判 断することもなく、 「期日」に合わせるかたちで “完成” させるというものです。 こ れによって仕様書を作成する担当者の仕事は終わるのです。 そして内容の不備は、こ のあとの設計作業のなかで補われます。 その結果、 「仕様」 は複数の文書に分散し、 最初の要求仕様書は出来栄えとしては不十分なものになります。
もう一つの選択は、 要求仕様書の内容が安定しないため、 ずるずると期日を延長す ることです。 そこでは、 「要求」 が表現されていないことや、仕様の表現に確信がな いために仕様としての記述がばらばらです。 いろいろと迷っている間に、予定の期日 が近づいても要求仕様書としてカバーする予定になっている範囲に届かないために、 要求仕様書の完成予定日がずるずると延ばされていくのです。 この場合も、前者と同 じように、どこかの時点でリリースされることになるでしょうが、内容については不 十分な状態なので、 設計以降で苦労するはずです。
こうして、実質的に仕様が確定しない状態で設計以降の作業に回されるのです。残 念ながらこれが実態です。 しかし、もっと簡単に仕様モレを起こしにくい要求仕様書 の書き方がある、ということを知らない状況では、この状態から抜け出すことはでき ないのです。
原則論としては、 要求仕様書は関係者の間で何度かのレビューを重ねて予定した期 日までに仕様化し、関係者の間で合意することが望ましいのですが、 項目によっては 期日までに仕様のレベルで合意できないものもあるでしょう。 本書で勧める要求仕様
276 第8章 要求を仕様化する
の書式や書き方を導入して、ほぼ予定の期間で要求仕様書がまとまってきたとしても、 確定に手間取る仕様が出てくると思われます。
しかしながら、全体の5%ぐらいの“未確定" の項目のために、予定した時期での「合 意」 を遅らせてプロジェクト全体の進捗に影響を与えるのは得策ではありません。 し たがって、ある程度は確定待ちの状態であっても、要求仕様書に対して暫定的に“合 意” し、 以降の作業を進める方法が必要になります。
そこで、 未確定の項目が全体の5%以下であれば、 日程のほうを優先してベースラ イン設定に持ち込みます。 ただしこれができるのは、 仕様化そのものは (ほとんど) できているがそこに複数の選択肢があって、 選択権を持っている人の決定が遅れてい たり、選択の同意を取り付ける必要のある人たちからの同意のとりつけに手間取った りしているときに限られます。
選択肢が併記されている場合でも複数の仕様を “同列" に扱うのではなく、要求仕 様を作成する担当者 (責任者)としてはどちらの仕様を推すかという意志が入っても よく、基本的には 「A案を推すが、 もしかすると B案になるかもしれない」という状 態の仕様を書くことはできます。 仕様作成の担当者としてはそれなりに 「考え」があ るでしょうし、 全体のバランスもあるでしょう。 そのなかで、 「A案」 を主としてい るものの 「B案」 になるかもしれないというのであれば、 その状態で設計作業に入る ことができると思われます。
あとで確定したときに、 当初の想定どおり 「A案」 でよいということになれば、確 定したことの通知だけで済みます。 もし 「B案」 になったとしても、 最初から B案も イメージできているのと変更の可能性があることを承知で作業を進めているので、 変 更するにも大きな混乱は生じません。 いずれの案でもない内容に決まった場合は、要 件管理の 「変更制御」のプロセスできちんと対処すればよいのです。
仕様の一部がまとまらないからといっていつまでもリリースされず、 最終納期が近 づくなかで設計グループが待ちきれずに “見込み” 仕様で設計作業に突入するという のは最悪のパターンです。
□8.16.1 「T.B.D」 では合意できない 確定していない仕様でも、 現在交渉中の状態を表現しておく必要があります。 決ま っていないからといって 「T.B.D」 と書かれたのでは設計作業に入ることもできませ
ん。
*3 "To Be Determined" の略。 「そのうち決めます」 とか 「あと で決める必要あり」という意味。
8.16 確定しない仕様の表現 277
「画像ファイルの記録形式は5種類ある」
という仕様の下に6種類の記録形式の名称が書かれ、下の2つの記録形式のところに "*現在いずれにするか確認中” と書いてくれれば十分に設計作業に入れます。 その 2つのなかで決定の可能性に差があるのであれば、そのことも書き添えて置けばもっ とやさしくなります。
大事なことは、 「T.B.D」 を使うのではなく、 できるだけその時点で明らかになって いること、あるいは現在関係者との間で確認中の仕様をそのまま記述し、それが変わ る可能性のある箇所を明示しておくことです。 そうすれば多くの場合、 設計作業に入 ることができます。
確定しない仕様でも、その表現を工夫することで設計作業に入ることができるので す。 安易に 「T.B.D」 を使ってしまっては、手も足も出ません。
□8.16.2 あとは要件管理でカバーする 当然、こうした未確定項目はその後に確定するでしょうが、そのとき当初の想定ど おりに決まることもあれば別の仕様に変わることもあります。 基本的には、これらの 対応は 「要件管理」 の枠のなかで処理します。
ベースライン設定時に “未確定” となっている項目(暫定仕様として扱った項目)は、 要件の追跡の対象になるので、 ベースライン設定の時点で要求仕様の項目番号(記番 号)を追跡リストに掲載します。 追跡リストに掲載された仕様の項目番号は、設計書 やソースコードなどの成果物に埋めていくことになります。こうすることによって、 あとで仕様が確定したり変更されたりしたときに項目番号から速やかに対応できる体 制を確保するのです。
何の問題もなく決まったはずの仕様であっても、諸般の事情で変更されるかもしれ ません。 そのような場合は、 必ずしも仕様の項目番号を設計書やソースコードに埋め 込みながら作業を進めているわけではないので、 変更の依頼が発生することで内容に よっては混乱することもあります。
逆に、ベースライン設定時に未確定と判断され事前に追跡の対象に挙げられている 仕様がA案からB案に変更されたとしても、ほとんど影響はありません。 想定してい ない方向に変更されたり、大きく方向転換されたりしないかぎり、 未確定項目に対し ては冷静に対応できるはずです。 問題は、変更の件数が多くなったときです。
第8章 要求を仕様化する
□8.16.3 依頼者と事前の合意が必要 ただし、未確定項目を含んだ状態でベースライン設定を行うには、プロジェクトの 開始時に依頼者との間で、このような形で要求仕様書の 「合意」 を形成する可能性と 進め方について了承を得ておく必要があります。
たとえば、最初に今回のプロジェクトの状況を判断する際に、 誰が仕様確定に関与 するのか、 海外の関係者も関与するのか、 仕様に選択肢が絡みそうかといったことを 検討し、 未確定の状態を抱えた形で 「合意」 する可能性 (必要性) があると判断した ときに、確定しない仕様の合意方法やその後の確定方法などを説明し、了承を得てお
くのです。 未確定項目の割合についても認識を合わせておく必要があります。
仕様化の作業が遅れた結果、 未確定の状態でも予定の期日にベースライン設定して もらわないと設計作業に入れないからといって、 合意を要求するのは正しい対応とは いえません。 それは 「FIX」 を要求するよりも質の悪い対応です。
8.17 設計情報の扱い
「仕様」 であることの条件として「実現可能性」 という基準があります。 具体的な レベルで仕様を記述することで、その仕様が実現するものかどうかという “可能性” が見えてきます。 また実現の可能性が見えることで、ほかの機能の仕様と衝突してい ることも見えてきます。 この段階で実現可能性が見えることで、いろいろと仕様間で 調整できるのです。
なかには
「一つの計測器に対して、 100μsでサンプリングする」
と仕様を記述しても、 本当にそれが今回のシステムのなかで確実に実現するという裏 付けがないことがあります。 その場合は、この仕様の実現可能性を曇らせているほか の機能の仕様を明らかにしながら、実現性を明らかにするのです。
また、この仕様を書いている人の頭に、 100μsで実現できる 「方法」 が、少なく とも一つはイメージできていることがあります。 その方法を知っているから、「一つ の計測器に対して、100μsでサンプリングする」 と書いたかもしれません。
このように、 設計の経験を持っている人が仕様作成の担当であったり、 実際に設計 する人が仕様書を書いたりするような場合には、仕様を書いている最中に設計方法(実 現方法)が浮かんでくることもあります。 特に、 いままであまり要求仕様書のような 「ま
278
8.17 設計情報の扱い 279
どろこしい」ものを書かないでいきなりソースコードを書く習慣が身に付いている人 には、要件(特に仕様のようなレベルの記述)が見えると、すぐに設計方法(実現方 法)を浮かべてしまうかもしれません。
いまは要求仕様書を作成する段階だからといって、 設計に関することを考えるのを 規制しすぎても、 本来の要求仕様の抽出に支障をきたすかもしれないので、そのよう な場合は 【設計情報】 としてどこかにまとめておくとよいでしょう。 Excelで要求仕 様書を書く場合は、 そのような設計情報の 「列」 を確保してそこに設計方法のメモを 残したり、 別に 「設計情報」 だけのシートを作り、 仕様とリンクを貼ったりして対応 します。 「表現」 の混乱を避けるためにも、できるだけ、 「仕様」 の記述と切り離して おいたほうが安全です。 Wordのようなツールで書く場合は、設計情報を「枠」 で囲 んだり、明確にインデントを下げたりしておくとよいでしょう。
ただし、いまは 「要求仕様」 をまとめている段階なので、いちいちその場に立ち 止まって 「実現方法」を考えるのは避けて下さい。 速やかに、全体を仕様化する作業 を優先すべきです。 実現方法に不安があるが、かといってすぐに実現方法が浮かんで こない場合は、 とりあえず 「旗」 ( "あとで実現方法を考える" という印)を立てて先 に進みましょう。 もしかすると、ほかの要求を仕様化しているときに、関係する仕様 の絡みも見えてくるので、そこで3日前に立てた 「旗」 に関連した 「設計情報」 が浮 かぶかもしれません。 そのときに、 すかさず機会を逃さないようにするために、「旗」 に少し工夫するぐらいがよいでしょう。
では、要求仕様書にこうして書かれた 「設計情報」 は有効なのかというと、 要求仕 様書に書かれた設計情報は、 あくまでも「参考」 でしかありません。 要求仕様書のな かの設計情報は、実現性を裏付ける 「一つの解」 であって、 設計プロセスにおいて実 現方法を創造することに対して邪魔をしないというのが一般的な扱い (ルール) で す。 実際にこの要求を設計し実現する人が、ここで書かれている 「設計情報」よりも 優れた実現方法を考えつく機会を奪ってはならない、ということです。
ある機能の仕様を書いているなかで設計情報を残した人が、 その後、 実際に設計し 実現するときに2ヶ月前に考えた (思いついた程度かもしれません) 設計情報に縛ら れる必要はありません。 そのときの思いつきを足がかりに、いまは明らかになってい るほかの関連する要求 (仕様) をも加味してもっと上手い実現方法を考えつくことも できるかもしれません。 安易に、知恵の壺に 「蓋」 をしてしまうのはもったいないこ
とです。
第8章 要求を仕様化する
章
*9
Excel による仕様化の勧め
一般に、 「文書」 というとWordのようなワープロツールで書くものと思い込んで いる人が多いようで、 コンサルティングの場でも、このことでしばしばてこずります。 要求に理由をつけたり階層化して表現することなどは、意識すればワープロツール のWordでも表計算ツールのExcelでも、どちらでも大差なく表現できます。 段落の 設定などはいくらかExcelのほうがやりやすいかもしれませんが、 Wordでもそれほど 難しくありません。 仕様レベルでの も遜色なく実現できますし、番号 付けも同じようにできます。
しかしながら、 仕様化作業のなかでは、途中で要求を分割したり仕様から新たに要 求を立ててそこに移動したりすることがあります。 また、要求や仕様が途中で無効に なったりもします。 そのようなときに、 適当な単位での移動のしやすさは重要なポイ ントです。 また、 移動した理由や無効になった理由などを記録しておくことも、あと になって混乱を避けるのに役に立ちます。
仕様化は 「実現可能性」 を明らかにする行為なので、 その過程で実現性が危ういケ ースも見えてきます。 そのようなときには、 試作などの機会で実現性の確認を指示す る文言を記録 (メモ) しておくことも重要です。 このようなことを考えると、「Excel」 のほうが使いやすいようです。
ここでは、要求仕様書をExcelで書くことの利点や応用価値について説明します。
9.1 「Excel」 のほうが細かな使い方ができる
Wordは文書の印刷を想定した体裁に整えるには便利ですが、 Excelはシートを目的 別にすることで多彩な使い方ができます。 たとえば、
機能要求と品質要求とでシートを分ける
機能が多いときは、いくつかの機能グループをシートに分割する
図のシートや設計メモのシートなどを別に設ける
仕様の変更履歴や変更の経緯を記録したシートを設ける(この場合、 仕様とリン クできるかもしれない)
といった具合に、 Excel が便利な面が多いのです。
また、 Excelの場合は、要求仕様をそのまま「トレーサビリティマトリクス
第9章 Excelによる仕様化の勧め
(Traceability Matrix: TM)」 と一体化することで「要求 TM」 として効率よく運用で きます。 Wordで要求仕様を書く場合は、 「TM」 へは要求仕様の番号だけを持ち込む ことになり、 要求仕様と 「TM」 が別の文書になってしまうことで保守性にいくらか の弱点が生じます (9.3 要求TMへの展開」 を参照)。
特に、筆者が勧める 「派生開発プロセス」 では、 Excel で 「変更要求仕様書」 " を書 いて、 それと 「TM」 とを一体化して 「変更要求TM」”とすることで変更が発生する 箇所を 「TM」上に表現できます。 そして、その該当箇所に対応して 「変更設計書」” をリンクするという方法によって、変更要求仕様と変更方法をつなぐことができます。 このように、 プロセスと成果物をうまく設計すれば無駄な文書はほとんど発生しない のです。
「Excel」 を使うことで、 大括りの機能を 「シート」 に分けてまとめたり、 「用語」 のシートを設けて文中の用語とリンクしたりすることもできます。 適切にシートを設 けて、調査結果などの要求仕様に関する情報を置いておくこともできます。
さらに、Excelで要求の 「行」 を確保することで、 その行に要求単位でソース行 などの見積りの欄を設定し、 仕様化前に要求項目ごとに仕様の項目数やソース行数を 見積もる (仮説見積り) ことができます。 (「9.5 WBS との違い」を参照)
「後日協議」 とか期限を切ってあとで対応するようなケースも、適当に目的にあっ た 「列」 を設けることで自動的に 「協議忘れ」 を発見するプログラムを用意すること もできます。メモを書き残してもそれを手作業で探さなければならないのであれば「メ モ」の効果は半減しますが、 PCの起動時に自動的に立ち上がるように指定しておく ことで、 人に代わってExcelのマクロが発見して教えてくれます。 こういう仕掛けを 作らないと作業が楽になりません。
9.2 要求書と要求仕様書を一体化
要求書をWordで書いた場合、 その後の要求仕様書とは別の文書になってしまうこ とが予想されます。 その場合、 要求仕様書にはもう一度 「要求」 を表現しなければな らず、その分だけ余分な時間がとられます。
現実には、要求と要求仕様が区別して認識されていないため、 「要求書」 と 「要求
*1 変更だけを扱う要求仕様書の意味。 派生開発プロセス の主要文書の一つ。 *2 変更にはTM(トレーサビリティ・マ トリクス)は不可欠で、変更要求仕様書と合体させることで変更 箇所を特定するのに扱いやすくしたもの。 *3 特定された 変更箇所に対して、 どのように変更するか何を変更するかを記 述したもので、筆者の派生開発プロセスの主要文書の一つ。
通常の「設計書」 と構成も記述内容も大きく異なるため「変更 設計書」として区別しています。 *4 実際には、「要求」 「理 由」 「説明」 の3行分が確保されます。
282
92 要求書と要求仕様書を一体化 283
仕様書」 がWordで書かれた状態で分かれていても、 要求書のほうは 「概要」 のよう に認識されているし 「要求仕様書」にも要求は表現されていないので "重複” の感覚 はないのかもしれません。 もちろん、 “仕様” だけの要求仕様書は、 その適正さを判 断するのは難しくなります。
しかしながら、 本書で勧める構成では、 仕様は要求の範囲のなかに収まっているこ とを実感する必要があるので、 「要求書」 と 「要求仕様書」 の文書が分かれてしまう と要求の表現が重複してしまい、 その後の要件変更 (仕様だけではない) でも要求書 と要求仕様書の両方を修正する必要が生じます。
これに対して、 Excelで要求仕様書を書く場合、要求書と要求仕様書を一体化する ことで、 「要求書」 の段階で書かれた各々の要求の下にさらに要求を階層化したり仕 様を挿入したりできるので、保守が容易になります。 言い換えれば、 要求書が仕様化 の過程で要求仕様書に変わっていくのです。 この場合、 Excelの"グループ" の機能 を使うことで、要求の下の仕様を折り畳んで要求だけを見ることもできるので、要求 書としての機能も持ち続けることができます。
次ページ図9.1はExcelのグループ化の機能を使って折りたたんだもので、その下 図9.2は要求の下に隠れていた仕様を見せた状態です。
このように、 要求だけを見たいときは折りたたむことで、 要求の一覧性を確保でき ます。 また、 それぞれの要求に含まれる仕様を見たいときは、 「+」 の記号のところ をクリックすれば、そこに隠れている仕様が見えます。 制御された状態での「一覧性」 というのは、“モレ” を防ぐのに効果があるのです。 仕様を隠すことによって、どの ような要求が下位層に展開されているのかを一望することもできますし、 のレベルで一覧表示させることでグループ分けの様子を判断することもできま す。
要求仕様書で大事なことは、 保守の面からも類似の文書を複数作らないことです。 しかしながら多くの現場では、 機能仕様書だとか操作仕様書、 機能概要書などのタイ トルを持つ文書が存在し、 要求や要求仕様が分散しています。 「要求仕様書」 だけを とっても、それぞれの担当者が自分の分担範囲で思い思いの形式で仕様書を書いてい ることもあります。 これでは仕様書が分散したり重複したりする結果になることは避 けられません。 それだけではありません。 それぞれの人が仕様化に投入した工数を回 収できない可能性も高くなるのです。
要求書と要求仕様書が分離されている状態では、その後の維持管理は困難です。 変
第9章 Excelによる仕様化の勧め
284
図9.1 要求がグループ化された例
Microsoft Excel説明図 xls ファイル編集 表示 ( 挿入 書式) ツール データ(D) ウィンドウ(H) ヘルプ (H) Adobe PDF (日) 831782 4 100% L42 ODD C D E F G H 1 2 要求 MAL01 理由 3 受信した電子メールをキーワード検索したい メールが多くて、関連するメールを探せない 説明 4 5 要求 MAL01-01 6 受信したメールにキーワードをつける 理由 後で検索する際のキーをここで設定しておきたい 7 説明 11 要求 12 13 MAL01-02 いくつかのキーワードを組み合わせて検索できる 理由 可能性のあるキーワードで探したい 説明
欄外の「+」の記号は、この下にグループ化されて いることを示します。 この例では、 2段階でグループ化されています。
コマンド
↓図 9.2 要求の下に仕様が開いた状態
Microsoft Excel-xis ファイル編 挿入 () ツール(ダーク) ウィンドウ ヘルプ ( Adobe PDF (D) DEHUBA1-21 100% L42 C D E F O H 21 22 23 要求 MAL01 受信した電子メールをキーワード検索したい 理由 [メールが多くて、関連するメールを探せない 説明 24 要求 MAL01-01 受信したメールにキーワードをつける 理由 後で検索する際のキーをここで設定しておきたい 説明 質問を入力してください ☐ MAL01-01-1 指定されたメール文の中の文字列を選択し、 「キーワード」に指定する ☐ MAL01-01-21 つのメールでの 「キーワード」の指定の回数には制限はない ☐ MAL01-01-3 一つのキーワードの文字列は最大12文字とする 要求 MAL01-02 いくつかのキーワードを組み合わせて検索できる ☐ 理由 可能性のあるキーワードで探したい 説明 MAL01-02-1 検索したいキーワードを入力できる MAL01-02-2 複数のキーワードを「AND」 と 「R」で繋ぐことができる MAL01-02-3 キーワードは最大8個まで指定できる
欄外の 「+」 記号をクリックすると、 「要求」 の 下に折りたたまれた 「仕様」 が表示されます。
92 要求書と要求仕様書を一体化 285
更が発生したときも、関連する仕様の追跡が難しくなります。 そして、 十分な追跡が できないために、 関連した部分での変更が漏れてしまう可能性も高くなります。 この 意味からも、 「要求書」と「要求仕様書」 を一体化することが望ましいのです。
9.2.1 要求仕様書を作成する方法として、ヒアリングなどを通じて要求や仕様を引き出す 方法と、 仕様書作成の担当者がまず自分の専門知識のなかから要求を整理しそのあと で仕様を引き出す方法があります。 文書としては、基本的には「要求書」 から作るこ とになりますが、 要求を引き出している間に 「仕様」 が出てくる (浮かんでくる) こ とがあります。
最初に 「要求書」 を展開する
ヒアリングの場では、「今日は要求についてお聞きします」といって出てきた仕様 を捨てるわけにはいかないでしょう。 一般にはその日は特定の 「機能」 についてヒア リングすることが多いと思いますが、 ある機能の振る舞いについてヒアリングしてい るなかで、聞き手がその動きを十分に理解できないときに 「たとえば?」 と言葉をは さんでもっと具体的な動きを聞き出そうとします。 逆に、聞き手の理解がずれている と感じたときには、話し手のほうが、 「たとえばね......」 と、 具体的な振る舞いを話 すこともあります。 このときに 「仕様」 が出てきます。 自分で要求を考えているとき であっても、思わぬタイミングで仕様が浮かんできます。
要求の抽出中に仕様が浮かんだとき ↓表9.1
要求 MAL01-01 理由 検索対象のメールボックスを指定してグループ化できる 仕事上のメールとニュース等のメールを分けて扱いたい 説明 要求 MAL01-02 いくつかのキーワードを組み合わせて検索できる 理由 可能性のあるキーワードで探したい 說明 該当するメールが存在しないときは 「該当なし」 を表示する
要求を考えているときに、 "そうだ、発見できないときもあるよね。 そのときは 「該当 なし」と表示しないと " と仕様がひらめいたので、 少し隙間を空けで仕様を書き留めて おく。
286 第9章 Excelによる仕様化の勧め
このような形で出てきた 「仕様」 は、 必ずしもいま考えている要求 (階層化された 位置の要求を含む) のなかに含まれるとは限りません。 いま検討している要求に含ま れると思われるときは、その要求の仕様の位置に書き留めておけばよいのですが、 い ま考えている要求に含まれないと思われる仕様が出てきたときは、 前ページ表 9.1 の ように少し隙間を空けて書き留めておき、 あとでその仕様にふさわしい要求を見つけ そこに移動します。
このような場面に遭遇したとき、 Excelを活用していることが活かされてきます。 要求や仕様の行の追加が容易であるし、適当な位置にメモしておいた仕様を他の要求 の下に移動するのも容易です。
9.3 要求TM (トレーサビリティ・マトリクス)への展開 トレーサビリティ・マトリクスは、要件管理のなかでの 「要件変更」 のところで、 変更要件の評価や変更による影響範囲を確認する際に有効に働く成果物です。 しかし ながら、現実にはこれを書いている組織は皆無に近いのではないかと思われます。 少 なくとも、ソフトウェアの開発が混乱している組織では、 仕様変更の際に関連する箇 所を追跡することを意識したトレーサビリティ マトリクスは書かれていないでしょ う。これが書かれているぐらいなら混乱しないでしょうから。
最近では、CMMI の 「要件管理」 中で 「双方向トレーサビリティマトリクス」が 勧められている関係で取り組み始めた組織もあるかと思いますが、 トレーサビリティ・ マトリクスというものをCMMIの取り組みのなかで初めて知った人も少なくないので はないかと思います。 トレーサビリティ・マトリクスそのものは昔から存在していた ものですが、 一般のビジネスシステムや組み込みシステムの世界ではほとんど見るこ とはなくなっていました。
その原因として考えられるのは、
●システムの規模が大きくなってトレーサビリティ マトリクスを作れなくなった ②PCが個人に行き渡ったことで、 「一人」 のなかで閉ざされた開発が行われるよう になった
③ ソースコード以外の成果物 (筆者はトレーサビリティ・マトリクスのような成果 物を、設計書などの 「中間成果物」 と区別して 「補助成果物」 と呼んでいます) に対する必要性の認識が低くなった
●適切な 「要件管理」 のプロセスが省みられなくなった
9.3 要求TM(トレーサビリティ・マトリクス)への展開 287
ことなどが影響しているのかもしれません。 日本では、 CMMI でも当初の版で取り組 んだ組織では、 要件管理のなかでトレーサビリティ・マトリクスは取り組まれていな いと思われます。
表9.2は、 筆者が勧めている「要求仕様書」と「トレーサビリティ･マトリクス (TM)」 をExcel上で合体させた例で、 これを 「要求TM」 と呼んでいます。 もちろん、 適当 なツールがあればExcelにこだわるものではありません。
新規開発時は、 そこで展開されている仕様が細かいときはいくつかの仕様がまとま った形で同じモジュールで実現されることが多く、 表9.2のようにいくつかの仕様が まとまった状態で該当するモジュールとの交点に実現箇所の情報が書き込まれること
↓表 9.2 要求TMのイメージがわかるようなマトリクスの事例
M1 M2 M3 M4 M5
要求 MAL01 受信した電子メールをキーワード検索したい 理由 メールが多くて、関連するメールを探せない 要求 MAL01-01 理由 MAL01-01-1 MAL01-01-2 | 検索対象のメールボックスを指 定してグループ化できる 仕事上のメールとニュース等の メールを分けて扱いたい メーラーが管理するメールボッ クスを一覧表示する グループ名が指定されていれば、 グループ名の一覧を表示する |指定されていない場合はグルー プ名の欄は 「空」 で表示する 新たにグループ名が指定された MAL01-01-3 ときは、グループ名一覧に追加 する 要求 いくつかのキーワードを組み合 MAL01-02 わせて検索できる 理由 可能性のあるキーワードで探し たい 仕様を実現して いる箇所の情報 箇所の情報 この仕様を実現している MAL01-02-1 MAL01-02-2 MAL01-02-3 検索したいキーワードを入力で きる |複数のキーワードを 「AND」 と 「OR｣ で繋ぐことができる キーワードは最大8個まで指定 できる
上の例では、「説明」 の行は省いている。 「M1」 は適当なモジュールの単位。 タスク、 ソースファイル、パッケージなど。 実現しているモジュールのところに、クラス名や関数名などの情報を書き込む。
第9章 Excelによる仕様化の勧め
になります。
最初から要求仕様をExcelで表現することで、 要求仕様書とトレーサビリティ・マ トリクスをつなぐことができるので、仕様が変更されたときも同時にマトリクスの構 成も変更に対応でき、 保守性も向上します。
派生開発プロセスではこのトレーサビリティ マトリクスは不可欠なので、 変更要 求仕様書と組み合わせて 「変更要求TM」 として使っています。
□9.3.1
仕様変更時に効果を発揮する
トレーサビリティマトリクスは、 新規開発のなかで設計書やソースモジュールの 進捗に合わせて、内容を埋めていくことになります。 設計しながら関連する仕様の行 で該当する設計書との交点に章番号を埋め込んだり、コーディングしながらクラス名 や関数名を記入したりすることは、 若いときからこれを習慣にしていないソフトウェ アエンジニアにとっては、おそらく “苦痛” を伴うものと思われます。 このマトリク スは、あとでまとめて作れるものではありません。 そのような工数は確保できないで しょうし、第一そのクラスや関数が関係している要求仕様を探り当てるのは困難です。
しかしながら、 トレーサビリティ・マトリクスが書かれていない状況では、 開発の 途中で発生する要件 (仕様) の変更にあたって、 それを実現するために考え出された 修正方法が他の機能に影響を与えるかどうかは個人の記憶に依存することになり、 評 検討する手段が限られてしまいます。
仕様変更に伴って実施される検討会議や、 要件管理のなかで行われる変更制御委員 会 (CCB) の場では、その変更によって影響を受けると思われる箇所に検討が加えら れたかどうかが問題になります。 そこで、
PL : 「影響範囲は検討してくれましたか?」
担当者 : 「はい、考えられる範囲はチェックしました」
という会話が交わされるのですが、ここで考えられる範囲」 というところが個人の 記憶や気づきに依存しているのです。 それは担当者が悪いというのではなく、 一人の 人間の“わかる” の 「限界」 です。 わかる範囲を広げる仕組みがなければ、事故を防 ぐことはできないのです。
その上、担当者が 「影響」の意味をどのように認識しているかも問題です。 仕様変 更に伴って変更した関数を呼んでいるところ、という意味でしか認識していないかも しれません。 その場合、 この関数を直接呼んでいるところをツールで検索して、そこ
288
94 自在に 「列」を設計する 289
での動き確認し、 “問題なし” と判断するでしょう。 本来は、もっと深くその関数を 使う機能 (仕様) の振る舞いのなかからも検討すべきです。
たとえば、その関数はある機能 (機能Aとします) の振る舞いのなかで呼ばれてい るのですが、 それは最初に設計されたときのモジュールの抽象化のなかで、 その時点 では別の機能 (機能Bとします) との間で共通になると考えたために両方の機能から 呼ばれているのであって、 今回、 機能Aの仕様が修正されることに伴ってその関数が 変更されることで性質が変わってしまうかもしれません。 ただし 「いま」の時点では 機能Bから呼ばれていることに不整合は表面化していないため、 「問題なし」 と判断 されることになるでしょう。
また、開発体制がいくつかのチームで構成されているときは、仕様を変更する担当 者の知る範囲が限られるので、トレーサビリティマトリクスのようなものがないと “影響範囲” を認識できなくなる可能性があります。
9.4 自在に 「列」 を設計する
Excelにすることで 「列」 を自由に設計できます。 要求仕様書にトレーサビリティ・ マトリクスをつなぐのも自在な 「列」 設計の応用の一つです (もっとも、 Excel の列 の数には制限があります)。 一般に、トレーサビリティ・マトリクスは、列方向に“タ スク"ぐらいのモジュールを配置するのですが、 設計書などの中間成果物を配置する ことで、 仕様変更で影響を受ける成果物を特定する際に役に立ちます。
このほかに、 「見積り」 に使うこともできます。 要求書の段階で、 それぞれの要求 の 「行」 を使って見積ります。 たとえば、 その要求で展開される仕様の項目数や、こ れがソースコードになったときの行数などを見積っておき、 実際に作業が進むなかで 実績値が把握された時点で見積りを調整します。
次ページの表 9.3 は仕様の項目数とソースの行数見積りの列を設定したものです。 正式な成果物の見積りは別に行っており、 ここで見積ったサイズや工数の合計が正 式の見積りのほうに展開されます。
要求を仕様化するということは、その機能の実現可能性を確認することでもありま す。 仕様化そのものが “決めていくことであり、 それだからこそ、 他の機能の仕様 と衝突していることに気づくことができます。 もちろん、 実現可能性が見えるには、 仕様化の精度も大きく影響します。 「仕様」 という位置づけにあっても、曖昧性を残 したままの表現では他の仕様と衝突していることに気づかないでしょうし、その仕様
第9章 Excelによる仕様化の勧め
↓表 9.3 要求の行に見積りの列を設定した例 サイズ 仕様 工数 ソース サイズ 工数 要求 MAL01 | 送信および受信した電子メールを キーワードで検索したい 理由 メールが多くて、 関連するメール を探せない 説明
要求の早い段階で仕様とソースの行数を見積る。 ここで設計書を見積らないのは、 設計書にはいろいろな成果物があるのと、 成果物によっては一意に数えにくいため。
も実現できるものかどうかを判断するのは難しいかもしれません。
しかしながら、すべての仕様において実現可能であることが判断できるように仕様 化の精度を上げたとしても、要求仕様書の段階ですべての仕様が実現可能であること を確認することは難しいでしょう。 そのような場合に、 たとえば 「要実現性確認」 と という文字を残しておくこともできます。
いう列を設けて、 そこに、 “要確認”
ただし、「備考」の使い方には注意が必要です。 多くの人は、安易に 「備考」の列
を設けて、 そこに気になったことやあとで考えることなど “何でも" 書き込みます。 結果的に 「ごみ箱」になってしまい、 あとで探し出すのに不必要な工数を使うことに なります。 備考の列に何種類かの情報が書かれた時点で、 そのなかから独立した 「列」 を設けて、以降はその列に情報を記録していくことが大事です。
専用の「列」を確保していることで、 情報の検索が容易になります。 簡単なExcel の関数で、 まだ対応していない箇所を発見することができます。
Excelであることでこのような操作は容易にできるのと、 「列」 を確保することで発 見しやすくなります。
9.5 WBS との違い
Excelを使って仕様化のコンサルティングをしているなかで、
「WBS (Work Breakdown Structure)”でもかまいませんか?」
という質問を受けることがあります。
システム開発における作業や行程などを、階層構造にし てあらわした図のこと。
*5
290
9.6 Excel で書くときの注意 291
要求の階層が、 たとえば2層に固定されるでしょうが、 仕様化そのものはWBS で も大差なく書くことはできるでしょう。 仕様の行を追加したり、 他の要求の場所に移 動したりすることもほとんど問題なくできるはずです。 工夫すればで仕 様を区切ることもできます。
大きな違いは、 WBSの場合は、要求に専用の 「行」 が確保できないことです。「行」 を持たないため、 要求のレベルで見積ることがやりにくくなります。 また、 トレーサ ビリティマトリクスの構成にも、 少しやりにくいことが起きます。
個々の仕様レベルとモジュールのマトリクスは構成できるのですが、 実際には 「仕 「様」 レベルでの 「交点」 が必要なのは派生開発の 「変更要求仕様」 のときです。 新規 開発の場合は、 階層化された要求のなかに記述された1つのグループの仕様は、通常 は同じ 「場所」 で実現されるので、 要求に専用の 「行」 があればその下の仕様を代表 してマークすることができます。 特に、 Excel のグループ機能で折りたたんだときに、 要求の行が確保されていることの便利さが実感できるはずです。
9.6 Excelで書くときの注意
多くの人は、 Excel" で書くとWord とは違った書き方になってしまうようです。た とえば、 Wordでは普通に文章が書かれるのに対して、 Excel では 「項目」 になったり、 わざわざ要約した短い文章になったりします。 文章を書く際にも、「セル」 が意識さ れてしまい、 1行に収めようという心理が働いているものと思われます。 これは無駄 なことです。 たとえ、 Excelであっても、 「セル」 中には、 普通に文章を書くことが大 事です。 Excelを使うことで、 作文に余分な苦痛が生じては意味がありません。
もう一つの特徴は、 Excelでは簡単に「箇条書き」 ができるのですが、 逆に、条件 別に異なった振る舞いを書くのに、一つの条件の記述を個別の 「セル」 に書いてしま う傾向がみられます。 たとえば、 次ページの表9.4 のように条件に応じた振る舞いの 記述に、4個 (行) のセルを使い4個の要求仕様の番号を使ってしまうのです。 この ような場合は 「表」 を使って組み合わせを 「一つの仕様」として書いたり、図8.3 (259 ページ参照) のように 「PADフロー」やデシジョンテーブルを使って論理を表現する ほうが、より見やすくなります。
この他、図などを上手に使うことで、ある程度Excelの不利を克服することができ ます。
第9章 Excelによる仕様化の勧め
表9.4 条件別に細かく分かれた事例
WA0.01 自動設定#12がオフで、 残メモリサイズが設定値1未満の場合は、 監視ペー スを5分に1回とする WAO.02 WAO.03 | WAO.04 自動設定#12がオンで、残メモリサイズが設定値2未満で、 接続点数が5以 上のときは、 監視間隔を3分にする 自動設定#12がオンで、残メモリサイズが設定値2未満で、 接続点数が5未 満のときは、 監視間隔を2分にする 自動設定#12がオンで、残メモリサイズが設定値2を超える場合は、1分間隔 で監視する
現実には、これらの条件の判断は、プログラム上の「ある箇所」 で実行されるので、 1つの項目番号でも対応できるかもしれない。
292
* 章
派生開発における要求仕様書
現実のソフトウェア開発の大部分は 「派生開発」 と思われます。 ここでいう派生開 発とは、
ベースになるソースコードがあり、そこに機能追加や修正を加える 開発期間が短い
関係者は現状のソフトウェアシステムを十分に理解できる状況にない
という特徴を持っています。 逆にこのような特徴を理解していないことが、派生開発 でのトラブルの発生につながっているのです。 たとえば、 多くの現場で実行されてい る派生開発のプロセスが、 “そこを変更してほしい” という要求に適合していません。 "要求にマッチしない不適切なプロセスは、 要求仕様の表現や仕様書としての文書 の構成が 「派生開発」にマッチしていないことと表裏一体の関係にあります。
派生開発には、 「派生」 にマッチしたプロセスがあり、 そこでは特別な要求仕様の 構成と表現が必要です。 この章では、派生開発における要求仕様書として 「変更要求 仕様書」 と 「追加機能要求仕様書」 の2本立ての仕組みと、 そこでの表現上の注意な どについて説明します。 派生開発についての詳しいことは、 拙著 『「派生開発」 を成 功させるプロセス改善の技術と極意』 (技術評論社) を参照してください。
変更要求仕様書 今回の派生開発で変更することになる要求と仕様をまと めたもの 追加機能要求仕様書 今回の派生開発で追加する機能についての要求仕様書
前述したように、 「派生開発」 とは現行のソフトウェアシステムに対して何らかの 修正を加えたり、 機能の追加なども行ったりすることを指しています。
仕様の変更(変更、追加、削除) -ここでは、一般の変更のほかに、ちょっとし た仕様の追加や削除も含みます。
機能レベルの移植
機能レベルの削除
機能レベルの追加
ここで派生開発における要求仕様書のあり方について扱ったのは、現実のソフトウ
294 第10章 派生開発における要求仕様書
ェア開発の大部分が派生開発であることと、 顧客からの依頼は新規開発のときと比べ ると雑になりがちで、 そのことが派生開発のヒアリングにも大きく影響するからです。
派生開発の特徴を認識した上で、適切なヒアリングと要件定義の技術が必要なのです。 派生開発においては、変更に関する要求仕様は、 新規開発での要求仕様や追加機能 の要求仕様とは違った表現が必要になることに気づいている人は少ないのではないで しょうか。 そのことに気づかない一つの理由は、「要求仕様書とは、 今回のプロジェ クトで実現したいことについて "Specify" するための文書である」 という認識ができ ていないからです。 そして、 この認識ができないことが派生開発でのつまずきの第一 歩なのです。
派生開発で変更のための要求仕様がきちんとまとめられない背景には、 設定された 期間が短いことが “圧力” になって、変更要求仕様を文書にするプロセスが省かれて しまうことが考えられます。 今回の派生開発にあたるチームが派生の対象システムを かつて新規設計した当事者であれば少しは不安も減るのでしょうが、現実には必ずし もそのような条件にはならないと思われます。 それでいて、 "派生” であるためにエ 数の設定も少なめ "になっているので、勢い、 “早くソースコードを修正しないと間 に合わない” という誘惑に負けて仕様作成者も設計者も拙速な行動に出てしまうので す。
10.1 “部分理解” の世界である
派生開発の難しさは、
一般に開発期間が短いこと
ソースコードは自分が書いたものではない (ことが多い) ベースの機能仕様 (要求仕様) の文書があっても内容が不十分 派生開発のときにほしい設計書がない
ことです。
そのため、 “部分理解” の状態で修正作業を進めることになります。 派生開発でよ くいわれる「ソースコードを理解する」ことは、時間的にも技術的にも満たされるこ とはありません。 だからこそ、 この「部分理解」 のハンディキャップをカバーするよ うな派生開発のプロセスと合理的な成果物の連鎖を持ち込むことが、 成功のポイント
*1 「生開発」に適したプロセスがあることに気づいていな い人には、ここで設定された期間は理不尽なほど短く感じると思 われます。
なのです。
10.1 “部分理解の世界である 295
筆者は、 プロセスと成果物の合理的な連鎖で構成された派生開発アプローチを設 計する方法として 「PFD」 という表記法を提供しています。 これは構造化分析のツー ルである 「DFD」 をアレンジした方法で、 プロセスと成果物の関係を一目できるよう になっています。 「PFD」 の表記法の詳しいことは筆者のHP(http://homepage3.nifty. com/koha_hp/)を参照してください。 また、 「PFD」 を使って開発アプローチを設計 するツールとして 「EA (Enterprise Architect)」 があります。 こちらはスパークスシス テムズジャパン株式会社のHP(http://www.sparxsystems.co.jp/)を参照してください。
派生開発の場合、いわゆる「システム設計書」 のような設計書の類いは書かれません。 まとまった大きさの機能追加があれば、 その分については何らかの 「設計書」 が書か れますが､ ｢ここを変更してほしい」 というだけの場合は、一般的な設計書の類いは 必要としません。 そのことを感じているから、 多くの人は、変更が求められている仕 様に関係するソースコードの該当箇所を見つけ次第に修正しているのです。 もちろん、 「部分理解」の下で作業が行われることを考えると、この対応は適切ではありません。 その証拠に、あとになってやり直したり、次々と修正モレや不適正な修正が発覚した りします。
一般には、 「部分理解」 の下での作業になることの意味を認識していないため、 図 10.1 のように、 派生開発の期間の2割ぐらい経過したあたりから、ソースコードの修 正が始まります。
↓図 10.1 いきなり始まるソースコードの修正
A この間、ソースコードの該当する 箇所を見つけ次第修正する テストをしながら、 漏れた箇所の 修正が繰り返される
基本的に、ソースコードを弄るのが早すぎる。 "A"の時点と "B" の時点でシステムに対する理解のレベルの相当に差がで きているはずにも関わらず、 "A" の時点でソースに手が加えられたこと に正当な根拠があるか?
第10章 派生開発における要求仕様書
いうまでもなく、 「A」 点 「B」 点とでは、ソースコードに対する理解に大きな差 が出てしまいます。 しかし、担当者は、“少しでも早く終わらせたい” という気持ち になっているので、 該当箇所 (と思えた箇所) を見つけ次第に修正してしまいます。 それで、 「一件落着」 と思いたいのです。 明日とりかかる修正項目でてこずるかもし れないので、今日は少しでも多く片づけたいのです。
しかし、 「部分理解」 の下での修正作業であることを考えると、これは危険な行為 です。 そして実際問題として、テストの段階に入って 「A」 点での修正が不十分だっ たことに気づかされ、 もう一度見直すことになります。 このとき、 修正前のソースコ ードが手元にあればよいのですが、 すでに、 バグを埋め込んだあとのソースコードを 見て、従来の仕様の動きと今回の変更分の動きを考えながら修正することになります。 もちろんこの段階では、ソースコードやシステムに対する理解度は 「A」 の時点での 理解度とは大きく変化しているので、 より正しい修正ができる可能性が高くなってい ますが、その行為は信頼性に欠けます。
これが 「部分理解」 の問題です。 派生開発では、基本的にはこのような理解の差が 生じる状態を避けることができないので、変更のための要求仕様書を作成するプロセ スをはじめその後のプロセスや成果物も、この部分理解をカバーするように工夫する 必要があります。
□10.1.1 人の書いたソースを理解できるか?
||||||||||||
一般に、 自分が書いたソースコードでも、 半年も経つとソースコードを読んで理解 するのが難しくなります。ましてや、他人が書いたソースコードでは理解しがたいの は当然です。
「いったい、 なぜこんなタイミングで中断条件を判断しているのだろう」 「似た処理がここにもあるが、これらは別々に存在する意味があるのだろうか」
新規開発のときに、最終的に 「仕様」 をソースに変換したわけですから、ソースコ ードを読んでそこからわかることは 「仕様」 です。 ソースコードから、受信したデー タをエラーと判断する条件や、 ボタン操作が受け付けられる状態 (条件) などがわか りますが、それらはすべて 「仕様」 を具現化したものです。 複数の計測器から入手し たデータをグラフで表示する際に、計測時間を揃えるための処理がソースコードから 見えたとすれば、それも仕様です。
このように、ソースコードからは仕様が見えるのですが、 「要求」 は直接には見え
10.2 USDM の構成を持ち込む 297
ません。 そのときの要求仕様書 (“要求” が表現されていなければ意味はないが)が あればよいのですが、 それがなければ要求はソースコードから推測することになりま す。 もちろん、 一般の要求仕様書には要求は表現されていないので、 推理するしかあ りません。
「トラブルが波及するのを未然に防ぐ」 必要 (理由) から、 要求が 「複数地点の計 測データの変化を比較して見えるようにしたい」 ことにあり、そのために画面上で時 間軸を合わせるような処理が行われているのだということがわかればソースコードを 理解しやすくなるのですが、 多くの人は普段から 「要求」 を意識していないので、ソ ースコードを読んでもそこで行われていることを 「理解」 できたと感じるのは難しい かもしれません。
だからここを修正すればよいと “わかった" と思うのは、その人の思い込みに過ぎ ないかもしれないのです。 それにもかかわらず、 該当箇所と思しきソースコードを見 つけ次第、安易に修正しているのです。 本心としては確信はないのかもしれませんが、 迫りくる納期限が頭に浮かんでしまえばそこを直してしまうのでしょうか。
10.2 USDMの構成を持ち込む
このような問題を克服するために、変更要求仕様書にも 「要求」 と 「要求仕様」の 体系を持ち込みます。 変更を要求で捉え、 その 「変更要求」の下に具体的な変更のレ ベルを 「変更要求仕様」として捉えます。
「期間収益を個々の製品レベルで正確に把握できるように変更してほしい」
あるいは、
「期間収益を個々の製品レベルで正確に把握できる機能を追加してほしい」
という変更依頼は、 明らかに 「要求」 のレベルで表現されています。 ここからわかる ことは、現在のシステムでは、 個々の製品レベルでは期間収益をつかめるようになっ ていないということです。 特に、 “追加” という言葉が使われることで、 現在のシス テムにはこの機能がまったく提供されていないことがわかります。
逆に、 "変更" で実現する場合は、 この要求のどこが変更されるのかを調べなけれ ばなりません。 場合によっては 「正確に」 が変更の対象なのかもしれません。 そのよ うな場合は、
298 第10章 派生開発における要求仕様書
「現在、 個々の製品レベルで期間収益が把握できるようになっているが、この精 度を上げてほしい」
とすれば、何が変更の対象なのかが明確になります。 さらに必要なら、
「10万円の精度から1000円の精度に変更してほしい」
とするのもよいでしょう。
変更要求も変更のおよぶ範囲の広さによっては、階層化して変更すべき仕様の抽 出をしやすくすることが大事です。 たとえば、 「CPUを○○から□□に変更する」と いう場合は、これに関連して変更が広範囲におよぶことが予想されるため、 表 10.1 のように、 初期処理や通信処理などいくつかの領域に変更要求を階層化することで変 更仕様の抽出を支援します。
変更要求にも原則として 「理由」 を書くようにしますが、 新規要求と違って変更が 具体的に仕様のレベルで発生されることが多く、 すぐには 「要求」 や 「理由」 を立て にくいことがあります。
↓表 10.1 変更要求を階層化している事例
CPU01 CPUを○○から□口に変更する 要求 理由 説明 要求 CPUの処理速度を上げてネット処理のスピードを早める (CPUの違いから両者の変化点を説明するとよい) CPUL01-01 初期処理でCPUに依存する部分を変更する 理由 説明 スタックの設定やRTOS との接続処理がここにあるため CPUL01-02 割り込み処理のところでCPU依存部分を変更する 要求 理由 スタック操作などのRTOSとの接続処理と高速化のための 処理があるため 説明 要求 CPUL01-03 処理速度の差の分だけバッファフルの判断基準を変更する 理由 高速になった分だけ判断に余裕が生じるため 說明
CPUを変更するという要求は広い範囲に変更が及ぶので、変更要求をいくつかの領域 に分割階層化したもの。
10.2 USDM の構成を持ち込む 299
また、表10.1のように、 階層化された変更要求にも 「理由」を付けるようにします。 このように 「理由」 を付けることで、 その部分を変更しようとする意図が明確になり、 レビューの効果を高めることができます。
「DIV.02 A社の製品 (製品名) もシステムに接続できるように変更する」
という変更要求も、 “接続できる" という表現のなか
特別な通信のセッションの対応
に、
メッセージフォーマットの対応
接続異常時のリカバリーシーケンスの対応
などに変更の範囲が広がると考えられるときは、 変更要求を階層化して範囲を狭め、 それぞれの変更の箇所に焦点を当てやすくします。
実際には、こうして階層化された変更要求の下に、
「DMA01.01 DMAコントローラに対する転送サイズを1024から2048に変更す る」
というように、具体的な変更点 (変更仕様) を拾い出します。
10.2.1 "仕様” で出される変更要求 派生開発における変更の要求は、 しばしば 「仕様」 のレベルで出てくることがあり ます。 たとえば、
「顧客画面#3の右上に日時の表示を追加してほしい」
「売り上げ達成率の表示を、 XX% から XX.X%に変更してほしい」
「ファイル選択画面で 『中止』 を選択したときは、操作の確認画面を出してほしい」
という変更の依頼は、 まさに 「仕様」のレベルになっています。 このような状態の変 更依頼を受けたときの担当者は「楽勝!」 と反応するところからも、それが仕様であ ることがわかります。つまり、これらの変更依頼はソースコードの該当する箇所と “直 結 しているのです。
変更の要求 (依頼) は、 機能の追加と違ってこのように具体的に仕様のレベルで出 されることが多く、 そのままでは 「変更要求仕様」 が 「要求」 に包まれずに扱われて しまう危険性があります。 変更要求仕様といえども仕様ですから、それを包み込むよ
うな変更要求を立てて、そこに収めることが望ましいのです。こうすることによって、 顧客も気づかなかった変更すべき関連箇所が見えることもあります (第8章 「8.11.2 ふさわしい要求に収容する効果」 を参照)。
たとえば、「ファイル選択画面の右上に日時の表示を追加してほしい」という変更 依頼が出されたとき、 「日時の表示を追加してほしい」 という変更に対して、
「要求」(変更の真意) はどこにあるのだろうか? 本当は何を変えたいのだろうか?
と考えます。 その結果、
「データを入力する際に日時を入力する箇所が何箇所かあり、 日時がすぐにわか るようにする」
ことが要求だとわかると、 次は
「時計なら壁に掛かっているし、 腕時計もあるだろう。 なぜ日時を画面に表示す るのか」
という 「理由」 を考えます。 そうすると、
「この操作をする人はほとんどが女性であり、 女性の場合は腕時計をしていない ことが多い。 そのため、 そのつど顔を上げて壁に掛かっている時計を見て日時を 確認しなければならず、 作業が中断してしまうのと画面から目を離すことで作業 効率が低下するから」
あるいは、
「壁に掛かっている時計は必ずしも正確ではなく、 時計によって5分程度の差が あり入力データには適さない」
というのが理由だとわかり、 その結果、 連鎖的に以下のことが決まっていく可能性が あります。
表示する日時のスタイルや文字の大きさ
表示される時間の正確性とシステム全体の統一性
簡単な時計の調整方法の提供の必要性
300 第10章 派生開発における要求仕様書
ほかの画面で同じように日時を表示する必要性の確認
10.2 USDM の構成を持ち込む 301
これらのことは、 「ファイル選択画面の右上に日時の表示を追加する」 という初期 の変更仕様からは発見されにくいのです。
□10.2.2 「変更要求」 を立てることの効果
このように、 派生開発ではしばしば 「仕様」 のレベルで変更が伝えられます。 それ は、文書であってもヒアリングであっても同じです。 依頼側に 「要求」 と 「仕様」 を 区別するという認識がない状態では、このようなことは避けられません。 ほとんどの 場合、 そこに悪気は入っていません。 むしろ、設計者の負担を少しでも軽くできれば という思いから発していることもあります。
あるとき、 営業部門から
「監視カメラの動作角度を30度から45度に広げてほしい」
という変更要求が届いたとします。 もちろん、 これは 「仕様レベル」 の変更依頼です ので、長くこのシステムを担当してきた設計者にとっては修正個所はすぐに想像でき ます。
そこで、作業を中断してカメラの動作角度を45度まで広がるようにプログラムを 修正し、動作を確認して引き渡します。 担当者としては一件落着と思ったのですが、 しばらくして営業部門のほうからクレームが届きます。
クレームの内容は、 動作角度を45度にしたことで1サイクルの時間が50%延びて しまい死角が発生してしまった、というものです。 このときになって設計の担当者は、 動作角度を45度にするという変更は、
要求 = 「監視カメラの設置台数を減らし、 一つのカメラでのカバー範囲を広げた 「い」
理由= 「設置台数を減らすことでシステムを構成したときに3割ほど安くできる から」
ということに気づいたのです。
この結果、 死角が発生しないように首振り角度のスピードを上げ、 画像の取り込み のサンプリングタイミングを変更したり、いわゆるシャッター速度を上げたり、 さら に売りやすいように、 画像の圧縮率を最新の技術に置き換えて少ないハードディス クの容量でカバーできるような変更も考えられます。 「カメラの動作角度を30度から 45度に広げる」というのは、この変更要求のなかの一つの仕様に過ぎなかったのです。
302 第10章 派生開発における要求仕様書
↓図 10.2 依頼者との会話のなかで変更要求の背景を知る
例の防犯カメラの首振り角度を 45°まで回るようにしてほしいん だが。 販売店から、 システムの性能には 高い評価が得られているんだが、 トータルコストが高くて売りにくい、 という声があってね。 それはかまわない けど、いったい何が あったの? 「要求は、1台のカメラのカバー 範囲を広げて設置台数を減ら したい、ということですね。 そういうことなんだがね。 それで売り上げ増につ なげたいんだな。 だとしたら、 カメラの動作速度 や画像の取り込みの速度をア ップしないと。
もちろん、 営業の担当者は悪気でこのような 「仕様レベル」 の変更を発したのではあ りません。 忙しいなかで変更を実現してもらうために設計者の負担を少しでも減らそ うとしたのです。 彼もまた、変更を 「要求」 で捉えることを知らなかったのです。
変更要求を、要求と要求仕様の階層構造で捉える習慣を持っていないと、変更が “仕 様” で発せられたときにこうした失敗を繰り返すことになります。 届いた変更依頼が 「仕様」 のレベルになっていると判断したときは、その仕様にふさわしい 「要求」 を 探すことが大事です。 変更要求も 「要求」 なので、 「理由」 と組み合わせて適切に表 現されることで、変更のおよぶ 「範囲」 を表現することができます。 そこから、 その 範囲のなかに含まれるべき 「変更要求仕様」 が引き出せるのです。 もし、適当な変更 要求が見つからないときは、 要求の欄は "しばらく” 空けておきましょう。
10.3 旧状態を表現する
変更要求仕様書で重要なのは、 “変更" であることが一目してわかるように表現す ることです。 「変更要求仕様書」 も 「要求仕様書」 の一種であって 「製品仕様書」で はありません。 “作って下さい” という文書ですから、"このように変更して下さい” ということを表現することが重要です(第5章 「5.3 なぜ "要求” 仕様書というのか?」 を参照)。
10.3 旧状態を表現する 303
「時間の表示が24時間制になっているのを、 12時間表示も選べるように変更した 「い」
と記述すれば、現在の仕様は 「24時間表示」 に固定されていて、それを「12時間表示」 もできるようにして実際にはユーザーが選択できるようにする、という変更要求だと いうことがわかります。
ここで注目することは、「旧状態」 (修正前の状態) を表現することです。 この文書 が修正後の新しいバージョンの 「機能仕様書」 であれば、 「24時間表示に固定されて 「いる」ことを記述することはありません。 しかし、この文書は変更するための 「要求 仕様書」 なので、 適切な表現によって変更作業がスムーズにはかどることを誘導する 必要があります。
「旧状態」 を記述することには3つのメリットがあります。 第1に、ベースとなっ ているソースコードの該当箇所を特定するのに役に立ちます。 現在の仕様は24時間 表示になっているというのですから、ソースコードを探すなかで24時間表示に固定 された箇所を特定しやすくなります。 もし、 現在状態が明示されていなければ、 修正 個所を特定する際に勘違いする確率が高くなります。 実際に、これが修正個所の間違 い (作り壊しとか修正欠陥と呼ばれている) につながっているのです。
第2に、 依頼者の現状の仕様に対する認識のズレが修正されます。 これは、依頼者 が変更要求を発するときに、 現在の仕様 (正確にはベースとなるソースコードが実現 している仕様) がこの担当者の知らない間に変更されていることに気づかないで今回 の変更を指示していることがあります。 依頼者が認識している 「旧状態」 を表現する ことで、この変更依頼を受けて該当箇所を探すなかで認識が間違っていることに気づ いて確認することができます。 もし、ここで現在状態を表現していなければ、変更の 担当者は、
「たぶん、 直すところはここだろう」
とつぶやきながらソースコードを弄ることになります。 その結果、 どんな変更がなさ れるか想像してみてください。
第3のメリットは、ソースコードを修正する前に実施する変更方法のレビュー (筆 者の「派生開発のプロセス」 ではソースコードの修正は最終的にこのレビューを経て からになります) の際に、レビューに参加した人がこの変更方法をみて、 その妥当性 を判断するのに役に立ちます。 このモジュールに関する何らかの知識を持っている人
304 第10章 派生開発における要求仕様書
がこのレビューに参加することで、
「計算結果の表示の桁数を10桁から12桁に変更するのに、どうしてそんな複雑 な修正が必要なのか?」
というコメントを発することが期待できます。
このように「旧状態」 を表現するのは、派生開発そのものが厳しい制約のなかでの 作業を強いられていることに対応するためです。 つまり、 派生開発では、
部分的、 断片的な変更情報のなかで、 変更の担当者が変更要求の意図を勘違いし ている可能性
②部分理解のなかで行うという制約のなかで、 間違った修正方法を選んでいる可能 性
をどこまで排除できるかが成功のポイントになるので、変更要求仕様書のなかで 「旧 状態」 を表現することによって、これらの危険性を少しでも排除することを狙ってい るのです。
10.4 何が変更されるかを表現する
派生開発では、現行システムやベースのシステム (ソースコード) に対して、 今回 の派生開発で追加する機能や変更する機能が 「今回の要求」 です。 したがって、 まず はこの 「変更要求」 をしっかりと表現することです。
「動画再生の機能を追加する」
「計測機能のなかの表示切り替えの操作部分を削除する」
「計測機能に計測精度が画面操作から設定できる方法を追加する」
「すべての画面表示の日付の表示を西暦の年号に統一する」
「ホストから送られてくる売り上げデータのフォーマットの変更に対応して、 必要な変更をしてほしい」
「別のシステムで実現している個人認証機能を、このシステムに移植する」
このように、 変更要求で大事なことは、それが "変更" であることを明確に表現す ることです。
10.5 「差分」を書く 305
「印刷できる最大桁数を128から192に変更する」 「画面に担当者名の表示を追加する」 「チェック済みの項目を画面から削除する」
というように、 変更前と変更後” がわかるように記述することが重要です。 しかし ながら、 「変更要求仕様書」 というものを設定していない状況では、 実際に、 変更要 求 (仕様) をこのように表現している組織は皆無ではないかと思われます。
10.5
「差分」を書く
派生開発における 「要求」 は、 基本的には現在のシステムに対する 「差分」 です。 したがって、ベースに対して変更されることや追加されること、 削除されることなど が 「変更要求」 としてまとめられればよいのです。
しかしながら多くのソフトウェア開発の現場では、 「変更要求仕様書」 の概念を持 っていないため、 「変更要求」 や 「変更要求仕様」を表現する手段がありません。 そ のため、それらの現場で書かれているのは、そのなかの一部が変更されたあとの新し い 「機能仕様」 であり、最終的に、 「この機能はこのような仕様になります」 という“機 能仕様書” の一部なのです。
実際の作業はベースのソースコードの一部を変更してそのような「完成状態」に仕 上げるのですから、 修正作業にとりかかる前に 「完成」 したときの仕様が書かれても、 そのなかのどの部分が今回の作業で変更されるのかが見えません。 担当者は変更する ことになる仕様が理解できているのかもしれませんが、 そこにある完成品の「仕様書」 からは、担当者の変更箇所に対する理解 (認識) が間違っていないことを確認する方 法はありません。
筆者が推す 「派生開発プロセス」では、最後まで「差分」で作業を進めて行きます。 「変 「更要求仕様書」 は、 まさに 「差分」 としての変更する箇所 (仕様) をまとめたもので す。 そうして最終のテスト (一般にはQAテストに相当) で合格の見通しがついた時 点で、 「差分」 の変更要求仕様や設計書やソースの変更情報をベースの「機能仕様書」 や関連の文書に "マージ" して更新し、 新しいバージョンの文書にします。
306 第10章 派生開発における要求仕様書
10.6 変更の種類
変更要求の分類としては以下のようなパターンがあります。
●変更一般には仕様レベルの 「変更」 が中心です
・変更･･････ 仕様レベルの変更
追加.....仕様レベルの追加
・削除・・・・・・ 仕様レベルの削除
“機能追加" に対応するような“機能変更" というのはないわけではありませんが、 通常は "仕様レベル” の変更が中心で、製品やシステムの細かな動きとしての仕様の レベルの変更を意味します。 画面の一部が変化したり、 計測のタイミングが変わった りするようなものです。
それに対して、 “機能レベル” の追加や削除、 あるいは移植が求められることはあ ります。
②機能追加 機能レベルの追加を扱う
③機能削除･･････機能レベルの削除
機能移植･･････機能レベルでほかのシステムからの移植を扱う
このあと、それぞれの変更のパターンに分けて、変更要求と変更仕様の表現につい て説明します。
10.7 変更の要求
変更要求には、システムが根底から覆されるような変更もあれば、 ある機能のなか の特定の動作を変更することもあります。 さらに、ほとんど 「仕様レベル」 の単純な 変更もあります。
「CPUを○○から□□に変更する」
という変更要求はシステム全体に影響を与える変更要求です。 このままでは変更の 「範 囲」 が広すぎて仕様 (変更箇所) の抽出に支障が出るため、 変更要求を階層化 (第7 章参照) して変更の範囲を狭めてから変更箇所を抽出します。
10.7 変更の要求 307
これに対して、
「チケット発売の際の予約番号の入力を、 携帯電話からもできるように変更する」
という変更要求は、もともと予約番号をバーコードで入力してチケットを発売する機 能は持っており、 そこに携帯番号の画面に表示したバーコードからも入力できるよう にするものです。
この場合、 「変更」 で扱うこともできるし、携帯電話から入力する機能を 「追加」 するととらえることもできます。 既存の入力方法と比べて、いくつかの関数のなかを 何箇所か修正することで実現すると思われるときは、「変更」 で扱ってしまえばよい でしょうし、 携帯電話からの入力を実現するためにいくつかのモジュールを新規に作 成し、 既存のソースの一部を変更してそれらの追加モジュールを呼び出すかたちで実 現するという場合は、 「機能追加」 の手順を使ったほうが安定するでしょう。
変更要求の場合で注意が必要なのは、変更依頼が 「仕様」 で発せられることがある ことです。
「顧客画面の客先担当者名の入力の位置を右に○○文字分移動する」
という場合、 この変更を実現するためのソースコードを修正する箇所もその方法も見 えています。 まさに 「仕様レベル」 での変更依頼です。 このような場合、担当者もす ぐに変更すべき箇所がわかるので、 「変更要求」 が曖昧なままソースコードを修正し てしまいます。 変更であっても、 「要求」 を把握しないと仕様モレを起こします。 たとえばこの場合の変更要求は、 操作性などの品質要求として、
「ほかの文字入力フィールドと位置を合わせる」
という変更要求があり、 上の変更要求仕様はこの変更要求に含まれることでほかにも 変更すべき仕様があることに気づきやすくなります。
10.7.1 ソースの変更を変更仕様として記述する||||||||||||
派生開発の難しさは、新規開発と違って、 すでに実装されているソースコードを変 更することです。 そして、ソースコードを変更するということは、ソースコードにな った 「仕様」 を変更するということです。 この場合の 「仕様」 は、 最初の機能の振る 舞いを記述した仕様とは限りません。 設計工程の分割と階層化の過程でクラスや関数
308 第10章 派生開発における要求仕様書
の仕様として設定した仕様が変更の対象となることがあります (図10.3)。
図 10.3 ソースコードの変更を仕様変更として扱う
ソースコードは"仕様”を実現したもので、これを変更することも"仕様変 更”と位置づけて 「変更要求仕様書」 に表現することで、 すべての変更を 表現できる。 このままソー スコードに対 応している 変更要求 要求 製品レベル 変更要求仕様 変更要求仕様 要求仕様 アーキテクチャ設計 こちらは関数 |レベルの仕様 に置き換える 変更要求仕様 変更要求仕様 タスク仕様 (タスク要求) タスク設計 (関数要求) こちらは関数 レベルの仕様 に置き換える 変更要求仕様 変更要求仕様 変更要求仕様 関数設計 ソース すでに実現し ている世界 実装レベル
たとえば新規設計時に、ある計算処理のなかで一時的にデータを蓄える必要が生じ たことで、その関数のなかで2Kバイトの領域を確保したとします。 そのようなことは、 最初の機能の振る舞いを記述した要求仕様書には書かれません。 これは、 要求を実現 するための設計工程の分割と階層化の過程で発生する仕様のなかで決められたことな ので、 初期の 「要求仕様書」 には書かれることはありません。
その後の派生開発で別の機能が追加され、 そこからこの計算処理を呼ぶ必要が生じ たのですが、 このケースではメモリのサイズが4Kバイト必要なことからメモリ獲得 時のパラメータを変更することになります。
本書で勧める 「変更要求仕様書」では、このような実装レベルの仕様 (ソースコー ドになっている)の変更も変更仕様として記述することを求めます。 実際問題として、 新規開発時に採用されたアーキテクチャによっては、 今回の派生開発での変更が既存 の機能に思いもよらない影響を与えることがあります。 派生開発のトラブルの多くは、 この種の変更を 「仕様変更」 として記述しないところから発しているのです。
たとえば、
10.7 変更の要求 309
「操作メニューの上から2番目に "画像検索を選ぶ” というメニューを追加する」
というのは操作仕様上の変更です。 この画像検索機能を実現するために 10MB グロー バルメモリを確保する必要があり、プログラムを見渡したところダウンロード機能に 30MBのグローバルメモリが確保されていました。 そこから10MB割譲しても支障が なさそうなことから、 担当者はダウンロード機能から10MBのメモリを調達する方法 を選ぶとすれば、
「ダウンロード機能の持つメモリ領域の30MBから10MB減らして画像検索機能に 「割り当てる」
という「変更仕様」 をその下に追記します。
このように、変更要求を実現する担当者 (設計者) が、ソースコードを見てその実 現方法を考えたとき、 あるいは既存機能の仕様 (すでにソースコードになってい を変更する必要があると判断したときに、 変更要求仕様書にそれを正確に表現するこ とで顧客側でシステムを理解している人や、 今回の派生開発を受けてテストを実施す る関係者が変更方法を目にすることになります。
その結果、 担当者が考えた修正方法がほかの機能に悪い影響をおよぼすと判断され たときは、そのような変更方法を中止させるかもしれません。 また、 テストの関係者 のほうで、その修正方法で問題が生じないかどうかを確認するような多彩なテストも 用意されるでしょう。
何度もいうように、 派生開発は、
期間が短く
「部分理解」の制約のなかでの修正作業が強いられる
すでに稼働しているシステムのほかの機能に支障をきたしてはならない
という大きな制約がつきまとう作業です。 しかし派生開発において、このような実装 レベルの仕様の変更を 「変更要求仕様書」に記述しなければ、重大な変更のミスを発 見する機会を失うのです。
筆者の派生開発プロセスではこのあと、 “マトリクス” を使って修正個所を確認し、 さらに「変更設計書」によって具体的な変更箇所と変更方法を確認するという、 2重 3重の検問を通過してはじめてソースの修正にとりかかります。
こうして事前に変更箇所や変更方法を何度も確認していても、実際にソースコード の修正にとりかかっているなかで、 いままで気づかなかったことに気づくことが少な
310 第10章 派生開発における要求仕様書
くありません。 それは、すべての修正個所を把握できている状況でソースコードの修 正作業を行っているからこそ見えることなのです。 もちろん、 その段階でまだ修正し ていない箇所も含めて調整することができます。
しかしながら多くの現場で行われているように、 該当すると思われる箇所を見つけ 次第に修正していく方法では、 すでに修正した箇所との間での不整合には気づくこと があっても、明日以降に修正される箇所に対しては何も気づくことはありません。 そ こでは、常に「過去」 の修正に対する不整合に気づく方法しかないのです。
□10.7.2 スペックアウトしながら変更要求仕様を拾い出す 派生開発では、変更の要求が出されている機能の詳しい動きを知る必要が生じるこ とがあります。 最終的にはソースを修正することになるのと、 該当箇所を特定したり 設計資料を補う必要から実装状態を調査したりすることもあって、ソースコードから スペックアウト 2 作業が行われることがしばしばあります。
機能の追加の場合も、それを受け入れる側において、 どこでどのように受け入れれ ばよいかを調べることになります。 「移植」 の場合は、このほかに移植元のソースコ ードから該当する機能に関連する箇所を切り出すために移植元のソースコードを調べ る必要が生じます。
ソースコードを調べる過程で、 修正する (修正すればよいと思われる) 箇所や切り 出す箇所が発見されるわけですが、 「変更要求仕様書」 では、このようなソースレベ ルの変更も、いったん 「実装仕様の変更」 として記述することを求めています。
そのため、追加機能の仕様を書くときとくらべて、変更要求の場合は実装レベルの 仕様の変更を把握するのに少し時間がかかることがあります。 最初に提示された変更 要求に対して、変更すべき箇所がすべて網羅できたと思えた時点で、 すべての変更仕 様についてのレビューを実施することになります。 もちろん、 ボリュームによっては 分割してレビューすることが必要になります。
スペックアウトの作業を変更要求の単位で行うことで、発見された変更点はその変 更要求の下に記述することができ、 そこで作られたスペックアウト資料も変更要求単 位またはその変更要求が属する機能単位でまとめることができます。
多くのソフトウェアの開発現場では、ソースコードを調べていくなかで発見された "ここを修正すればよい” という箇所は、片っ端から修正されます。 というよりも、 「変 更要求仕様書」 のような、 あとで戻ってくる仕掛けを持っていないためにその場で修 正してしまうしかないのです。
*2 新規設計のときに派生開発で役に立つ設計資料が作ら れていないために、派生開発のなかで急遽ソースコードを解析し
て設計資料を作り出す行為。 必要な範囲に限定して実施する ことがポイント。
10.8 追加の要求 311
10.8 追加の要求
派生開発では、現在の仕様に対する変更のほかに、新しい機能が追加されることが あります。 本書で勧める派生開発では、追加機能の要求仕様書とは別に、機能の追加 そのものを 「変更」 と捉えて 「変更要求仕様書」でも扱います。
「PCから住所録をダウンロードする機能を追加する」
という場合、 「PCから住所録をダウンロードする機能」についての一連の要求仕様は、 別に 「追加機能要求仕様書」 にまとめられます。 これに対して、 現在のシステムに新 たにダウンロード機能を追加するために現状のソースコードに手を加える部分を「変 更要求仕様書」 にまとめます (図 10.4参照)。
図 10.4 追加機能要求仕様書と変更要求の関係
「PCから住所録をダウンロードする機能を追加する」
追加機能
要求仕様
追加される 機能を仕様 化する
「PCから住所録をダウンロ ードする機能」 に関する一 連の仕様を展開する
追加される仕 様をまとめて 設計しコード に変化する
追加分 ソース
変更要求
追加機能を受 け入れるため の変更箇所を 抽出する
「PCから住所録を ダウンロードする 機能を追加する」
変更 要求仕様
変更仕様に沿ってソ ースを変更して追加 機能を受け入れる
(更新)
既存のソースコードに、 「PCから住所 録をダウンロードする機能を追加する」 ために変更すべき箇所を探し、それを 「変更仕様」として記述する
ベース ソース
このあと、 「追加機能要求仕様書」 に書かれている要求仕様に基づいて追加機能に 関する仕様を実現する方法が設計され、 それに関連するソースコード(一般に複数の 関数で実現される) が用意されます。
一方で「変更要求仕様書」 にはこの追加機能を実現するために必要な変更箇所が書
1
312 第10章 派生開発における要求仕様書
かれているので、これに沿って既存のソースコードを変更し、追加のプロセスで作ら れたソースコードが呼びだされることになります。
□10.8.1 機能追加も実装レベルの仕様変更が不可欠
機能追加は、 それがベースのシステムのなかで作動するためには少なくとも1箇所 以上の変更を伴うので、 「新機能を追加する」 ということを変更要求仕様書でも扱い ます。 変更要求仕様書のなかに 「新機能を追加する」 という 「変更要求」 を記述する のです。そして、その下に、その機能の追加を実現するための必要な変更(変更要求 仕様) を記述します。
追加機能であっても、 それが実現するには既存の仕様のどこかを修正 (変更) する 必要があるからです。 操作画面に選択ボタンを一つ増やしたり、 メニューバーを一つ 増やしたり、入力データの区分コードが 「7」 のときにこの追加機能の処理モジュー ルを呼び出したりしなければ、 追加される新しい機能は動かないのです。 ときには、 新機能を組み入れるために、ほかの機能のメモリ配置を移動させる必要があるかもし れません。
たとえば表10.2では、 追加機能要求仕様書では、
「入手した動画の保存と再生を行う」
という機能が追加されるので、 この要求の下に適切な要求の階層化が行われ、 動画の 保存と再生に必要な仕様の抽出が行われます。
一方、この追加機能に関連して 「変更要求仕様」 のなかでは、表10.2の下段のように、
「入手した動画の保存と再生機能を追加する」
という変更要求が立てられ、 この下に保存と再生の機能追加を実現するために必要な 既存のシステム (ソースコード) の変更要求や変更仕様が書かれます。 言い換えれば、 これだけの変更をすることで、 はじめて 「入手した動画の保存と再生機能」 が動作す るのです。
一般に、 追加機能に関する仕様はそれなりに記述されるでしょうが、 機能追加に必 要な既存機能 (追加機能とは無関係なこともある) の実装レベルの仕様の変更が 「変 更仕様」として記述されていることはほとんどないと思われます。 「変更要求仕様書」 というものが設定されていないために、 追加機能を実現するための変更箇所 (変更仕 様)はどこにも記述されず、追加機能の担当者が自らの責任で変更すべき箇所を調べ
10.8 追加の要求 313
機能追加を変更でも扱う ↓表 10.2 追加機能要求仕様書
要求 MOV.01 入手した動画の保存と再生を行う
理由 カメラ付き携帯電話で静止画と動画が撮れるので、動画も一緒に扱いたい
ここに、 要求が適切に階層化され、 それぞれの要求の範囲のなかで 必要な仕様が展開される
変更要求仕様書 要求 MOV.01 入手した動画の保存と再生機能を追加する 理由 カメラ付き携帯電話で静止画と動画が撮れるので、 動画も一緒に扱う必要 が生じた 要求 MOV.01 設定操作のところで、動画を扱うための設定メニューを追加 する 要求 MOV.02 機能選択メニューを変更して、 これらの機能を選択できるよ うにする 要求 MOV.03 再生時に必要なバッファを既存機能のバッファサイズを減ら して確保する 要求 MOV.04 保存時のファイル名の割り付けルールを変更する
て、適切に変更することが求められているのです。
追加機能に関連して修正される項目が明示されないことの最大の問題は、 その変更 方法について詳しくテストされる情報が提供されないことです。
□10.8.2 変更要求と追加要求に分ける 「派生開発」では、基本的には要求仕様書の文書は 「変更要求仕様書」という形で まとめます。 そして機能の追加があれば、 「追加機能要求仕様書」 と 「変更要求仕様書」 の2本立てとなります (次ページの図 10.5参照)。
「追加機能要求仕様書」の書き方は、 追加の機能ごとに新規の要求仕様書と同じよ うにまとめていきます。 そこで追加される機能について、 適切な要求の階層化とその 要求する範囲のなかで必要な一連の仕様を記述すればよいのです。 もちろん、 今回提 供する機能に絡む品質要求が必要なら記述して下さい。
これに対して、 機能追加の 「変更要求仕様書」 には、 今回追加される機能を稼働さ せるために必要な変更箇所を「旧状態」 と 「新状態」で表現します。 通常の 「変更要
↓図 10.5 変更と追加の2本立ての要求仕様構成
314 第10章 派生開発における要求仕様書
変更要求仕様書
变更分三
・カテゴリ別に変更点を列記する
・変更"であることを表現することが大事
・機能追加もここでは変更として扱う
・実装レベルの変更点も拾い出す
追加機能要求仕様書
V 追加分
追加機能ごとにまとめる
・基本的には新規要求と同じような表現でよい
|多くの場合、このように2本立ての構成を採用していないと思われる。
「求仕様書」の書き方になります。
このように、 機能追加で 「変更要求仕様書」 と 「追加機能要求仕様書」 というよう に変更に関する要求仕様書を2本立てにする理由は、要求仕様書としての表現形式に 大きな違いがあるからです。
10.9 移植の要求
「移植」 は追加の一種で、 すでに別のシステムで全部または過半の機能を実現して いるものがあった場合、 機能追加の実現方法として、そこから移植するというもので す。
「定時報告のための経過時間の監視機能を○○モデルから移植する」
移植は、 変更作業のなかでももっとも混乱を生みやすいものです。 その理由は、そ の機能はすでに実現しているために今回の作業のなかでの仕様の展開が省かれること が多いのと、移植元で使用されている変数やデータ構造、関数のインターフェースな どが移植先の状況とマッチしないことがあり、 何らかの修正を施してから移植する必 要があるためです。
もう一つの理由は、移植元での当該機能のソースコードが、必ずしも行儀よくまと
10.9 移植の要求 315
まっているとは限らないことです。 たとえば、 移植元と移植先とでソフトウェアシス テムのアーキテクチャが異なることがあります。 移植元のソースコードがシングルタ スクの環境で稼働している場合、 割り込み処理とフラグを介してのメインの周期構造 での処理と、 さらに処理を細かく分割しそれを連続させるためにタイマから呼び出さ れる処理などに分かれたソースコードを漏れなく拾い集めて、それをマルチタスクの アーキテクチャのなかに移植することは簡単ではありません。
なかには、移植元では 「アセンブラ」 で書かれていることもあります。 このような 場合は、必ずしも 「移植」 による機能追加が適切な選択ではないかもしれません。 移 植が無理と判断されたときは、 「機能の追加」を選択することになります。 一般に、 このような経過を経て機能追加が選択されるときは、 適切な機能仕様書が残っていな いことがあり、 実際のシステムを稼働させて仕様を調査することになるかもしれませ ん。
10.9.1 移植は追加よりも難しいことがある
このほか、 派生開発では、別のシステムの一部や 「部品」として登録されているモ ジュールの 「移植」 が行われることがあります。 この場合も、 基本的には 「○○機能 を△△から移植する」 ということで “変更要求” として扱います。 そして、このモジ ュールを移植する理由や効果、 移植の際の注意事項などを 「理由」 「説明」の欄に記述し、 移植の際に必要な具体的な調整箇所を “変更要求仕様” として表現します。
「移植」 での実現が要請されたとき、 「仕様は?」 と尋ねると、 顧客からは、 「すで に機能しているC572の製品と同じでよい」という返事が返ってくることがあります。 その 「C572」という製品が開発されたのがずっと昔の場合、 参考になる機能仕様書 がなかったりします (初めからそんなものは書かれていないかもしれません)。 せい ぜい、その製品のカタログしかない、ということも少なくありません。 なかにはソー スコードも存在しないというケースもあります。
移植する機能の範囲が狭かったり、 派生開発のメンバーのなかにその機能の仕様を 知っている人がいたり、 切り出し元のソースコードの様子を知っているときは、その ままソースコードの切り出しにとりかかれるかもしれませんが、そのような状況にな い場合は、切り出すソースコードの範囲を判断するために当該機能に関する仕様書を 作り出す必要があります。 また、 そのような要求仕様書があることで、 あとでテスト にも使えます。
そのため、 実際にその組み込まれているシステムを動作させたりして、仕様を引き
316 第10章 派生開発における要求仕様書
出さなければなりません。 そのシステムを開発したときの要求仕様書 (機能仕様書で もよい) があれば助かるのですが、 もしそういったものがないときは、 実際に動かし て仕様を集めるしかありません。
操作して直接わかることは、 「仕様」 です。 たとえば5種類のセキュリティレベル の表示や、 パスワードの入力指示や、セキュリティに違反したときのメッセージなど は、 すべて 「仕様」 です。 「要求」 は、 概念的なものなので直接は見えません。 要求 は発見された仕様をまとめる 「引き出し」として、機能の持つ役割や仕様から適当に 設定する必要があります。
移植元のシステムを動かしてまとめた仕様書は、 通常は 「機能仕様書」 なので、 「追 加機能要求仕様書」 にするために必要な品質要求などを加えることになります。 こう して作られた移植する機能の 「要求仕様書」 を、 顧客側の責任者に見せて確認しても らう必要があります。
調査した人たちがまったく別の操作を行い 「セキュリティ機能の有無」 という操作 があることに気づいていなかった場合も、 「追加機能要求仕様書」 の構成が上手く整 理され動きを彷彿させるように仕様がまとめられていれば、 抜け落ちていることに気 づいてくれるでしょう。
ソースを見る機会があれば、 そこに設定情報を判断する 「IF文」 が見えるので、 設 定情報を扱う操作がほかにあることに気づくでしょう。 しかし、部分の移植でありな がらソースが見えないときは、 このような別の操作で行われることと絡んでいること に気づきにくいのです。 そのため、 顧客側の責任者とのレビューを繰り返す必要があ ります。
なお、 顧客の依頼は 「移植」 であっても、 移植元のシステムのソースコードが存在 しない場合は 「機能追加」 として扱うしかないので、 この場合は 「現物」 を動かして 要求仕様書を作り出すしかありません。
□10.9.2 移植元の変更も変更要求仕様で扱う 機能の「移植」 は 「機能追加」 の変形なので、 機能追加の場合と同じように、移植 を受け入れる側の (ベースとなる) ソースコード上で何らかの変更をしなければ実現 しません。 したがって、 移植を受け入れる側において、 機能追加のときと同じように 「変更要求仕様書」 を作成することになります。
10.6は移植元と移植先の関係をあらわしたものです。 一般に、簡単に切り出し て移植先に埋め込めば済むというケースは稀で、 多くの場合、形を整えたり移植先の
10.9 移植の要求 317
↓図 10.6 移植元と移植先の関係 移植元の ソースコード 調整台 移植先の ソースコード 移植は、移植元から必要 なソースコードを切り出し さて、 移植先に組み込めば済 むというケースは稀。 多く の場合、いったん調整台の 上で、 移植先の状況にマッ チさせるために何らかの変 更を加える必要がある。
事情に適合させたりしてから移植することになります。
移植には以下に列記するような状況が起きます。
移植元では、 関連する関数や処理が散らばっていることがある 移植先はマルチタスクでアーキテクチャがまったく違うことがある 移植先のソースコードの世界と、 変数名や構造体の多くが違っている 関数の呼び出しのパラメータの数やタイプが双方で一致していない
たとえば、移植する機能に関連する処理が図10.7のようにあちこちの関数に散ら ばっている場合は、それらを漏らさないようにかき集めて(これが大変!)、 移植先 の事情にあわせて形を整えてから移植することになります。 移植先ではマルチタスク
図10.7 散らばった処理をかき集めてから移植する
移植元での状況 移植先での状況 ■ 移植する機能に関連するソースコード 移植先では、入力に関する部分と 処理に関する部分に分けて組み込 むために形を整える必要がある。
318 第10章 派生開発における要求仕様書
のアーキテクチャになっていて、 入力関係のタスクに移植される部分と変換関係のタ スクに分けて移植されることもあります。
そのため移植の場合は移植元での変更が必要になることがあり、 表10.3のように 「変更要求仕様」のなかで移植元の変更と移植先の変更をセットにして扱う方法があ ります。
移植元の変更を移植先の変更要求仕様書で扱う場合、 TM (トレーサビリティ・マ トリクス) のところで注意が必要になります。 通常TMのマトリクスは移植先 (ベー スとなるソースファイル) のモジュールで構成していますが、 移植元の変更要求仕様 はこのモジュールとは別の世界なので、 そのままでは使えません。
そこで、 表10.4のように、 TMの列方向を区切って移植元のモジュールを配置する 方法があります。 ただしこの場合は、 移植元に関係するモジュールだけを抜き出すこ とになるのと、ほかの変更要求仕様には邪魔なので、普段は折り畳んでおくとよいで しょう。
↓表 10.3 移植元での変更を変更要求仕様書で扱うこともある
1000時間の経過時間で○○部品の交換を知らせる機能を□□モデル から移植する 要求 WTH01 理由 説明 (双方のモデルでの違いなどを説明し、 注意を促す) すでに完成した機能で、 作業時間を短縮したい WTH01.1 監視用の構造体に書き込み回数の要素を追加する WTH01.2 経過時間の保存処理を 「DARM」 から 「FLASH」 用に 変更する WTH01.3 グローバル領域をシステムのプールから獲得するよう に変更する WTH01.4 呼び出し構造を最大5層から3層に改良する
移植先での仕様変更は、基本的には機能追加を
受け入れる際の仕様変更に相当する
移植元で変更すべき仕様を記述する
・TMが活用できるように変更要求仕様の書き方を工夫する。
WTH01.1では、この構造体を定義しているモジュールと使用しているモジュールが 変更の対象になる。
WTH01.4では、この機能のトップの関数と処理のなかで呼んでいた関数が変更され ることになる。
10.10 削除の要求 319
「移植」 には、簡単に実現するケースから、 実現するのにてこずるような複雑なケ ースもあるので、 すべてのケースで表10.4のような方法で対応できるとは限りませ ん。 移植で混乱しないためには、 移植の要求から、 適切に状況を判断して混乱なく実 現する方法を考え出すスキルが求められるかもしれません。
↓表 10.4 TM上に移植元のモジュールを追加したもの
要求 MOV 理由 説明 移植元の変更仕様 移植元の変更仕様 移植先の変更仕様 移植先の変更仕様 移植先の変更仕様 移植元の モジュール ○ 移植先のモジュール ○ 00
10.10 削除の要求
派生開発では、 現在実装されている機能を削除することがあります。 その機能に代 わる新たな機能が実装されたことで旧来からの類似の機能を削減したり、 メモリ領域 を確保するために使用頻度の低い機能を削減したりすることもあります。
「動画編集機能を削除する」
「各種の商品一覧表示のなかで、 登録日別の一覧表示を削除する」
機能の削除も意外と混乱することがあります。 その理由は、設計の際に行ったモジ ュールの抽象化によって、 当該機能で使用されているモジュール (関数) がまったく 異なる機能からも使用されていることがあるからです。 設計時の抽象化が進むほど、 モジュールを共有するケースが増えるので、 安易に削除することはできません。 ほか の局面で使用されていないかどうか、 丁寧に確認する必要があります。
この場合も変更要求仕様書には、指定の機能を削除するための変更を 「変更仕様」 として書き出すことになります。 たとえば、 「動画編集機能を削除する」という変更
第10章 派生開発における要求仕様書
要求に対して、
「動画編集を選択するメニューを削除する」
「編集のための動画ファイルの入出力処理を削除する」
「動画編集画面の処理を削除する」
「画面遷移から動画編集の4つの画面を削除する」
という形で展開します。 これによって、 実際に削除されるモジュールを 「トレーサビ リティマトリクス」上で表現することができます。
10.11 派生開発の品質要求
派生開発では変更作業に絡む 「品質要求」 が忘れられてしまうことが多く、 せっか く修正が終わったと思ってもパフォーマンスが悪化していたり、 機能追加に対して同 じような機能をカバーする処理モジュールが部分的に複製されていたり、ソースコー ドとコメントが食い違ってしまったりして、 作り直しの原因になってしまうことが少 なくありません。
いままで問題なく動いていた機能が動かなくなった、というのはテストで発覚する ので対応できるでしょうが、 モジュールの尺度が悪くなるような修正が行われたとき はテストでは発見できません。 したがって、 派生開発で最初から品質要求を明確にし ておくことが大事になってきます。
追加機能に関係するパフォーマンスや移植性、 メモリなどの資源の効率性のような 品質要求は、 「追加機能要求仕様書」のほうで記述してください。 また、通常の変更 や機能追加に伴う品質 (既存機能のパフォーマンスの維持、 保守性の確保など) は、 変更要求仕様のほうに記述して下さい。
320
画面仕様書のあり方
最近のシステムでは、画面からの操作が充実しており、 画面の表示を変えながら多 くの操作が可能になっています。 システムによっては、ほとんどが画面操作で実現す ることもめずらしくありません。 プログラムも、 画面操作から始まるプログラムを書 くだけで、ほとんどの部分がカバーされます。
しかしながら、現実には画面仕様が稚拙なため、プログラムコードを何度も書き直 しながら顧客の求めるものに近づけるという方法がとられています。 顧客から“動く ものがないとわからない"という注文がついていることと、それを支援するかのよう にGUI構築ツールが発達していること、そして 「画面」 ということで安直に考えてい るものと思われますが、一般に、 画面仕様を最初からしっかり記述しておけば、ほと んど1回でプログラムが完成することも少なくないのです。
第 11 章
画面の配置などのレイアウトは、 最新のGUI構築ツールを使うことで臨場感も出る ので、大いに活用すればよいでしょう。 しかし、 画面の表示や操作に関する 「仕様」 は文章できちんと書くほうが、 顧客の要求をはずしにくいのです。
11.1 画面仕様書の問題点
一般には、操作画面や表示画面の仕様をあらわした 「画面仕様書」 は、次ページの 図11.1のように、 画面としてレイアウト設計された図に対応させて、 画面レイアウ トの下に表示領域やボタンなどの仕様が書かれることが多いと思われます。
しかしながら、 表示領域やボタンなどに対する仕様は、以下のように項目の説明に過 ぎないケースがほとんどです。 当然、 仕様として必要な項目の多くが漏れてしまいます。
・計測データ表示領域 計測したデータを、項目ごとに1桁のスペースを入れて、 レコード単位 で表示する ・一時停止ボタン このボタンを押すと、 表示を一時停止する
これでは、 「計測データ表示領域」 は計測で入手したデータを表示する場所、とい うことしかわからないので、単純に入手したデータを表示するようなプログラムにな
11
322 第11章 画面仕様書のあり方
図 11.1 一般の画面仕様のイメージ
回線別 接続状態 計測データ表示域 現在時刻 經過時間 ・計測データ表示枠 開始 終了 一時停止 計測データ表示枠 拡大ボタン ・ここには、接続機器から送られてくる計測 データを表示します。 ・表示枠の右上に、1分間の平均値を少数以 下第2位まで表示します。 拡大ボタン ・このボタンを押すと、 表示域のゲージが5倍 に拡大します。 ・拡大中に押されると、元のサイズに戻ります。
現実には "仕様書 " になっていない 表示や操作方法についての 「仕様」は書かれていない。 部分的には 「仕様」 としての要件を満たしているものもあるが、わず かな部分しか見かけない。
ってしまうでしょう。
表示を開始する条件は何か?
この画面を開いたときは、 すでに計測データは収集されているのか? 何も表示するデータが届いていないときはどう表示するのか?
表示域一杯に表示したあとはスクロール機能を持たせるのか?
スクロールで後戻り操作されているときに表示データが届いたときはどうするの か?
といったことについては、何も触れられていないのです。 これで設計作業に入ってい るかと思うと恐ろしくなってきます。
たまたますぐ下に「一時停止ボタン」 があるので、表示を停止することがある、と いうことに気づきます。 表示は停止していても計測は続けているでしょうから、一時 停止を解除したときに表示はどのように回復されるのか、 表示を再開したときに一時 停止していた間に計測されたデータがどれか示さなくてもよいのか、といったことが まったく見えてきません。 第一、 これでは何のために表示を一時停止するのかもわか りません。 でも、これが多くの現場で書かれている画面仕様書の様子です。 やはり、 「見える」 部分であることから、 "動かしてから直せばよい” という意識が働いている
と思われます。
11. 画面の問題点 323
このような場合でも、 表 11.1のように、 通常の要求と要求仕様の形で記述するこ とで、最初からかなりのレベルまで仕様モレを防ぐことができます。
↓表11.1 計測データ領域の仕様を記述した例
計測データ表示領域 要求 DSA.1 計測したデータと区間平均値をリアルタイムに表示しながら異常を 監視する 理由 接続先の状況に素早く対応する必要があるため 0000 説明 DSA.1.1 計測を開始するまでは、画面の中央に "NONE" と表示する DSA.1.4 計測したデータは、 1レコードを1行に表示する DSA.1.5 項目の境界に1桁のスペースを挿入する DSA.1.6 30行を超えた時点で右側にスクロールバーを表示する DSA.1.10 DSA.1.11 計測データを20件取得した時点で、 項目 #3~7の項目の平均値を 算出する 平均値データは、その後10分おきに20件のデータを加算して算出 し直す 項目#3~7の項目で、 それまでの平均値と10%以上の差が生じた ときは赤字で表示する DSA.1.15 DSA.1.16 警告表示は、平均値が算出されてから実施され、その後継続される
画面仕様書にも 「要求」 「理由」 「説明」 の構成を持ち込む。
画面上のボタン類もこれと同じように書くことができます。たとえば「一時停止ボ タン」の場合、
要求= 「計測データの表示を一時停止し、 画面の更新を止める」 理由=「表示されたデータのなかに “違和感”を感じたときに、オペレータが 詳しく見極めることができるように」
第11章 画面仕様書のあり方
という要求と理由を設定し、その下にこのボタンを押せるタイミングや押したときの 動き、表示再開の方法などの仕様が記述されます。 表示再開の方法を書いているとき に、表示停止中に収集したデータのなかに “違和感” が隠れているかもしれないこと に思いがおよべば、 計測データ表示領域の仕様のところにもどって、というグループのなかに適切な仕様を書き加えることもできます。
□ 表示停止中に収集されたデータは、 青字で表示する ☐ この色は、スクロール操作をされても消えないこと
という仕様が追加されるかもしれません。 そして、この仕様の追加がさらに、計測デ ータをまとめて保存する機能のところで、
□ 表示停止/再開の操作が行われたことを知る □ 収集したデータに表示停止中に収集したことを記録する
という仕様が追加されるかもしれません。
必要なら要求を階層化することもいといませんが、 現実には、 画面仕様の場合は表 11.1 のように1層で対応できると思われます。
こうした行為は、画面のプログラムだからといって、 仕様も書かずにいきなりソー スコードを書き始めるスタイルではなかなか対応できません。
一般に、 画面仕様書と呼ばれるものは、 仕様としては稚拙なレベルの物が多いよう です。 それは、「プロトタイピング」という考え方に便乗したり、 GUI構築ツールを 使って顧客に見せながら作り上げていけばよい、という考え方が広がったりしている からでしょう。 最近では、 GUIに関するヒアリングもツールを使って簡単に作った画 面を見せながら進めていくことが多いようですが、場合によっては 「安直な試作」 の やり方に堕ちてしまう危険があります。
確かに、 「画面」 は外から見ることができます。 そのため、 このような構築の仕方 によって簡単に作れるように思えるのかもしれませんが、 実際には本当に顧客が希望 する物にはならないことが少なくありません。 目の前に “動くもの” を見せられるこ とで考える範囲もそこに誘導され、 自分が本当に希望することを考えることができな
11.2 画面操作全体に対する要求はあるか? 325
くなることもあるのです。
そのうえ 「試作」 に依存して仕様をまとめたのでは、複数の画面にまたがる機能間 で仕様上の矛盾 (衝突) を引き起こしかねません。 なぜなら、依頼者は一般に“ユー ザー”であり、 表面的な操作や使い勝手しか見えないし要求できません。 実際にその 操作によって内部でどのような処理が行われるかを考えられる人でないと、 表示を一 時停止しているときに計測したデータを、 通常のデータと区別しておくことの必要性 に気づかないかもしれません。
11.2 画面操作全体に対する要求はあるか?
画面仕様書で共通していえることは、最初の 「画面要求」 がほとんどまとめられて いないことです。 いきなりGUI構築ツールを使って個々の 「画面レイアウト設計」 に 入ってしまうため、 画面操作全体に対する 「要求」 を確認するタイミングを失ってい るようです。 あるいは、そのようなレベルでの「画面要求」 の存在そのものに気づい ていないのかもしれません。
望ましい手順としては、
①全体の画面要求
②全体の画面仕様
③個別画面設計 (画面遷移図、 個々の画面レイアウト) ●個別画面仕様 (画面ごとの表示上の制限、 表示領域に関する仕様、 個々の操作に おける仕様)
↓表11.2 画面全体の要求の事例
要求 #1 ファイルと接続に関する設定項目は、すべて画面上で行えること 要求 #2 セキュリティの設定ができること 要求 #3 セキュリティのレベルに応じて、 見える画面、 操作できる画面やボタン を設定できる 要求 #4 どの操作中でも、ベースの画面に直接戻って、 そこから新しい画面操作 ができること 要求 #5 要求 #6 14 接続されている機器の計測データはすべてリアルタイムで表示し、異常 が判断されるときはオペレータに適切な注意を喚起すること 操作エラーを含めて、エラー表示は、エラーのグループ (種類) がわか るようにすること #7 エラー表示に対する操作は、 簡単にヘルプで確認できること T 要求 要求 #8 見えにくい文字のサイズや色を使わないこと (品質要求) 要求 #9 マウスによる選択では、操作ミスを起しにくくすること (品質要求)
326 第 11 章 画面仕様書のあり方
の順でまとめることになります。
たとえば、 画面の全体要求としては、 表11.2のような項目が考えられます。 これらの要求も 「仕様化」 しない限り活かされることはありません。 ただし、この 要求は具体的な画面の項目に対する要求ではないので、 仕様化してもそのまま実現さ れるものにはなりません。
11.3 個別の画面設計の指針としての仕様
操作画面全体に対する要求は、 表11.3のように仕様に展開することができます。 これらの操作画面全体に対する要求および仕様は、要求によっては、操作画面に対 する 「統一思想」 の意味を持ちます。
↓表11.3 画面要求を仕様化した例
要求 OP4 どの操作中でも、 ベースの画面に直接戻って、 そこから新しい画面操作 ができること 理由 仕様 OP4.1 操作画面が重なったときでも、ベース画面は隠れないよう にする 仕様 OP4.2 要求 OP5 ベース画面に直接戻ったときはそれまでの操作は無効になるの で、入力操作が行われたときはその場で確認を求めること 接続されている機器の計測データはすべてリアルタイムで表示し、 異常 が判断されるときはオペレータに適切な注意を喚起すること 理由 ☐ 仕様 OP5.1 “異常” の判断には3段階程度の基準を設ける ☐ 仕様 OP5.2 異常を知らせているときは、画面の更新を停止させる ☐ 仕様 OP5.3 画面の更新を停止中も計測に影響を与えないこと 要求 OP7 エラー表示に対する操作は、 簡単にヘルプで確認できること 理由 仕様 OP7.1 「ヘルプ」 を選択したときに、 現在表示しているエラーコ ードに対する説明が出ること 仕様 OP7.2 エラーのヘルプでは、エラーの意味と、 選択できる操作と その意味がわかること
画面 「要求」 の仕様は、 個々の画面における要求の仕様化に対する方向性を 示すことになる。
114 面仕様を連携させる 327
たとえば 「OP5」 の場合は、 計測データをリアルタイム表示し、さらに監視機能を 持つ画面に対して “異常” の程度に合わせた段階を設定するでしょうし、段階に応じ て異常を知らせる方法や表示に差異を設けるでしょう。 もちろん、 「異常警告を表示 中は画面の更新はどうしましょうか」といった質問が依頼者に発せられることはなく、 全体の画面仕様から統一思想を読み取って、 「再開時の表示はこうなります」 という ことで提案する形になるでしょう。
このように、 画面全体の要求と仕様は、このあとの関連する操作画面の設計やその 先の仕様化に対して判断の基準を与えることになり、そのことで仕様化作業がはかど ることになるのです。
11.4 画面遷移と画面仕様を連携させる
画面仕様書を見せるとき、 「画面遷移図」 が用意されていないと仕様の善し悪しの 判断が難しくなります。 前後の画面の関係を見ることも難しいし、 関連する画面仕様 書の内容を見比べることも困難になります。
読み易い文書の一般的な構成は、 最初に 「全体」 を示し、そのあとに個別のテーマ に入る仕掛けが用意されていることです。 画面仕様書も例外ではありません。 画面遷 移図によって画面全体の様子を一望できる方法を提供し、その下に個別の画面のレイ アウトを示し、さらに個々の画面の構成に対する仕様を展開する、 という形が望まし いのです。
システムによっては 「画面の遷移が多くてとても書ききれない」という声も聞かれ ますが、とても書ききれないような画面数や複雑な画面遷移を持つシステムが、 画面 遷移図を書かずにどうやって仕上げられるというのでしょうか。 画面の数が多ければ 多いほど画面遷移図が欠かせませんし、 簡単な画面構成であれば、 画面遷移図も簡単 に書けるでしょう。 要するに、 画面遷移図を省く理由などないのです。
画面数が多くなって遷移図が書けないという場合は、 「画面遷移の階層化」という 方法があります。 次々と画面遷移が別のページにつながっているような図では、全 体を見渡すためには1枚につなぎあわせる必要があります。 むしろ、 次ページ図 11.2 のように画面遷移を階層化しながら、適当な大きさのなかで “完結” させるほうが効 果的です。
また遷移図には、それぞれの画面が持つ遷移の種類をすべて表現することが大事で す。 代表的な操作だけを扱った遷移図は、遷移の様子を検証することもできないので
第11章 画面仕様書のあり方
↓図 11.2 画面遷移を階層化する ボタン/ -ボタン/ ボタン ボタン/ ボタン/ ・画面番号で、 画面仕様書とつなぐ 画面名だけでは曖昧になる ○○操作 戻る/ •遷移線上には可能なかぎり操作とその 際の動作を書く 別に、階層化した形で 遷移図が書かれる
全体の画面遷移がないと、 個々の画面仕様書を見ることが困難。 大きくなりすぎるときは、 階層化して 「全体」 の広がりを押える。
実際にはほとんど役に立ちません。 つまり、 そのような中途半端な遷移図を書くため に投入した工数を、あとのプロセスで回収できないのです。
画面遷移上の画面には、 必ず 「画面番号」 を付けて、 個別の画面仕様書とつなぐこ とが必要です。 「画面の名称」 の場合は、必ずしも一致しないことがあります。 番号 も単純に「連番」 にしたのでは画面の追加によって体系が崩れてしまうので、「画面 グループ」 を設定してグループ番号を使ったり、 グループをあらわす 「記号」 を使う ことで以後の変化に対応しやすくします。 また 「グループ」 をあらわす情報を持って いることで、 個々の画面を見ただけでどのような状況で使われる画面かがすぐにわか るというメリットも得られます。
画面仕様書を最新のGUI構築ツールを使って作成するという場合でも、 全体の画面 遷移は必要です。
11.5 機能仕様との連携
操作画面に基づいて動きを指示したり操作し
たりするシステムの場合、 画面操作仕
328
115 仕様との連携 329
様書でシステム全体の相当な部分が定義できると思われます。 システムが持っている 機能も、多くは画面からの操作によって起動したり、 そこで起動したことでデータが 生成され、 それを受け取って別の画面で表示したりします。 つまり、このようなシス テムでは、そこで求められる 「機能に関する仕様」 の大部分が 「画面仕様書」という「視 点」 から記述することができるのです。にもかかわらず一般に書かれている画面仕様 書には、画面操作から呼び出せる機能の仕様が必ずしも適切に書かれていません。
しかしながら、 「画面仕様書」 にほとんどすべての動きを記述できるからといって、 画面仕様書だけでまとめようとするのは適切ではありません。 画面を起点にして、画 面に直接関わることに専念すべきです。
あるボタンを押したとき、 それが実行できる条件を満たしているかチェックし、 満 たしているなら接続している装置を起動し連続的に所定の計測を始めるような機能を 働かすような場合、 このボタンの仕様のなかにそのような個々の計測機能について 仕様を展開するのは適切ではありません。 あくまでも、 「適切な計測機能を呼びだす」 ための判断にとどめておくべきです。
実際に、 個々の計測機能を提供する処理モジュールは、 この画面のプログラムモジ ュールのなかに抱えることなく別のモジュールのほうで用意するでしょう。
仕様は、その書き方によって設計方針を誘導する力を持っています。 不用意にこの 画面の仕様のなかでこのような計測機能についての仕様を展開すれば、 設計者はその 画面のプログラムモジュールのなかでこの機能のプログラムを実現しようとするかも しれません。
画面仕様書では、あくまでも画面まわりに関する仕様に制限したほうがよいでしょ う。システムが提供するような主要な機能については、 別に 「要求仕様書」のなか の機能仕様の部分) に記述し、この機能を“呼び出す” 画面仕様には、 該当するボタ ン操作の仕様のなかで、 「○○計測機能を呼び出す」 と記述し、その機能について書 かれている要求仕様書の箇所を参照先として記述すればよいでしょう。
11.5.1 重複は避けよう
要求仕様書は、原則として「1つ」 にまとめるのが望ましい姿です。 今回のプロジ ェクトで複数の文書に分かれるときは、プロジェクトの 「文書体系」 のなかで、 それ ぞれ仕様関係の文書が扱う範囲を明らかにしておくのがよいでしょう。 さらには、そ れぞれの仕様関係の文書の先頭のところで、 その文書が扱う範囲を明示します。 たとえば、
第11章 画面仕様書のあり方
「○○システム要求仕様書」
この文書には、このシステムが提供する「機能」について記述されます。 個々 の機能がどのような場面で機能するのかは、 関連する画面仕様書やI/F仕様 書の要求番号を参照して下さい。
「○○システム画面仕様書」
この文書には、 画面操作に関する要求仕様がまとめられます。 画面操作か ら呼び出される計測機能の要求仕様は 「○○システム要求仕様書」 に書かれ ます。
「○○システムI/F仕様書」
この文書には、ほかのシステムとの接続や入出力機器の操作に関する仕様 が書かれています。
というように、システムの 「文書体系」 に明確に定義しておくとよいでしょう。
こうした定義を怠ると、 画面仕様書と要求仕様書の間で記述内容が重複したり、 ど
ちらの記述も不十分な状態になったりしてしまいます。 要求仕様書のほうで個々の計 測機能についての仕様が展開されているのに、 画面仕様書のボタン操作やデータの表 示領域の仕様のところで、 関連する計測機能の動きや内部の状態について触れてしま うことが起きてしまいます。
もちろん、これらの仕様書のなかでは、 仕様を展開するなかでいくらかは重複する ことは避けられないかもしれません。 そのような場合は、 片方に [説明] というタグ を付けておくとよいでしょう。
類似の要求仕様書が複数作られることの問題は、
それぞれで文書のなかでの記述内容が食い違う危険がある。
あとで仕様の変更が発生した際に、 全部が正しく更新されない危険がある
ことです。
しかし、 画面仕様書のところで [説明] としていることで、 「仕様」 のほう (要求 仕様書のほう) の記述を信用するでしょうし、 万一、 要求仕様書のほうでこの機能の 動作仕様が変わっても、ボタン操作に影響がなければ [説明] の記述がそのままでも 悪さはしないでしょう。 ボタン操作に影響する場合は、画面仕様書のボタン操作の仕 様も変更されるでしょうから、そのとき [説明] の記述も修正されるでしょう。
11.5との連携 331
このように、 複数の文書に行儀よく分かれてくれればよいのですが、 取り扱う範囲 をきちんと決めないで担当者が勝手に仕様書 (らしいもの)を書いてしまったり、先 に書かれた 「要求仕様書」 が仕様としての要件を満たしていないために、 それを引き 継いだ人 (設計者) が新たに自分の関係する範囲で仕様書を作り始めたりします。 こ のようなケースでは、 確実に類似の “仕様書” が作られ内容も重複します。
このような形で仕様書が重複した場合、 仕様書がメンテナンスされることはありま せん。 構成管理プロセスを持っていても、 CCB (構成制御委員会) を維持することが 負担になってしまいます。 そのような開発環境のなかでは、 設計作業のなかでも、仕 様書に立ち戻って考えたり検討されたりすることもありません。 仕様書そのものを信 頼していないのですから当然です。 そしてこのプロジェクトが頓挫することは避けら れないでしょう。
このほかに、「概仕様書」というものを作ったときにも仕様書の文書の重複が起き ます。 一般に、 概仕様書というのは、 「要求書」 よりは踏み込んだ記述になっています。 でも、 「仕様書」 と主張できる自信がないのでしょう。「概」という文字に作成者の職 躇が感じられます。
そしてこのあと、本格的な 「仕様書」 が書かれた場合、 この 「概仕様書」の位置づ けが中途半端なものになります。 当然、 仕様書を書き進めていくなかで 「概仕様書」 にも触れている個所があって、そこに書かれている内容が変わることがあります。 そ のとき、 「概」のほうを変更していかないかぎり、 この段階で 「概仕様書」の存在意 義が失われていきます。
「概仕様書」 が書かれるところではもっと厄介なことが起きています。 最初は 「概 仕様書」 のあとで本格的な仕様書を書こうと考えたのでしょうが、 実際には「概」を 超えるような仕様書が書かれることはありません。 その理由としては、
その時点で、 本格的な仕様書を書く時間が残されていない
最初から 「概」 の付かない仕様書の書き方を持っていない
ある程度は、 「概」 のところで書いた、という思いが邪魔をする
などが考えられます。
さらに悪いことは、 「概」の付く文書は、レビューの対象にはならないということ です。 この段階で、プロジェクトの結末が決まったようなものです。
12 |章
ヒアリング時の注意
これまで、 要求を表現することや仕様化の方法について説明してきました。 実際に 要求仕様書をまとめるには、 何らかの形で顧客に対してヒアリングを行う必要があり ます。 場面としては二つあり、 一つは、設計者側で全面的に要求仕様書の形にまとめ るケースで、いわゆる 「ITシステム」 や 「PCアプリケーション」などでは、このパ ターンが多いかと思います。 この場合は、 要求仕様書の体系化からすべてが設計者側 で用意する機会があり、 設計者の仕様化スキルが発揮されることになります。
もう一つの場面は、依頼者のほうで要求仕様書をまとめてくるケースです。 この場 合は、設計者のほうで要求仕様書を “理解” するというプロセスが入ってきますが、 その際に曖昧な表現や矛盾する箇所などを解決するために 「ヒアリング」 の機会があ ります (「第5章 5.4 要求仕様は誰が書くのか」 参照)。 ただし、このときの問題は、 要求仕様書が依頼者のほうで持っている構成で作られることが多く、 仕様モレや仕様 の衝突を発見しにくい状態になっている場合は、 ヒアリングで問題をカバーするのも 難しくなるでしょう。
このような問題にどのように対処するかということを中心に、 ヒアリング時の注意 事項についていくつか触れておきます。
12.1 ヒアリングの目的
ヒアリングの目的は、システムに盛り込むべき機能や品質に関する必要な要件 (要 求と要求仕様) を依頼者や関係者から聞き出し、合意するための 「要求仕様書」の形 にまとめていくことにあります。
顧客が求めている要求は何か?
機能的要求は何か?
その機能は本当に必要なのか?
その要求のなかには、どのような仕様が含まれるべきか?
具体的に何ができればよいのだろう?
その機能に品質要求が絡むか?
全体に対して、 どのような品質要求が必要か?
こうして判明した要求 (や要求仕様) を体系のなかで表現し、 「理由」 などを絡ま
第
第2部 要求
第1部 要求仕様にまつわる問題
12.2 システムの目的を確認する 333
せながらモレがないことを確認し、そのなかで仕様を引き出していきます。 その過程 でも曖昧な箇所や判断に迷う箇所をヒアリングによって解消していくわけです。
顧客の要求には、 曖昧なものや筋の通らないものもあるので、 別の角度から検討す ることも必要になります。 たとえば、
顧客の要求に合理性はあるのか?
むちゃな要求、 あるいは単なる願望ではないのか?
ほかの要求 (機能) とのバランスがとれているか?
という角度からも検討しなければなりません。 この検討が省かれると、あとになって 仕様の矛盾 (衝突) が多発し、 現場が混乱することになります。 いつまで経ってもテ ストが安定しないケースでは、
「どうしてそんな機能がはいっているの?」 「誰が、 そんな機能を使うの?」
と思うような機能を完成させるためにてこずっていることが少なくないのです。 こうした問題を起こさないためにも、早い段階に必要な要件を聞き出し、合理的な 判断の下にまとめていくことになります。 特に、 仕様間のコンフリクト (衝突 =矛盾) は早く発見しないと、 そこまでの作業がムダになったり、 解決が困難な状況に陥った りすることになります。 したがって、 ヒアリングは早い段階に必要に応じて何度も実 施されることになります。
12.2
"システムの目的” を確認する
ヒアリングでの間違いのなかで意外に多いのが、 最初に 「システムの目的」を確認 しないまま、個別の機能要件のヒアリングに入ってしまうことです。 システムの目的 を確認するとは、たとえば、
依頼者は、今回開発するシステムで何を得ようとしているのか?
今回のシステム開発で高い費用を投じて手に入れようとしているものは何 か?
このシステムよって経営上にどのような効果を上げたいのか?
12
章
第
334 第12章 ヒアリング時の注意
製品ごとの、 “厳格な" 損益計算を出したいのか? 今回開発しようとしている製品の主たる機能はどれか? 今回の新しい製品を開発する狙いはどこにあるのか?
シェアをとるための製品なのか、それとも特定の客を確実につかみたいの
か?
といった視点で目的を確認することです。
今回の製品の狙いを確認したところ、シェアをとることではなく、市場に対して自 社の技術力をアピールすることだったり、 他社を出し抜くために従来のサイクルと違 った「早い出荷」が目指すところだったりします。 このような 「目的」を最初に依頼 者との間で確認しておくことで、その後のヒアリングに方向性を与えることができま す。
たとえば、目的をつかまないまま仕様化作業をしている場合、 途中でいくつかの機 能の仕様が衝突していることがわかって顧客に確認するときに、
「○○機能のこの仕様が□□機能の仕様と矛盾しています。 どうしましようか?」
という問い合わせを発してしまいます。 顧客側にこの問い合わせにきちんと対応でき る人がいればよいのですが、 現実にはそのような人はなかなかいません。 それでも、 何日かあとに、問題の仕様を一部変更する旨の返事が届きます。 しかしながら、この 仕様が再びほかの機能仕様と矛盾したりします。
最初から仕様化している人が、システムの目的を意識して関連する仕様の変更をま とめて「提案」 すればよいのです。 システムの目的がわかっていれば、その際の理由 も明確にできます。
また、システムの 「目的」 は、 設計側で要求を仕様化する過程でのいろいろな場面 に作用します。 たとえば、 画面への表示の順序や、文字の大きさや色使いが変わって くるでしょうし、最終の誤差が少なくなるように計算の途中の精度を上げるような仕 様を考えるかもしれません。 もちろん、それらの仕様も、ヒアリングで出てくるかも しれませんが、 事前に 「製品ごとの“厳格な" 損益計算を出したい」という目的を認 識していることで、顧客が気づかないような場面でも、 顧客の満足を刺激するような 仕様を提示することができるのです。
最初にシステムの目的やプロジェクトの目的を聞き出さないで、いきなり個別の機
12.3 今回の要件定義の手順について同意を得る 335
能のヒアリングに入ってしまうようでは、最終的に顧客の満足を得られないでしょう し、途中で仕様の衝突に気づいたときや仕様の選択で判断に迷ったときに、 適切な判 断ができないのです。
12.3 今回の要件定義の手順について同意を得る
ヒアリングを開始する前に、 顧客側の要求仕様に対する最終責任者や機能ごとにヒ アリングする関係者 (担当者)を明確にしておくことはいうまでもありません。 この 確認を怠ったために、 最終段階になって要求仕様の内容がひっくり返ったり、 ベース ライン設定を目前にして堰を切ったように、隠れステークホルダー "から仕様の追加 が飛んできたりするのです。
そのほかにも、 顧客との間で、 初めに今回の要件定義の作業の進め方について説明 し、それぞれのケースに応じて同意を得ておくことも重要です。 一つは、顧客から依 頼されて、 設計側のほうでヒアリングを通じて仕様化し 「要求仕様書」 を作成するケ ースで、もう一つは、顧客のほうからある程度の内容を持った 「要求仕様書」 が提示 されるケースです。 これらの違いによって、 仕様化 (ヒアリング) の進め方が変わっ てくるので、きちんと確認しておかないと、 あとでもめることになります。
たとえば、前者のケースでは、以下のようなことで合意しておくとよいでしょう。
設計側が進めようとしている要求と仕様を分けた考え方、表現方法を説明し 理解してもらう
要求仕様書をまとめていく過程の状態の文書を双方で常に共有する 途中で仕様の問い合わせを行う際の方法や質問シートのフォーマット、 その 使い方を説明しておく
ベースライン設定の意味を理解してもらう
これによって、 ベースラインを挟んだところで発生する仕様変更の対応方 法が変わることを理解してもらう。 「Sign Off℃」 の考え方も説明しておくと よいでしょう。
要件管理手順 (要件変更手順) について説明し合意をとっておく
仕様変更にともなうレビューや対応の決定方法、 さらに決定に伴った対応 なども決めておく。
1 ヒアリングされていない利害関係者という意味。 2 「この文書を間違いなく私が承認しました」という強い意 表現でのサインを意味します。 中身をろくに見ていない状態で
の「承認印」とは意味が違うのです。 ただし、日本では、 "Sign off"の文化は薄いと思います。
*
*志
336 第12章 ヒアリング時の注意
一方、後者のケースでは少し複雑になります。
顧客のほうで作成する要求仕様書の構成や特徴について確認する
このとき、まだ顧客側で要求仕様の記述があまり進んでいない場合は、 設 計側が持っている要求仕様書の構成や書き方を説明する方法も考えられま す。
すでに書き上がっているか、ほとんど書き上がっている場合は、一定の期間、 仕様の不足を補う工程を挟むことを説明し、了承をとる
この場合、 不足を補う際の表現方法も具体的に説明し、 要求仕様書のベー スライン設定は、 そのあとになることを了解してもらうことです。
顧客側で書かれた要求仕様書を設計側で「理解」 するための方法や表現を説 明しておく
このほかの質問の発し方やベースライン設定後の要件管理手順などは、前 者のケースと特に変わるところはありません。
このほか、以下のような要求仕様書をまとめるための手順やルールなどについても 合意しておくことが望ましいでしょう。
ヒアリングの進め方や担当者の確認
要求仕様書のレビューの進め方
■ベースライン設定時の手続き
未確定項目を含んだ状態でのベースライン設定の可否とその条件
12.4 仮説見積りに基づいた仕様作成期間
要求仕様書を作成する期間は、 おそらくすべてのプロジェクトで設定されていると 思われます。 しかしながら、 そこで設定されている 「期間」 が、 要求仕様書のサイズ (項 目数)をベースにして算出されていることはほとんどないと思われます。 多くの場合、 最初に顧客側から出された 「マイルストーン”」 をそのまま使っていたり、 設計側で (いつものように) 最終納期から割り出した、 「この時期にできていなければ、 間に合 わない」 という 「ねばならないスケジュール」 で設定されたりしています。
依頼者のほうで、 「例」 として要求仕様書の完成日とか、テストに入る時期、 とい
*3 長い道に1マイルごとに置かれる石 (stone) のことで、プ ロジェクトを進めていくときの中間的な目安のこと。
125 契約時には、仕様の項目数の見積りを付ける 337
ったマイルストーンが示されることは問題ではありません。 ある程度の「見通し」 を もって企画したものであれば、そのような形になるでしょう。 そうした依頼者側の「希 望的見通し」を、 設計側がそのまま使うことがおかしいのです。
「要求仕様書」 を作成する期間では、 そこで展開されるであろう要求仕様書の項目 数の「予測値」 をベースに工数を算出し、 その工数で目指した日程で終わらせるため に投入すべきリソースを割り出す必要があります。 顧客から示されたマイルストーン を使うとしても、一般にそこで示されているのは「日程」 であって 「工数」ではあり ません。 サイズから算出された工数では、最初から2人投入しないとその日程に間に 合わないというのであれば、必要なリソースを確保すべきです。
もちろん、その際には項目数の前提となった「要求仕様」 の粒度や、単位時間当た りの生産性を示す必要があるかもしれませんが、 その場合は、 仕様書のサンプルを付 けて説明すればよいでしょう。 場合によっては、こうしたサイズ見積りの結果、 顧客 が示した納期に間に合わないことが見えてくるかもしれません。 その場合は第2案と して、顧客の希望する日程であれば、 要求仕様の項目数が第1案の7割りぐらいで収 まる必要があることを説明する方法もあります。
この段階で、こうした仮説に基づいたサイズ見積りを行っておくことで、ベースラ イン設定後の要件変更に伴う評価の際に示すサイズや工数の見積りに信憑性の裏付け がなされます。
12.5 契約時には、仕様の項目数の見積りを付ける
一般に、ソフトウェアの開発を外部に発注する場合は、契約が行われるタイミング は2つ考えられます。
●顧客側から簡単な 「要件リスト」 が提示されて、 それに対して依頼を受けた側が 見積りを提出した段階で契約する。 この場合 「要求仕様書」 はまだできておらず、 契約が成立してから要求仕様書を作成することになる。 稀なケースとして、要求 仕様書が作られてから再契約されることがある。
②顧客側からある程度の内容を含んだ 「要求仕様書」 が提示され、 それに対して依 頼を受けた側が見積りを提出した段階で契約する。 この場合、 要求仕様書の内容 が不十分なことが多いにも関わらず、依頼者から提示された 「納期」 を達成する
338 第12章 ヒアリング時の注意
ことを示した見積書が作られるが、必ずしも、サイズに基づいて工数が割り出さ れたものではない。
のいずれかと思われます。
ここでは、要求仕様のヒアリングを外部のソフトウェア企業のエンジニアが行うも のと想定して話を進めているので、 機能のカテゴリが認識され、 要件のリストが示さ れている状態で見積り (仮説見積り) が行われて契約することを想定して説明を続け ます。
もちろん、まだ仕様化していない状態で見積るのですから、 見積りの精度の問題が 伴うことは避けられません。 「仮説見積り」 には、このようなリスクは避けられません。 それだけに、このあとの仕様化作業の結果から明らかになった仕様項目数を使って、 それまでの見積り値を調整する必要があり、そのためにも仮説見積りでは、単なるエ 数見積りではなく、 要求仕様の項目数を想定して見積っておくことが大事なのです。
もちろん、 「調整」 といっても、 いつも後ろにズレるというばかりではありません。 仕様化に予想以上の工数がかかったとしても、その後のプロセスでは当初想定してい た工数は必要としないこともあります。
工数見積りに慣れている状態では、 「仕様の数」 といわれても、 細かさの程度がイ メージできなければ項目数が判断できません。 そこで、顧客側に今回の仕様化のイメ ージがない場合は、「仕様」 のサンプルを付けておくとよいでしょう。
「見積り」は、あくまでも実際の作業に入る前の数字であり、 経験に基づいている とはいっても予想値です。 実際の作業に着手して 「現実」に触れることによって「想 定」との違いが見えてくるので、その時点で見積りを現実に合わせる調整が必要です。 仕様の「サンプル」 と 「項目数」 は、想定していた規模との乖離が生じたときの判断 に活かされるのです。
こうして仕様化を進めた結果、 乖離幅がスケジュールを調整できる限度を超えた場 合は、要件のトレードオフや見積りのやり直しなどのきっかけになります。 最初から いい加減な見積りで実現不可能なプロジェクトを走らせるような馬鹿げた事態は回避 しなければなりません。
12.6 要求仕様書の 「体系」 を示す
ヒアリングを効率よく進めるには、 先方の担当者にも事前に考えておいてもらうこ
仕様;
12.7 事前にヒアリングの範囲を知らせる 339
とが必要です。 しかしながら、 その日にヒアリングを実施することを事前に連絡して いたとしても、 その日のヒアリングのテーマがどの機能なのか、ほかにどのような機 能があるのかがわからないと、 答える側も事前に考えておくことができず、 ヒアリン グの場で質問に対して答えるだけになります。
事前に今日のテーマについて考えておいてもらうには、ほかにどのようなテーマが 存在するのかが見えていることが必要です。 そのためには、早い段階で要求仕様書の 「全体」が見える体系を示すことです。 一番上に、 今回のシステム全体を適切なカテ ゴリ (主に機能カテゴリになる) に分割した図があって、 その下に各機能カテゴリの なかで 「要求」 を整理していきますが、 初期の頃には、機能カテゴリに分割されただ けの箇所もあるでしょう。こうした「体系」 があることによって、 お互いに関係する 機能も見えるでしょうし、 明日のヒアリングのテーマについて仕様を思いめぐらすと きに、制作途中の要求仕様書が双方で共有されていれば、ほかの機能について気づい たこと (仕様) を書き残しておくことができます。
ヒアリングには、 するほうもされるほうも、連想を妨げないような仕組みを持ち込 まないと、ヒアリングの効率は悪くなります。
また、顧客は 「この設計者は、自分の知っていることをどれだけ引き出してくれるか」 「こっちの希望するものを作ってくれるか」と疑心暗鬼になっています。 特に、 ヒア リングする人のスキルがわかっていないときは不安なのです。
そんなときに、 ヒアリングの内容が体系だっていなかったり、設計工程に入ってい ると思われる時期になって、 思い出したように 「ヒアリング」 が実施されたりすると 不安になってきて、 そのあとは設計者の 「アラ」 ばかりが目につくようになるのです。
12.7 事前にヒアリングの範囲を知らせる
ヒアリングは、本書で勧める要求仕様書の構成を使う場合は、基本的には 「要求の 抽出」 と 「要求の仕様化」 のプロセスで行われます。
設計者が、 ある程度ドメインの知識を持っていれば、設定されたカテゴリの枠から 関連する機能要求の抽出も進むでしょうから、 「要求の抽出」 に関するヒアリングは 短い時間で終わるかもしれません。 その場合はヒアリングの中心は 「要求の仕様化」 になります。
ただし、設計者のほうに当該ドメインの知識が不足している場合は、
340 第12章 ヒアリング時の注意
カテゴリ分割の段階
各カテゴリのなかに含まれる要求 (主に機能要求) を引き出す段階
にも、顧客側の担当者との間で頻繁にヒアリングを行う必要が生じることもあり、 エ 数的にも困難な状況に陥る危険があります。
いずれにしても、ヒアリングを行う場合は、事前に先方にその日のヒアリングのテ ーマや範囲を知らせておく必要があります。
全体のカテゴリ分割について
○○のカテゴリのなかに含まれるべき機能要求の打ち合わせ
各カテゴリの機能要求リストの全体についての確認
いくつかの機能要求に関する仕様 (抽出) の打ち合わせ
この場合、 対象となる 「機能要求」 は事前に通知しておくこと。 適当な範囲でまとめられた要求仕様の確認
というように、ヒアリングの場を明確に設定することが必要です。
ヒアリングをスムースに運ぶためには、コンテキスト図やカテゴリの分類をあらわ した図や表を先に届けておいて、 ヒアリングの場での意識を一致させることも有効で す。 (第6章 「6.5 要求のカテゴリ化」 参照)
何日か連続してヒアリングを行う場合も、その間に進める予定の範囲を知らせてお くことと、 先方の担当者の都合も確認しておかなければなりません。 1回のヒアリング のボリュームが多過ぎると、 そのなかで必要な仕様を引き出すにはリスクが伴います。
12.8 こちらの要求仕様のフォーマットに慣れてもらう
人は誰でも長く慣れ親しんだものに安心するものです。 逆に、いままでと違ったフ ォームやルールが持ち込まれると不安に感じるものです。 いままで要求仕様書のよう な 「文書」 は 「Word」 で書くことに慣れている状況では、本書で勧めるような 「Excel」 形式の要求仕様書には、 内容に踏み込む前に拒否反応が出ることも少なくありません。
新しい要求仕様書が、 いままでと何が違って、どこにどのようなことが書かれてい るのかという構成の問題や、 仕様表現の細かさや要求との階層関係の構成などに慣れ ていないままでは、要求仕様書のレビューに支障をきたします。 したがって、 従来と 違った新しいフォーマットの要求仕様書を取り入れる場合は、 要求仕様のサンプルを 使ってよさや特徴を説明したり、 実際の変更率やレビューでのデータを使ってアピー
12.9 言われたことをメモしただけではダメ 341
の配慮が必要になります。 依頼者に 「自信」を伝えることが大事です。 その後は、 新しい構成に慣れてもらうために、ヒアリングや仕様化作業の進捗に沿 って丁寧に対応していけばよいでしょう。 たとえば、 カテゴリ分割のなかで要件レベ ルから書き始めた段階や、 ある程度要求が書き揃った段階で提示します。 この頃にな ると要求レベルで仕様化のヒアリングも行われることになるので、顧客も見慣れてく るでしょう。
ルするぐらい
さらに仕様化作業に沿って適当な区切りとなるところで顧客に提示して確認を求め たり、いくつかの機能単位で合意のレビューを繰り返すなかで、 新しいフォーマット に慣れてもらえばよいでしょう。
設計書の類いと違って、 要求仕様書の場合は顧客側の人も深く関わるので、このよ うな配慮を省いてしまうと、せっかくよい結果をもたらす方法でも、先方に受け入れ て貰えなければ効果を発揮することができません。 その結果、 昔と同じように終盤に なって仕様の問い合わせを発したり、仕様変更の頻発に見舞われたり、 最後まで仕様 モレに気づかなかったりするのではつまらないです。
12.9 言われたことをメモしただけではダメ
"ヒアリング” というと、顧客から (要求) 仕様を聞き出してまとめることと考え ている人が少なくありません。 この考え方では、 担当者は、ヒアリングしたことをメ モに残すか、せいぜい簡単な議事録程度にまとめているだけということになってしま います。 実際、 要求仕様書が 「議事録」 だけ、というケースを何度か目にしています。
どうして 「メモ」 や議事録にしかならないのか。 それは要求の体系を持っていない か、ヒアリング前に、 要求を整理してからヒアリングにのぞんでいないため、その場 での話しとして出たことをメモに記録することしかできないし、それをあとで「体系 化」することもできないのです。
そのような状況で記録された議事録は 「体系化」 されていないため、 要求仕様書と しては耐えられません。 メモや議事録の項目間の関係も曖昧です。 適切に 「分類」さ れていないのと分割の基準なども曖昧なため、何が不足しているかもわからないし、 扱う仕様の範囲が重なっていても気づかないでしょう。
これらのメモや議事録も要求仕様書を作成するプロセスの「入力物」 とすることが できるのですが、 その場合は、 別に要求仕様書としての体系が用意されていて、その 枠のなかにヒアリングでのメモや議事録の内容をつまみ出して体系のなかに収めてい
342 第12章 ヒアリング時の注意
く方法が用意されていなければなりません。
ここでの最大の誤解は、ヒアリングによって顧客から聞き出した (求められた) 要 求や仕様を実現すればよいと考えていることです。 だから、 あとになって必要な仕様 が文書に書かれていないことを知った顧客の担当者が、 問題の仕様は認識されてい るかどうかを尋ねると、 「聞いていません」という返事が返ってくることになります。 この種の仕様の多くは、 ある程度のドメインの知識があれば、 本書で勧めているよう な要求や仕様の体系を活用することで、 仕様化の作業のなかで必要な仕様であること に“気づく” 可能性が高いのです。
顧客は、そのシステムで必要な仕様をすべて発することはできません。 それは聞き 出す側のスキルに依存しているのです。 したがって、 顧客が発した仕様だけを実現し ようとすれば、おびただしい仕様モレが発生するのは当然なのです。 言い換えれば、 限られたヒアリングのなかで得た情報から、 顧客から提供されていない要求や仕様を 提示することができなければ、 上手なヒアリングとはいえないのです。
組み込みシステムの開発では、ソフトウェア企業に外注に出す場合、 依頼者のほう から 「要求仕様書」 が提示されることが多いと思われますが、この場面でのヒアリン グでは、依頼者の書いた要求仕様書のなかの不明点について確認するという形になり ます。
このとき、依頼者のほうで作られた要求仕様書の構成に問題がある場合、この要求 仕様書のままでヒアリングしようとしても、漏れている仕様に気づかない可能性が高 いのです。 機能のカテゴリに分類されているとしても、 「要求」 が表現されていない 場合は、仕様モレの前に、 要求そのものが漏れてしまう可能性があります。
依頼者から渡された要求仕様書の構成が悪いときは、たとえば一部の機能に的を絞 って構成を変えてみて、 新しい仕様がどれくらい見えてくるかによってその構成のま まで作業を続けるか、 何らかの形で新しい構成に切り替えるかの判断が必要になりま す。 ただし、ヒアリングする側に 「よりよい形」 の要求仕様書を書けるスキルがなけ れば、その判断ができないかもしれません。
したがって、 契約の前に依頼者から交付される要求仕様書の形や構成について確認 したり、その構成によっては早い段階でよりよい構成を提案したりする機会を設ける とよいでしょう。
12.10 品質要求をヒアリングする 343
12.10 品質要求をヒアリングする
ヒアリングの最大級の問題は、ほとんどが 「機能要求」 に意識が偏っていて、「品 「質要求」 が忘れられていることです。 最近は、 CMMI の効果もあって、 文書のカバ ーは「○○システム要求仕様書」 となっていますが、 品質要求は書かれていません。 機能仕様書と要求仕様書の違いが認識できていないのです。
したがって、すべての機能が問題なく実現していても、 「応答性」 とか 「操作性」 といった一つの品質特性が満たされていないことで、 商品 (完成品) としての価値を 失うこともあります。 そんなことになれば、 折角の骨折りもムダになってしまいます。
品質は「設計」で織り込む必要があるため、事前に把握されていなければ実現しま せん。 したがって、 事前の仕様化を省いていきなりソースコードを書く方法では、必 要な品質要求を満たすことは難しいのです。 個々の機能のなかの小さな仕様が実現さ れていないことがあとになって判明した場合は、 特定のモジュールを修正するぐらい でカバーできるかもしれません。 しかし、操作性や交換性、 保守性といった品質要求 はあとでカバーすることは容易ではありません。 「パフォーマンス」という品質特性 も場合によっては、 データ構造を作り替え、それに合わせて大がかりな変更をしなけ れば目指す品質レベルに達成しないこともあります。 なかには、 改修不可能と判断さ れることもあります。 つまり、 作り替えるしかない、ということです。
多くの品質特性は、 開発段階のレビューやテストなどの 「検証プロセス」で基本的 には発見できるのですが、 「保守性」 という品質特性については動作させて検証する ことはできません。 一般には、ソースコードを検証するツールを使って 「静的解析」 したり、 設計書などをレビューで検証したりすることになります。 このような検証を 省いたときは、「保守性」 が達成されていないことが、 次回以降の派生開発の機会ま で発見できないことがあります。
いずれにしても、こうした重要な品質に関するヒアリングが忘れられるのは、
品質を「要求」として表現し、さらに 「仕様」 に展開する方法を知らない 表現したとしても、それを実現するための設計方法を持たない
ことが背景にあるものと思われます。
344 第12章 ヒアリング時の注意
12.11 未決項目を含んだ状態でのベースライン設定
要求仕様書を作成するプロセスでは、当初設定した期間内に必要とするすべての要 件について仕様化し、 顧客との間で 「合意」 に達して 「ベースライン設定」 をするこ とが望ましいことはいうまでもありません。
しかしながら、現実にはこれは “夢物語” かもしれません。 事前に要求仕様書の仕 様項目数を見積り、そこから工数を割り出し、 期限内に仕様化するために必要な要員 を投入していないかぎり、 達成しないと思われます。 もちろん、 サイズ見積りをすれ ば必ず達成するというものではありませんが、ある程度の範囲で仕上がる可能性は高 くなります。
もし、予定の期限内にすべての要件が仕様化された状態で "合意” に達していなく ても、未合意の仕様が全体の5%程度であれば、 また顧客との間でそのような状態で 「合意する」ことについて事前に了解がとれていれば、スケジュールを優先して暫定 仕様として 「ベースライン設定」 に踏み切ることが可能なケースがあります。 その際の要求仕様書の条件としては、
未合意の項目のなかには 「T.B.D」 のままになっているものはなく、 すべて仕様 化されているがその状態で最終合意に至っていないだけ。
そこで仕様化されている状態で設計作業に入れるくらいの表現になっている 未合意の項目のなかに、広い影響範囲を持つような重要な項目が含まれていない。 未合意の項目が全体の5%程度である。
未合意の項目についての合意を待つには許容しがたい時間がかかる可能性があ る。
という場合には、 暫定仕様の形でベースライン設定が可能で、これらの暫定仕様があ とになって合意または一部修正された場合は、「要件管理」 の変更制御のプロセスで カバーします。
事前に合意できた要件であっても、 そのあとで変更されることは避けられません。 仕 様化を工夫して曖昧な箇所を大幅に減らしたとしても、この先の開発期間中に発生する 変更をすべて予測することは不可能です。 そのために 「要件管理」 のプロセスを用意し て対応するわけです。 今回のように事前に合意がとれていない項目は、この後、高い確 事で変更が発生するというだけなので、 仕様番号を設計書やソースコードに記録するな どして、変更の発生に備えて設計作業や実装作業を進めて行けば対応できます。
ただし、合意に達していない要件であっても、 その時点で明らかにされていること
12.12 仕様化作業に巻き込む 345
をそのまま表現する必要があり、 どの箇所が同意できていないのか、 どのような案が 検討されているのかといったことを、 両論を併記するなどして明示しておくことが重 要です。
12.12 顧客を仕様化作業に巻き込む
一般に、顧客の仕様の担当者は、いま開発しようとしている製品について熟知して いる人であったり、システムのユーザーであったり、またはそれに近い立場にいる人 だったりします。 だから、これから開発しようとするシステムに対して 「要求」 を持 っている可能性が高いです。 特に、ビジネスシステムの場合は、ヒアリングの対象者 自身が、ここで開発されるシステムのユーザーになる可能性が高いのです。
組み込みシステムの場合では、顧客の担当者は、一般には最終的にその製品のユー ザーを代弁する人であり、その製品に盛り込んでほしい機能をイメージできる人です。 確かに、その製品がまったくの新企画の場合は、 企画担当者といえども必ずしもユー ザーの立場では十分にイメージしきれない部分があるかもしれませんが、それでもそ の人は製品のユーザーを代弁する人であることは間違いありません。
要求仕様のヒアリングでは、顧客のこうした立場の人を上手に巻き込まないと、う まくはかどりません。 顧客の担当者をほったらかしにして、 自分たちでさっさと仕様 をまとめてしまうというやり方では、合意形成に支障をきたしベースライン設定のと きにもめるでしょう。 「FIX」 を強要して合意にこぎつけたとしても、あとで仕様変更 追い回され、さらには法的手段の応酬にも発展しかねません。
大事なことは、 仕様化作業に顧客の担当者の意見や考えを取り入れることで、要求 仕様書に対する思い入れの気持ちを持たせることです。つまり、「共同作業」 の状態 にするのです。
早い段階に要求仕様書の体系を示し、 カテゴリ別に要求を設定していき、 そこに仕 様が収まっていく様子を横で見ているのは面白いものです。 少なくとも本書で進めて いる形式に沿って仕様化が進んでいく様子は、最初は大きな木の幹が描かれ、そこに 太い枝が広がり、 さらに小さな枝や葉っぱが書かれていくように見えます。この様子 を、ヒアリングしながら逐次顧客の担当者に見えるようにすることで、一緒に大きな 絵を描いている気持ちに持って行くことができるのです。
顧客側で事前に要求仕様書を書いてくる場合も、 そのまま 「これで変更はありませ
346 第12章 ヒアリング時の注意
んね」 と、 まるで顧客の担当者の返事を 「言質」 にとるような姿勢で対応すれば、 ど うしても“敵対関係” に入ってしまいます。 顧客の担当者(要求仕様書をまとめた人 たち) も、決してそれで必要な仕様がすべて書かれているので問題ないと確信を持っ ているわけではありません。 むしろ、ほかに漏れている仕様はないか? これで設計 者 (外注のソフトウェア企業のエンジニア) に通じるか? もしかすると違った意味 に受け取られはしないか、と不安なのです。
そのようなときに、 設計者のほうから、 「私たちは、お客さんのほうで書かれた要 求仕様を忠実に実現するのが仕事です」 といわんばかりに応対されれば、不安に思う のは当然です。 そして、 終盤になって仕様の細かな部分について確認を求めるメール がひっきりなしに届くのです。 さも、 依頼者側で書かれた要求仕様書が 「欠陥品」で あるかのように。
顧客が要求仕様書をまとめる場合でも、設計者のほうで早い段階に仕様化を補った り、設計者が要求仕様を理解していく過程を適切な 「質問」 の形で示したりすること で、顧客の不安は減少していきます。そうして双方の間にある 「要求仕様書」は、双 方が理解した結果をあらわしたものになるのです。
要求の仕様化の段階で、こうして顧客 (の担当者)の不安を解消するような行動を とることで、顧客を味方に引き込むことができます。 そして、このあとに発生する仕 様変更の場面でも、 冷静に協議することができるのです。
#3 第
部
要件管理と計測
要求の仕様化への取り組みを後戻りさせな いためには、 適切な 「要件管理」 の仕組み (プ ロセス) を取り入れることと、 要求仕様の出 来栄えを判断するための計測が必要になりま す。 適切な要求の仕様化に取り組むことで、 あとになっての仕様 (要件) の変更は減るで しょうが、 「ゼロ」 になるわけではありません。 このとき、 要件の変更をまったく制御しなけ れば、無秩序に発生する変更依頼に対して不 完全な対応がなされ、 せっかくの仕様が崩れ てしまい、 納期も遅れてしまうでしょう。
要件管理によって、 ある程度の変更を制御 すると同時に、 変更が起きにくいような要求 の仕様化技術を習得する必要があります。 い くつかの計測項目を監視することで、 要求仕 様の出来栄えを判断し、 よりよい仕様化のあ り方を追求することが大事です。
このほか、 第3部では、要求の仕様化テ クニックがリスク管理などの分野にも応用で きることを説明します。
13. 章
仕様化を支える要件管理
仕様化に取り組んだなら、 無節操な仕様変更の要求をコントロールして、プロセス が崩れることを防がなければなりません。 要件が適切にヒアリングし仕様化できるこ とは、プロジェクトを成功させるための最大の要因です。 しかしながら、 せっかく仕 様化した項目であっても、いろいろな状況のなかで、 仕様または要求の変更が生じる ことは止められないことがあります。
要求仕様書のベースライン設定を終えたことで、 多くの設計担当者がこの要求仕様 書を元に自分の分担の設計作業を展開していきますが、そのようなときに、 より所と している要求仕様の変更は、大きなトラブルのもとでありバグの最大級の要因なので す。 特に、 後半になって重要な機能の一部が変更になったり、 新しい機能が追加され たりするようでは、ゴールが約束できなくなります。
そのために、ベースライン設定後の仕様変更に対しては、 本当に必要な変更なのか、 その変更をいまのプロジェクトの (サイクルの) なかで実施することに意味はあるの か、変更を受け入れる場合にはどれくらいの工数の追加が必要なのか、など慎重に検 討する必要があります。
「要件管理プロセス」 は、このような場面において、混乱の増幅を押えるためのプ ロセスです。 このプロセスが機能するためには、 発注側と設計側の双方がこの要件管 理プロセスの意味を理解し、 そこで定められている手続きを遵守することが重要です。
13.1 なぜ、仕様が変更されるのか?
依頼者も好んで仕様を変更したいと思っているのではありません。 そこには変更せ ざるを得ない事情があるのです。 たとえば、
競争相手の製品が新しい機能を入れた
最近になって新しい部品が開発され、
それを組み入れることで競争上優位に立て る
顧客のシステムの購入予定者から、無視できない特別の要求が出された このシステムに関連する法律が改正された
というような場合、通常は、仕様変更は避けられないのです。 もちろん、いつもこん な理由ばかりではありません。
第3部 要件管理と計測
第
132 関係者へのオリエンテーリング 349
そこで示された要求仕様書では、出来上がりの状態をイメージができなかった 最初のイテレーションで実際に動くものが見えたことで、依頼者の意図が伝わっ ていないことがわかった
ということも、あとになって仕様が変更される原因なのです。 後者の要因は、本書で 勧めている要求の仕様化の取り組みによってある程度防ぐことができますが、前者の 要因は仕様化技術で防ぐことはできません。 実際の要件変更が発生した要因を分析す ると、過半は後者のグループに属するものです。 要件管理の変更要因を分析し、計測 するなかで、後者のグループに起因する要件変更が消えていけばよいわけです。
13.2 関係者へのオリエンテーリング
要件の変更の多くは、要求仕様書の段階での詰めの甘さから、 設計作業や実装作業 を進めるなかで発生します。 これらの仕様変更は、 個々の変更は規模の小さなものが 多いと思われますが、 件数が多く発生することがあり、それによってプロジェクトの 進行を妨げることになります。
これに対して、組織の上層部から要件の変更が発生することがあります。 このよう なケースは、一般に、 仕様レベルではなく 「機能」 レベルの追加や変更が発生するこ とが多く、しばしばプロジェクトを破綻に追い込むことになります。
このような事態を避けるために、 まずは事前の適切な仕様化が大事になります。 こ れによって見積りを調整する際の精度も上がり、 今回の不条理な変更要求に対しても 適切に対応できる力となります。 その上で、 組織の上級マネージャーを含めた関係者 (要件の変更を発する可能性を持っている人たち) に対して、 「要件管理」 の意味や、 その重要さ、要件管理の(変更制御の) 甘さが多くの混乱の原因になっていること、 などをきちんと説明し、理解を求める必要があります。
なお一般には、 次ページの図 13.1 のように要件管理には2つの機能があります。 一般には、 「1.A」 の追跡機能は認識されていないと思われます。 この追跡機能があ ることで、 要件変更が発生したときにその修正結果を追跡できるのです。 もちろんそ れなりの工数が必要になり、 それは要件の変更が発生しなかった場合は必要のない工 数なのです。 その意味でも、こうした変更管理の機能は、依頼者も含めて関係者の共 通の理解とそれを守ろうという姿勢のうえでのみ機能するものです。
要件の変更依頼を検討した結果、 今回のイテレーションのなかで対応できないこ
350 第13章 仕様化を支える要件管理
図 13.1 要件管理の2つの機能 A. 要件実現のための追跡機能 1. 要件追跡機能 要件管理 B.変更に伴う追跡機能 2. 変更制御機能 一般には、 「1.A」 の追跡機能は認識されていない。
とを判断できなければ、要件管理は無実化します。 そのためには 「CCB (Change Control Board)" 」 を機能させなければならないでしょうし、 「SQA (Software Quality Assurance)"」 も機能しなければなりません。
13.3 要求仕様書をレビューする
要求仕様書は、実現することに対して、依頼者や設計者などの関係者が「理解」 し 「合 意」 するための文書であり、 合意にいたるにはその前に何度かレビューを重ねること が不可欠です。 もちろん、 多くの組織では、 そこで書かれた要求仕様書をレビューし ています。 しかし、文書の構成や書き方によっては、 仕様モレや仕様の衝突を発見す ることは容易ではありません。
要求仕様書のレビューには、最終的な「合意」 のためのレビューと、その前にモレ や欠陥を見つけるためのレビューが必要で、 後者のレビューは必要に応じて何度でも 実施することになります。 要求仕様書の構成や書き方を改善した場合は、後者の欠陥 探しのレビューをしっかり実施しておくことが大事で、 そこで仕様モレや不適切な仕 様の表現、 仕様の衝突などを少しでも多く発見しておくことで、 あとで仕様の変更が 発生するのを防ぎます。
またこうした仕様化を進めた結果、 実現性が危ぶまれる仕様がハッキリと見えてき ます。 何となく実現できるかどうか怪しい、というレベルではなく、 どの仕様とどの 仕様がぶつかっているのかが見えています。 どれくらいのタイミングで表示が遅れる 危険性があるのかも見えています。 だからこそ、 要求仕様書のレビューを通じて 「イ ンクリメンタル」 開発に切り替える判断ができるのです。 そして、実現の順序を決め る判断もできるのです。 ベースラインの合意をする前には、 この判断ができているこ とが望ましいのです。
*1 要求や設計チームの代表者から編成した変更制御委員 会。 *2 要件管理プロセスがスポイルされていることを発 見し、プロジェクトの責任者に対して注意を促す必要があります。
B
13.4 ベースライン設定と合意 351
13.4 ベースライン設定と合意
要求仕様書は、依頼者を含めた関係者の間で、実現する要求 (仕様を含む) につい て合意するために書かれているもので、 適切な時期に内容について 「合意」 すること で、チームは次の工程に入ることができます。
本来、 ここでの合意には関係者全員に 「Sign Off」の考え方が求められます。 ここ での合意は、単なる承認ではありません。 この内容で進めてよいことを、それぞれの 立場の人が責任をもって承認したという意識がほしいのですが、 日本では、このよう な 「Sign Off」の考えは希薄かもしれません。 それでも、合意の意志表示の意味を込め て、関係者の代表) が 「サイン」 してほしいと思います。
このレビューの前には、 仕様化がほぼ確定しているので、 仕様化作業の前に行った 仮説見積りに対して、 実際に得られた仕様の項目数を使って見積りサイズや工数の調 整はもちろん、 日程やコストの見積りにおいても調整されていると思われます。 要求 仕様書の合意の場でスケジュールの確認も含めて合意できることもあります。
ここで、 仕様化が不十分だと、 関係者が納得した状態で合意できないかもしれませ ん。 そのような状況のなかで、 日程 (納期) を盾にして強引に 「合意」 を取り付けて も、あとでもめるだけです。
特殊なケースとして、 個々の仕様に対して必ずしも 「了承」 が得られていない部分 を含んだ状態で 「同意」 することがあります。 もちろん、 そのような項目がたくさん あるような状態では合意することはできませんが、 仕様全体の数%であれば、 あとで 確定するということで、 設計作業に入っていくことは可能です。 もちろん了承が得ら れていないといっても 「T.B.D」 では合意することはできません。
そして、このような形で合意した仕様の項目は 「追跡」 の対象として、 あとで 「仕 「様変更」 の形で決まってくることに備えます (第12章 「12.11 未決項目を含んだ状 態でのベースライン設定」 参照)。
13.5 以後の仕様変更をコントロールする
人には、 みな 「良識」 があります。 少なくとも筆者はそう信じています。 仕様化も スムースに運び納得して合意し、 その後もある程度の範囲で作業がスムースに進んで いる状況を自分の手で崩すことには、 誰であっても躊躇するものです。 逆に、この後 仕様変更が “ねじ込まれる”のは、いろいろな状況のなかで依頼者の 「良識」を壊す ような状況を作ってしまっていることが多いのです。
352 第13章 仕様化を支える要件管理
たとえば、終盤に入って設計者からしばしば仕様確認のメールが入ったり、 仕様が 衝突していることに気づき、 その対応として一部の仕様に制限をつけることを求めら れたりすると、 設計者に対する不信感が発生し、 人としての 「良識」 は崩れてしまい ます。
したがって、 あらかじめ取り決めた仕様作成段階のなかで、 仕様化作業とそれに伴 う問い合わせやレビューを集中的に行い、 要求仕様書として完成度を上げておくこと が重要なのです。 そのなかで、 顧客の担当者を仕様化作業のなかに取り込み、 そこで まとめられた要求仕様書が 「自分の成果物の一部」という感覚を抱いてもらうことが 大事です。
要求仕様書が整然と構成されていれば、 事前のレビューでも仕様のモレなどを発見 しやすく、 実際にその過程で依頼者も交えて仕様モレの指摘などが進みます。 そうし た作業を繰り返してよくなっていった文書には誰もが愛着を感じるので、理不尽な変 更は発生しなくなります。
要件管理については、いくつかの文献でも扱われています。 それらのなかには適切 なものも多いので、 要件管理の一般的は考え方についてはそれらの文献に譲り、ここ では、それらの文献であまり触れていないことについて補っておきます。
□13.5.1 CCBは判断と指示を出すだけ
CMMIが普及するなかで、 要件管理のプロセスに取り組まれることが多くなってい るようですが、 関係者から聞こえてくる声は、
「CCB (Change Control Board) が重い」 「まともにCCBを実施しておれない」
というものです。
CCBが重くなる原因は2つあります。
要求仕様書の出来栄えが悪いために変更があとを絶たずCCBのための工数負担が 大きい
CCBの運営を間違って理解している
多くの組織では、 要件管理に取り組む前に、 そこにある要求仕様書の書き方を改善 していません。 CMMIのアセスメントやギャップ分析で、 そこで書かれている要求仕 様書が 「良」 と判断されたことによって、 その書き方を改善する必要性を認識する機
135 以後の仕様変更をコントロールする 353
会を失っていることも考えられます。 仕様の変更率が高いままに要件管理に取り組め ばCCBを手抜きせずに実施することで工数の負担は大きくなってしまい、納期遅延の 要因になってしまうか、 現場の人たちにとんでもない負荷をかけることになります。
要件の変更が発生したことでCCBが開かれますが、 多くの組織ではCCBの運営を 間違えていて、変更依頼の妥当性、 依頼内容の評価、 どのように修正するかといった ことを、そのCCBの場で検討しているのではないでしょうか。 こんなことをすれば、 1日中CCBを開催しても間に合いません。
CCBは 「判断」 と 「指示」 をする場とすべきで、 変更依頼内容が適切なものかどう かの評価や、変更方法の検討などは、 CCBから誰か適当な人に依頼すべきです。 そう して検討された結果に対して、 CCBが再び判断し指示すればよいのです。
ちょうど 「巡回判事」 のように、判断し指示していけばよいのです。 判断に迷った ときのために CCBは数人で運営するのですが、 最終的にはCCBの 「委員長」 が判断し、 決定し、 指示します。変更の依頼者がそれなりの地位にあり、 設計内部で評価した結 果、この時期に今回の変更を受諾するには危険が大きすぎると判断することになりそ うなときのCCBには、 特別に部長級の人の参加を求めてもよいでしょう。
□13.5.2
変更率5%以下の効果
たび重なる仕様変更で混乱しているという組織の場合、 仕様の変更率が30%を超 えることも少なくありません。 私の経験から、仕様変更率が15%ぐらいになると “頻 発” という言葉が出てきます。 当然、 変更案件に対してまともに検討している暇はな 要件管理プロセスはスポイルされます。
図 13.2 仕様変更率
変更仕様件数 .x 100 総仕様件数
ベースライン設定時の総仕様件数を基準にします。
母数が多ければ変更率も下がります。 ・変更そのものも起きにくくなる。 すでに記述されている仕様に対する変更の場合は、変更による混乱は少ない。
仕様書の更新が容易
十分に仕様化されたなかでは、変更される仕様の収容先が容易に見つかる。
354 第13章 仕様化を支える要件管理
仕様の変更率が高い状況では、 そこに書かれている項目の “隙間” に対して変更が 発生していることが多いのです。 たとえば、
「端末から送られてきた計測データは、計算に使用する前に項目間の整合性をチ ェックしてほしい」
という変更が届いたとき、 もともと仕様書のなかでそのようなデータチェックを想定 していないときは、 この変更がどこで対応されるのが適当なのかというところから検 討しなければならず、 その分だけ混乱の度合いも増します。
それでも、コンサルティングのなかで、ここで進める表記法に変えることで変更 が一気に 「7%」 前後に下がります。 そしてさらに工夫を繰り返すことで3%ぐらい に改善します。 なかには1%前後にまで低下している例もあります。 もちろん、 要求 の仕様化プロセスに必要以上の時間を投入すれば、 仕様としての完成度も上がるので、 その後の変更率は低下することが考えられますが、納期が満たされている状況での「1 %」 であれば問題はないでしょう。 第一、 従来の表記法では、 何時間投入してもこの ような改善は見られなかったはずですから。
一般に、ベースライン設定後の仕様変更率が 「3~5%」 になれば、 仕様変更が “頻 発”した状態とは認識されないのと、 すべての変更案件に対してきちんとCCBを運 営できる状態になります。
□13.5.3 最初のサイズ見積りが説得力となる 一般に、要件管理に必要なスキルに、サイズ見積りのスキルが求められることは認 識されていません。 しかし、 ベースライン設定後の仕様変更が混乱する原因のなかに、 その変更によってどれくらいの作業が新たに必要になるのかを見積れない、という状 況があります。
最初からサイズ見積りに基づいた見積りと進捗管理が行われているときは、 仕様変 更が発生した時点では、すでにこうした「サイズ見積り」 に基づいて進捗管理が行わ れていて、その見積りの精度が見えているのと、 実際にサイズ見積りと進捗管理の運 用についても実績が積まれているので、 仕様変更に対してサイズに基づいた変更作業 の見積りが説得力を持つのです。
サイズ見積りができない状況で、 仕様変更に伴って依頼者に返される 「10日の遅 れになります」という見積りには説得力がなく、 「これも含めて何とか納期に間に合 わせてほしい」 とねじ込まれるのです。
13.7 いつ仕様変更を実施するが 355
事前の仕様化が甘く、 実装工程に入ってから依頼者に対して仕様の問い合わせのメ ールを発したり、慌ててヒアリングに臨んだりするようでは、依頼者からの信頼も失 われているため、 そこで提示される追加の見積りは信用されません。
13.6 未確定だった仕様が決まる
仕様変更のなかには、合意の段階で「暫定仕様」 の形で合意した仕様が決まったと いうケースもあります。 このような合意の時点で未確定の仕様は 「追跡」 の対象に指 定しておき、設計書やソースコードなど関連するところに仕様の記番号を埋め込んで いくので、あとで仕様が決まったときに 「仕様変更」 として上がってきても素早く対 応できます。
しかも、 決定が予想の範囲のものであれば影響は少ないのです。 ただし、ときには まったく別の案になって決まってくることもあり、 そのような場合は、 通常の要件管 理プロセスのなかで改めて仕様変更の影響を検討する必要があります。
13.7 いつ仕様変更を実施するか
最近は、要件の変更を管理するツールも普及し、変更依頼そのものもそれがツール によって書かれた時点でデータベースに登録され、関係者に 「メール」が送信される ような仕掛けを持っているものもあります。 “関係者” が要件管理の担当者であれば よいのですが、なかには、変更を登録する際に関係する領域を入力することで、 設計 の担当者に「メール」が送られることがあります。 担当者のレベルでは、この種のメ ールが送られてきた状態でしばらく置いておくことは難しく、どうしてもそのつど作 業を中断して検討に入ったりします。 このようなツールでは、メールが自動的に発信 されるとしても、 要件管理者だけにしておくべきです。
仕様変更が入ったからといって、いまとりかかっている開発作業を直ちに中断して、 その変更に完全に対応しなければならないということはありません。 担当者の作業の タイミングを無視して、 変更案件に取り組むことは、 開発作業を混乱させるだけであ り、“マネージメント" の欠如が表面に出てしまいます。
要件管理の担当者が、 最初に変更案件を確認した時点で止めておくこともできるし、 CCB が稼働して変更内容を評価するための調査を行った段階で、変更管理プロセスを 止めておくこともできます。 もちろん、 どれの場合も、 そのような対応がなされるこ
356 第13章 仕様化を支える要件管理
とについて依頼者とのあいだで合意が必要になります。
そうして、 担当者の作業の区切りのよいところで、いくつかの変更案件をまとめて 対応することで、 混乱を防ぎ、 変更作業の効率を上げることができます。 CCB を 「巡 回判事型」 で運営することで、 CCBからの 「検討要請」 の期日を、 それぞれの担当者 の事情に合わせることもできるのです。
仕様変更への対応をまとめて行うことで、複数の変更依頼で変更内容が重なる場合 に調整することもできます。 なかには、時間を置くことで冷静な対応が可能になるこ ともあります。 プロジェクトのリーダーにとって、この判断は非常に重要なものとな りますし、 対応によってはメンバーからの信頼を得ることもあります。
13.8 仕様変更を期間限定で募集する方法もある
仕様の変更は、 どうせ出るものなら早く出してもらい、 それをまとめて検討したほ うがよいという考え方もあります。
そこで、 設計や実装段階に入っての仕様変更を避ける方法として、 ベースライン設 定後の早い段階で1、2週間の期間を設定して、この間に仕様変更を 「募集」する方 法があります。 実際に、このシステムを使う人や関連する製品やシステムの開発経験 のある人などを対象に、 要求仕様書や操作仕様書などを使ってプレゼンテーションを 実施し、 その後期間を区切って要件の変更や効果的な仕様の提案を受け付けるのです。
この場合、先のベースライン設定の合意は、「仮の合意」 と位置づけることもでき ます。 もちろん、 依頼者の了解が得られれば、 ベースライン設定前に実施することも できますが、確定していないものを多くの人に見せることで却って混乱する可能性が あるので、 ベースライン設定前の場合でも、 相当に仕上がったものであることが必要 でしょう。
この期間に出された仕様の変更要求や提案に対しては、 いわゆる 「要件管理」のプ ロセスは起動させず、 要求仕様の策定期間の延長という認識で、 要件の担当者のなか で対応します。
こうして一定期間、 変更を 「募集」 することで、 そのあとで仕様変更が出しづらく なります。 そうした自制が働くことで、仕様変更による混乱の機会を減らし、 それで も変更が出てくるときは、きちんと 「要件管理」 の枠のなかで対処することで了解が とりやすくなります。
章
仕様化の出来栄えを測る
要求の仕様化には、明らかな間違いはあっても「正解」 はありません。 そこに、 要 求の仕様化に関するコンサルティングの難しさがあるということもできます。 そこで ここでは、どのように表現すれば、 要求仕様としてうまく機能するのかということを 知るために、 計測することの必要性について説明します。
「計測されないものは、改善されない」
これはデマルコの有名な言葉です。 何か新しいことに取り組んだとしても、そのこと に関して適切に計測されない限り、 取り組みに関する技術の上達はありえない、とい うことです。
プロセスの改善で必要なことは、
取り組みの目的を明らかにし、
取り組みがその改善の目的に添ったものであることを確認し、
実際のデータを使って取り組みの効果を検証しながら
進めることです。 いわゆる 「PDCA”」 のサイクルのようなものが必要です。 そのため には、
事前に何を計測するか その計測方法 判断の基準
を考えておく必要があります。
事前の準備とデータの収集がなければ、 取り組み方に不適切なところがあってもそ れに気づかず、取り組みの効果も上がらないということになってしまいます。 それで は新しい取り組みに投入した工数を回収できないので、 現場には新しい取り組みに対 する 「負荷」だけが残ってしまいます。
どのような改善の取り組みも中途半端だと期待する効果を得ることができず、取り 組みに投入した時間を回収できないのです。 しばらくして気づいたときには、 元のや り方に戻っているという体験をした人は少なくないでしょう。 そのとき、取り組みの 出来栄えを計るようなことはやりましたか?
*1 品質管理の父といわれるデミングが提唱した概念で、計 画 (Plan) を実行 (Do) し、 評価 (Check) して改善 (Act) に 結びつけ、その結果を次の計画に活かすプロセスのこと。
14.
14
第
第
358 第14章 仕様化の出来栄えを測る
要求の仕様化で、ヒアリングや新しい書き方に取り組んだところで、 当初はいろい ろな課題が残ります。
たとえば、
ヒアリングの進め方に対する課題
要求の発見の仕方に関する課題
要求の階層化の課題
仕様化についての課題
要求仕様の表現の仕方に関する課題
要求仕様のレビューの課題
などが残ってしまいます。
これらの課題は、すぐには改善しません。 要求の仕様化の方法や階層化の基準など を何度も見直し、書き直していくなかで習得するものです。 そのためにも、 仕様化に 取り組んだ際には、 取り組みの効果を判断できるデータを収集したり、 仕様モレなど のデータを解析して仕様化技術の向上にフィードバックすることが重要です。
14.1 何を計測するか
たとえば、本書のテーマである要求仕様の書き方を変える取り組みの主たる目的は、
●仕様を書く人にとって仕様モレを未然に防ぎ、 ②仕様の矛盾(衝突) に気づきやすくすること
であり、これが「合意」 につながるのです。 要求仕様書の構成や書き方の副次的効果 として、 他の人が見たときにも、そこに“あるべき仕様” が漏れていることに気づき やすくすることも狙っています。
この目的を実現するために要求仕様書のフォームを変え、 書き方を改善したのであ れば、その出来栄えを判断する項目として、たとえば要求仕様書のレビューでの指摘 件数や、ベースライン設定後の仕様変更の件数、最後に仕様関係のバグとなって検出 された件数等が考えられます。 これらの計測データは、 仕様化の出来栄えによって変 化すると思われます。
こうしたことがイメージできれば、
部 要件管理と計測
14.2 レビューでの指摘件数とバグ件数の関係 359
●要求仕様書のレビューでの欠陥の指摘件数と指摘の理由を計測し、
②ベースライン設定後の要件変更の件数や変更の発生時期などを計測し、
③最後に仕様関係のバグとして発見された件数と、 原因プロセスのデータを計測す ること
も考えつくのです。
要求の仕様化に取り組んで見たものの、自分たちにどのような課題が存在するかは 計測データから見えてきます。たとえば、工数に関するデータとしては、
ヒアリング工数
要求の抽出に投入した工数
仕様化の工数
ピアレビューの工数
などが考えられます。 また件数に関するデータとして、
ピアレビューでの指摘件数
ベースライン設定時の仕様の項目数
要件管理のなかで把握した仕様変更件数
設計者から発した仕様の問い合わせの件数
仕様関係のバグの件数
などが考えられます。
これらの件数データは、そのままでは出来栄えの判断には使えません。 変更件数や バグの件数は、母数が大きくなればこれらの件数も大きくなるのは自然です。 したが って、ベースライン設定時の仕様の項目数を基準にして、「発生串」や「指摘率」の 形に変えることで、 "出来栄え” を判断したり、課題を見つけ出したりすることがで きるのです。
また、単純に仕様の変更率を算出するだけでなく、変更や問い合わせが発生した時 期のデータを組み合わせることで、 そこで何が起きていたのかが見えてきます。
14.2 レビューでの指摘件数とバグ件数の関係
多くの場合、 そこで書かれている要求仕様の構成や書き方では、要求の範囲も見え ず具体的な記述にもなっていないため、必要な仕様がモレていてもレビューで発見さ
360 第14章 仕様化の出来栄えを測る
れるとは限りません。 当然レビューでの指摘件数は少なく、 そこで発見されなかった 分がバグとなって現れることになります。
これに対して、 要求仕様の構成や書き方を変えて、関係者が "Specify" できるよう に具体的なレベルまでブレークダウンすることで仕様モレが減ります。 また読み手も、 書き手の立っているところと同じところに立つことができるので、 書き手が何に気づ き、何に気づいていないかがわかり、その分だけレビューでの指摘件数が増えること になります。 つまり、 図14.1 のように、 初期の頃はレビューでの指摘件数がいった ん増えます。 その後、 レビューでの指摘やバグの経験を仕様の構成や書き方に反映し ていくにつれて、レビューでの指摘件数が減っていきます。 この間、 仕様関係のバグ の件数のほうはずっと減少傾向をたどるという状態になるはずです。
↓図 14.1 レビューの指摘件数とバグの件数の関係
バグ件数 取り組みの効果が現れ出した状態 仕様の書き方が改善されるようになった状態 仕様化の改善が定着した状態 レビュー指摘件数 いったん、レビューでの指摘件数が増える。
このように、データを収集しながら、 データが示す変化を確認することで、取り組 み方や出来栄えや様子が見えてくるのです。
□14.2.1 獲得時間の集計
一般に、要求の仕様化で必要なプロセスを省いた代償として、作業の 「遅れ」 や 「手 「戻り作業」 となって、あとになって時間を供出することが迫られるので、“失った時間” がハッキリ見えます。 それに対して、 改善の効果として “失わずに済んだ時間は、 そのままでは見えないので、 強引にでも見える形にする必要があります。
第3部 要件管理と計測
要求仕様にまつわる問題
142 レビューでの指摘件数とバグ件数の関係 361
図 14.2 要求仕様書レビューの効果
|獲得時間= 欠陥指摘件数 平均対応時間 投入時間 -
要求仕様書のレビューによって発見された欠陥数から、 失わずに済んだ 時間を 「獲得時間」として算出する。 平均対応時間 この欠陥が仕様関係のバグとして発見されたときに、 修 復に必要な時間の平均値。
投入時間: 仕様化作業やレビューに投入した時間 こうして割り出された獲得時間は、 要求仕様書の構成や書き方を変えた ことの効果とみなす。
レビューで検出 (指摘) された項目は、以前ならバグになった可能性が高いとみな して、 バグの平均対応時間などを乗じることで、 「失わずに済んだ時間」として算出 します。 この時間から、 仕様化作業やレビューに投入した時間など、 改善の取り組み に費やした (追加投入した) 時間を差し引いた時間が 「獲得時間」 となります。 つま り、取り組みの 「効果」 です。
もちろん、 今回のレビューで発見された項目のなかには、以前の要求仕様書の書き 方でも発見できた可能性があり、それを区別することは不可能です。 しかし、今回要 求仕様の書き方を変えたことで、 設計や実装の途中で仕様の確認がやりやすくなりま す。 従来なら、 3週間前に書いたソースをたどってそこで決めたこと (仕様) をソー スから確認していたのが、 適切な要求仕様書があることでこのような仕様の確認作業 は大幅に短縮され、 確実性も増しています。
こうした確認作業は、 従来は後半になれば盛んに行っていたはずで、この時間が大 幅に削減されるはずです。 もっとも、これも計測不可能ですが、決して少なくはない はずです。
そこで、こうして削減されたと思われる時間と、 以前の書き方でも発見できたかも しれない分を相殺することにし、 レビューで発見された項目はすべて今回の書き方の 効果と見なします (ちょっと乱暴ですが)。
適切な要求仕様書が書かれていない状況では、設計工程や実装工程のなかで ほかの機能の仕様を確認する必要性が生じたとき、 すでに書き終えたソースコ ードを読み直すことがしばしば起きています。 この時間は、 工程の終盤になる と1日の50%にも達することがあり、 合計で数100時間も費やされているので
362 第14章 仕様化の出来栄えを測る
す。 レビューで仕様モレが見つけやすいような要求仕様書があることで、この ような仕様確認の時間が大幅に減ります。 これも要求仕様書の効果なのですが、 この時間を計測することは難しいので、 代わりに要求仕様書のレビューで発見 された欠陥を、すべて要求仕様書の効果とみなすわけです。
こうして、 改善による 「獲得時間」 が明らかになることで、この後のプロセスでレ ビューの回数を増やしたりする判断にもつながるのです。適切なプロセスの「冗長」は、 品質の向上にとって重要なファクターです。
14.3 データは組み合わせると声を発する
計測するといっても、
要求仕様項目数 = 826項目 仕様レビュー欠陥数=79件 仕様変更件数=121件 ソースコード行数 = 58733行 QAバグの件数=723件 全体の工数=68人月 初期納期遅延率=37%
というようにまとめられた数字からは大したものは見えません。 上に挙げた数字は「基 本測定量”」 と呼ばれるもので、一般にこの種の計測値からは問題の所在が見えませ ん。 計測値から問題を見つけるには、たとえば 「1k行あたりのバグ数」というように、 いくつかの基本測定値を組み合わせて「導出測定量”」にする必要があります。 数字は、 "単独” では何も役に立たないのです。 いくつかのデータを組み合わせることでデー タのほうから声を発するのです。
たとえば、ベースライン設定後の仕様変更の件数だけでは意味を持ちません。 シス テムの規模が大きいときは、仕様の変更数も多くなってもおかしくありません。 せい ぜい変更が多かったとか、 意外と少なかったという程度です。 しかし、ベースとなる 仕様の項目数と組み合わせて 「変更率」 の形にすると、 前回のプロジェクトと比較し たりすることで、改善の“傾向” が見えたりします。 また仕様変更の発生時期のデー タと組み合わせることで、いつ、どのくらいの仕様変更が発生しているかが見え、こ
*2 「基本測定量」「導出測定量」については、「実践的ソ フトウェア測定」 (John McGarry 他著、 古山恒夫、 富野壽監訳、 共立出版) を参照しています。
第3部 要件管理と計測
14.4 バグから学ぶ要件開発の方法 363
のプロジェクトで何が起きていたのかを知るきっかけになります。
バグの発生件数をあらわすデータも、今回生み出したソース行数と組み合わせたり、 それにさらに担当者のデータを重ねたりすると、 「発生率」 や個人の 「特性」 が見え てきます。 また、 バグを機能別に分けて、 機能別の要求仕様の項目数と組み合わせる と、もっと貴重な情報となります。
このように、データは組み合わせることで、 そこで起きていることに注意を促すシ グナルを発してくれます。 改善の取り組みを行うときには、 取り組みに関連するデー タ項目を考え、 それらの組み合わせ方をイメージし、それに耐えられるようなデータ を収集しておくことが大事です。
工数データも、 全体の工数データだけではあまり役に立ちません。 工程やプロセス 単位の工数データがあれば、 どれくらいの割合の工数を仕様化や要求仕様書のレビュ ーに投入したのか、その割合が適切なものかどうかが見えてきます。 また、工数デー タと要求仕様の項目数のデータを組み合わせることで、 これとは違ったものが見えて きます。
たとえば、 単位項目数当りの工数が見えます。 これを要求仕様書の機能別にみると、 機能によっての投入工数の偏りが見えてきます。 スムースに運んだ機能と何度も交渉 し直した機能が見えてきます。 そしてこの機能別の投入工数データに機能別のバ ータを重ねることで、 もっとおもしろいことがわかるはずです。
このようにいくつかのデータを組み合わせることで、狙い通りの結果になっ ろや、期待した結果を得られなかったところが見えてくるのです。
14.4 バグから学ぶ要件開発の方法
毎回、 同じように仕様モレを繰り返す理由の一つとして、仕様関係のバグから何 も学習していないことが挙げられます。 テストで発覚したバグに対して“原因” を探 し当ててプログラムコードを修正しても、「どうすればこの仕様はモレなかったのか」 という視点で対応策を考えてこなかったということです。
仕様モレは 「注意」 で防ごうとするには限界があります。 仕様モレのバグとして発 見された場合は、 「漏れた事実を認識する」 ことができますが、 このような経験を積 み重ねても、要求仕様を書いている段階や、要求仕様書のレビューの段階で、 仕様が 漏れていることを発見するのは容易ではありません。 仕様モレや仕様の衝突の多くは、 仕様書の構造の問題なのです。
364 第 14 仕様化の出来栄えを測る
仕様関係のバグを分類・整理してみることで、 そこで表現されている仕様の特徴 をつかむことができます。 条件の定義が曖昧なものや、 条件の半分しか仕様が書かれ ていないものなどが見えるはずです。 たとえば、 “散文” 形式で書かれていたために、 それが仕様であることに気づかなかったり、 仕様なのか説明なのかがわからない表現 になっていたりします。 また、条件の組み合わせを並べた文章の大部分が“ペースト 作文" で書かれていたりしていることに気づくはずです。 さらに、それらの問題は、 要求仕様の書き方や構成を変えなければ、 事前に発見に発見することは難しいことも わかるでしょう。
仕様モレや仕様の衝突を発見するには、 要求仕様書そのものに 「漏れない仕組みや 仕掛け」 を持ち込むことが必要です。 したがって仕様モレなどが発見されたときは、 どうすれば“この”仕様モレを防ぐことができたのか、を考えるのです。 たとえば、 表 14.1のようなケースで、
「自動設定 #12がオフで残メモリサイズが設定値1を超える場合の処理が不安定 である」
というバグが発生するかもしれません。 この原因が、 “ペースト作文” に起因してい る可能性があるということで、このようなケースは「デシジョンテーブル」の形で表 現するか、条件の様子を明確にするために 「PADフロー」 を使って表現するとして「改 「善方法」 をまとめます。 バグに対応したときに、ここまで問題の“源流” に戻って対 策を考えることで、次回のプロジェクトで要求仕様を書いているときに、 「この場合 はデシジョンテーブルにしたほうがよい」 ということに気づくことができます。
↓表 14.1 細かく分かれた条件をペースト作文した例
仕様 WA04.1 自動設定#12がオフで、 残メモリサイズが設定値1未満の場合は、 監視 ペースを5分に1回とする 仕様 WA04.2 仕様 WA04.3 仕様 WA04.4 自動設定#12がオンで、 残メモリサイズが設定値2未満で、 接続点数が 5以上のときは、 監視間隔を3分にする 自動設定 #12がオンで、 残メモリサイズが設定値2未満で、 接続点数が 5未満のときは、 監視間隔を2分にする 自動設定#12がオンで、 残メモリサイズが設定値2を超える場合は、 1 分間隔で監視する
それぞれの条件分は、最初の条件分から"ペースト作文”で作られている。
バグから学ぶ要件開発の方法 365
大事なことは、 「仕様モレを防ぐ一般解」 を求めるのではなく、「個別のバグ事例」 への対策を考えることです。 仕様関係のバグが100件あっても、対策のパターンはお おむね十数パターンなので、個別に対応策を考えていけば同じパターンに何度も遭遇 し、すぐに学習効果を得ることができます。
*15*
仕様化技術の応用
本書では、 仕様モレが起きにくく、かつ発見しやすい要求仕様書、 あるいは仕様の 衝突が見つけやすい要求仕様書を求めて、 従来とは違った形式の要求仕様書の構成や 書き方を説明してきました。 具体的には、 要求を適切に表現することで、その要求の 範囲のなかに適切な仕様を見出す方法です。
要求の仕様化技術は、 曖昧な世界、 抽象的な世界を具体化する技術でもあります。 そしてこの技術は、計画書のブレークダウンや課題管理のブレークダウン、リスク管 理のブレークダウンなどにも活用できるのです。 逆に、 この具体化の技術が欠けてい ることで、多くの場面で問題となっています。
組織の問題を解決しようと 「To Do」 のリストを書き出しても、 1ヶ月経っても何 も改善されないということはしばしば起きています。 その原因のなかには、 「To Do」 に挙げた項目が “具体的”なレベルで捉えられていないことがあります。 同様に、組 織のなかで同じような会議が何度も開催されるときも、そこでの 「結論」 には具体的 に行動できるレベルで捉えられていない状況を何度も目撃してきました。
多くの時間と費用を投入してソフトウェアシステムのアーキテクチャの改修をして も、問題点を具体的にリストアップされていないときには、 従来の問題が何も改善さ れていなかったりします。
ここでは、これまで説明してきた 「要求の仕様化」 の方法が、 そのほかの場面で応 用できることを説明します。
15.1 リスク管理へ応用
まず、 ソフトウェア開発のなかでは、 要求と要求仕様の考え方がほとんどそのまま 「リスク管理」 の世界に活用できます。 もちろん、 「課題管理」 もそのスキームはリス ク管理と同じなので、 当然、 課題管理にも適用できるのですが、 ここではリスク管理 の場面での活用方法について説明します。
日本では 「リスク管理」 がほとんど機能していません。 その最大級の原因として、
● 「危機管理」という日本語の概念に含まれているのは、 「Risk」 ではなく 「Crisis」 や 「Emergency」の次元になっている。
②リスクの表現が適切でないために効果的な軽減措置を引き出せていない。
部
要件管理と計測
第1部要求仕様にまつわる問題
15.1 リスク管理へ応用 367
ことが考えられます。
ただし、 本書は 「リスク管理」 を詳細に伝えるものではないので、以下では2の問 題について説明します。
15.1.1 「リスク」 の表現に問題がある
今日では、 CMMIがリスク管理に取り組むことを強く奨励したこともあって、 リス ク管理の必要性については多くの人が認識しています。 しかしながら、 現実にリスク 管理が効果的に実施されていることはほとんどありません。 その原因は、リスクの評 価の誤りにあるのではなく、リスクそのものを抽出できていなかったり、リスクを適 切に表現できていないことにあるのです。 そして、 リスクが適切に表現されていない 状況では、リスクの評価も空回りしているのです。
リスク管理で大事なことは、
リスクの存在を認識し (表現し)
適切な軽減措置を実施してリスクを発症させない
ことです。 要するに適切な 「軽減措置」 が考え出されなければ、リスク管理の意味は ありません。 そして、 リスクを押さえ込むための有効な軽減措置を引き出すのは、リ スクそのものをいかに表現するかにかかっています。
たとえば、リスク管理に関する文献には、
ツールの訓練が不足している
オブジェクト指向の設計に慣れていない
見積り工数が不足している可能性がある
顧客が要求を変更してくる可能性がある
といったリスクの事例が載っていますが、これらは、一般にリスク管理のなかで "リ スク"として表現されているものです。
しかしながら、 「リスク」 とは 「約束したことを実現しない可能性」 です。 もちろ んそこには 「要因」 があります。 何か準備や対応の手落ちがあって (要因があって) 納期やコスト、品質について約束できない可能性がある、ということがリスクなので す。 したがって、「ツールの訓練が不足している」 というのは、リスクではなく 「要因」 であって、これが要因となってQCDのなかの約束を満たさない事態が起きる可能性 があると捉えるべきです。
15 151
第15章 仕様化技術の応用
368
「顧客が要求を変更してくる可能性がある」というのはもう少し複雑で、 この場合 は明らかにこれが 「一次要因」 ではありません。 たとえば、 「要求仕様書の書き方に 確信がない」 とか、 「顧客に読んでもらえる要求仕様書を書けない」 というのが一次 要因で、 その結果として 「顧客が要求を変更してくる可能性がある」 が、ここから引 き出された現象です。 そして、 この現象が 「要因」 となってさらに 「設計工程が混乱 して納期をはずす可能性がある」 という部分をリスクと捉えたほうが、 軽減措置を引 き出しやすいのです。
ちなみに「ツールの訓練が不足している」 から、 どのような軽減措置が引き出せる でしょうか。 おそらく、
「ツール担当を決めて、メンバー全員がツールに慣れるための練習を指導する」
というような対応が考えられますが、 ツールが特定されていないなかで、 どのように 準備するのでしょう。 そして、 約束を破るのが 「納期」 なのか 「品質」 なのかわから ない状態で、 効果的な軽減措置が引き出せるでしょうか。
確かに、“そこ” にリスクが潜んでいるような気配がしますが、 はたして、ここか ら適切な軽減措置を引き出せるでしょうか。 リスク管理は、 そこにリスクがありそう だと認識していても、 効果的は軽減措置が実施できなければ意味はありません。 その 意味で、 上記のような表現では、 軽減措置を引き出すことは難しくなります。
□15.1.2 要求と要求仕様の関係と類似
要求の仕様化の話しのなかでリスク管理を取り上げた理由は、要求の仕様化のスキ ームが、リスク管理に応用できるからです。
「リスク」 は、 裏返せば 「そのような事態に陥りたくない」 あるいは 「納期遅れを 生じないように対処してほしい」という“要求” と捉えることができます。 そして、 「軽減措置」 は、 まさに要求を満たすべく 「仕様」 なのです。 図15.1は、 要求仕様と リスクの表現の対応を示した図です。
通常の要求仕様と異なるところは、 軽減措置は、すべてを実施する前にリスクその ものが消滅すれば、 軽減措置のいくつかは実施されないまま捨てられることです。
↓図 15.1
152 課題への対応が見えずにうろうろする
要求仕様の構造がリスクに対応する
要求仕様書 リスクリスト 要求 リスク 理由 要因| 仕様 | 軽減措置 図のように、 要求仕様とリ |スクリストは、類似の構造 で表現できる。
15.1.3 リスクと要因で 「範囲」 を示す ポイントは、リスクと要因を適切に表現することで、要求のときと同じように、軽 減措置を引き出すための 「範囲」をイメージさせることです。 たとえば、
「要因」 = 「新しくプロジェクトに参加した4名が、○○ツールに習熟してい ない」 「リスク」 = 「レビューに耐える設計書が書けないことで設計工程において手戻 りが発生し、 結合テストに間に合わない可能性がある」
と表現されることで、訓練の対象者とツールが特定されます。 対象者が特定されるこ とで、早い段階でこのツールに対する習熟状況を確認することができます。 また、習 熟していないことで引き起こされる問題がレビューに耐える設計書が書けないかもし れないというところにあることで、 対応としては手順書やガイドラインのイメージが できるでしょう。 また、 期限としては、 結合テストに間に合うように訓練の内容や実 施を考える必要があることも見えてきます。
このように、リスクの要因とリスクでうまく範囲を表現することで、 このリスクを 発症させないための軽減措置が引き出しやすくなります。 逆に、 「要因」 と 「リスク」 のセットで表現しているにもかかわらず、 効果的な軽減措置が引き出せない場合は、 「要因」 と 「リスク」 の表現に問題があることが考えられます。
15.2 課題への対応が見えずにうろうろする
リスク管理はプロジェクト計画書を構成する重要な要素ですが、 これに対応したも
369
370 第15章 仕様化技術の応用
のとして 「課題管理」 があります。 この課題管理も、リスク管理と同じように 「課題」 になる 「要因」が存在しており、この課題を実現するための 「措置」 と組み合わせる ことで、リスク管理や要求の仕様化と同じように取り組むことができます。
「課題」は、このようなプロジェクトとは別のところにも存在するし、 個人レベル でも組織レベルでも存在します。
「今年はMDAによる設計技法を習得する」
「プロジェクト計画書が書けるようになろう」
というのも課題です。
しかしながらこれらの 「課題」 が1年後に実現しているかというと、 ほとんど実現 していません。 また、 組織内での取り組みとして、
「PL以上の立場の人は、 全員リスク管理を使いこなせるようにする」 「3年でSQA要員を育成する」
という課題が持ち上がっても、 実際には実現していません。 その原因は、これらの 「課 題」は “要求” のままになっているからです。 要求仕様の場合も、 “仕様” になって いないものは実現しないのと同じように、 「課題」 も"具体的” に表現されないかぎ り実現しないのです。
15.3 作り替えても前と変わっていない
最初に新規開発した際に設計されたアーキテクチャによって、 その後の派生開発の プロセスは少なからず影響を受けます。 最初の設計によっては、 修正を加えるたびに モジュールの凝集度などの尺度は悪化していきます。 そうして、そのうちに手に負え なくなって 「作り直すしかない」ということで、新規に設計し直すことが提案され、 了承されます。
そうして新規開発されたシステムが、 実際には、以前の問題をほとんど解決しないこともしばしば起きています。
原因はいくつか考えられます。 たとえば、
てい
派生開発に耐えるようなアーキテクチャ設計の経験がない 派生開発に耐えるために必要な設計技術が特定されていない
要件管理と計測
15.4 業務指示もその場で具体化しよう 371
従来のアーキテクチャの何が問題なのか具体化されていない
という状況では、 同じようなものが作られてくるのも当然で、 ここにも、 "具体化” の技術が求められています。
15.4 業務指示もその場で具体化しよう
組織のなかにいるかぎり、 本来のソフトウェアやハードウェアの開発業務とは別に、 飛び込みの作業の依頼が入ることは避けられません。 2週間後のショーに向けての資 料作成や、 販売部門向けに新しい製品の技術レポートやプレゼン資料の作成作業が割 り込んだりします。
自分がプロセス改善でやってみたことを組織の上層部に対してプレゼンテーション したことで後日上司から呼び出され、 先の取り組みを別のグループの開発案件に適用 するように指示されたり、 行き詰まっているプロジェクトを支援するために応援に回 るように指示されたりすることがあります。
このようなときに、ほとんどの人は依頼内容を具体化せずに取り組もうとします。 割り込み作業を手早く済まして元の作業に戻ろうという姿勢の現われかもしれませ ん。 その結果、 用意した技術資料の中身に必要な項目が漏れていたことが指摘された り、プレゼン資料の中身に対して営業部門から修正が依頼されたりして追加の作業が 発生します。 つまり、「納期」 どおりに終わらないのです。
あるいは、依頼されたときに要求の内容を具体化しないまま放置し、 実際に作業に 取りかかろうとしたときになって何をすればよいのか、 どこから手を付ければよいの か迷ってしまい、 いまごろになって確認できずにオロオロしてしまいます。 応援に回 っても、最初に自分の役割 (自分に求められている要求) を確認していなかったため に期待される効果を上げることができずに終わってしまうことも起きます。
このように、 要求を理解し、 それを速やかに仕様化するという行為は、ソフトウェ アの開発の場面に限らず、 日常の作業のなかにも頻繁に必要とされます。 逆に、 開発 プロジェクトにおける要求仕様書の場面は、プロジェクトの初期の段階でしか出てこ ないので、こうした日常の場面で要求を捉え、それを仕様化することで練習できると いうことです。
372 第15章 仕様化技術の応用
15.5 会社の方針がそのまま降りてくる
企業の会計年度の初めに、 会社のトップから今年度の目標や企業としての課題など が全社員に示されたりします。 あるいは、上層部での会議のなかで議論され決定され たことが、それぞれの部署に持ち帰って構成員に示されることがあります。
これらの訓示や提示は、例外なく 「要求」 のレベルで出されるので、 それぞれの部 で、その部署に合った形に仕様化 (具体化) される必要があります。 しかしながら、 現実にはまったく具体化 (仕様化)されることなく、そのまま末端に降りている場面 を、しばしば目撃してきました。
組織のなかの部署には
●売り上げを上げる機会を持つ部署
②売り上げを上げないが利益を上げる機会を持つ部署 ③不要な経費を削減する機会しか持たない部署
があり、それぞれの部署の特徴を活かして、全社目標に貢献する "具体的” 取り組み に分解 (仕様化)しなければなりません。 (一般に②の部署の存在は認識されていな いかもしれません )
①の部署では、効果的に売り上げを増やすための具体的な取り組みが必要ですし、 ②の部署では、 損失を出さないことで利益を上げる具体策を考えて実施することが求 められます。 3は一般にはすべての部署に当てはまるのですが、 「不要」 であること の判断は、それぞれの部署によって異なります。 特に2の部署において、 それが不要 なコストなのか、 利益を上げるために有効なコストなのかの判断を過つと、 の部署 で売り上げを上げても、 損失を押えられない可能性、 さらには信用を失う可能性が出 てきます。
仕様化されない要求は実現されない
というのは、ソフトウェアやハードウェアの世界に限ったものではありません。 実現 する 「要求」 のあるところであれば、 どこでも当てはまるのです。
要求を適切に仕様化できる人たちが組織において主導権を持つようになったとき、 日本の企業組織の行動力や競争力は変わると信じています。
おわりに
本書では、 要求を適切に表現することで仕様を引き出す方法について説明してきま した。 この方法で、 著者自身はもちろんですが、 コンサルティングの場でも数多く仕 様化に成功してきました。 ベースライン後の仕様変更率が5%以下で押えられ、 仕様 関係のバグも大幅に減少し、 当初の納期も達成しています。
これまで多くのソフトウェア開発の現場では、 「時間がない」という恐怖から要求 の仕様化など必要なプロセスを省いてきましたが、 「適切な時間を投入して早い段階 に仕様化したほうが、時間が失われずに済む」 ということが見えてくれば、安易にプ ロセスを省かなくなるでしょう。そして、要求仕様の改善によって仕様の変更や仕様 関係のバグが減り、 結果的に失われずに済んだ時間を他のプロセスの改善に投入する ことで、さらに多くの 「失わずに済んだ時間」を獲得することができるのです。
要求の仕様化技術は、ソフトウェアエンジニアリングの技術のなかの一部にすぎま せん。 確かに、優れた仕様化技術はソフトウェア開発を成功に導くのに非常に有効な 技術ですが、 これだけで市場の要求に応えきれるわけではありません。 やはり、優れ た設計技術は欠かせません。 いや、ここで進めている仕様化技術を活かすためにも優 れた設計技術が必要ですし、 そのほかに見積り技術やスケジューリング、 進捗管理の 技術も重要です。
また、 組み込みシステムの世界ではこれからCPUの性能が大きく変わろうとして いて、そのCPUの性能を活かす設計技術が求められます。 いままでは通用したかもし れない中途半端なタスクの設計技術は通用しなくなります。 本書で提案する 「USDM」 による要求の仕様化によって獲得した時間を使って、 マルチコアCPUに対応したマ ルチタスキングの技術や、 保守性に優れた設計技術を習得してください。
また、21世紀に入って、 「要件開発」 の世界ではさらに高度な要求仕様の書き方や 要件の抽出や分析方法の研究が進んでいますので、ここで獲得した時間をそうした新 しい技術の吸収にも使ってください。
本書で展開する要求の仕様化技術が、 ソフトウェアエンジニアの皆さんをはじめ、 1人でも多くの関係者が少しでも長くソフトウェアシステムの開発や製品の開発の仕 事を続けることに寄与することを願っています。
374 参考文献
参考文献
保守、派生開発
『「派生開発」 を成功させるプロセス改善の技術と極意』 清水吉男 著 (技術評論社、2007 年、 ISBN978-4774132495)
『ソフトウェア保守開発 ISO14764による』 増井和也、 弘中茂樹、 馬場辰男、 松永 真著/ソフトウェア・メインテナンス研究会編 (ソフト・リサーチ・センター、2007年、 ISBN978-4883732494)
CMM 関係
「ソフトウェア能力成熟度モデル 1.1版」 (CMU/SEI-93-TR-24 の公式日本語版) 「能力成熟度モデルのキープラクティス 1.1版」 (CMU/SEI-93-TR-25の公式日本語版) 「能力成熟度モデル統合 (CMMI)、 1.1版 連続表現」 (CMU/SEI-2002-TR-011の公式日本
語版)
「能力成熟度モデル統合 (CMMI) 1.1版 段階表現」 (CMU/SEI-2002-TR-012の公式日本 語版)
『成功するソフトウェア開発CMMによるガイドライン』 CMU-SEI 著 アンダーセンコ ンサルティング監訳 (オーム社、1998年、 ISBN978-4274078675)
『CMMによるプロセス改善入門』 Joseph Raynus 著 / 富野壽監訳 (共立出版、2001年、 ISBN978-4320097322)
『CMMガイドブック』 Kenneth M. Dymond 著/西村高志、 前田卓雄、重岡毅訳 (日刊工業新聞社、 2002年、 ISBN978-4526048197)
「開発のためのCMMI 1.2版 (CMMI-DEV, V1.2) (CMU/SEI-2006-TR-008 ESC-TR-2006-008)
参考文献 375
チームソフトウェアプロセス (TSP) 関係
『チームソフトウェア開発ガイド』 Watts S. Humphrey 著/岡真由美訳/NTTソフトウェア 株式会社 監修 (コンピュータ・エージ社、2002年、 ISBN978-4875662549、 現在絶版)
パーソナルソフトウェアプロセス (PSP) 関係
『パーソナルソフトウェアプロセス技法一能力向上の決め手』 Watts S. Humphrey 著 ソフトウェア品質経営研究会訳 (共立出版、 1999年、 ISBN978-4320029293) 『パーソナルソフトウェアプロセス入門』 Watts S. Humphrey 著 / PSP ネットワーク訳(共 立出版、2001年、 ISBN978-4320120136)
要求仕様関係
『要求定義工学入門』 Pericles Loucopoulos, Vassilios Karakostas 著/富野壽監訳 (共立出版、 1997年、 ISBN978-4320097193)
『要求定義工学プラクティスガイド』 lan Sommerville, Pete Sawyer 著/富野壽監訳(共立 出版、2000年、 ISBN978-4320097292)
『ソフトウェア要求 顧客が望むシステムとは』 Kerl E. Wiegers 著/ 渡部洋子 監訳 (日経 BP社、2003年、 ISBN978-4891003548)
ソフトウェアエンジニアリング関係
『ソフトウェアエンジニアリング基礎知識体系 SWEBOK-』 松本吉弘 監訳 (オーム社、 2003年、 ISBN978-4274946769)
『翻訳版 ソフトウェアエンジニアリング』 lan Sommerville 著/佐野美知夫、 佐藤匡正監 訳 (フジテクノシステム、 1993年、 現在絶版)
【付録】 要求仕様書テンプレート
376
パターン1 (要求に対して仕様が展開されるケース) 必要に応じて仕様 などの説明を行う 要求の背景や理由について記述します。 カテゴリ名 (記号) 要求 (要求番号) ここに要求を記述します。 理由 説明 <> | 要求について必要に応じて説明してください。 仕様とは見 なされません。 セルを広げて、図を貼ってもよいです。 主分割記号…全体を通して共通の分割基準として決めま す。 (オプション) <> <> 補助分割名…主分割のなかに異なるテーマの仕様が混在 する場合に補助分割記号を使って、 純度の高い集合を作 ります。 (仕様番号) 上記の要求に含まれるべく要求仕様を記述します。 必要 に応じて“< >”でグループ分けしてください。 (仕様番号) 仕様番号は、要求番号に (仕様番号) 対して一段階下がります (仕様番号) (仕様番号) ·備考欄
パターン2 (要求がもう一段階層化されるケース。これ以上の階層化は避けたほうがよい) 要求 (要求番号) ここに要求を記述します。 カテゴリ名 (記号) 理由 要求の背景や理由について記述します。 説明 要求について必要に応じて説明してください。 仕様とは見 なされません。 セルを広げて、図を貼ってもよいです。 要求 (要求番号) ここに階層化された要求を記述します。 要求番号は一段下げられます。 理由 說明 <> 0000 (仕様番号) (仕様番号) (仕様番号) (仕様番号) ( 仕様番号) 範囲を狭めた要求について背景や理由 を記述します。 要求について必要に応じて説明してくだ さい。 仕様とは見なされません。 主分割記号･･･全体を通して共通の分割 基準として決めます。 (オプション) <> <> 補助分割名…主分割のなかに異なるテ ーマの仕様が混在する場合に補助分割 記号を使って、 純度の高い集合を作り ます。 備考欄
( 仕様番号)
索引
ISO-9001
102 IT ゼネコン・
ADD ON 仕樣.
-94 Specify
пс
Agile
135
8,104,131
138,146,213, 214,260,294,360
SQA
350
M
maintenability
MECE
Capability Maturity Model
SW-CMM
273
12
120,288,352,356
208
CCB..
Change Control Board 120 PAD
CMM ............
11,146 PDCA
CMMI .........
136,157,286,352,367
-276,351
T.B.D
Team Software Process
.................... 357 TSP
12,59,73,100,117, Personal Software Process
PFD
295 PSP
281
Excel形式の要求仕様書
eXtreme Derivative D
evelopment Process
eXtreme Programming... 266
95,264,266,345 SDR-
SLCP
S
GUI構築ツール
G
260
258,291,364 TM
13
282
Excel
13
11,118,295 UP
E
Process Flow Diagram
340 RAD
... 118 USDM 10,15,157,180,208,233
ReDA
WBS
11 Requirement Engineering
290
130 Wordで書かれた要求仕様書
113,321,324 Sign Off
157
FIX
131
105
Work Breakdown Structure
156
11
266
SECM
55,64,71,
SEI
Software Engineering
Institute
11
335,351 7
11
103,153,229,308,
315,317,366,370
186
if X
IPD-CMM
12 Specification
13
290
EA
13 U
94 XDDP
12 XP
6 アーキテクチャ
214 アーキテクチャ分析
アウトソーシング ・80 ■カ 機能の重複出現･･ 183 概観図･･ 183 記番号･･･････ 352 概仕様書・ 331 ギャップ分析 安定期間･･･ 109 階層化･･･ 116,241,298 旧状態・ 階層の深さ 概要・ 212 凝集度・ 83,178 共通機能･･ ・315,316 獲得時間・ 361 共通分割･･･ 317 隠れステークホルダー 335 銀の弾丸・ ・ 192 仮説見積り・ 42,86,117,133, ･･ 317 274,282,336,338,351 ・64 課題管理・・ 370 グループ・ ........ レビュー ・95 カテゴリ 185 グループ化・ インクリメンタル インクリメンタル開発 インクリメンタルモデル 96,350 カテゴリ分割 131 画面仕様・・ .. 187 グループの設定 84,325,327 グループのセット 画面仕様書・ 8,128,130,132 画面設計・ 84,321,329 グループ名 326 グループ分け インターフェース 185 画面遷移・・ 84 画面遷移図・ 327 画面遷移の階層化・・ 327 軽減措置・ ウォークスルー ......... フォール フォールモデル .... -95 画面操作仕様書・・ 94,130 画面番号･･･ 328 計測・ 328 欠陥の指摘件数・ 画面要求・ 325 決定の分離・ 7,131 関数の呼び出し構造・ ・44 原因プロセス 時間 360
..225,227
352
-303,313
ウォーターウォータ
失った
201,206,242
116,227,234
失わずに済んだ時間･･･ 360,373 ■キ
運用保守性・・ ･･･････････ 273
議事録・
機能概要・
■オ
応答性:
機能仕様書
35,42,79,
88,138,359
おまけの要求
・57 機能追加・・
検証
・51 機能的凝集・
341 検証可能・
109,213,
58,142,149 検証可能性・
.49
312 検証性・
221,223,274
41,221
-71 検証プロセス 90,343
......66
186
242
359
359
アセスメント
移植性
機能で分割・
234,246
移植要求
一発
45
■
114
117
移植・
272
206
移植先
移植元
■イ
368
アクター
238
236
237
240
378 索引
交換性・ 工数・
システム要求・ 270 下請け構造・
・126,359 実装レベルの仕様・
157 仕様の抽出・・・
31 379
157,167,186,
構成管理プロセス
162
331 実現可能性・
構成で分割・
187
135
189,201,233,236,298
308 仕様の導出・
76,107.115. 仕様のバグ・
構成分割
-201,203
245
構造化記述言語・
実現性に関するリスク 117
実現性の追跡･･ ･･225.228 仕様の粒度・ シナリオ -241,243 仕様変更
53
工程遷移･････
コミュニケーション能力･･･ 105 コミュニケーションの不完全性
116.129.278 仕様の変更率・・
47,119,156,
シナリオ機能
シナリオ的機能要求
169 習慣・・
189,217,353,359,373
241
固有番号・・
224 修正欠陥・・
コンテキスト図
.........
183
155
46,96,103,120,308,348
241 仕様変更の発生時期・・・・ 362
・88 仕様モレ･･･ 35.37.47.82.88.97.
状態遷移・・
状態分割・・
303
125,140,153,160,175,
182,201,208,222,231,
342,350,358,360,363
234,255,258,307,323,
衝突・
サイズ見積り
・86,117.
賞味期限・
266,337,354 仕様・
228
再利用性･･
･･･60 仕様エラー
319 仕様化・
-201,205
115,325
267 新状態・・
305 仕様化技術の応用･･ 仕様化の効果・
-213,368
36,38.54 ス
■サ
時間の足し算と引き算・
･220231 スケジュールの管理
仕様から要求を立てる・・・ 248
366 スパイラルモデル ・115.125 スペックアウト作業
削除･･
差分・
126 仕様書の構成・・
時系列分割・・・
201 仕様戦争・・・
試行錯誤モデル・
・94 仕様と要求の混在・ 仕様の解釈の違い 仕様の確認･･
試作・・
55,116,122,324
市場の要求･･････ 57,104,373
89 tana
仕様の衝突・・
システムエンジニアリング
成熟度モデル・ 12 システムの分割 185 システムの目的 333
34
310
・51 生産性データ･･
130
246 静的解析・
-38 静的検査・
86
･････ 124 セキュリティ 8,39.50.56. 設計エラー
343
218,234,333,335,350. 設計技術の不足・
274
192,195
100,115,153,155,160. 設計技術・ 58,61,268,370,373
352,358,363,366 設計書・
36
155
55
43,74
313
380 索引
設計情報…
279 追跡・
設計仕様書・ 設計の抽象化・
151
・76 追跡機能・
設計プロセス
接続性
・65 追跡リスト 115
349 人月の神話・
認定仕様・
192 ■テ
説明･･
潜在バグ・
・229,277
........ -216,242
178,180,330 データ構造
・45 データ構造の知識・ テーラリング
操作仕様書・ 84 操作性･･･ ・60,192,194 双方向トレーサビリティ・
マトリクス 組織のX線写真・ 286 ・80 ソフトウェア
能力成熟度モデル・・・・・・
テストエンジニア テストケース仕様書 テスト仕様
ターミネーター
对故障性
･･195,272 伝言ゲーム
241
単独の機能要求・
241 ■ト
逐次レビュー
312
343 納期の遅れ・
・55 納期の短縮要求・
デシジョンテーブル
117
手順的凝集・
183 デリバリ
228,258,291,364 バーバラ・ミント 71 ...
テスト仕様書
手戻り作業・
52,223 バグの件数・
2 テスト不足・
デマルコ
230 バグの指摘率・
101 バグの発生率
101 .........
40 派生開発････
単独機能･･
統合成果物開発
■チ
調整台
317 導出測定量・ ドメイン知識
66,79,108,359,363
357
11,35,36,45,57,
126
62,64,67,68,71,73,141,
147,148,225,272,293,299,
61 307,309,313,315,319,370
・39 派生開発アプローチ・ 派生開発における
要求仕様書··
派生開発の品質要求･･････ 320
成熟度モデル.........
12 派生開発プロセス
・ 動詞・・・・・ 10,160,167,197,238
トレーサビリティ マトリクス
追加機能･･
362 派生開発モデル 裸の状態・
追加機能要求仕様書
トレードオフ
・86
はみ出し仕様・
72,281,286,288,318,320 パラメータ
129 範囲･･･
294
70,73
......... 253
293,311,313トレーニング計画
232,234,240,255,369
255
117
82,139,163,166,
53
-80
53
91
208
34
360
359
.....
11
索引 381
番号の確定
ヒアリング・ 332,339,341,345
ヒアリングの範囲 ヒアリングの目的 ピアレビュー
......... 339332
ビッグバンテスト
226 フローチャートの落とし穴 変更要求仕様書-- 149,282, 245 293,302,305,310,311,313 プロセスの冗長 プロセスの設計 362 変更要求トレーサビリティ・ 119 マトリクス 72,73,282,288 プロセスの明確化・ プロトタイピング 118 変更要求の階層化･･････ 67,72 8,324 変更要求の修正・ 70 125 分割の基準･･ ･200,210 変更要求の粒度・・ 71 分割発注・ 81,135 変更率・・ 78,97 文書体系・ 329 ■ホ 募集・ 356 ペースト作文 ペースト症候群 wwwwww 227,257,364 保守性・ .... 57,61,195, 230 269,272,273,274,343 ベースライン設定 152 保守性要求･･ 58 226,230,277,336,344. 補助成果物・・ 286 348,351,354,356,362 変換プロセス . ......... 89 147 マイルストーン 336 変更管理・ 変更仕様・ 変更制御・・ ....... 349 丸投げ･･ 80 147,299,319 276 ■ 変更制御プロセス・ 変更設計書・・・ ････ 264 未確定の項目・・ -277,336 282 未確定の仕様・ 355 変更の種類･･ 306 未決項目・・ 344 変更の範囲・・ 306 みなすという視点 ・・・・・ 270 変更要因･･･ 349 みにくいアヒルの子 251 変更要求・・ ........ 65,71, 142,147,297,301, 304,306,312,315 名詞･･ 240 変更要求仕様･･ 67,291, 297,299,315,316
290
....... ・73
否定表現･･･
備考・・・
260
一人プロジェクト
ピラミッド図
品質仕様:
141
208 143
60,144,191,269,343 品質要求・・・・ 52,57,58,60, 101,142,146,149,189,192, 268,274,307,313,316,343 品質要求チェックリスト･･･ 192 品質要求の仕様化 60,268 品質要求の仕様化の方法･･･57 品質要求のヒアリング 品質要求の表現･･･ 343 191
封鎖作業 ・74 不具合報告書・ ・88 複雜度· 272 部分理解・・・・・・ 11,63,66,294,309 フレッドブルックス・ ････････ 53 フローチャート -243,244
品質特性
382 索引
■モ 目的語・ 10 モジュール ・72 モジュールの凝集度 ･･･ 71,370 モジュールの尺度 62,320 モジュールの抽象化･･･289,319 モジュール分割・ 200 モデリング 157
要求ズレ
106 予測値・
183,196
要求の階層化・
要求のカテゴリ化 要求の誤解･･
要求の仕様化・ 要求の体系
182
175 リスク管理
要求の抽出・
要求の表現・
要因 367 要求･･････ 6,9,75,82,139,142,160 要求 TM ・282,287 要求開発アライアンス 157 要求工学・・・ 156 要求書・・ ・282,285 要求仕様 要求仕様書 9 6,81,98, 138,142,146,161,282 要求仕様書作成ガイドライン
55,128,366
119,213,339 理由・・
341
339
109,169,170,171,
ユースケース ・112,243
175,209,298,302,315
要求の役割･･･
164,170,244
要求の分割 階層化･･･ 234,237 レビュー 要求の分割基準・ 236
要求の粒度
68,89,92,125,140,
160
148,151,178,223,265,299,
3
要求分析モデリング
303,310,331,350,358
要求モレ....
要求を書く
234 レビュー指摘件数
要求を立てる意味
要件・
158 レビューの種類
・160,189 連想脳・
.........
要件開発･･･
160
250
6 ロジックツリー
126,154,156,363 論理的凝集・
要件開発の重要性････
要件管理･･119,136,156,348
.... ････
要件管理プロセス
要求仕様書の構成
・92
要件追跡リスト 要件定義書・
138
要件管理の担当者・・・・・ 355 わかる..
・264,344,348,353,355
337
わかるに潜む問題
141,169
わかるの問題・・・
要求仕様書の良否・・ ・46 要求仕様書のレビュー ･･･ 350 要求仕様のトラブルの実態
97,121,189 要件の変更率・ 要件変更の件数要件変更プロセス 要件リスト
225
・37 用語集・
108
・・
359
.......... 82,337
要求仕様の不完全性･････・ 7
264
........ 181
予測・
105
6
108
71
360
208
14
.........
.93
186
カバーデザイン 花本浩一(麒麟三館) カバー装画=安田みつえ 本文デザイン・DTP SONICBANG CO.. 編集担当 熊谷裕美子
かいていない ほんじゅうもん じっせん 【改訂第2版】 [入門 実践] ようきゅうしようか じゅつ ひょうげん ぎじゅつ 要求を仕様化する技術・表現する技術 しょう か ~仕様が書けていますか?
2010年 6月 1日 初版第1刷発行 2017年 11月26日 初版 第6刷発行
しみずよしお 著者 清水 吉男
発行者 片岡 巌
発行所 株式会社技術評論社
東京都新宿区市谷左内町 21-13 電話 03-3513-6150 販売促進部 03-3513-6166 書籍編集部
印刷/製本 株式会社加藤文明社 定価はカバーに表示してあります。
本の一部または全部を著作権法の定める範囲を超え、 無断で 複写、複製、転載、あるいはファイルに落とすことを禁じます。
©2010 清水吉男
造本には細心の注意を払っておりますが、万一、 乱丁 (ページの乱れ) や落丁 (ページの抜け) がございましたら、小社販売促進部までお 送りください。 送料小社負担にてお取り替えいたします。
ISBN 978-4-7741-4257-9 C3055 Printed in Japan
本書の内容に関するご質問は、 下記の宛先まで FAXまたは書面にてお送りください。 また、 弊 社のWebサイトでも質問用フォームを用意して おりますのでご利用ください。 お電話によるご 質問、および本書に記載されている内容以外の ご質問には、一切お答えできません。 あらかじ めご了承ください。
宛先: 〒162-0846 株式会社技術評論社書籍編集部 「要求を仕様化する技術表現する技術」 質問係 FAX 03-3513-6183 技術評論社 Web: http://gihyo.jp/book/
なお、ご質問の際に記載いただいた個人情報は 質問の返答以外の目的には使用いたしません。 また、 質問の返答後は速やかに削除させていた だきます